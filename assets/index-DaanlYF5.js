(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function KA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _g={exports:{}},uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function JA(){if(E_)return uu;E_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:u,ref:a!==void 0?a:null,props:l}}return uu.Fragment=e,uu.jsx=n,uu.jsxs=n,uu}var N_;function YA(){return N_||(N_=1,_g.exports=JA()),_g.exports}var r=YA(),wg={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function WA(){if(T_)return at;T_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),w=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,k={};function q(O,Z,oe){this.props=O,this.context=Z,this.refs=k,this.updater=oe||M}q.prototype.isReactComponent={},q.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=q.prototype;function P(O,Z,oe){this.props=O,this.context=Z,this.refs=k,this.updater=oe||M}var W=P.prototype=new H;W.constructor=P,z(W,q.prototype),W.isPureReactComponent=!0;var te=Array.isArray;function L(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(O,Z,oe){var ee=oe.ref;return{$$typeof:t,type:O,key:Z,ref:ee!==void 0?ee:null,props:oe}}function U(O,Z){return R(O.type,Z,O.props)}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function $(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return Z[oe]})}var F=/\/+/g;function je(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?$(""+O.key):Z.toString(36)}function ze(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(L,L):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function j(O,Z,oe,ee,Ne){var Y=typeof O;(Y==="undefined"||Y==="boolean")&&(O=null);var pe=!1;if(O===null)pe=!0;else switch(Y){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(O.$$typeof){case t:case e:pe=!0;break;case y:return pe=O._init,j(pe(O._payload),Z,oe,ee,Ne)}}if(pe)return Ne=Ne(O),pe=ee===""?"."+je(O,0):ee,te(Ne)?(oe="",pe!=null&&(oe=pe.replace(F,"$&/")+"/"),j(Ne,Z,oe,"",function(ut){return ut})):Ne!=null&&(B(Ne)&&(Ne=U(Ne,oe+(Ne.key==null||O&&O.key===Ne.key?"":(""+Ne.key).replace(F,"$&/")+"/")+pe)),Z.push(Ne)),1;pe=0;var Se=ee===""?".":ee+":";if(te(O))for(var De=0;De<O.length;De++)ee=O[De],Y=Se+je(ee,De),pe+=j(ee,Z,oe,Y,Ne);else if(De=T(O),typeof De=="function")for(O=De.call(O),De=0;!(ee=O.next()).done;)ee=ee.value,Y=Se+je(ee,De++),pe+=j(ee,Z,oe,Y,Ne);else if(Y==="object"){if(typeof O.then=="function")return j(ze(O),Z,oe,ee,Ne);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return pe}function se(O,Z,oe){if(O==null)return O;var ee=[],Ne=0;return j(O,ee,"","",function(Y){return Z.call(oe,Y,Ne++)}),ee}function K(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var ne=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},J={map:se,forEach:function(O,Z,oe){se(O,function(){Z.apply(this,arguments)},oe)},count:function(O){var Z=0;return se(O,function(){Z++}),Z},toArray:function(O){return se(O,function(Z){return Z})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return at.Activity=_,at.Children=J,at.Component=q,at.Fragment=n,at.Profiler=a,at.PureComponent=P,at.StrictMode=s,at.Suspense=m,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,at.__COMPILER_RUNTIME={__proto__:null,c:function(O){return C.H.useMemoCache(O)}},at.cache=function(O){return function(){return O.apply(null,arguments)}},at.cacheSignal=function(){return null},at.cloneElement=function(O,Z,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ee=z({},O.props),Ne=O.key;if(Z!=null)for(Y in Z.key!==void 0&&(Ne=""+Z.key),Z)!A.call(Z,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&Z.ref===void 0||(ee[Y]=Z[Y]);var Y=arguments.length-2;if(Y===1)ee.children=oe;else if(1<Y){for(var pe=Array(Y),Se=0;Se<Y;Se++)pe[Se]=arguments[Se+2];ee.children=pe}return R(O.type,Ne,ee)},at.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},at.createElement=function(O,Z,oe){var ee,Ne={},Y=null;if(Z!=null)for(ee in Z.key!==void 0&&(Y=""+Z.key),Z)A.call(Z,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(Ne[ee]=Z[ee]);var pe=arguments.length-2;if(pe===1)Ne.children=oe;else if(1<pe){for(var Se=Array(pe),De=0;De<pe;De++)Se[De]=arguments[De+2];Ne.children=Se}if(O&&O.defaultProps)for(ee in pe=O.defaultProps,pe)Ne[ee]===void 0&&(Ne[ee]=pe[ee]);return R(O,Y,Ne)},at.createRef=function(){return{current:null}},at.forwardRef=function(O){return{$$typeof:h,render:O}},at.isValidElement=B,at.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:K}},at.memo=function(O,Z){return{$$typeof:f,type:O,compare:Z===void 0?null:Z}},at.startTransition=function(O){var Z=C.T,oe={};C.T=oe;try{var ee=O(),Ne=C.S;Ne!==null&&Ne(oe,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(L,ne)}catch(Y){ne(Y)}finally{Z!==null&&oe.types!==null&&(Z.types=oe.types),C.T=Z}},at.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},at.use=function(O){return C.H.use(O)},at.useActionState=function(O,Z,oe){return C.H.useActionState(O,Z,oe)},at.useCallback=function(O,Z){return C.H.useCallback(O,Z)},at.useContext=function(O){return C.H.useContext(O)},at.useDebugValue=function(){},at.useDeferredValue=function(O,Z){return C.H.useDeferredValue(O,Z)},at.useEffect=function(O,Z){return C.H.useEffect(O,Z)},at.useEffectEvent=function(O){return C.H.useEffectEvent(O)},at.useId=function(){return C.H.useId()},at.useImperativeHandle=function(O,Z,oe){return C.H.useImperativeHandle(O,Z,oe)},at.useInsertionEffect=function(O,Z){return C.H.useInsertionEffect(O,Z)},at.useLayoutEffect=function(O,Z){return C.H.useLayoutEffect(O,Z)},at.useMemo=function(O,Z){return C.H.useMemo(O,Z)},at.useOptimistic=function(O,Z){return C.H.useOptimistic(O,Z)},at.useReducer=function(O,Z,oe){return C.H.useReducer(O,Z,oe)},at.useRef=function(O){return C.H.useRef(O)},at.useState=function(O){return C.H.useState(O)},at.useSyncExternalStore=function(O,Z,oe){return C.H.useSyncExternalStore(O,Z,oe)},at.useTransition=function(){return C.H.useTransition()},at.version="19.2.3",at}var S_;function M0(){return S_||(S_=1,wg.exports=WA()),wg.exports}var I=M0();const XA=KA(I);var Eg={exports:{}},du={},Ng={exports:{}},Tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function QA(){return C_||(C_=1,(function(t){function e(j,se){var K=j.length;j.push(se);e:for(;0<K;){var ne=K-1>>>1,J=j[ne];if(0<a(J,se))j[ne]=se,j[K]=J,K=ne;else break e}}function n(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var se=j[0],K=j.pop();if(K!==se){j[0]=K;e:for(var ne=0,J=j.length,O=J>>>1;ne<O;){var Z=2*(ne+1)-1,oe=j[Z],ee=Z+1,Ne=j[ee];if(0>a(oe,K))ee<J&&0>a(Ne,oe)?(j[ne]=Ne,j[ee]=K,ne=ee):(j[ne]=oe,j[Z]=K,ne=Z);else if(ee<J&&0>a(Ne,K))j[ne]=Ne,j[ee]=K,ne=ee;else break e}}return se}function a(j,se){var K=j.sortIndex-se.sortIndex;return K!==0?K:j.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],f=[],y=1,_=null,w=3,T=!1,M=!1,z=!1,k=!1,q=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function W(j){for(var se=n(f);se!==null;){if(se.callback===null)s(f);else if(se.startTime<=j)s(f),se.sortIndex=se.expirationTime,e(m,se);else break;se=n(f)}}function te(j){if(z=!1,W(j),!M)if(n(m)!==null)M=!0,L||(L=!0,$());else{var se=n(f);se!==null&&ze(te,se.startTime-j)}}var L=!1,C=-1,A=5,R=-1;function U(){return k?!0:!(t.unstable_now()-R<A)}function B(){if(k=!1,L){var j=t.unstable_now();R=j;var se=!0;try{e:{M=!1,z&&(z=!1,H(C),C=-1),T=!0;var K=w;try{t:{for(W(j),_=n(m);_!==null&&!(_.expirationTime>j&&U());){var ne=_.callback;if(typeof ne=="function"){_.callback=null,w=_.priorityLevel;var J=ne(_.expirationTime<=j);if(j=t.unstable_now(),typeof J=="function"){_.callback=J,W(j),se=!0;break t}_===n(m)&&s(m),W(j)}else s(m);_=n(m)}if(_!==null)se=!0;else{var O=n(f);O!==null&&ze(te,O.startTime-j),se=!1}}break e}finally{_=null,w=K,T=!1}se=void 0}}finally{se?$():L=!1}}}var $;if(typeof P=="function")$=function(){P(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,je=F.port2;F.port1.onmessage=B,$=function(){je.postMessage(null)}}else $=function(){q(B,0)};function ze(j,se){C=q(function(){j(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(j){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var K=w;w=se;try{return j()}finally{w=K}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(j,se){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var K=w;w=j;try{return se()}finally{w=K}},t.unstable_scheduleCallback=function(j,se,K){var ne=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ne+K:ne):K=ne,j){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=K+J,j={id:y++,callback:se,priorityLevel:j,startTime:K,expirationTime:J,sortIndex:-1},K>ne?(j.sortIndex=K,e(f,j),n(m)===null&&j===n(f)&&(z?(H(C),C=-1):z=!0,ze(te,K-ne))):(j.sortIndex=J,e(m,j),M||T||(M=!0,L||(L=!0,$()))),j},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(j){var se=w;return function(){var K=w;w=se;try{return j.apply(this,arguments)}finally{w=K}}}})(Tg)),Tg}var A_;function ZA(){return A_||(A_=1,Ng.exports=QA()),Ng.exports}var Sg={exports:{}},rs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function eI(){if(I_)return rs;I_=1;var t=M0();function e(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:m,containerInfo:f,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return rs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rs.createPortal=function(m,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(m,f,null,y)},rs.flushSync=function(m){var f=u.T,y=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=f,s.p=y,s.d.f()}},rs.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(m,f))},rs.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},rs.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var y=f.as,_=h(y,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?s.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:T}):y==="script"&&s.d.X(m,{crossOrigin:_,integrity:w,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},rs.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=h(f.as,f.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(m)},rs.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,_=h(y,f.crossOrigin);s.d.L(m,y,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},rs.preloadModule=function(m,f){if(typeof m=="string")if(f){var y=h(f.as,f.crossOrigin);s.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(m)},rs.requestFormReset=function(m){s.d.r(m)},rs.unstable_batchedUpdates=function(m,f){return m(f)},rs.useFormState=function(m,f,y){return u.H.useFormState(m,f,y)},rs.useFormStatus=function(){return u.H.useHostTransitionStatus()},rs.version="19.2.3",rs}var R_;function tI(){if(R_)return Sg.exports;R_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sg.exports=eI(),Sg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function nI(){if(j_)return du;j_=1;var t=ZA(),e=M0(),n=tI();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function f(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var c=i,d=o;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(d=v.return,d!==null){c=d;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return m(v),i;if(b===d)return m(v),o;b=b.sibling}throw Error(s(188))}if(c.return!==d.return)c=v,d=b;else{for(var N=!1,D=v.child;D;){if(D===c){N=!0,c=v,d=b;break}if(D===d){N=!0,d=v,c=b;break}D=D.sibling}if(!N){for(D=b.child;D;){if(D===c){N=!0,c=b,d=v;break}if(D===d){N=!0,d=b,c=v;break}D=D.sibling}if(!N)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:o}function y(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=y(i),o!==null)return o;i=i.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),P=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function $(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var F=Symbol.for("react.client.reference");function je(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===F?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case q:return"Profiler";case k:return"StrictMode";case te:return"Suspense";case L:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case M:return"Portal";case P:return i.displayName||"Context";case H:return(i._context.displayName||"Context")+".Consumer";case W:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return o=i.displayName||null,o!==null?o:je(i.type)||"Memo";case A:o=i._payload,i=i._init;try{return je(i(o))}catch{}}return null}var ze=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ne=[],J=-1;function O(i){return{current:i}}function Z(i){0>J||(i.current=ne[J],ne[J]=null,J--)}function oe(i,o){J++,ne[J]=i.current,i.current=o}var ee=O(null),Ne=O(null),Y=O(null),pe=O(null);function Se(i,o){switch(oe(Y,o),oe(Ne,i),oe(ee,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?$b(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=$b(o),i=Kb(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(ee),oe(ee,i)}function De(){Z(ee),Z(Ne),Z(Y)}function ut(i){i.memoizedState!==null&&oe(pe,i);var o=ee.current,c=Kb(o,i.type);o!==c&&(oe(Ne,i),oe(ee,c))}function st(i){Ne.current===i&&(Z(ee),Z(Ne)),pe.current===i&&(Z(pe),ru._currentValue=K)}var _e,Ve;function it(i){if(_e===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);_e=o&&o[1]||"",Ve=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+i+Ve}var mt=!1;function Jt(i,o){if(!i||mt)return"";mt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(me){var he=me}Reflect.construct(i,[],be)}else{try{be.call()}catch(me){he=me}i.call(be.prototype)}}else{try{throw Error()}catch(me){he=me}(be=i())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(me){if(me&&he&&typeof me.stack=="string")return[me.stack,he.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),N=b[0],D=b[1];if(N&&D){var G=N.split(`
`),ce=D.split(`
`);for(v=d=0;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;for(;v<ce.length&&!ce[v].includes("DetermineComponentFrameRoot");)v++;if(d===G.length||v===ce.length)for(d=G.length-1,v=ce.length-1;1<=d&&0<=v&&G[d]!==ce[v];)v--;for(;1<=d&&0<=v;d--,v--)if(G[d]!==ce[v]){if(d!==1||v!==1)do if(d--,v--,0>v||G[d]!==ce[v]){var xe=`
`+G[d].replace(" at new "," at ");return i.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",i.displayName)),xe}while(1<=d&&0<=v);break}}}finally{mt=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?it(c):""}function en(i,o){switch(i.tag){case 26:case 27:case 5:return it(i.type);case 16:return it("Lazy");case 13:return i.child!==o&&o!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return Jt(i.type,!1);case 11:return Jt(i.type.render,!1);case 1:return Jt(i.type,!0);case 31:return it("Activity");default:return""}}function ue(i){try{var o="",c=null;do o+=en(i,c),c=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ie=Object.prototype.hasOwnProperty,Re=t.unstable_scheduleCallback,ot=t.unstable_cancelCallback,tn=t.unstable_shouldYield,dt=t.unstable_requestPaint,At=t.unstable_now,ge=t.unstable_getCurrentPriorityLevel,Le=t.unstable_ImmediatePriority,Fe=t.unstable_UserBlockingPriority,et=t.unstable_NormalPriority,Xe=t.unstable_LowPriority,pt=t.unstable_IdlePriority,gt=t.log,jt=t.unstable_setDisableYieldValue,St=null,X=null;function de(i){if(typeof gt=="function"&&jt(i),X&&typeof X.setStrictMode=="function")try{X.setStrictMode(St,i)}catch{}}var Te=Math.clz32?Math.clz32:It,Ge=Math.log,Ut=Math.LN2;function It(i){return i>>>=0,i===0?32:31-(Ge(i)/Ut|0)|0}var Dt=256,vt=262144,Ft=4194304;function xn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fn(i,o,c){var d=i.pendingLanes;if(d===0)return 0;var v=0,b=i.suspendedLanes,N=i.pingedLanes;i=i.warmLanes;var D=d&134217727;return D!==0?(d=D&~b,d!==0?v=xn(d):(N&=D,N!==0?v=xn(N):c||(c=D&~i,c!==0&&(v=xn(c))))):(D=d&~b,D!==0?v=xn(D):N!==0?v=xn(N):c||(c=d&~i,c!==0&&(v=xn(c)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:v}function bt(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function ie(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var i=Ft;return Ft<<=1,(Ft&62914560)===0&&(Ft=4194304),i}function $e(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function We(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function kt(i,o,c,d,v,b){var N=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var D=i.entanglements,G=i.expirationTimes,ce=i.hiddenUpdates;for(c=N&~c;0<c;){var xe=31-Te(c),be=1<<xe;D[xe]=0,G[xe]=-1;var he=ce[xe];if(he!==null)for(ce[xe]=null,xe=0;xe<he.length;xe++){var me=he[xe];me!==null&&(me.lane&=-536870913)}c&=~be}d!==0&&ft(i,d,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(N&~o))}function ft(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-Te(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function Ci(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-Te(c),v=1<<d;v&o|i[d]&o&&(i[d]|=o),c&=~v}}function hc(i,o){var c=o&-o;return c=(c&42)!==0?1:Wr(c),(c&(i.suspendedLanes|o))!==0?0:c}function Wr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function la(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function md(){var i=se.p;return i!==0?i:(i=window.event,i===void 0?32:g_(i.type))}function oi(i,o){var c=se.p;try{return se.p=i,o()}finally{se.p=c}}var li=Math.random().toString(36).slice(2),Tn="__reactFiber$"+li,zn="__reactProps$"+li,Ai="__reactContainer$"+li,Go="__reactEvents$"+li,Cm="__reactListeners$"+li,pd="__reactHandles$"+li,gd="__reactResources$"+li,Ii="__reactMarker$"+li;function $o(i){delete i[Tn],delete i[zn],delete i[Go],delete i[Cm],delete i[pd]}function Ri(i){var o=i[Tn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Ai]||c[Tn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=e_(i);i!==null;){if(c=i[Tn])return c;i=e_(i)}return o}i=c,c=i.parentNode}return null}function $s(i){if(i=i[Tn]||i[Ai]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function Rs(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function ji(i){var o=i[gd];return o||(o=i[gd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Sn(i){i[Ii]=!0}var fc=new Set,mc={};function Di(i,o){ki(i,o),ki(i+"Capture",o)}function ki(i,o){for(mc[i]=o,i=0;i<o.length;i++)fc.add(o[i])}var pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gc={},xc={};function xd(i){return Ie.call(xc,i)?!0:Ie.call(gc,i)?!1:pc.test(i)?xc[i]=!0:(gc[i]=!0,!1)}function Ko(i,o,c){if(xd(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function js(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Cn(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function Fn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ya(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function yc(i,o,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,b=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(N){c=""+N,b.call(this,N)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(N){c=""+N},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Gt(i){if(!i._valueTracker){var o=Ya(i)?"checked":"value";i._valueTracker=yc(i,o,""+i[o])}}function Xr(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=Ya(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function Mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Qr=/[\n"\\]/g;function _s(i){return i.replace(Qr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Jo(i,o,c,d,v,b,N,D){i.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.type=N:i.removeAttribute("type"),o!=null?N==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Fn(o)):i.value!==""+Fn(o)&&(i.value=""+Fn(o)):N!=="submit"&&N!=="reset"||i.removeAttribute("value"),o!=null?vc(i,N,Fn(o)):c!=null?vc(i,N,Fn(c)):d!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+Fn(D):i.removeAttribute("name")}function yd(i,o,c,d,v,b,N,D){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){Gt(i);return}c=c!=null?""+Fn(c):"",o=o!=null?""+Fn(o):c,D||o===i.value||(i.value=o),i.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=D?i.checked:!!d,i.defaultChecked=!!d,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.name=N),Gt(i)}function vc(i,o,c){o==="number"&&Mi(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Wa(i,o,c,d){if(i=i.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<i.length;c++)v=o.hasOwnProperty("$"+i[c].value),i[c].selected!==v&&(i[c].selected=v),v&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Fn(c),o=null,v=0;v<i.length;v++){if(i[v].value===c){i[v].selected=!0,d&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function vd(i,o,c){if(o!=null&&(o=""+Fn(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+Fn(c):""}function Xa(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(s(92));if(ze(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=Fn(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Gt(i)}function ws(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var bd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bc(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||bd.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function _c(i,o,c){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&c[v]!==d&&bc(i,v,d)}else for(var b in o)o.hasOwnProperty(b)&&bc(i,b,o[b])}function Yo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(i){return Qa.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ci(){}var wc=null;function Ks(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Za=null,Pi=null;function Zr(i){var o=$s(i);if(o&&(i=o.stateNode)){var c=i[zn]||null;e:switch(i=o.stateNode,o.type){case"input":if(Jo(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+_s(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var v=d[zn]||null;if(!v)throw Error(s(90));Jo(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&Xr(d)}break e;case"textarea":vd(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Wa(i,!!c.multiple,o,!1)}}}var Xo=!1;function er(i,o,c){if(Xo)return i(o,c);Xo=!0;try{var d=i(o);return d}finally{if(Xo=!1,(Za!==null||Pi!==null)&&(mh(),Za&&(o=Za,i=Pi,Pi=Za=null,Zr(o),i)))for(o=0;o<i.length;o++)Zr(i[o])}}function ui(i,o){var c=i.stateNode;if(c===null)return null;var d=c[zn]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,o,typeof c));return c}var Js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=!1;if(Js)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){eo=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{eo=!1}var Li=null,Ec=null,to=null;function Nc(){if(to)return to;var i,o=Ec,c=o.length,d,v="value"in Li?Li.value:Li.textContent,b=v.length;for(i=0;i<c&&o[i]===v[i];i++);var N=c-i;for(d=1;d<=N&&o[c-d]===v[b-d];d++);return to=v.slice(i,1<d?1-d:void 0)}function no(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ca(){return!0}function di(){return!1}function Yn(i){function o(c,d,v,b,N){this._reactName=c,this._targetInst=v,this.type=d,this.nativeEvent=b,this.target=N,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(c=i[D],this[D]=c?c(b):b[D]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ca:di,this.isPropagationStopped=di,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ca)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ca)},persist:function(){},isPersistent:ca}),o}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Yn(ua),tr=_({},ua,{view:0,detail:0}),Tc=Yn(tr),nr,Qo,Ui,Zo=_({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ui&&(Ui&&i.type==="mousemove"?(nr=i.screenX-Ui.screenX,Qo=i.screenY-Ui.screenY):Qo=nr=0,Ui=i),nr)},movementY:function(i){return"movementY"in i?i.movementY:Qo}}),Sc=Yn(Zo),so=_({},Zo,{dataTransfer:0}),wd=Yn(so),Ed=_({},tr,{relatedTarget:0}),io=Yn(Ed),Cc=_({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),Nd=Yn(Cc),el=_({},ua,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Td=Yn(el),Sd=_({},ua,{data:0}),Oi=Yn(Sd),Cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ad={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Id={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Id[i])?!!o[i]:!1}function sr(){return Rd}var ms=_({},tr,{key:function(i){if(i.key){var o=Cd[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=no(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ad[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sr,charCode:function(i){return i.type==="keypress"?no(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?no(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),jd=Yn(ms),Dd=_({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),da=Yn(Dd),x=_({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sr}),E=Yn(x),S=_({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Yn(S),re=_({},Zo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fe=Yn(re),Ae=_({},ua,{newState:0,oldState:0}),lt=Yn(Ae),yn=[9,13,27,32],Ot=Js&&"CompositionEvent"in window,on=null;Js&&"documentMode"in document&&(on=document.documentMode);var Ys=Js&&"TextEvent"in window&&!on,zi=Js&&(!Ot||on&&8<on&&11>=on),hi=" ",fi=!1;function ao(i,o){switch(i){case"keyup":return yn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nl=!1;function xC(i,o){switch(i){case"compositionend":return tl(o);case"keypress":return o.which!==32?null:(fi=!0,hi);case"textInput":return i=o.data,i===hi&&fi?null:i;default:return null}}function yC(i,o){if(nl)return i==="compositionend"||!Ot&&ao(i,o)?(i=Nc(),to=Ec=Li=null,nl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zi&&o.locale!=="ko"?null:o.data;default:return null}}var vC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sy(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!vC[i.type]:o==="textarea"}function iy(i,o,c,d){Za?Pi?Pi.push(d):Pi=[d]:Za=d,o=_h(o,"onChange"),0<o.length&&(c=new Vi("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var Ac=null,Ic=null;function bC(i){zb(i,0)}function kd(i){var o=Rs(i);if(Xr(o))return i}function ay(i,o){if(i==="change")return o}var ry=!1;if(Js){var Am;if(Js){var Im="oninput"in document;if(!Im){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Im=typeof oy.oninput=="function"}Am=Im}else Am=!1;ry=Am&&(!document.documentMode||9<document.documentMode)}function ly(){Ac&&(Ac.detachEvent("onpropertychange",cy),Ic=Ac=null)}function cy(i){if(i.propertyName==="value"&&kd(Ic)){var o=[];iy(o,Ic,i,Ks(i)),er(bC,o)}}function _C(i,o,c){i==="focusin"?(ly(),Ac=o,Ic=c,Ac.attachEvent("onpropertychange",cy)):i==="focusout"&&ly()}function wC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return kd(Ic)}function EC(i,o){if(i==="click")return kd(o)}function NC(i,o){if(i==="input"||i==="change")return kd(o)}function TC(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ds=typeof Object.is=="function"?Object.is:TC;function Rc(i,o){if(Ds(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var v=c[d];if(!Ie.call(o,v)||!Ds(i[v],o[v]))return!1}return!0}function uy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function dy(i,o){var c=uy(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=uy(c)}}function hy(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?hy(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function fy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Mi(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Mi(i.document)}return o}function Rm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var SC=Js&&"documentMode"in document&&11>=document.documentMode,sl=null,jm=null,jc=null,Dm=!1;function my(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Dm||sl==null||sl!==Mi(d)||(d=sl,"selectionStart"in d&&Rm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),jc&&Rc(jc,d)||(jc=d,d=_h(jm,"onSelect"),0<d.length&&(o=new Vi("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=sl)))}function ro(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var il={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionrun:ro("Transition","TransitionRun"),transitionstart:ro("Transition","TransitionStart"),transitioncancel:ro("Transition","TransitionCancel"),transitionend:ro("Transition","TransitionEnd")},km={},py={};Js&&(py=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function oo(i){if(km[i])return km[i];if(!il[i])return i;var o=il[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in py)return km[i]=o[c];return i}var gy=oo("animationend"),xy=oo("animationiteration"),yy=oo("animationstart"),CC=oo("transitionrun"),AC=oo("transitionstart"),IC=oo("transitioncancel"),vy=oo("transitionend"),by=new Map,Mm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mm.push("scrollEnd");function mi(i,o){by.set(i,o),Di(o,[i])}var Md=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ws=[],al=0,Pm=0;function Pd(){for(var i=al,o=Pm=al=0;o<i;){var c=Ws[o];Ws[o++]=null;var d=Ws[o];Ws[o++]=null;var v=Ws[o];Ws[o++]=null;var b=Ws[o];if(Ws[o++]=null,d!==null&&v!==null){var N=d.pending;N===null?v.next=v:(v.next=N.next,N.next=v),d.pending=v}b!==0&&_y(c,v,b)}}function Ld(i,o,c,d){Ws[al++]=i,Ws[al++]=o,Ws[al++]=c,Ws[al++]=d,Pm|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Lm(i,o,c,d){return Ld(i,o,c,d),Vd(i)}function lo(i,o){return Ld(i,null,null,o),Vd(i)}function _y(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var v=!1,b=i.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&o!==null&&(v=31-Te(c),i=b.hiddenUpdates,d=i[v],d===null?i[v]=[o]:d.push(o),o.lane=c|536870912),b):null}function Vd(i){if(50<Zc)throw Zc=0,Gp=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var rl={};function RC(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(i,o,c,d){return new RC(i,o,c,d)}function Vm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ha(i,o){var c=i.alternate;return c===null?(c=ks(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function wy(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Ud(i,o,c,d,v,b){var N=0;if(d=i,typeof i=="function")Vm(i)&&(N=1);else if(typeof i=="string")N=PA(i,c,ee.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=ks(31,c,o,v),i.elementType=R,i.lanes=b,i;case z:return co(c.children,v,b,o);case k:N=8,v|=24;break;case q:return i=ks(12,c,o,v|2),i.elementType=q,i.lanes=b,i;case te:return i=ks(13,c,o,v),i.elementType=te,i.lanes=b,i;case L:return i=ks(19,c,o,v),i.elementType=L,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case P:N=10;break e;case H:N=9;break e;case W:N=11;break e;case C:N=14;break e;case A:N=16,d=null;break e}N=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return o=ks(N,c,o,v),o.elementType=i,o.type=d,o.lanes=b,o}function co(i,o,c,d){return i=ks(7,i,d,o),i.lanes=c,i}function Um(i,o,c){return i=ks(6,i,null,o),i.lanes=c,i}function Ey(i){var o=ks(18,null,null,0);return o.stateNode=i,o}function Om(i,o,c){return o=ks(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Ny=new WeakMap;function Xs(i,o){if(typeof i=="object"&&i!==null){var c=Ny.get(i);return c!==void 0?c:(o={value:i,source:o,stack:ue(o)},Ny.set(i,o),o)}return{value:i,source:o,stack:ue(o)}}var ol=[],ll=0,Od=null,Dc=0,Qs=[],Zs=0,ir=null,Fi=1,Bi="";function fa(i,o){ol[ll++]=Dc,ol[ll++]=Od,Od=i,Dc=o}function Ty(i,o,c){Qs[Zs++]=Fi,Qs[Zs++]=Bi,Qs[Zs++]=ir,ir=i;var d=Fi;i=Bi;var v=32-Te(d)-1;d&=~(1<<v),c+=1;var b=32-Te(o)+v;if(30<b){var N=v-v%5;b=(d&(1<<N)-1).toString(32),d>>=N,v-=N,Fi=1<<32-Te(o)+v|c<<v|d,Bi=b+i}else Fi=1<<b|c<<v|d,Bi=i}function zm(i){i.return!==null&&(fa(i,1),Ty(i,1,0))}function Fm(i){for(;i===Od;)Od=ol[--ll],ol[ll]=null,Dc=ol[--ll],ol[ll]=null;for(;i===ir;)ir=Qs[--Zs],Qs[Zs]=null,Bi=Qs[--Zs],Qs[Zs]=null,Fi=Qs[--Zs],Qs[Zs]=null}function Sy(i,o){Qs[Zs++]=Fi,Qs[Zs++]=Bi,Qs[Zs++]=ir,Fi=o.id,Bi=o.overflow,ir=i}var Wn=null,sn=null,Ct=!1,ar=null,ei=!1,Bm=Error(s(519));function rr(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kc(Xs(o,i)),Bm}function Cy(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[Tn]=i,o[zn]=d,c){case"dialog":yt("cancel",o),yt("close",o);break;case"iframe":case"object":case"embed":yt("load",o);break;case"video":case"audio":for(c=0;c<tu.length;c++)yt(tu[c],o);break;case"source":yt("error",o);break;case"img":case"image":case"link":yt("error",o),yt("load",o);break;case"details":yt("toggle",o);break;case"input":yt("invalid",o),yd(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":yt("invalid",o);break;case"textarea":yt("invalid",o),Xa(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||Hb(o.textContent,c)?(d.popover!=null&&(yt("beforetoggle",o),yt("toggle",o)),d.onScroll!=null&&yt("scroll",o),d.onScrollEnd!=null&&yt("scrollend",o),d.onClick!=null&&(o.onclick=ci),o=!0):o=!1,o||rr(i,!0)}function Ay(i){for(Wn=i.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Wn=Wn.return}}function cl(i){if(i!==Wn)return!1;if(!Ct)return Ay(i),Ct=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||rg(i.type,i.memoizedProps)),c=!c),c&&sn&&rr(i),Ay(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));sn=Zb(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));sn=Zb(i)}else o===27?(o=sn,br(i.type)?(i=dg,dg=null,sn=i):sn=o):sn=Wn?ni(i.stateNode.nextSibling):null;return!0}function uo(){sn=Wn=null,Ct=!1}function qm(){var i=ar;return i!==null&&(Ss===null?Ss=i:Ss.push.apply(Ss,i),ar=null),i}function kc(i){ar===null?ar=[i]:ar.push(i)}var Hm=O(null),ho=null,ma=null;function or(i,o,c){oe(Hm,o._currentValue),o._currentValue=c}function pa(i){i._currentValue=Hm.current,Z(Hm)}function Gm(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function $m(i,o,c,d){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var N=v.child;b=b.firstContext;e:for(;b!==null;){var D=b;b=v;for(var G=0;G<o.length;G++)if(D.context===o[G]){b.lanes|=c,D=b.alternate,D!==null&&(D.lanes|=c),Gm(b.return,c,i),d||(N=null);break e}b=D.next}}else if(v.tag===18){if(N=v.return,N===null)throw Error(s(341));N.lanes|=c,b=N.alternate,b!==null&&(b.lanes|=c),Gm(N,c,i),N=null}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===i){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}}function ul(i,o,c,d){i=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var N=v.alternate;if(N===null)throw Error(s(387));if(N=N.memoizedProps,N!==null){var D=v.type;Ds(v.pendingProps.value,N.value)||(i!==null?i.push(D):i=[D])}}else if(v===pe.current){if(N=v.alternate,N===null)throw Error(s(387));N.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(ru):i=[ru])}v=v.return}i!==null&&$m(o,i,c,d),o.flags|=262144}function zd(i){for(i=i.firstContext;i!==null;){if(!Ds(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function fo(i){ho=i,ma=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Xn(i){return Iy(ho,i)}function Fd(i,o){return ho===null&&fo(i),Iy(i,o)}function Iy(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},ma===null){if(i===null)throw Error(s(308));ma=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ma=ma.next=o;return c}var jC=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},DC=t.unstable_scheduleCallback,kC=t.unstable_NormalPriority,An={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Km(){return{controller:new jC,data:new Map,refCount:0}}function Mc(i){i.refCount--,i.refCount===0&&DC(kC,function(){i.controller.abort()})}var Pc=null,Jm=0,dl=0,hl=null;function MC(i,o){if(Pc===null){var c=Pc=[];Jm=0,dl=Xp(),hl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Jm++,o.then(Ry,Ry),o}function Ry(){if(--Jm===0&&Pc!==null){hl!==null&&(hl.status="fulfilled");var i=Pc;Pc=null,dl=0,hl=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function PC(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<c.length;v++)(0,c[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),d}var jy=j.S;j.S=function(i,o){mb=At(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&MC(i,o),jy!==null&&jy(i,o)};var mo=O(null);function Ym(){var i=mo.current;return i!==null?i:Zt.pooledCache}function Bd(i,o){o===null?oe(mo,mo.current):oe(mo,o.pool)}function Dy(){var i=Ym();return i===null?null:{parent:An._currentValue,pool:i}}var fl=Error(s(460)),Wm=Error(s(474)),qd=Error(s(542)),Hd={then:function(){}};function ky(i){return i=i.status,i==="fulfilled"||i==="rejected"}function My(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(ci,ci),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Ly(i),i;default:if(typeof o.status=="string")o.then(ci,ci);else{if(i=Zt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Ly(i),i}throw go=o,fl}}function po(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(go=c,fl):c}}var go=null;function Py(){if(go===null)throw Error(s(459));var i=go;return go=null,i}function Ly(i){if(i===fl||i===qd)throw Error(s(483))}var ml=null,Lc=0;function Gd(i){var o=Lc;return Lc+=1,ml===null&&(ml=[]),My(ml,i,o)}function Vc(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function $d(i,o){throw o.$$typeof===w?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Vy(i){function o(ae,Q){if(i){var le=ae.deletions;le===null?(ae.deletions=[Q],ae.flags|=16):le.push(Q)}}function c(ae,Q){if(!i)return null;for(;Q!==null;)o(ae,Q),Q=Q.sibling;return null}function d(ae){for(var Q=new Map;ae!==null;)ae.key!==null?Q.set(ae.key,ae):Q.set(ae.index,ae),ae=ae.sibling;return Q}function v(ae,Q){return ae=ha(ae,Q),ae.index=0,ae.sibling=null,ae}function b(ae,Q,le){return ae.index=le,i?(le=ae.alternate,le!==null?(le=le.index,le<Q?(ae.flags|=67108866,Q):le):(ae.flags|=67108866,Q)):(ae.flags|=1048576,Q)}function N(ae){return i&&ae.alternate===null&&(ae.flags|=67108866),ae}function D(ae,Q,le,ye){return Q===null||Q.tag!==6?(Q=Um(le,ae.mode,ye),Q.return=ae,Q):(Q=v(Q,le),Q.return=ae,Q)}function G(ae,Q,le,ye){var qe=le.type;return qe===z?xe(ae,Q,le.props.children,ye,le.key):Q!==null&&(Q.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&po(qe)===Q.type)?(Q=v(Q,le.props),Vc(Q,le),Q.return=ae,Q):(Q=Ud(le.type,le.key,le.props,null,ae.mode,ye),Vc(Q,le),Q.return=ae,Q)}function ce(ae,Q,le,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==le.containerInfo||Q.stateNode.implementation!==le.implementation?(Q=Om(le,ae.mode,ye),Q.return=ae,Q):(Q=v(Q,le.children||[]),Q.return=ae,Q)}function xe(ae,Q,le,ye,qe){return Q===null||Q.tag!==7?(Q=co(le,ae.mode,ye,qe),Q.return=ae,Q):(Q=v(Q,le),Q.return=ae,Q)}function be(ae,Q,le){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Um(""+Q,ae.mode,le),Q.return=ae,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:return le=Ud(Q.type,Q.key,Q.props,null,ae.mode,le),Vc(le,Q),le.return=ae,le;case M:return Q=Om(Q,ae.mode,le),Q.return=ae,Q;case A:return Q=po(Q),be(ae,Q,le)}if(ze(Q)||$(Q))return Q=co(Q,ae.mode,le,null),Q.return=ae,Q;if(typeof Q.then=="function")return be(ae,Gd(Q),le);if(Q.$$typeof===P)return be(ae,Fd(ae,Q),le);$d(ae,Q)}return null}function he(ae,Q,le,ye){var qe=Q!==null?Q.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return qe!==null?null:D(ae,Q,""+le,ye);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case T:return le.key===qe?G(ae,Q,le,ye):null;case M:return le.key===qe?ce(ae,Q,le,ye):null;case A:return le=po(le),he(ae,Q,le,ye)}if(ze(le)||$(le))return qe!==null?null:xe(ae,Q,le,ye,null);if(typeof le.then=="function")return he(ae,Q,Gd(le),ye);if(le.$$typeof===P)return he(ae,Q,Fd(ae,le),ye);$d(ae,le)}return null}function me(ae,Q,le,ye,qe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ae=ae.get(le)||null,D(Q,ae,""+ye,qe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:return ae=ae.get(ye.key===null?le:ye.key)||null,G(Q,ae,ye,qe);case M:return ae=ae.get(ye.key===null?le:ye.key)||null,ce(Q,ae,ye,qe);case A:return ye=po(ye),me(ae,Q,le,ye,qe)}if(ze(ye)||$(ye))return ae=ae.get(le)||null,xe(Q,ae,ye,qe,null);if(typeof ye.then=="function")return me(ae,Q,le,Gd(ye),qe);if(ye.$$typeof===P)return me(ae,Q,le,Fd(Q,ye),qe);$d(Q,ye)}return null}function Oe(ae,Q,le,ye){for(var qe=null,Mt=null,Be=Q,ht=Q=0,wt=null;Be!==null&&ht<le.length;ht++){Be.index>ht?(wt=Be,Be=null):wt=Be.sibling;var Pt=he(ae,Be,le[ht],ye);if(Pt===null){Be===null&&(Be=wt);break}i&&Be&&Pt.alternate===null&&o(ae,Be),Q=b(Pt,Q,ht),Mt===null?qe=Pt:Mt.sibling=Pt,Mt=Pt,Be=wt}if(ht===le.length)return c(ae,Be),Ct&&fa(ae,ht),qe;if(Be===null){for(;ht<le.length;ht++)Be=be(ae,le[ht],ye),Be!==null&&(Q=b(Be,Q,ht),Mt===null?qe=Be:Mt.sibling=Be,Mt=Be);return Ct&&fa(ae,ht),qe}for(Be=d(Be);ht<le.length;ht++)wt=me(Be,ae,ht,le[ht],ye),wt!==null&&(i&&wt.alternate!==null&&Be.delete(wt.key===null?ht:wt.key),Q=b(wt,Q,ht),Mt===null?qe=wt:Mt.sibling=wt,Mt=wt);return i&&Be.forEach(function(Tr){return o(ae,Tr)}),Ct&&fa(ae,ht),qe}function Ke(ae,Q,le,ye){if(le==null)throw Error(s(151));for(var qe=null,Mt=null,Be=Q,ht=Q=0,wt=null,Pt=le.next();Be!==null&&!Pt.done;ht++,Pt=le.next()){Be.index>ht?(wt=Be,Be=null):wt=Be.sibling;var Tr=he(ae,Be,Pt.value,ye);if(Tr===null){Be===null&&(Be=wt);break}i&&Be&&Tr.alternate===null&&o(ae,Be),Q=b(Tr,Q,ht),Mt===null?qe=Tr:Mt.sibling=Tr,Mt=Tr,Be=wt}if(Pt.done)return c(ae,Be),Ct&&fa(ae,ht),qe;if(Be===null){for(;!Pt.done;ht++,Pt=le.next())Pt=be(ae,Pt.value,ye),Pt!==null&&(Q=b(Pt,Q,ht),Mt===null?qe=Pt:Mt.sibling=Pt,Mt=Pt);return Ct&&fa(ae,ht),qe}for(Be=d(Be);!Pt.done;ht++,Pt=le.next())Pt=me(Be,ae,ht,Pt.value,ye),Pt!==null&&(i&&Pt.alternate!==null&&Be.delete(Pt.key===null?ht:Pt.key),Q=b(Pt,Q,ht),Mt===null?qe=Pt:Mt.sibling=Pt,Mt=Pt);return i&&Be.forEach(function($A){return o(ae,$A)}),Ct&&fa(ae,ht),qe}function Qt(ae,Q,le,ye){if(typeof le=="object"&&le!==null&&le.type===z&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case T:e:{for(var qe=le.key;Q!==null;){if(Q.key===qe){if(qe=le.type,qe===z){if(Q.tag===7){c(ae,Q.sibling),ye=v(Q,le.props.children),ye.return=ae,ae=ye;break e}}else if(Q.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&po(qe)===Q.type){c(ae,Q.sibling),ye=v(Q,le.props),Vc(ye,le),ye.return=ae,ae=ye;break e}c(ae,Q);break}else o(ae,Q);Q=Q.sibling}le.type===z?(ye=co(le.props.children,ae.mode,ye,le.key),ye.return=ae,ae=ye):(ye=Ud(le.type,le.key,le.props,null,ae.mode,ye),Vc(ye,le),ye.return=ae,ae=ye)}return N(ae);case M:e:{for(qe=le.key;Q!==null;){if(Q.key===qe)if(Q.tag===4&&Q.stateNode.containerInfo===le.containerInfo&&Q.stateNode.implementation===le.implementation){c(ae,Q.sibling),ye=v(Q,le.children||[]),ye.return=ae,ae=ye;break e}else{c(ae,Q);break}else o(ae,Q);Q=Q.sibling}ye=Om(le,ae.mode,ye),ye.return=ae,ae=ye}return N(ae);case A:return le=po(le),Qt(ae,Q,le,ye)}if(ze(le))return Oe(ae,Q,le,ye);if($(le)){if(qe=$(le),typeof qe!="function")throw Error(s(150));return le=qe.call(le),Ke(ae,Q,le,ye)}if(typeof le.then=="function")return Qt(ae,Q,Gd(le),ye);if(le.$$typeof===P)return Qt(ae,Q,Fd(ae,le),ye);$d(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,Q!==null&&Q.tag===6?(c(ae,Q.sibling),ye=v(Q,le),ye.return=ae,ae=ye):(c(ae,Q),ye=Um(le,ae.mode,ye),ye.return=ae,ae=ye),N(ae)):c(ae,Q)}return function(ae,Q,le,ye){try{Lc=0;var qe=Qt(ae,Q,le,ye);return ml=null,qe}catch(Be){if(Be===fl||Be===qd)throw Be;var Mt=ks(29,Be,null,ae.mode);return Mt.lanes=ye,Mt.return=ae,Mt}finally{}}}var xo=Vy(!0),Uy=Vy(!1),lr=!1;function Xm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qm(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function cr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ur(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(zt&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=Vd(i),_y(i,null,c),o}return Ld(i,d,o,c),Vd(i)}function Uc(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,Ci(i,c)}}function Zm(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var N={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?v=b=N:b=b.next=N,c=c.next}while(c!==null);b===null?v=b=o:b=b.next=o}else v=b=o;c={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var ep=!1;function Oc(){if(ep){var i=hl;if(i!==null)throw i}}function zc(i,o,c,d){ep=!1;var v=i.updateQueue;lr=!1;var b=v.firstBaseUpdate,N=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var G=D,ce=G.next;G.next=null,N===null?b=ce:N.next=ce,N=G;var xe=i.alternate;xe!==null&&(xe=xe.updateQueue,D=xe.lastBaseUpdate,D!==N&&(D===null?xe.firstBaseUpdate=ce:D.next=ce,xe.lastBaseUpdate=G))}if(b!==null){var be=v.baseState;N=0,xe=ce=G=null,D=b;do{var he=D.lane&-536870913,me=he!==D.lane;if(me?(_t&he)===he:(d&he)===he){he!==0&&he===dl&&(ep=!0),xe!==null&&(xe=xe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Oe=i,Ke=D;he=o;var Qt=c;switch(Ke.tag){case 1:if(Oe=Ke.payload,typeof Oe=="function"){be=Oe.call(Qt,be,he);break e}be=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ke.payload,he=typeof Oe=="function"?Oe.call(Qt,be,he):Oe,he==null)break e;be=_({},be,he);break e;case 2:lr=!0}}he=D.callback,he!==null&&(i.flags|=64,me&&(i.flags|=8192),me=v.callbacks,me===null?v.callbacks=[he]:me.push(he))}else me={lane:he,tag:D.tag,payload:D.payload,callback:D.callback,next:null},xe===null?(ce=xe=me,G=be):xe=xe.next=me,N|=he;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;me=D,D=me.next,me.next=null,v.lastBaseUpdate=me,v.shared.pending=null}}while(!0);xe===null&&(G=be),v.baseState=G,v.firstBaseUpdate=ce,v.lastBaseUpdate=xe,b===null&&(v.shared.lanes=0),pr|=N,i.lanes=N,i.memoizedState=be}}function Oy(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function zy(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Oy(c[i],o)}var pl=O(null),Kd=O(0);function Fy(i,o){i=Na,oe(Kd,i),oe(pl,o),Na=i|o.baseLanes}function tp(){oe(Kd,Na),oe(pl,pl.current)}function np(){Na=Kd.current,Z(pl),Z(Kd)}var Ms=O(null),ti=null;function dr(i){var o=i.alternate;oe(vn,vn.current&1),oe(Ms,i),ti===null&&(o===null||pl.current!==null||o.memoizedState!==null)&&(ti=i)}function sp(i){oe(vn,vn.current),oe(Ms,i),ti===null&&(ti=i)}function By(i){i.tag===22?(oe(vn,vn.current),oe(Ms,i),ti===null&&(ti=i)):hr()}function hr(){oe(vn,vn.current),oe(Ms,Ms.current)}function Ps(i){Z(Ms),ti===i&&(ti=null),Z(vn)}var vn=O(0);function Jd(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||cg(c)||ug(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ga=0,ct=null,Wt=null,In=null,Yd=!1,gl=!1,yo=!1,Wd=0,Fc=0,xl=null,LC=0;function mn(){throw Error(s(321))}function ip(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Ds(i[c],o[c]))return!1;return!0}function ap(i,o,c,d,v,b){return ga=b,ct=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,j.H=i===null||i.memoizedState===null?Tv:bp,yo=!1,b=c(d,v),yo=!1,gl&&(b=Hy(o,c,d,v)),qy(i),b}function qy(i){j.H=Hc;var o=Wt!==null&&Wt.next!==null;if(ga=0,In=Wt=ct=null,Yd=!1,Fc=0,xl=null,o)throw Error(s(300));i===null||Rn||(i=i.dependencies,i!==null&&zd(i)&&(Rn=!0))}function Hy(i,o,c,d){ct=i;var v=0;do{if(gl&&(xl=null),Fc=0,gl=!1,25<=v)throw Error(s(301));if(v+=1,In=Wt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}j.H=Sv,b=o(c,d)}while(gl);return b}function VC(){var i=j.H,o=i.useState()[0];return o=typeof o.then=="function"?Bc(o):o,i=i.useState()[0],(Wt!==null?Wt.memoizedState:null)!==i&&(ct.flags|=1024),o}function rp(){var i=Wd!==0;return Wd=0,i}function op(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function lp(i){if(Yd){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Yd=!1}ga=0,In=Wt=ct=null,gl=!1,Fc=Wd=0,xl=null}function ps(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?ct.memoizedState=In=i:In=In.next=i,In}function bn(){if(Wt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var o=In===null?ct.memoizedState:In.next;if(o!==null)In=o,Wt=i;else{if(i===null)throw ct.alternate===null?Error(s(467)):Error(s(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},In===null?ct.memoizedState=In=i:In=In.next=i}return In}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bc(i){var o=Fc;return Fc+=1,xl===null&&(xl=[]),i=My(xl,i,o),o=ct,(In===null?o.memoizedState:In.next)===null&&(o=o.alternate,j.H=o===null||o.memoizedState===null?Tv:bp),i}function Qd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Bc(i);if(i.$$typeof===P)return Xn(i)}throw Error(s(438,String(i)))}function cp(i){var o=null,c=ct.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=ct.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Xd(),ct.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=U;return o.index++,c}function xa(i,o){return typeof o=="function"?o(i):o}function Zd(i){var o=bn();return up(o,Wt,i)}function up(i,o,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var v=i.baseQueue,b=d.pending;if(b!==null){if(v!==null){var N=v.next;v.next=b.next,b.next=N}o.baseQueue=v=b,d.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{o=v.next;var D=N=null,G=null,ce=o,xe=!1;do{var be=ce.lane&-536870913;if(be!==ce.lane?(_t&be)===be:(ga&be)===be){var he=ce.revertLane;if(he===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),be===dl&&(xe=!0);else if((ga&he)===he){ce=ce.next,he===dl&&(xe=!0);continue}else be={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},G===null?(D=G=be,N=b):G=G.next=be,ct.lanes|=he,pr|=he;be=ce.action,yo&&c(b,be),b=ce.hasEagerState?ce.eagerState:c(b,be)}else he={lane:be,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},G===null?(D=G=he,N=b):G=G.next=he,ct.lanes|=be,pr|=be;ce=ce.next}while(ce!==null&&ce!==o);if(G===null?N=b:G.next=D,!Ds(b,i.memoizedState)&&(Rn=!0,xe&&(c=hl,c!==null)))throw c;i.memoizedState=b,i.baseState=N,i.baseQueue=G,d.lastRenderedState=b}return v===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function dp(i){var o=bn(),c=o.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,v=c.pending,b=o.memoizedState;if(v!==null){c.pending=null;var N=v=v.next;do b=i(b,N.action),N=N.next;while(N!==v);Ds(b,o.memoizedState)||(Rn=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Gy(i,o,c){var d=ct,v=bn(),b=Ct;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=o();var N=!Ds((Wt||v).memoizedState,c);if(N&&(v.memoizedState=c,Rn=!0),v=v.queue,mp(Jy.bind(null,d,v,i),[i]),v.getSnapshot!==o||N||In!==null&&In.memoizedState.tag&1){if(d.flags|=2048,yl(9,{destroy:void 0},Ky.bind(null,d,v,c,o),null),Zt===null)throw Error(s(349));b||(ga&127)!==0||$y(d,o,c)}return c}function $y(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=ct.updateQueue,o===null?(o=Xd(),ct.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function Ky(i,o,c,d){o.value=c,o.getSnapshot=d,Yy(o)&&Wy(i)}function Jy(i,o,c){return c(function(){Yy(o)&&Wy(i)})}function Yy(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Ds(i,c)}catch{return!0}}function Wy(i){var o=lo(i,2);o!==null&&Cs(o,i,2)}function hp(i){var o=ps();if(typeof i=="function"){var c=i;if(i=c(),yo){de(!0);try{c()}finally{de(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:i},o}function Xy(i,o,c,d){return i.baseState=c,up(i,Wt,typeof d=="function"?d:xa)}function UC(i,o,c,d,v){if(nh(i))throw Error(s(485));if(i=o.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){b.listeners.push(N)}};j.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Qy(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Qy(i,o){var c=o.action,d=o.payload,v=i.state;if(o.isTransition){var b=j.T,N={};j.T=N;try{var D=c(v,d),G=j.S;G!==null&&G(N,D),Zy(i,o,D)}catch(ce){fp(i,o,ce)}finally{b!==null&&N.types!==null&&(b.types=N.types),j.T=b}}else try{b=c(v,d),Zy(i,o,b)}catch(ce){fp(i,o,ce)}}function Zy(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){ev(i,o,d)},function(d){return fp(i,o,d)}):ev(i,o,c)}function ev(i,o,c){o.status="fulfilled",o.value=c,tv(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,Qy(i,c)))}function fp(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,tv(o),o=o.next;while(o!==d)}i.action=null}function tv(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function nv(i,o){return o}function sv(i,o){if(Ct){var c=Zt.formState;if(c!==null){e:{var d=ct;if(Ct){if(sn){t:{for(var v=sn,b=ei;v.nodeType!==8;){if(!b){v=null;break t}if(v=ni(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){sn=ni(v.nextSibling),d=v.data==="F!";break e}}rr(d)}d=!1}d&&(o=c[0])}}return c=ps(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nv,lastRenderedState:o},c.queue=d,c=wv.bind(null,ct,d),d.dispatch=c,d=hp(!1),b=vp.bind(null,ct,!1,d.queue),d=ps(),v={state:o,dispatch:null,action:i,pending:null},d.queue=v,c=UC.bind(null,ct,v,b,c),v.dispatch=c,d.memoizedState=i,[o,c,!1]}function iv(i){var o=bn();return av(o,Wt,i)}function av(i,o,c){if(o=up(i,o,nv)[0],i=Zd(xa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Bc(o)}catch(N){throw N===fl?qd:N}else d=o;o=bn();var v=o.queue,b=v.dispatch;return c!==o.memoizedState&&(ct.flags|=2048,yl(9,{destroy:void 0},OC.bind(null,v,c),null)),[d,b,i]}function OC(i,o){i.action=o}function rv(i){var o=bn(),c=Wt;if(c!==null)return av(o,c,i);bn(),o=o.memoizedState,c=bn();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function yl(i,o,c,d){return i={tag:i,create:c,deps:d,inst:o,next:null},o=ct.updateQueue,o===null&&(o=Xd(),ct.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function ov(){return bn().memoizedState}function eh(i,o,c,d){var v=ps();ct.flags|=i,v.memoizedState=yl(1|o,{destroy:void 0},c,d===void 0?null:d)}function th(i,o,c,d){var v=bn();d=d===void 0?null:d;var b=v.memoizedState.inst;Wt!==null&&d!==null&&ip(d,Wt.memoizedState.deps)?v.memoizedState=yl(o,b,c,d):(ct.flags|=i,v.memoizedState=yl(1|o,b,c,d))}function lv(i,o){eh(8390656,8,i,o)}function mp(i,o){th(2048,8,i,o)}function zC(i){ct.flags|=4;var o=ct.updateQueue;if(o===null)o=Xd(),ct.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function cv(i){var o=bn().memoizedState;return zC({ref:o,nextImpl:i}),function(){if((zt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function uv(i,o){return th(4,2,i,o)}function dv(i,o){return th(4,4,i,o)}function hv(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function fv(i,o,c){c=c!=null?c.concat([i]):null,th(4,4,hv.bind(null,o,i),c)}function pp(){}function mv(i,o){var c=bn();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&ip(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function pv(i,o){var c=bn();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&ip(o,d[1]))return d[0];if(d=i(),yo){de(!0);try{i()}finally{de(!1)}}return c.memoizedState=[d,o],d}function gp(i,o,c){return c===void 0||(ga&1073741824)!==0&&(_t&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=gb(),ct.lanes|=i,pr|=i,c)}function gv(i,o,c,d){return Ds(c,o)?c:pl.current!==null?(i=gp(i,c,d),Ds(i,o)||(Rn=!0),i):(ga&42)===0||(ga&1073741824)!==0&&(_t&261930)===0?(Rn=!0,i.memoizedState=c):(i=gb(),ct.lanes|=i,pr|=i,o)}function xv(i,o,c,d,v){var b=se.p;se.p=b!==0&&8>b?b:8;var N=j.T,D={};j.T=D,vp(i,!1,o,c);try{var G=v(),ce=j.S;if(ce!==null&&ce(D,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var xe=PC(G,d);qc(i,o,xe,Us(i))}else qc(i,o,d,Us(i))}catch(be){qc(i,o,{then:function(){},status:"rejected",reason:be},Us())}finally{se.p=b,N!==null&&D.types!==null&&(N.types=D.types),j.T=N}}function FC(){}function xp(i,o,c,d){if(i.tag!==5)throw Error(s(476));var v=yv(i).queue;xv(i,v,o,K,c===null?FC:function(){return vv(i),c(d)})}function yv(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:K},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function vv(i){var o=yv(i);o.next===null&&(o=i.alternate.memoizedState),qc(i,o.next.queue,{},Us())}function yp(){return Xn(ru)}function bv(){return bn().memoizedState}function _v(){return bn().memoizedState}function BC(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=Us();i=cr(c);var d=ur(o,i,c);d!==null&&(Cs(d,o,c),Uc(d,o,c)),o={cache:Km()},i.payload=o;return}o=o.return}}function qC(i,o,c){var d=Us();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},nh(i)?Ev(o,c):(c=Lm(i,o,c,d),c!==null&&(Cs(c,i,d),Nv(c,o,d)))}function wv(i,o,c){var d=Us();qc(i,o,c,d)}function qc(i,o,c,d){var v={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(nh(i))Ev(o,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var N=o.lastRenderedState,D=b(N,c);if(v.hasEagerState=!0,v.eagerState=D,Ds(D,N))return Ld(i,o,v,0),Zt===null&&Pd(),!1}catch{}finally{}if(c=Lm(i,o,v,d),c!==null)return Cs(c,i,d),Nv(c,o,d),!0}return!1}function vp(i,o,c,d){if(d={lane:2,revertLane:Xp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},nh(i)){if(o)throw Error(s(479))}else o=Lm(i,c,d,2),o!==null&&Cs(o,i,2)}function nh(i){var o=i.alternate;return i===ct||o!==null&&o===ct}function Ev(i,o){gl=Yd=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Nv(i,o,c){if((c&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,Ci(i,c)}}var Hc={readContext:Xn,use:Qd,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};Hc.useEffectEvent=mn;var Tv={readContext:Xn,use:Qd,useCallback:function(i,o){return ps().memoizedState=[i,o===void 0?null:o],i},useContext:Xn,useEffect:lv,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,eh(4194308,4,hv.bind(null,o,i),c)},useLayoutEffect:function(i,o){return eh(4194308,4,i,o)},useInsertionEffect:function(i,o){eh(4,2,i,o)},useMemo:function(i,o){var c=ps();o=o===void 0?null:o;var d=i();if(yo){de(!0);try{i()}finally{de(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=ps();if(c!==void 0){var v=c(o);if(yo){de(!0);try{c(o)}finally{de(!1)}}}else v=o;return d.memoizedState=d.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},d.queue=i,i=i.dispatch=qC.bind(null,ct,i),[d.memoizedState,i]},useRef:function(i){var o=ps();return i={current:i},o.memoizedState=i},useState:function(i){i=hp(i);var o=i.queue,c=wv.bind(null,ct,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:pp,useDeferredValue:function(i,o){var c=ps();return gp(c,i,o)},useTransition:function(){var i=hp(!1);return i=xv.bind(null,ct,i.queue,!0,!1),ps().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=ct,v=ps();if(Ct){if(c===void 0)throw Error(s(407));c=c()}else{if(c=o(),Zt===null)throw Error(s(349));(_t&127)!==0||$y(d,o,c)}v.memoizedState=c;var b={value:c,getSnapshot:o};return v.queue=b,lv(Jy.bind(null,d,b,i),[i]),d.flags|=2048,yl(9,{destroy:void 0},Ky.bind(null,d,b,c,o),null),c},useId:function(){var i=ps(),o=Zt.identifierPrefix;if(Ct){var c=Bi,d=Fi;c=(d&~(1<<32-Te(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Wd++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=LC++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:yp,useFormState:sv,useActionState:sv,useOptimistic:function(i){var o=ps();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=vp.bind(null,ct,!0,c),c.dispatch=o,[i,o]},useMemoCache:cp,useCacheRefresh:function(){return ps().memoizedState=BC.bind(null,ct)},useEffectEvent:function(i){var o=ps(),c={impl:i};return o.memoizedState=c,function(){if((zt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},bp={readContext:Xn,use:Qd,useCallback:mv,useContext:Xn,useEffect:mp,useImperativeHandle:fv,useInsertionEffect:uv,useLayoutEffect:dv,useMemo:pv,useReducer:Zd,useRef:ov,useState:function(){return Zd(xa)},useDebugValue:pp,useDeferredValue:function(i,o){var c=bn();return gv(c,Wt.memoizedState,i,o)},useTransition:function(){var i=Zd(xa)[0],o=bn().memoizedState;return[typeof i=="boolean"?i:Bc(i),o]},useSyncExternalStore:Gy,useId:bv,useHostTransitionStatus:yp,useFormState:iv,useActionState:iv,useOptimistic:function(i,o){var c=bn();return Xy(c,Wt,i,o)},useMemoCache:cp,useCacheRefresh:_v};bp.useEffectEvent=cv;var Sv={readContext:Xn,use:Qd,useCallback:mv,useContext:Xn,useEffect:mp,useImperativeHandle:fv,useInsertionEffect:uv,useLayoutEffect:dv,useMemo:pv,useReducer:dp,useRef:ov,useState:function(){return dp(xa)},useDebugValue:pp,useDeferredValue:function(i,o){var c=bn();return Wt===null?gp(c,i,o):gv(c,Wt.memoizedState,i,o)},useTransition:function(){var i=dp(xa)[0],o=bn().memoizedState;return[typeof i=="boolean"?i:Bc(i),o]},useSyncExternalStore:Gy,useId:bv,useHostTransitionStatus:yp,useFormState:rv,useActionState:rv,useOptimistic:function(i,o){var c=bn();return Wt!==null?Xy(c,Wt,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:cp,useCacheRefresh:_v};Sv.useEffectEvent=cv;function _p(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:_({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var wp={enqueueSetState:function(i,o,c){i=i._reactInternals;var d=Us(),v=cr(d);v.payload=o,c!=null&&(v.callback=c),o=ur(i,v,d),o!==null&&(Cs(o,i,d),Uc(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=Us(),v=cr(d);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=ur(i,v,d),o!==null&&(Cs(o,i,d),Uc(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=Us(),d=cr(c);d.tag=2,o!=null&&(d.callback=o),o=ur(i,d,c),o!==null&&(Cs(o,i,c),Uc(o,i,c))}};function Cv(i,o,c,d,v,b,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,N):o.prototype&&o.prototype.isPureReactComponent?!Rc(c,d)||!Rc(v,b):!0}function Av(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&wp.enqueueReplaceState(o,o.state,null)}function vo(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=_({},c));for(var v in i)c[v]===void 0&&(c[v]=i[v])}return c}function Iv(i){Md(i)}function Rv(i){console.error(i)}function jv(i){Md(i)}function sh(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Dv(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Ep(i,o,c){return c=cr(c),c.tag=3,c.payload={element:null},c.callback=function(){sh(i,o)},c}function kv(i){return i=cr(i),i.tag=3,i}function Mv(i,o,c,d){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var b=d.value;i.payload=function(){return v(b)},i.callback=function(){Dv(o,c,d)}}var N=c.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(i.callback=function(){Dv(o,c,d),typeof v!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var D=d.stack;this.componentDidCatch(d.value,{componentStack:D!==null?D:""})})}function HC(i,o,c,d,v){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&ul(o,c,v,!0),c=Ms.current,c!==null){switch(c.tag){case 31:case 13:return ti===null?ph():c.alternate===null&&pn===0&&(pn=3),c.flags&=-257,c.flags|=65536,c.lanes=v,d===Hd?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Jp(i,d,v)),!1;case 22:return c.flags|=65536,d===Hd?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Jp(i,d,v)),!1}throw Error(s(435,c.tag))}return Jp(i,d,v),ph(),!1}if(Ct)return o=Ms.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==Bm&&(i=Error(s(422),{cause:d}),kc(Xs(i,c)))):(d!==Bm&&(o=Error(s(423),{cause:d}),kc(Xs(o,c))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,d=Xs(d,c),v=Ep(i.stateNode,d,v),Zm(i,v),pn!==4&&(pn=2)),!1;var b=Error(s(520),{cause:d});if(b=Xs(b,c),Qc===null?Qc=[b]:Qc.push(b),pn!==4&&(pn=2),o===null)return!0;d=Xs(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=v&-v,c.lanes|=i,i=Ep(c.stateNode,d,i),Zm(c,i),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(gr===null||!gr.has(b))))return c.flags|=65536,v&=-v,c.lanes|=v,v=kv(v),Mv(v,i,c,d),Zm(c,v),!1}c=c.return}while(c!==null);return!1}var Np=Error(s(461)),Rn=!1;function Qn(i,o,c,d){o.child=i===null?Uy(o,null,c,d):xo(o,i.child,c,d)}function Pv(i,o,c,d,v){c=c.render;var b=o.ref;if("ref"in d){var N={};for(var D in d)D!=="ref"&&(N[D]=d[D])}else N=d;return fo(o),d=ap(i,o,c,N,b,v),D=rp(),i!==null&&!Rn?(op(i,o,v),ya(i,o,v)):(Ct&&D&&zm(o),o.flags|=1,Qn(i,o,d,v),o.child)}function Lv(i,o,c,d,v){if(i===null){var b=c.type;return typeof b=="function"&&!Vm(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,Vv(i,o,b,d,v)):(i=Ud(c.type,null,d,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!Dp(i,v)){var N=b.memoizedProps;if(c=c.compare,c=c!==null?c:Rc,c(N,d)&&i.ref===o.ref)return ya(i,o,v)}return o.flags|=1,i=ha(b,d),i.ref=o.ref,i.return=o,o.child=i}function Vv(i,o,c,d,v){if(i!==null){var b=i.memoizedProps;if(Rc(b,d)&&i.ref===o.ref)if(Rn=!1,o.pendingProps=d=b,Dp(i,v))(i.flags&131072)!==0&&(Rn=!0);else return o.lanes=i.lanes,ya(i,o,v)}return Tp(i,o,c,d,v)}function Uv(i,o,c,d){var v=d.children,b=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(d=o.child=i.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~b}else d=0,o.child=null;return Ov(i,o,b,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bd(o,b!==null?b.cachePool:null),b!==null?Fy(o,b):tp(),By(o);else return d=o.lanes=536870912,Ov(i,o,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(Bd(o,b.cachePool),Fy(o,b),hr(),o.memoizedState=null):(i!==null&&Bd(o,null),tp(),hr());return Qn(i,o,v,c),o.child}function Gc(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ov(i,o,c,d,v){var b=Ym();return b=b===null?null:{parent:An._currentValue,pool:b},o.memoizedState={baseLanes:c,cachePool:b},i!==null&&Bd(o,null),tp(),By(o),i!==null&&ul(i,o,d,!0),o.childLanes=v,null}function ih(i,o){return o=rh({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function zv(i,o,c){return xo(o,i.child,null,c),i=ih(o,o.pendingProps),i.flags|=2,Ps(o),o.memoizedState=null,i}function GC(i,o,c){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Ct){if(d.mode==="hidden")return i=ih(o,d),o.lanes=536870912,Gc(null,i);if(sp(o),(i=sn)?(i=Qb(i,ei),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ir!==null?{id:Fi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},c=Ey(i),c.return=o,o.child=c,Wn=o,sn=null)):i=null,i===null)throw rr(o);return o.lanes=536870912,null}return ih(o,d)}var b=i.memoizedState;if(b!==null){var N=b.dehydrated;if(sp(o),v)if(o.flags&256)o.flags&=-257,o=zv(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Rn||ul(i,o,c,!1),v=(c&i.childLanes)!==0,Rn||v){if(d=Zt,d!==null&&(N=hc(d,c),N!==0&&N!==b.retryLane))throw b.retryLane=N,lo(i,N),Cs(d,i,N),Np;ph(),o=zv(i,o,c)}else i=b.treeContext,sn=ni(N.nextSibling),Wn=o,Ct=!0,ar=null,ei=!1,i!==null&&Sy(o,i),o=ih(o,d),o.flags|=4096;return o}return i=ha(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function ah(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Tp(i,o,c,d,v){return fo(o),c=ap(i,o,c,d,void 0,v),d=rp(),i!==null&&!Rn?(op(i,o,v),ya(i,o,v)):(Ct&&d&&zm(o),o.flags|=1,Qn(i,o,c,v),o.child)}function Fv(i,o,c,d,v,b){return fo(o),o.updateQueue=null,c=Hy(o,d,c,v),qy(i),d=rp(),i!==null&&!Rn?(op(i,o,b),ya(i,o,b)):(Ct&&d&&zm(o),o.flags|=1,Qn(i,o,c,b),o.child)}function Bv(i,o,c,d,v){if(fo(o),o.stateNode===null){var b=rl,N=c.contextType;typeof N=="object"&&N!==null&&(b=Xn(N)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=wp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Xm(o),N=c.contextType,b.context=typeof N=="object"&&N!==null?Xn(N):rl,b.state=o.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(_p(o,c,N,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(N=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),N!==b.state&&wp.enqueueReplaceState(b,b.state,null),zc(o,d,b,v),Oc(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){b=o.stateNode;var D=o.memoizedProps,G=vo(c,D);b.props=G;var ce=b.context,xe=c.contextType;N=rl,typeof xe=="object"&&xe!==null&&(N=Xn(xe));var be=c.getDerivedStateFromProps;xe=typeof be=="function"||typeof b.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,xe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D||ce!==N)&&Av(o,b,d,N),lr=!1;var he=o.memoizedState;b.state=he,zc(o,d,b,v),Oc(),ce=o.memoizedState,D||he!==ce||lr?(typeof be=="function"&&(_p(o,c,be,d),ce=o.memoizedState),(G=lr||Cv(o,c,G,d,he,ce,N))?(xe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=ce),b.props=d,b.state=ce,b.context=N,d=G):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,Qm(i,o),N=o.memoizedProps,xe=vo(c,N),b.props=xe,be=o.pendingProps,he=b.context,ce=c.contextType,G=rl,typeof ce=="object"&&ce!==null&&(G=Xn(ce)),D=c.getDerivedStateFromProps,(ce=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N!==be||he!==G)&&Av(o,b,d,G),lr=!1,he=o.memoizedState,b.state=he,zc(o,d,b,v),Oc();var me=o.memoizedState;N!==be||he!==me||lr||i!==null&&i.dependencies!==null&&zd(i.dependencies)?(typeof D=="function"&&(_p(o,c,D,d),me=o.memoizedState),(xe=lr||Cv(o,c,xe,d,he,me,G)||i!==null&&i.dependencies!==null&&zd(i.dependencies))?(ce||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,me,G),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,me,G)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||N===i.memoizedProps&&he===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&he===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=me),b.props=d,b.state=me,b.context=G,d=xe):(typeof b.componentDidUpdate!="function"||N===i.memoizedProps&&he===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&he===i.memoizedState||(o.flags|=1024),d=!1)}return b=d,ah(i,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&d?(o.child=xo(o,i.child,null,v),o.child=xo(o,null,c,v)):Qn(i,o,c,v),o.memoizedState=b.state,i=o.child):i=ya(i,o,v),i}function qv(i,o,c,d){return uo(),o.flags|=256,Qn(i,o,c,d),o.child}var Sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cp(i){return{baseLanes:i,cachePool:Dy()}}function Ap(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=Vs),i}function Hv(i,o,c){var d=o.pendingProps,v=!1,b=(o.flags&128)!==0,N;if((N=b)||(N=i!==null&&i.memoizedState===null?!1:(vn.current&2)!==0),N&&(v=!0,o.flags&=-129),N=(o.flags&32)!==0,o.flags&=-33,i===null){if(Ct){if(v?dr(o):hr(),(i=sn)?(i=Qb(i,ei),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ir!==null?{id:Fi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},c=Ey(i),c.return=o,o.child=c,Wn=o,sn=null)):i=null,i===null)throw rr(o);return ug(i)?o.lanes=32:o.lanes=536870912,null}var D=d.children;return d=d.fallback,v?(hr(),v=o.mode,D=rh({mode:"hidden",children:D},v),d=co(d,v,c,null),D.return=o,d.return=o,D.sibling=d,o.child=D,d=o.child,d.memoizedState=Cp(c),d.childLanes=Ap(i,N,c),o.memoizedState=Sp,Gc(null,d)):(dr(o),Ip(o,D))}var G=i.memoizedState;if(G!==null&&(D=G.dehydrated,D!==null)){if(b)o.flags&256?(dr(o),o.flags&=-257,o=Rp(i,o,c)):o.memoizedState!==null?(hr(),o.child=i.child,o.flags|=128,o=null):(hr(),D=d.fallback,v=o.mode,d=rh({mode:"visible",children:d.children},v),D=co(D,v,c,null),D.flags|=2,d.return=o,D.return=o,d.sibling=D,o.child=d,xo(o,i.child,null,c),d=o.child,d.memoizedState=Cp(c),d.childLanes=Ap(i,N,c),o.memoizedState=Sp,o=Gc(null,d));else if(dr(o),ug(D)){if(N=D.nextSibling&&D.nextSibling.dataset,N)var ce=N.dgst;N=ce,d=Error(s(419)),d.stack="",d.digest=N,kc({value:d,source:null,stack:null}),o=Rp(i,o,c)}else if(Rn||ul(i,o,c,!1),N=(c&i.childLanes)!==0,Rn||N){if(N=Zt,N!==null&&(d=hc(N,c),d!==0&&d!==G.retryLane))throw G.retryLane=d,lo(i,d),Cs(N,i,d),Np;cg(D)||ph(),o=Rp(i,o,c)}else cg(D)?(o.flags|=192,o.child=i.child,o=null):(i=G.treeContext,sn=ni(D.nextSibling),Wn=o,Ct=!0,ar=null,ei=!1,i!==null&&Sy(o,i),o=Ip(o,d.children),o.flags|=4096);return o}return v?(hr(),D=d.fallback,v=o.mode,G=i.child,ce=G.sibling,d=ha(G,{mode:"hidden",children:d.children}),d.subtreeFlags=G.subtreeFlags&65011712,ce!==null?D=ha(ce,D):(D=co(D,v,c,null),D.flags|=2),D.return=o,d.return=o,d.sibling=D,o.child=d,Gc(null,d),d=o.child,D=i.child.memoizedState,D===null?D=Cp(c):(v=D.cachePool,v!==null?(G=An._currentValue,v=v.parent!==G?{parent:G,pool:G}:v):v=Dy(),D={baseLanes:D.baseLanes|c,cachePool:v}),d.memoizedState=D,d.childLanes=Ap(i,N,c),o.memoizedState=Sp,Gc(i.child,d)):(dr(o),c=i.child,i=c.sibling,c=ha(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(N=o.deletions,N===null?(o.deletions=[i],o.flags|=16):N.push(i)),o.child=c,o.memoizedState=null,c)}function Ip(i,o){return o=rh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function rh(i,o){return i=ks(22,i,null,o),i.lanes=0,i}function Rp(i,o,c){return xo(o,i.child,null,c),i=Ip(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Gv(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Gm(i.return,o,c)}function jp(i,o,c,d,v,b){var N=i.memoizedState;N===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:v,treeForkCount:b}:(N.isBackwards=o,N.rendering=null,N.renderingStartTime=0,N.last=d,N.tail=c,N.tailMode=v,N.treeForkCount=b)}function $v(i,o,c){var d=o.pendingProps,v=d.revealOrder,b=d.tail;d=d.children;var N=vn.current,D=(N&2)!==0;if(D?(N=N&1|2,o.flags|=128):N&=1,oe(vn,N),Qn(i,o,d,c),d=Ct?Dc:0,!D&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gv(i,c,o);else if(i.tag===19)Gv(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(c=o.child,v=null;c!==null;)i=c.alternate,i!==null&&Jd(i)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),jp(o,!1,v,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&Jd(i)===null){o.child=v;break}i=v.sibling,v.sibling=c,c=v,v=i}jp(o,!0,c,null,b,d);break;case"together":jp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function ya(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),pr|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(ul(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,c=ha(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=ha(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Dp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&zd(i)))}function $C(i,o,c){switch(o.tag){case 3:Se(o,o.stateNode.containerInfo),or(o,An,i.memoizedState.cache),uo();break;case 27:case 5:ut(o);break;case 4:Se(o,o.stateNode.containerInfo);break;case 10:or(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,sp(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(dr(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Hv(i,o,c):(dr(o),i=ya(i,o,c),i!==null?i.sibling:null);dr(o);break;case 19:var v=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(ul(i,o,c,!1),d=(c&o.childLanes)!==0),v){if(d)return $v(i,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),oe(vn,vn.current),d)break;return null;case 22:return o.lanes=0,Uv(i,o,c,o.pendingProps);case 24:or(o,An,i.memoizedState.cache)}return ya(i,o,c)}function Kv(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Rn=!0;else{if(!Dp(i,c)&&(o.flags&128)===0)return Rn=!1,$C(i,o,c);Rn=(i.flags&131072)!==0}else Rn=!1,Ct&&(o.flags&1048576)!==0&&Ty(o,Dc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(i=po(o.elementType),o.type=i,typeof i=="function")Vm(i)?(d=vo(i,d),o.tag=1,o=Bv(null,o,i,d,c)):(o.tag=0,o=Tp(null,o,i,d,c));else{if(i!=null){var v=i.$$typeof;if(v===W){o.tag=11,o=Pv(null,o,i,d,c);break e}else if(v===C){o.tag=14,o=Lv(null,o,i,d,c);break e}}throw o=je(i)||i,Error(s(306,o,""))}}return o;case 0:return Tp(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,v=vo(d,o.pendingProps),Bv(i,o,d,v,c);case 3:e:{if(Se(o,o.stateNode.containerInfo),i===null)throw Error(s(387));d=o.pendingProps;var b=o.memoizedState;v=b.element,Qm(i,o),zc(o,d,null,c);var N=o.memoizedState;if(d=N.cache,or(o,An,d),d!==b.cache&&$m(o,[An],c,!0),Oc(),d=N.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:N.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=qv(i,o,d,c);break e}else if(d!==v){v=Xs(Error(s(424)),o),kc(v),o=qv(i,o,d,c);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(sn=ni(i.firstChild),Wn=o,Ct=!0,ar=null,ei=!0,c=Uy(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(uo(),d===v){o=ya(i,o,c);break e}Qn(i,o,d,c)}o=o.child}return o;case 26:return ah(i,o),i===null?(c=i_(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ct||(c=o.type,i=o.pendingProps,d=wh(Y.current).createElement(c),d[Tn]=o,d[zn]=i,Zn(d,c,i),Sn(d),o.stateNode=d):o.memoizedState=i_(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return ut(o),i===null&&Ct&&(d=o.stateNode=t_(o.type,o.pendingProps,Y.current),Wn=o,ei=!0,v=sn,br(o.type)?(dg=v,sn=ni(d.firstChild)):sn=v),Qn(i,o,o.pendingProps.children,c),ah(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Ct&&((v=d=sn)&&(d=wA(d,o.type,o.pendingProps,ei),d!==null?(o.stateNode=d,Wn=o,sn=ni(d.firstChild),ei=!1,v=!0):v=!1),v||rr(o)),ut(o),v=o.type,b=o.pendingProps,N=i!==null?i.memoizedProps:null,d=b.children,rg(v,b)?d=null:N!==null&&rg(v,N)&&(o.flags|=32),o.memoizedState!==null&&(v=ap(i,o,VC,null,null,c),ru._currentValue=v),ah(i,o),Qn(i,o,d,c),o.child;case 6:return i===null&&Ct&&((i=c=sn)&&(c=EA(c,o.pendingProps,ei),c!==null?(o.stateNode=c,Wn=o,sn=null,i=!0):i=!1),i||rr(o)),null;case 13:return Hv(i,o,c);case 4:return Se(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=xo(o,null,d,c):Qn(i,o,d,c),o.child;case 11:return Pv(i,o,o.type,o.pendingProps,c);case 7:return Qn(i,o,o.pendingProps,c),o.child;case 8:return Qn(i,o,o.pendingProps.children,c),o.child;case 12:return Qn(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,or(o,o.type,d.value),Qn(i,o,d.children,c),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,fo(o),v=Xn(v),d=d(v),o.flags|=1,Qn(i,o,d,c),o.child;case 14:return Lv(i,o,o.type,o.pendingProps,c);case 15:return Vv(i,o,o.type,o.pendingProps,c);case 19:return $v(i,o,c);case 31:return GC(i,o,c);case 22:return Uv(i,o,c,o.pendingProps);case 24:return fo(o),d=Xn(An),i===null?(v=Ym(),v===null&&(v=Zt,b=Km(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=c),v=b),o.memoizedState={parent:d,cache:v},Xm(o),or(o,An,v)):((i.lanes&c)!==0&&(Qm(i,o),zc(o,null,null,c),Oc()),v=i.memoizedState,b=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),or(o,An,d)):(d=b.cache,or(o,An,d),d!==v.cache&&$m(o,[An],c,!0))),Qn(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function va(i){i.flags|=4}function kp(i,o,c,d,v){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(bb())i.flags|=8192;else throw go=Hd,Wm}else i.flags&=-16777217}function Jv(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!c_(o))if(bb())i.flags|=8192;else throw go=Hd,Wm}function oh(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Ce():536870912,i.lanes|=o,wl|=o)}function $c(i,o){if(!Ct)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function an(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var v=i.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function KC(i,o,c){var d=o.pendingProps;switch(Fm(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(o),null;case 1:return an(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),pa(An),De(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(cl(o)?va(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,qm())),an(o),null;case 26:var v=o.type,b=o.memoizedState;return i===null?(va(o),b!==null?(an(o),Jv(o,b)):(an(o),kp(o,v,null,d,c))):b?b!==i.memoizedState?(va(o),an(o),Jv(o,b)):(an(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&va(o),an(o),kp(o,v,i,d,c)),null;case 27:if(st(o),c=Y.current,v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&va(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return an(o),null}i=ee.current,cl(o)?Cy(o):(i=t_(v,d,c),o.stateNode=i,va(o))}return an(o),null;case 5:if(st(o),v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&va(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return an(o),null}if(b=ee.current,cl(o))Cy(o);else{var N=wh(Y.current);switch(b){case 1:b=N.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=N.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=N.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=N.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?N.createElement("select",{is:d.is}):N.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?N.createElement(v,{is:d.is}):N.createElement(v)}}b[Tn]=o,b[zn]=d;e:for(N=o.child;N!==null;){if(N.tag===5||N.tag===6)b.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===o)break e;for(;N.sibling===null;){if(N.return===null||N.return===o)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}o.stateNode=b;e:switch(Zn(b,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&va(o)}}return an(o),kp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&va(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(s(166));if(i=Y.current,cl(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,v=Wn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}i[Tn]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Hb(i.nodeValue,c)),i||rr(o,!0)}else i=wh(i).createTextNode(d),i[Tn]=o,o.stateNode=i}return an(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(d=cl(o),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Tn]=o}else uo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;an(o),i=!1}else c=qm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(Ps(o),o):(Ps(o),null);if((o.flags&128)!==0)throw Error(s(558))}return an(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=cl(o),d!==null&&d.dehydrated!==null){if(i===null){if(!v)throw Error(s(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Tn]=o}else uo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;an(o),v=!1}else v=qm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Ps(o),o):(Ps(o),null)}return Ps(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==v&&(d.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),oh(o,o.updateQueue),an(o),null);case 4:return De(),i===null&&tg(o.stateNode.containerInfo),an(o),null;case 10:return pa(o.type),an(o),null;case 19:if(Z(vn),d=o.memoizedState,d===null)return an(o),null;if(v=(o.flags&128)!==0,b=d.rendering,b===null)if(v)$c(d,!1);else{if(pn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=Jd(i),b!==null){for(o.flags|=128,$c(d,!1),i=b.updateQueue,o.updateQueue=i,oh(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)wy(c,i),c=c.sibling;return oe(vn,vn.current&1|2),Ct&&fa(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&At()>hh&&(o.flags|=128,v=!0,$c(d,!1),o.lanes=4194304)}else{if(!v)if(i=Jd(b),i!==null){if(o.flags|=128,v=!0,i=i.updateQueue,o.updateQueue=i,oh(o,i),$c(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Ct)return an(o),null}else 2*At()-d.renderingStartTime>hh&&c!==536870912&&(o.flags|=128,v=!0,$c(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(i=d.last,i!==null?i.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=At(),i.sibling=null,c=vn.current,oe(vn,v?c&1|2:c&1),Ct&&fa(o,d.treeForkCount),i):(an(o),null);case 22:case 23:return Ps(o),np(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(an(o),o.subtreeFlags&6&&(o.flags|=8192)):an(o),c=o.updateQueue,c!==null&&oh(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&Z(mo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),pa(An),an(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function JC(i,o){switch(Fm(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return pa(An),De(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return st(o),null;case 31:if(o.memoizedState!==null){if(Ps(o),o.alternate===null)throw Error(s(340));uo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Ps(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));uo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Z(vn),null;case 4:return De(),null;case 10:return pa(o.type),null;case 22:case 23:return Ps(o),np(),i!==null&&Z(mo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return pa(An),null;case 25:return null;default:return null}}function Yv(i,o){switch(Fm(o),o.tag){case 3:pa(An),De();break;case 26:case 27:case 5:st(o);break;case 4:De();break;case 31:o.memoizedState!==null&&Ps(o);break;case 13:Ps(o);break;case 19:Z(vn);break;case 10:pa(o.type);break;case 22:case 23:Ps(o),np(),i!==null&&Z(mo);break;case 24:pa(An)}}function Kc(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var v=d.next;c=v;do{if((c.tag&i)===i){d=void 0;var b=c.create,N=c.inst;d=b(),N.destroy=d}c=c.next}while(c!==v)}}catch(D){Kt(o,o.return,D)}}function fr(i,o,c){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var b=v.next;d=b;do{if((d.tag&i)===i){var N=d.inst,D=N.destroy;if(D!==void 0){N.destroy=void 0,v=o;var G=c,ce=D;try{ce()}catch(xe){Kt(v,G,xe)}}}d=d.next}while(d!==b)}}catch(xe){Kt(o,o.return,xe)}}function Wv(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{zy(o,c)}catch(d){Kt(i,i.return,d)}}}function Xv(i,o,c){c.props=vo(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){Kt(i,o,d)}}function Jc(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(v){Kt(i,o,v)}}function qi(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(v){Kt(i,o,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){Kt(i,o,v)}else c.current=null}function Qv(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(v){Kt(i,i.return,v)}}function Mp(i,o,c){try{var d=i.stateNode;gA(d,i.type,c,o),d[zn]=o}catch(v){Kt(i,i.return,v)}}function Zv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&br(i.type)||i.tag===4}function Pp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&br(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lp(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=ci));else if(d!==4&&(d===27&&br(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(Lp(i,o,c),i=i.sibling;i!==null;)Lp(i,o,c),i=i.sibling}function lh(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&(d===27&&br(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(lh(i,o,c),i=i.sibling;i!==null;)lh(i,o,c),i=i.sibling}function eb(i){var o=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Zn(o,d,c),o[Tn]=i,o[zn]=c}catch(b){Kt(i,i.return,b)}}var ba=!1,jn=!1,Vp=!1,tb=typeof WeakSet=="function"?WeakSet:Set,Bn=null;function YC(i,o){if(i=i.containerInfo,ig=Ih,i=fy(i),Rm(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var v=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var N=0,D=-1,G=-1,ce=0,xe=0,be=i,he=null;t:for(;;){for(var me;be!==c||v!==0&&be.nodeType!==3||(D=N+v),be!==b||d!==0&&be.nodeType!==3||(G=N+d),be.nodeType===3&&(N+=be.nodeValue.length),(me=be.firstChild)!==null;)he=be,be=me;for(;;){if(be===i)break t;if(he===c&&++ce===v&&(D=N),he===b&&++xe===d&&(G=N),(me=be.nextSibling)!==null)break;be=he,he=be.parentNode}be=me}c=D===-1||G===-1?null:{start:D,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(ag={focusedElem:i,selectionRange:c},Ih=!1,Bn=o;Bn!==null;)if(o=Bn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Bn=i;else for(;Bn!==null;){switch(o=Bn,b=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)v=i[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=o,v=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Oe=vo(c.type,v);i=d.getSnapshotBeforeUpdate(Oe,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ke){Kt(c,c.return,Ke)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)lg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":lg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Bn=i;break}Bn=o.return}}function nb(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:wa(i,c),d&4&&Kc(5,c);break;case 1:if(wa(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(N){Kt(c,c.return,N)}else{var v=vo(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(v,o,i.__reactInternalSnapshotBeforeUpdate)}catch(N){Kt(c,c.return,N)}}d&64&&Wv(c),d&512&&Jc(c,c.return);break;case 3:if(wa(i,c),d&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{zy(i,o)}catch(N){Kt(c,c.return,N)}}break;case 27:o===null&&d&4&&eb(c);case 26:case 5:wa(i,c),o===null&&d&4&&Qv(c),d&512&&Jc(c,c.return);break;case 12:wa(i,c);break;case 31:wa(i,c),d&4&&ab(i,c);break;case 13:wa(i,c),d&4&&rb(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=iA.bind(null,c),NA(i,c))));break;case 22:if(d=c.memoizedState!==null||ba,!d){o=o!==null&&o.memoizedState!==null||jn,v=ba;var b=jn;ba=d,(jn=o)&&!b?Ea(i,c,(c.subtreeFlags&8772)!==0):wa(i,c),ba=v,jn=b}break;case 30:break;default:wa(i,c)}}function sb(i){var o=i.alternate;o!==null&&(i.alternate=null,sb(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&$o(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ln=null,Es=!1;function _a(i,o,c){for(c=c.child;c!==null;)ib(i,o,c),c=c.sibling}function ib(i,o,c){if(X&&typeof X.onCommitFiberUnmount=="function")try{X.onCommitFiberUnmount(St,c)}catch{}switch(c.tag){case 26:jn||qi(c,o),_a(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:jn||qi(c,o);var d=ln,v=Es;br(c.type)&&(ln=c.stateNode,Es=!1),_a(i,o,c),su(c.stateNode),ln=d,Es=v;break;case 5:jn||qi(c,o);case 6:if(d=ln,v=Es,ln=null,_a(i,o,c),ln=d,Es=v,ln!==null)if(Es)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(c.stateNode)}catch(b){Kt(c,o,b)}else try{ln.removeChild(c.stateNode)}catch(b){Kt(c,o,b)}break;case 18:ln!==null&&(Es?(i=ln,Wb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Rl(i)):Wb(ln,c.stateNode));break;case 4:d=ln,v=Es,ln=c.stateNode.containerInfo,Es=!0,_a(i,o,c),ln=d,Es=v;break;case 0:case 11:case 14:case 15:fr(2,c,o),jn||fr(4,c,o),_a(i,o,c);break;case 1:jn||(qi(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Xv(c,o,d)),_a(i,o,c);break;case 21:_a(i,o,c);break;case 22:jn=(d=jn)||c.memoizedState!==null,_a(i,o,c),jn=d;break;default:_a(i,o,c)}}function ab(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Rl(i)}catch(c){Kt(o,o.return,c)}}}function rb(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Rl(i)}catch(c){Kt(o,o.return,c)}}function WC(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new tb),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new tb),o;default:throw Error(s(435,i.tag))}}function ch(i,o){var c=WC(i);o.forEach(function(d){if(!c.has(d)){c.add(d);var v=aA.bind(null,i,d);d.then(v,v)}})}function Ns(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var v=c[d],b=i,N=o,D=N;e:for(;D!==null;){switch(D.tag){case 27:if(br(D.type)){ln=D.stateNode,Es=!1;break e}break;case 5:ln=D.stateNode,Es=!1;break e;case 3:case 4:ln=D.stateNode.containerInfo,Es=!0;break e}D=D.return}if(ln===null)throw Error(s(160));ib(b,N,v),ln=null,Es=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ob(o,i),o=o.sibling}var pi=null;function ob(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ns(o,i),Ts(i),d&4&&(fr(3,i,i.return),Kc(3,i),fr(5,i,i.return));break;case 1:Ns(o,i),Ts(i),d&512&&(jn||c===null||qi(c,c.return)),d&64&&ba&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var v=pi;if(Ns(o,i),Ts(i),d&512&&(jn||c===null||qi(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Ii]||b[Tn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(d),v.head.insertBefore(b,v.querySelector("head > title"))),Zn(b,d,c),b[Tn]=i,Sn(b),d=b;break e;case"link":var N=o_("link","href",v).get(d+(c.href||""));if(N){for(var D=0;D<N.length;D++)if(b=N[D],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){N.splice(D,1);break t}}b=v.createElement(d),Zn(b,d,c),v.head.appendChild(b);break;case"meta":if(N=o_("meta","content",v).get(d+(c.content||""))){for(D=0;D<N.length;D++)if(b=N[D],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){N.splice(D,1);break t}}b=v.createElement(d),Zn(b,d,c),v.head.appendChild(b);break;default:throw Error(s(468,d))}b[Tn]=i,Sn(b),d=b}i.stateNode=d}else l_(v,i.type,i.stateNode);else i.stateNode=r_(v,d,i.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?l_(v,i.type,i.stateNode):r_(v,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Mp(i,i.memoizedProps,c.memoizedProps)}break;case 27:Ns(o,i),Ts(i),d&512&&(jn||c===null||qi(c,c.return)),c!==null&&d&4&&Mp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Ns(o,i),Ts(i),d&512&&(jn||c===null||qi(c,c.return)),i.flags&32){v=i.stateNode;try{ws(v,"")}catch(Oe){Kt(i,i.return,Oe)}}d&4&&i.stateNode!=null&&(v=i.memoizedProps,Mp(i,v,c!==null?c.memoizedProps:v)),d&1024&&(Vp=!0);break;case 6:if(Ns(o,i),Ts(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Oe){Kt(i,i.return,Oe)}}break;case 3:if(Th=null,v=pi,pi=Eh(o.containerInfo),Ns(o,i),pi=v,Ts(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Rl(o.containerInfo)}catch(Oe){Kt(i,i.return,Oe)}Vp&&(Vp=!1,lb(i));break;case 4:d=pi,pi=Eh(i.stateNode.containerInfo),Ns(o,i),Ts(i),pi=d;break;case 12:Ns(o,i),Ts(i);break;case 31:Ns(o,i),Ts(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ch(i,d)));break;case 13:Ns(o,i),Ts(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(dh=At()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ch(i,d)));break;case 22:v=i.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,ce=ba,xe=jn;if(ba=ce||v,jn=xe||G,Ns(o,i),jn=xe,ba=ce,Ts(i),d&8192)e:for(o=i.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(c===null||G||ba||jn||bo(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){G=c=o;try{if(b=G.stateNode,v)N=b.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{D=G.stateNode;var be=G.memoizedProps.style,he=be!=null&&be.hasOwnProperty("display")?be.display:null;D.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Oe){Kt(G,G.return,Oe)}}}else if(o.tag===6){if(c===null){G=o;try{G.stateNode.nodeValue=v?"":G.memoizedProps}catch(Oe){Kt(G,G.return,Oe)}}}else if(o.tag===18){if(c===null){G=o;try{var me=G.stateNode;v?Xb(me,!0):Xb(G.stateNode,!1)}catch(Oe){Kt(G,G.return,Oe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ch(i,c))));break;case 19:Ns(o,i),Ts(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ch(i,d)));break;case 30:break;case 21:break;default:Ns(o,i),Ts(i)}}function Ts(i){var o=i.flags;if(o&2){try{for(var c,d=i.return;d!==null;){if(Zv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,b=Pp(i);lh(i,b,v);break;case 5:var N=c.stateNode;c.flags&32&&(ws(N,""),c.flags&=-33);var D=Pp(i);lh(i,D,N);break;case 3:case 4:var G=c.stateNode.containerInfo,ce=Pp(i);Lp(i,ce,G);break;default:throw Error(s(161))}}catch(xe){Kt(i,i.return,xe)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function lb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;lb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function wa(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)nb(i,o.alternate,o),o=o.sibling}function bo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:fr(4,o,o.return),bo(o);break;case 1:qi(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Xv(o,o.return,c),bo(o);break;case 27:su(o.stateNode);case 26:case 5:qi(o,o.return),bo(o);break;case 22:o.memoizedState===null&&bo(o);break;case 30:bo(o);break;default:bo(o)}i=i.sibling}}function Ea(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=i,b=o,N=b.flags;switch(b.tag){case 0:case 11:case 15:Ea(v,b,c),Kc(4,b);break;case 1:if(Ea(v,b,c),d=b,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ce){Kt(d,d.return,ce)}if(d=b,v=d.updateQueue,v!==null){var D=d.stateNode;try{var G=v.shared.hiddenCallbacks;if(G!==null)for(v.shared.hiddenCallbacks=null,v=0;v<G.length;v++)Oy(G[v],D)}catch(ce){Kt(d,d.return,ce)}}c&&N&64&&Wv(b),Jc(b,b.return);break;case 27:eb(b);case 26:case 5:Ea(v,b,c),c&&d===null&&N&4&&Qv(b),Jc(b,b.return);break;case 12:Ea(v,b,c);break;case 31:Ea(v,b,c),c&&N&4&&ab(v,b);break;case 13:Ea(v,b,c),c&&N&4&&rb(v,b);break;case 22:b.memoizedState===null&&Ea(v,b,c),Jc(b,b.return);break;case 30:break;default:Ea(v,b,c)}o=o.sibling}}function Up(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Mc(c))}function Op(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Mc(i))}function gi(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)cb(i,o,c,d),o=o.sibling}function cb(i,o,c,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:gi(i,o,c,d),v&2048&&Kc(9,o);break;case 1:gi(i,o,c,d);break;case 3:gi(i,o,c,d),v&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Mc(i)));break;case 12:if(v&2048){gi(i,o,c,d),i=o.stateNode;try{var b=o.memoizedProps,N=b.id,D=b.onPostCommit;typeof D=="function"&&D(N,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){Kt(o,o.return,G)}}else gi(i,o,c,d);break;case 31:gi(i,o,c,d);break;case 13:gi(i,o,c,d);break;case 23:break;case 22:b=o.stateNode,N=o.alternate,o.memoizedState!==null?b._visibility&2?gi(i,o,c,d):Yc(i,o):b._visibility&2?gi(i,o,c,d):(b._visibility|=2,vl(i,o,c,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Up(N,o);break;case 24:gi(i,o,c,d),v&2048&&Op(o.alternate,o);break;default:gi(i,o,c,d)}}function vl(i,o,c,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=i,N=o,D=c,G=d,ce=N.flags;switch(N.tag){case 0:case 11:case 15:vl(b,N,D,G,v),Kc(8,N);break;case 23:break;case 22:var xe=N.stateNode;N.memoizedState!==null?xe._visibility&2?vl(b,N,D,G,v):Yc(b,N):(xe._visibility|=2,vl(b,N,D,G,v)),v&&ce&2048&&Up(N.alternate,N);break;case 24:vl(b,N,D,G,v),v&&ce&2048&&Op(N.alternate,N);break;default:vl(b,N,D,G,v)}o=o.sibling}}function Yc(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,v=d.flags;switch(d.tag){case 22:Yc(c,d),v&2048&&Up(d.alternate,d);break;case 24:Yc(c,d),v&2048&&Op(d.alternate,d);break;default:Yc(c,d)}o=o.sibling}}var Wc=8192;function bl(i,o,c){if(i.subtreeFlags&Wc)for(i=i.child;i!==null;)ub(i,o,c),i=i.sibling}function ub(i,o,c){switch(i.tag){case 26:bl(i,o,c),i.flags&Wc&&i.memoizedState!==null&&LA(c,pi,i.memoizedState,i.memoizedProps);break;case 5:bl(i,o,c);break;case 3:case 4:var d=pi;pi=Eh(i.stateNode.containerInfo),bl(i,o,c),pi=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Wc,Wc=16777216,bl(i,o,c),Wc=d):bl(i,o,c));break;default:bl(i,o,c)}}function db(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Xc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Bn=d,fb(d,i)}db(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hb(i),i=i.sibling}function hb(i){switch(i.tag){case 0:case 11:case 15:Xc(i),i.flags&2048&&fr(9,i,i.return);break;case 3:Xc(i);break;case 12:Xc(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,uh(i)):Xc(i);break;default:Xc(i)}}function uh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Bn=d,fb(d,i)}db(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:fr(8,o,o.return),uh(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,uh(o));break;default:uh(o)}i=i.sibling}}function fb(i,o){for(;Bn!==null;){var c=Bn;switch(c.tag){case 0:case 11:case 15:fr(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Mc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Bn=d;else e:for(c=i;Bn!==null;){d=Bn;var v=d.sibling,b=d.return;if(sb(d),d===c){Bn=null;break e}if(v!==null){v.return=b,Bn=v;break e}Bn=b}}}var XC={getCacheForType:function(i){var o=Xn(An),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return Xn(An).controller.signal}},QC=typeof WeakMap=="function"?WeakMap:Map,zt=0,Zt=null,xt=null,_t=0,$t=0,Ls=null,mr=!1,_l=!1,zp=!1,Na=0,pn=0,pr=0,_o=0,Fp=0,Vs=0,wl=0,Qc=null,Ss=null,Bp=!1,dh=0,mb=0,hh=1/0,fh=null,gr=null,Ln=0,xr=null,El=null,Ta=0,qp=0,Hp=null,pb=null,Zc=0,Gp=null;function Us(){return(zt&2)!==0&&_t!==0?_t&-_t:j.T!==null?Xp():md()}function gb(){if(Vs===0)if((_t&536870912)===0||Ct){var i=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),Vs=i}else Vs=536870912;return i=Ms.current,i!==null&&(i.flags|=32),Vs}function Cs(i,o,c){(i===Zt&&($t===2||$t===9)||i.cancelPendingCommit!==null)&&(Nl(i,0),yr(i,_t,Vs,!1)),We(i,c),((zt&2)===0||i!==Zt)&&(i===Zt&&((zt&2)===0&&(_o|=c),pn===4&&yr(i,_t,Vs,!1)),Hi(i))}function xb(i,o,c){if((zt&6)!==0)throw Error(s(327));var d=!c&&(o&127)===0&&(o&i.expiredLanes)===0||bt(i,o),v=d?tA(i,o):Kp(i,o,!0),b=d;do{if(v===0){_l&&!d&&yr(i,o,0,!1);break}else{if(c=i.current.alternate,b&&!ZC(c)){v=Kp(i,o,!1),b=!1;continue}if(v===2){if(b=o,i.errorRecoveryDisabledLanes&b)var N=0;else N=i.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){o=N;e:{var D=i;v=Qc;var G=D.current.memoizedState.isDehydrated;if(G&&(Nl(D,N).flags|=256),N=Kp(D,N,!1),N!==2){if(zp&&!G){D.errorRecoveryDisabledLanes|=b,_o|=b,v=4;break e}b=Ss,Ss=v,b!==null&&(Ss===null?Ss=b:Ss.push.apply(Ss,b))}v=N}if(b=!1,v!==2)continue}}if(v===1){Nl(i,0),yr(i,o,0,!0);break}e:{switch(d=i,b=v,b){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:yr(d,o,Vs,!mr);break e;case 2:Ss=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(v=dh+300-At(),10<v)){if(yr(d,o,Vs,!mr),fn(d,0,!0)!==0)break e;Ta=o,d.timeoutHandle=Jb(yb.bind(null,d,c,Ss,fh,Bp,o,Vs,_o,wl,mr,b,"Throttled",-0,0),v);break e}yb(d,c,Ss,fh,Bp,o,Vs,_o,wl,mr,b,null,-0,0)}}break}while(!0);Hi(i)}function yb(i,o,c,d,v,b,N,D,G,ce,xe,be,he,me){if(i.timeoutHandle=-1,be=o.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ci},ub(o,b,be);var Oe=(b&62914560)===b?dh-At():(b&4194048)===b?mb-At():0;if(Oe=VA(be,Oe),Oe!==null){Ta=b,i.cancelPendingCommit=Oe(Sb.bind(null,i,o,b,c,d,v,N,D,G,xe,be,null,he,me)),yr(i,b,N,!ce);return}}Sb(i,o,b,c,d,v,N,D,G)}function ZC(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var v=c[d],b=v.getSnapshot;v=v.value;try{if(!Ds(b(),v))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function yr(i,o,c,d){o&=~Fp,o&=~_o,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var v=o;0<v;){var b=31-Te(v),N=1<<b;d[b]=-1,v&=~N}c!==0&&ft(i,c,o)}function mh(){return(zt&6)===0?(eu(0),!1):!0}function $p(){if(xt!==null){if($t===0)var i=xt.return;else i=xt,ma=ho=null,lp(i),ml=null,Lc=0,i=xt;for(;i!==null;)Yv(i.alternate,i),i=i.return;xt=null}}function Nl(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,vA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Ta=0,$p(),Zt=i,xt=c=ha(i.current,null),_t=o,$t=0,Ls=null,mr=!1,_l=bt(i,o),zp=!1,wl=Vs=Fp=_o=pr=pn=0,Ss=Qc=null,Bp=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var v=31-Te(d),b=1<<v;o|=i[v],d&=~b}return Na=o,Pd(),c}function vb(i,o){ct=null,j.H=Hc,o===fl||o===qd?(o=Py(),$t=3):o===Wm?(o=Py(),$t=4):$t=o===Np?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ls=o,xt===null&&(pn=1,sh(i,Xs(o,i.current)))}function bb(){var i=Ms.current;return i===null?!0:(_t&4194048)===_t?ti===null:(_t&62914560)===_t||(_t&536870912)!==0?i===ti:!1}function _b(){var i=j.H;return j.H=Hc,i===null?Hc:i}function wb(){var i=j.A;return j.A=XC,i}function ph(){pn=4,mr||(_t&4194048)!==_t&&Ms.current!==null||(_l=!0),(pr&134217727)===0&&(_o&134217727)===0||Zt===null||yr(Zt,_t,Vs,!1)}function Kp(i,o,c){var d=zt;zt|=2;var v=_b(),b=wb();(Zt!==i||_t!==o)&&(fh=null,Nl(i,o)),o=!1;var N=pn;e:do try{if($t!==0&&xt!==null){var D=xt,G=Ls;switch($t){case 8:$p(),N=6;break e;case 3:case 2:case 9:case 6:Ms.current===null&&(o=!0);var ce=$t;if($t=0,Ls=null,Tl(i,D,G,ce),c&&_l){N=0;break e}break;default:ce=$t,$t=0,Ls=null,Tl(i,D,G,ce)}}eA(),N=pn;break}catch(xe){vb(i,xe)}while(!0);return o&&i.shellSuspendCounter++,ma=ho=null,zt=d,j.H=v,j.A=b,xt===null&&(Zt=null,_t=0,Pd()),N}function eA(){for(;xt!==null;)Eb(xt)}function tA(i,o){var c=zt;zt|=2;var d=_b(),v=wb();Zt!==i||_t!==o?(fh=null,hh=At()+500,Nl(i,o)):_l=bt(i,o);e:do try{if($t!==0&&xt!==null){o=xt;var b=Ls;t:switch($t){case 1:$t=0,Ls=null,Tl(i,o,b,1);break;case 2:case 9:if(ky(b)){$t=0,Ls=null,Nb(o);break}o=function(){$t!==2&&$t!==9||Zt!==i||($t=7),Hi(i)},b.then(o,o);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:ky(b)?($t=0,Ls=null,Nb(o)):($t=0,Ls=null,Tl(i,o,b,7));break;case 5:var N=null;switch(xt.tag){case 26:N=xt.memoizedState;case 5:case 27:var D=xt;if(N?c_(N):D.stateNode.complete){$t=0,Ls=null;var G=D.sibling;if(G!==null)xt=G;else{var ce=D.return;ce!==null?(xt=ce,gh(ce)):xt=null}break t}}$t=0,Ls=null,Tl(i,o,b,5);break;case 6:$t=0,Ls=null,Tl(i,o,b,6);break;case 8:$p(),pn=6;break e;default:throw Error(s(462))}}nA();break}catch(xe){vb(i,xe)}while(!0);return ma=ho=null,j.H=d,j.A=v,zt=c,xt!==null?0:(Zt=null,_t=0,Pd(),pn)}function nA(){for(;xt!==null&&!tn();)Eb(xt)}function Eb(i){var o=Kv(i.alternate,i,Na);i.memoizedProps=i.pendingProps,o===null?gh(i):xt=o}function Nb(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Fv(c,o,o.pendingProps,o.type,void 0,_t);break;case 11:o=Fv(c,o,o.pendingProps,o.type.render,o.ref,_t);break;case 5:lp(o);default:Yv(c,o),o=xt=wy(o,Na),o=Kv(c,o,Na)}i.memoizedProps=i.pendingProps,o===null?gh(i):xt=o}function Tl(i,o,c,d){ma=ho=null,lp(o),ml=null,Lc=0;var v=o.return;try{if(HC(i,v,o,c,_t)){pn=1,sh(i,Xs(c,i.current)),xt=null;return}}catch(b){if(v!==null)throw xt=v,b;pn=1,sh(i,Xs(c,i.current)),xt=null;return}o.flags&32768?(Ct||d===1?i=!0:_l||(_t&536870912)!==0?i=!1:(mr=i=!0,(d===2||d===9||d===3||d===6)&&(d=Ms.current,d!==null&&d.tag===13&&(d.flags|=16384))),Tb(o,i)):gh(o)}function gh(i){var o=i;do{if((o.flags&32768)!==0){Tb(o,mr);return}i=o.return;var c=KC(o.alternate,o,Na);if(c!==null){xt=c;return}if(o=o.sibling,o!==null){xt=o;return}xt=o=i}while(o!==null);pn===0&&(pn=5)}function Tb(i,o){do{var c=JC(i.alternate,i);if(c!==null){c.flags&=32767,xt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){xt=i;return}xt=i=c}while(i!==null);pn=6,xt=null}function Sb(i,o,c,d,v,b,N,D,G){i.cancelPendingCommit=null;do xh();while(Ln!==0);if((zt&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(b=o.lanes|o.childLanes,b|=Pm,kt(i,c,b,N,D,G),i===Zt&&(xt=Zt=null,_t=0),El=o,xr=i,Ta=c,qp=b,Hp=v,pb=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,rA(et,function(){return jb(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=j.T,j.T=null,v=se.p,se.p=2,N=zt,zt|=4;try{YC(i,o,c)}finally{zt=N,se.p=v,j.T=d}}Ln=1,Cb(),Ab(),Ib()}}function Cb(){if(Ln===1){Ln=0;var i=xr,o=El,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=j.T,j.T=null;var d=se.p;se.p=2;var v=zt;zt|=4;try{ob(o,i);var b=ag,N=fy(i.containerInfo),D=b.focusedElem,G=b.selectionRange;if(N!==D&&D&&D.ownerDocument&&hy(D.ownerDocument.documentElement,D)){if(G!==null&&Rm(D)){var ce=G.start,xe=G.end;if(xe===void 0&&(xe=ce),"selectionStart"in D)D.selectionStart=ce,D.selectionEnd=Math.min(xe,D.value.length);else{var be=D.ownerDocument||document,he=be&&be.defaultView||window;if(he.getSelection){var me=he.getSelection(),Oe=D.textContent.length,Ke=Math.min(G.start,Oe),Qt=G.end===void 0?Ke:Math.min(G.end,Oe);!me.extend&&Ke>Qt&&(N=Qt,Qt=Ke,Ke=N);var ae=dy(D,Ke),Q=dy(D,Qt);if(ae&&Q&&(me.rangeCount!==1||me.anchorNode!==ae.node||me.anchorOffset!==ae.offset||me.focusNode!==Q.node||me.focusOffset!==Q.offset)){var le=be.createRange();le.setStart(ae.node,ae.offset),me.removeAllRanges(),Ke>Qt?(me.addRange(le),me.extend(Q.node,Q.offset)):(le.setEnd(Q.node,Q.offset),me.addRange(le))}}}}for(be=[],me=D;me=me.parentNode;)me.nodeType===1&&be.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<be.length;D++){var ye=be[D];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Ih=!!ig,ag=ig=null}finally{zt=v,se.p=d,j.T=c}}i.current=o,Ln=2}}function Ab(){if(Ln===2){Ln=0;var i=xr,o=El,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=j.T,j.T=null;var d=se.p;se.p=2;var v=zt;zt|=4;try{nb(i,o.alternate,o)}finally{zt=v,se.p=d,j.T=c}}Ln=3}}function Ib(){if(Ln===4||Ln===3){Ln=0,dt();var i=xr,o=El,c=Ta,d=pb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ln=5:(Ln=0,El=xr=null,Rb(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(gr=null),la(c),o=o.stateNode,X&&typeof X.onCommitFiberRoot=="function")try{X.onCommitFiberRoot(St,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=j.T,v=se.p,se.p=2,j.T=null;try{for(var b=i.onRecoverableError,N=0;N<d.length;N++){var D=d[N];b(D.value,{componentStack:D.stack})}}finally{j.T=o,se.p=v}}(Ta&3)!==0&&xh(),Hi(i),v=i.pendingLanes,(c&261930)!==0&&(v&42)!==0?i===Gp?Zc++:(Zc=0,Gp=i):Zc=0,eu(0)}}function Rb(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Mc(o)))}function xh(){return Cb(),Ab(),Ib(),jb()}function jb(){if(Ln!==5)return!1;var i=xr,o=qp;qp=0;var c=la(Ta),d=j.T,v=se.p;try{se.p=32>c?32:c,j.T=null,c=Hp,Hp=null;var b=xr,N=Ta;if(Ln=0,El=xr=null,Ta=0,(zt&6)!==0)throw Error(s(331));var D=zt;if(zt|=4,hb(b.current),cb(b,b.current,N,c),zt=D,eu(0,!1),X&&typeof X.onPostCommitFiberRoot=="function")try{X.onPostCommitFiberRoot(St,b)}catch{}return!0}finally{se.p=v,j.T=d,Rb(i,o)}}function Db(i,o,c){o=Xs(c,o),o=Ep(i.stateNode,o,2),i=ur(i,o,2),i!==null&&(We(i,2),Hi(i))}function Kt(i,o,c){if(i.tag===3)Db(i,i,c);else for(;o!==null;){if(o.tag===3){Db(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(gr===null||!gr.has(d))){i=Xs(c,i),c=kv(2),d=ur(o,c,2),d!==null&&(Mv(c,d,o,i),We(d,2),Hi(d));break}}o=o.return}}function Jp(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new QC;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(c)||(zp=!0,v.add(c),i=sA.bind(null,i,o,c),o.then(i,i))}function sA(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Zt===i&&(_t&c)===c&&(pn===4||pn===3&&(_t&62914560)===_t&&300>At()-dh?(zt&2)===0&&Nl(i,0):Fp|=c,wl===_t&&(wl=0)),Hi(i)}function kb(i,o){o===0&&(o=Ce()),i=lo(i,o),i!==null&&(We(i,o),Hi(i))}function iA(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),kb(i,c)}function aA(i,o){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,v=i.memoizedState;v!==null&&(c=v.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(o),kb(i,c)}function rA(i,o){return Re(i,o)}var yh=null,Sl=null,Yp=!1,vh=!1,Wp=!1,vr=0;function Hi(i){i!==Sl&&i.next===null&&(Sl===null?yh=Sl=i:Sl=Sl.next=i),vh=!0,Yp||(Yp=!0,lA())}function eu(i,o){if(!Wp&&vh){Wp=!0;do for(var c=!1,d=yh;d!==null;){if(i!==0){var v=d.pendingLanes;if(v===0)var b=0;else{var N=d.suspendedLanes,D=d.pingedLanes;b=(1<<31-Te(42|i)+1)-1,b&=v&~(N&~D),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Vb(d,b))}else b=_t,b=fn(d,d===Zt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||bt(d,b)||(c=!0,Vb(d,b));d=d.next}while(c);Wp=!1}}function oA(){Mb()}function Mb(){vh=Yp=!1;var i=0;vr!==0&&yA()&&(i=vr);for(var o=At(),c=null,d=yh;d!==null;){var v=d.next,b=Pb(d,o);b===0?(d.next=null,c===null?yh=v:c.next=v,v===null&&(Sl=c)):(c=d,(i!==0||(b&3)!==0)&&(vh=!0)),d=v}Ln!==0&&Ln!==5||eu(i),vr!==0&&(vr=0)}function Pb(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var N=31-Te(b),D=1<<N,G=v[N];G===-1?((D&c)===0||(D&d)!==0)&&(v[N]=ie(D,o)):G<=o&&(i.expiredLanes|=D),b&=~D}if(o=Zt,c=_t,c=fn(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===o&&($t===2||$t===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&ot(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||bt(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&ot(d),la(c)){case 2:case 8:c=Fe;break;case 32:c=et;break;case 268435456:c=pt;break;default:c=et}return d=Lb.bind(null,i),c=Re(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&ot(d),i.callbackPriority=2,i.callbackNode=null,2}function Lb(i,o){if(Ln!==0&&Ln!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(xh()&&i.callbackNode!==c)return null;var d=_t;return d=fn(i,i===Zt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(xb(i,d,o),Pb(i,At()),i.callbackNode!=null&&i.callbackNode===c?Lb.bind(null,i):null)}function Vb(i,o){if(xh())return null;xb(i,o,!0)}function lA(){bA(function(){(zt&6)!==0?Re(Le,oA):Mb()})}function Xp(){if(vr===0){var i=dl;i===0&&(i=Dt,Dt<<=1,(Dt&261888)===0&&(Dt=256)),vr=i}return vr}function Ub(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wo(""+i)}function Ob(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function cA(i,o,c,d,v){if(o==="submit"&&c&&c.stateNode===v){var b=Ub((v[zn]||null).action),N=d.submitter;N&&(o=(o=N[zn]||null)?Ub(o.formAction):N.getAttribute("formAction"),o!==null&&(b=o,N=null));var D=new Vi("action","action",null,d,v);i.push({event:D,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(vr!==0){var G=N?Ob(v,N):new FormData(v);xp(c,{pending:!0,data:G,method:v.method,action:b},null,G)}}else typeof b=="function"&&(D.preventDefault(),G=N?Ob(v,N):new FormData(v),xp(c,{pending:!0,data:G,method:v.method,action:b},b,G))},currentTarget:v}]})}}for(var Qp=0;Qp<Mm.length;Qp++){var Zp=Mm[Qp],uA=Zp.toLowerCase(),dA=Zp[0].toUpperCase()+Zp.slice(1);mi(uA,"on"+dA)}mi(gy,"onAnimationEnd"),mi(xy,"onAnimationIteration"),mi(yy,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(CC,"onTransitionRun"),mi(AC,"onTransitionStart"),mi(IC,"onTransitionCancel"),mi(vy,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function zb(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],v=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var N=d.length-1;0<=N;N--){var D=d[N],G=D.instance,ce=D.currentTarget;if(D=D.listener,G!==b&&v.isPropagationStopped())break e;b=D,v.currentTarget=ce;try{b(v)}catch(xe){Md(xe)}v.currentTarget=null,b=G}else for(N=0;N<d.length;N++){if(D=d[N],G=D.instance,ce=D.currentTarget,D=D.listener,G!==b&&v.isPropagationStopped())break e;b=D,v.currentTarget=ce;try{b(v)}catch(xe){Md(xe)}v.currentTarget=null,b=G}}}}function yt(i,o){var c=o[Go];c===void 0&&(c=o[Go]=new Set);var d=i+"__bubble";c.has(d)||(Fb(o,i,2,!1),c.add(d))}function eg(i,o,c){var d=0;o&&(d|=4),Fb(c,i,d,o)}var bh="_reactListening"+Math.random().toString(36).slice(2);function tg(i){if(!i[bh]){i[bh]=!0,fc.forEach(function(c){c!=="selectionchange"&&(hA.has(c)||eg(c,!1,i),eg(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[bh]||(o[bh]=!0,eg("selectionchange",!1,o))}}function Fb(i,o,c,d){switch(g_(o)){case 2:var v=zA;break;case 8:v=FA;break;default:v=gg}c=v.bind(null,o,c,i),v=void 0,!eo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?i.addEventListener(o,c,{capture:!0,passive:v}):i.addEventListener(o,c,!0):v!==void 0?i.addEventListener(o,c,{passive:v}):i.addEventListener(o,c,!1)}function ng(i,o,c,d,v){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var D=d.stateNode.containerInfo;if(D===v)break;if(N===4)for(N=d.return;N!==null;){var G=N.tag;if((G===3||G===4)&&N.stateNode.containerInfo===v)return;N=N.return}for(;D!==null;){if(N=Ri(D),N===null)return;if(G=N.tag,G===5||G===6||G===26||G===27){d=b=N;continue e}D=D.parentNode}}d=d.return}er(function(){var ce=b,xe=Ks(c),be=[];e:{var he=by.get(i);if(he!==void 0){var me=Vi,Oe=i;switch(i){case"keypress":if(no(c)===0)break e;case"keydown":case"keyup":me=jd;break;case"focusin":Oe="focus",me=io;break;case"focusout":Oe="blur",me=io;break;case"beforeblur":case"afterblur":me=io;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=E;break;case gy:case xy:case yy:me=Nd;break;case vy:me=V;break;case"scroll":case"scrollend":me=Tc;break;case"wheel":me=fe;break;case"copy":case"cut":case"paste":me=Td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=da;break;case"toggle":case"beforetoggle":me=lt}var Ke=(o&4)!==0,Qt=!Ke&&(i==="scroll"||i==="scrollend"),ae=Ke?he!==null?he+"Capture":null:he;Ke=[];for(var Q=ce,le;Q!==null;){var ye=Q;if(le=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||le===null||ae===null||(ye=ui(Q,ae),ye!=null&&Ke.push(nu(Q,ye,le))),Qt)break;Q=Q.return}0<Ke.length&&(he=new me(he,Oe,null,c,xe),be.push({event:he,listeners:Ke}))}}if((o&7)===0){e:{if(he=i==="mouseover"||i==="pointerover",me=i==="mouseout"||i==="pointerout",he&&c!==wc&&(Oe=c.relatedTarget||c.fromElement)&&(Ri(Oe)||Oe[Ai]))break e;if((me||he)&&(he=xe.window===xe?xe:(he=xe.ownerDocument)?he.defaultView||he.parentWindow:window,me?(Oe=c.relatedTarget||c.toElement,me=ce,Oe=Oe?Ri(Oe):null,Oe!==null&&(Qt=l(Oe),Ke=Oe.tag,Oe!==Qt||Ke!==5&&Ke!==27&&Ke!==6)&&(Oe=null)):(me=null,Oe=ce),me!==Oe)){if(Ke=Sc,ye="onMouseLeave",ae="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(Ke=da,ye="onPointerLeave",ae="onPointerEnter",Q="pointer"),Qt=me==null?he:Rs(me),le=Oe==null?he:Rs(Oe),he=new Ke(ye,Q+"leave",me,c,xe),he.target=Qt,he.relatedTarget=le,ye=null,Ri(xe)===ce&&(Ke=new Ke(ae,Q+"enter",Oe,c,xe),Ke.target=le,Ke.relatedTarget=Qt,ye=Ke),Qt=ye,me&&Oe)t:{for(Ke=fA,ae=me,Q=Oe,le=0,ye=ae;ye;ye=Ke(ye))le++;ye=0;for(var qe=Q;qe;qe=Ke(qe))ye++;for(;0<le-ye;)ae=Ke(ae),le--;for(;0<ye-le;)Q=Ke(Q),ye--;for(;le--;){if(ae===Q||Q!==null&&ae===Q.alternate){Ke=ae;break t}ae=Ke(ae),Q=Ke(Q)}Ke=null}else Ke=null;me!==null&&Bb(be,he,me,Ke,!1),Oe!==null&&Qt!==null&&Bb(be,Qt,Oe,Ke,!0)}}e:{if(he=ce?Rs(ce):window,me=he.nodeName&&he.nodeName.toLowerCase(),me==="select"||me==="input"&&he.type==="file")var Mt=ay;else if(sy(he))if(ry)Mt=NC;else{Mt=wC;var Be=_C}else me=he.nodeName,!me||me.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ce&&Yo(ce.elementType)&&(Mt=ay):Mt=EC;if(Mt&&(Mt=Mt(i,ce))){iy(be,Mt,c,xe);break e}Be&&Be(i,he,ce),i==="focusout"&&ce&&he.type==="number"&&ce.memoizedProps.value!=null&&vc(he,"number",he.value)}switch(Be=ce?Rs(ce):window,i){case"focusin":(sy(Be)||Be.contentEditable==="true")&&(sl=Be,jm=ce,jc=null);break;case"focusout":jc=jm=sl=null;break;case"mousedown":Dm=!0;break;case"contextmenu":case"mouseup":case"dragend":Dm=!1,my(be,c,xe);break;case"selectionchange":if(SC)break;case"keydown":case"keyup":my(be,c,xe)}var ht;if(Ot)e:{switch(i){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else nl?ao(i,c)&&(wt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(wt="onCompositionStart");wt&&(zi&&c.locale!=="ko"&&(nl||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&nl&&(ht=Nc()):(Li=xe,Ec="value"in Li?Li.value:Li.textContent,nl=!0)),Be=_h(ce,wt),0<Be.length&&(wt=new Oi(wt,i,null,c,xe),be.push({event:wt,listeners:Be}),ht?wt.data=ht:(ht=tl(c),ht!==null&&(wt.data=ht)))),(ht=Ys?xC(i,c):yC(i,c))&&(wt=_h(ce,"onBeforeInput"),0<wt.length&&(Be=new Oi("onBeforeInput","beforeinput",null,c,xe),be.push({event:Be,listeners:wt}),Be.data=ht)),cA(be,i,ce,c,xe)}zb(be,o)})}function nu(i,o,c){return{instance:i,listener:o,currentTarget:c}}function _h(i,o){for(var c=o+"Capture",d=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=ui(i,c),v!=null&&d.unshift(nu(i,v,b)),v=ui(i,o),v!=null&&d.push(nu(i,v,b))),i.tag===3)return d;i=i.return}return[]}function fA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Bb(i,o,c,d,v){for(var b=o._reactName,N=[];c!==null&&c!==d;){var D=c,G=D.alternate,ce=D.stateNode;if(D=D.tag,G!==null&&G===d)break;D!==5&&D!==26&&D!==27||ce===null||(G=ce,v?(ce=ui(c,b),ce!=null&&N.unshift(nu(c,ce,G))):v||(ce=ui(c,b),ce!=null&&N.push(nu(c,ce,G)))),c=c.return}N.length!==0&&i.push({event:o,listeners:N})}var mA=/\r\n?/g,pA=/\u0000|\uFFFD/g;function qb(i){return(typeof i=="string"?i:""+i).replace(mA,`
`).replace(pA,"")}function Hb(i,o){return o=qb(o),qb(i)===o}function Xt(i,o,c,d,v,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||ws(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&ws(i,""+d);break;case"className":js(i,"class",d);break;case"tabIndex":js(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":js(i,c,d);break;case"style":_c(i,d,b);break;case"data":if(o!=="object"){js(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Wo(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&Xt(i,o,"name",v.name,v,null),Xt(i,o,"formEncType",v.formEncType,v,null),Xt(i,o,"formMethod",v.formMethod,v,null),Xt(i,o,"formTarget",v.formTarget,v,null)):(Xt(i,o,"encType",v.encType,v,null),Xt(i,o,"method",v.method,v,null),Xt(i,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Wo(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=ci);break;case"onScroll":d!=null&&yt("scroll",i);break;case"onScrollEnd":d!=null&&yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=Wo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":yt("beforetoggle",i),yt("toggle",i),Ko(i,"popover",d);break;case"xlinkActuate":Cn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Cn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Cn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Cn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Cn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Cn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Cn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Cn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Cn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ko(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=_d.get(c)||c,Ko(i,c,d))}}function sg(i,o,c,d,v,b){switch(c){case"style":_c(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?ws(i,d):(typeof d=="number"||typeof d=="bigint")&&ws(i,""+d);break;case"onScroll":d!=null&&yt("scroll",i);break;case"onScrollEnd":d!=null&&yt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),o=c.slice(2,v?c.length-7:void 0),b=i[zn]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(o,b,v),typeof d=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,v);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):Ko(i,c,d)}}}function Zn(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",i),yt("load",i);var d=!1,v=!1,b;for(b in c)if(c.hasOwnProperty(b)){var N=c[b];if(N!=null)switch(b){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Xt(i,o,b,N,c,null)}}v&&Xt(i,o,"srcSet",c.srcSet,c,null),d&&Xt(i,o,"src",c.src,c,null);return;case"input":yt("invalid",i);var D=b=N=v=null,G=null,ce=null;for(d in c)if(c.hasOwnProperty(d)){var xe=c[d];if(xe!=null)switch(d){case"name":v=xe;break;case"type":N=xe;break;case"checked":G=xe;break;case"defaultChecked":ce=xe;break;case"value":b=xe;break;case"defaultValue":D=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(s(137,o));break;default:Xt(i,o,d,xe,c,null)}}yd(i,b,D,G,ce,N,v,!1);return;case"select":yt("invalid",i),d=N=b=null;for(v in c)if(c.hasOwnProperty(v)&&(D=c[v],D!=null))switch(v){case"value":b=D;break;case"defaultValue":N=D;break;case"multiple":d=D;default:Xt(i,o,v,D,c,null)}o=b,c=N,i.multiple=!!d,o!=null?Wa(i,!!d,o,!1):c!=null&&Wa(i,!!d,c,!0);return;case"textarea":yt("invalid",i),b=v=d=null;for(N in c)if(c.hasOwnProperty(N)&&(D=c[N],D!=null))switch(N){case"value":d=D;break;case"defaultValue":v=D;break;case"children":b=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:Xt(i,o,N,D,c,null)}Xa(i,d,v,b);return;case"option":for(G in c)if(c.hasOwnProperty(G)&&(d=c[G],d!=null))switch(G){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Xt(i,o,G,d,c,null)}return;case"dialog":yt("beforetoggle",i),yt("toggle",i),yt("cancel",i),yt("close",i);break;case"iframe":case"object":yt("load",i);break;case"video":case"audio":for(d=0;d<tu.length;d++)yt(tu[d],i);break;case"image":yt("error",i),yt("load",i);break;case"details":yt("toggle",i);break;case"embed":case"source":case"link":yt("error",i),yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in c)if(c.hasOwnProperty(ce)&&(d=c[ce],d!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Xt(i,o,ce,d,c,null)}return;default:if(Yo(o)){for(xe in c)c.hasOwnProperty(xe)&&(d=c[xe],d!==void 0&&sg(i,o,xe,d,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(d=c[D],d!=null&&Xt(i,o,D,d,c,null))}function gA(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,N=null,D=null,G=null,ce=null,xe=null;for(me in c){var be=c[me];if(c.hasOwnProperty(me)&&be!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":G=be;default:d.hasOwnProperty(me)||Xt(i,o,me,null,d,be)}}for(var he in d){var me=d[he];if(be=c[he],d.hasOwnProperty(he)&&(me!=null||be!=null))switch(he){case"type":b=me;break;case"name":v=me;break;case"checked":ce=me;break;case"defaultChecked":xe=me;break;case"value":N=me;break;case"defaultValue":D=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,o));break;default:me!==be&&Xt(i,o,he,me,d,be)}}Jo(i,N,D,G,ce,xe,b,v);return;case"select":me=N=D=he=null;for(b in c)if(G=c[b],c.hasOwnProperty(b)&&G!=null)switch(b){case"value":break;case"multiple":me=G;default:d.hasOwnProperty(b)||Xt(i,o,b,null,d,G)}for(v in d)if(b=d[v],G=c[v],d.hasOwnProperty(v)&&(b!=null||G!=null))switch(v){case"value":he=b;break;case"defaultValue":D=b;break;case"multiple":N=b;default:b!==G&&Xt(i,o,v,b,d,G)}o=D,c=N,d=me,he!=null?Wa(i,!!c,he,!1):!!d!=!!c&&(o!=null?Wa(i,!!c,o,!0):Wa(i,!!c,c?[]:"",!1));return;case"textarea":me=he=null;for(D in c)if(v=c[D],c.hasOwnProperty(D)&&v!=null&&!d.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Xt(i,o,D,null,d,v)}for(N in d)if(v=d[N],b=c[N],d.hasOwnProperty(N)&&(v!=null||b!=null))switch(N){case"value":he=v;break;case"defaultValue":me=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==b&&Xt(i,o,N,v,d,b)}vd(i,he,me);return;case"option":for(var Oe in c)if(he=c[Oe],c.hasOwnProperty(Oe)&&he!=null&&!d.hasOwnProperty(Oe))switch(Oe){case"selected":i.selected=!1;break;default:Xt(i,o,Oe,null,d,he)}for(G in d)if(he=d[G],me=c[G],d.hasOwnProperty(G)&&he!==me&&(he!=null||me!=null))switch(G){case"selected":i.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:Xt(i,o,G,he,d,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in c)he=c[Ke],c.hasOwnProperty(Ke)&&he!=null&&!d.hasOwnProperty(Ke)&&Xt(i,o,Ke,null,d,he);for(ce in d)if(he=d[ce],me=c[ce],d.hasOwnProperty(ce)&&he!==me&&(he!=null||me!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,o));break;default:Xt(i,o,ce,he,d,me)}return;default:if(Yo(o)){for(var Qt in c)he=c[Qt],c.hasOwnProperty(Qt)&&he!==void 0&&!d.hasOwnProperty(Qt)&&sg(i,o,Qt,void 0,d,he);for(xe in d)he=d[xe],me=c[xe],!d.hasOwnProperty(xe)||he===me||he===void 0&&me===void 0||sg(i,o,xe,he,d,me);return}}for(var ae in c)he=c[ae],c.hasOwnProperty(ae)&&he!=null&&!d.hasOwnProperty(ae)&&Xt(i,o,ae,null,d,he);for(be in d)he=d[be],me=c[be],!d.hasOwnProperty(be)||he===me||he==null&&me==null||Xt(i,o,be,he,d,me)}function Gb(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var v=c[d],b=v.transferSize,N=v.initiatorType,D=v.duration;if(b&&D&&Gb(N)){for(N=0,D=v.responseEnd,d+=1;d<c.length;d++){var G=c[d],ce=G.startTime;if(ce>D)break;var xe=G.transferSize,be=G.initiatorType;xe&&Gb(be)&&(G=G.responseEnd,N+=xe*(G<D?1:(D-ce)/(G-ce)))}if(--d,o+=8*(b+N)/(v.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ig=null,ag=null;function wh(i){return i.nodeType===9?i:i.ownerDocument}function $b(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kb(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function rg(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var og=null;function yA(){var i=window.event;return i&&i.type==="popstate"?i===og?!1:(og=i,!0):(og=null,!1)}var Jb=typeof setTimeout=="function"?setTimeout:void 0,vA=typeof clearTimeout=="function"?clearTimeout:void 0,Yb=typeof Promise=="function"?Promise:void 0,bA=typeof queueMicrotask=="function"?queueMicrotask:typeof Yb<"u"?function(i){return Yb.resolve(null).then(i).catch(_A)}:Jb;function _A(i){setTimeout(function(){throw i})}function br(i){return i==="head"}function Wb(i,o){var c=o,d=0;do{var v=c.nextSibling;if(i.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(v),Rl(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")su(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,su(c);for(var b=c.firstChild;b;){var N=b.nextSibling,D=b.nodeName;b[Ii]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=N}}else c==="body"&&su(i.ownerDocument.body);c=v}while(c);Rl(o)}function Xb(i,o){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function lg(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":lg(c),$o(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function wA(i,o,c,d){for(;i.nodeType===1;){var v=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ii])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=ni(i.nextSibling),i===null)break}return null}function EA(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=ni(i.nextSibling),i===null))return null;return i}function Qb(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=ni(i.nextSibling),i===null))return null;return i}function cg(i){return i.data==="$?"||i.data==="$~"}function ug(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function NA(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function ni(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var dg=null;function Zb(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return ni(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function e_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function t_(i,o,c){switch(o=wh(c),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function su(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);$o(i)}var si=new Map,n_=new Set;function Eh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Sa=se.d;se.d={f:TA,r:SA,D:CA,C:AA,L:IA,m:RA,X:DA,S:jA,M:kA};function TA(){var i=Sa.f(),o=mh();return i||o}function SA(i){var o=$s(i);o!==null&&o.tag===5&&o.type==="form"?vv(o):Sa.r(i)}var Cl=typeof document>"u"?null:document;function s_(i,o,c){var d=Cl;if(d&&typeof o=="string"&&o){var v=_s(o);v='link[rel="'+i+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),n_.has(v)||(n_.add(v),i={rel:i,crossOrigin:c,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),Zn(o,"link",i),Sn(o),d.head.appendChild(o)))}}function CA(i){Sa.D(i),s_("dns-prefetch",i,null)}function AA(i,o){Sa.C(i,o),s_("preconnect",i,o)}function IA(i,o,c){Sa.L(i,o,c);var d=Cl;if(d&&i&&o){var v='link[rel="preload"][as="'+_s(o)+'"]';o==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+_s(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+_s(c.imageSizes)+'"]')):v+='[href="'+_s(i)+'"]';var b=v;switch(o){case"style":b=Al(i);break;case"script":b=Il(i)}si.has(b)||(i=_({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),si.set(b,i),d.querySelector(v)!==null||o==="style"&&d.querySelector(iu(b))||o==="script"&&d.querySelector(au(b))||(o=d.createElement("link"),Zn(o,"link",i),Sn(o),d.head.appendChild(o)))}}function RA(i,o){Sa.m(i,o);var c=Cl;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+_s(d)+'"][href="'+_s(i)+'"]',b=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Il(i)}if(!si.has(b)&&(i=_({rel:"modulepreload",href:i},o),si.set(b,i),c.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(au(b)))return}d=c.createElement("link"),Zn(d,"link",i),Sn(d),c.head.appendChild(d)}}}function jA(i,o,c){Sa.S(i,o,c);var d=Cl;if(d&&i){var v=ji(d).hoistableStyles,b=Al(i);o=o||"default";var N=v.get(b);if(!N){var D={loading:0,preload:null};if(N=d.querySelector(iu(b)))D.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":o},c),(c=si.get(b))&&hg(i,c);var G=N=d.createElement("link");Sn(G),Zn(G,"link",i),G._p=new Promise(function(ce,xe){G.onload=ce,G.onerror=xe}),G.addEventListener("load",function(){D.loading|=1}),G.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Nh(N,o,d)}N={type:"stylesheet",instance:N,count:1,state:D},v.set(b,N)}}}function DA(i,o){Sa.X(i,o);var c=Cl;if(c&&i){var d=ji(c).hoistableScripts,v=Il(i),b=d.get(v);b||(b=c.querySelector(au(v)),b||(i=_({src:i,async:!0},o),(o=si.get(v))&&fg(i,o),b=c.createElement("script"),Sn(b),Zn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function kA(i,o){Sa.M(i,o);var c=Cl;if(c&&i){var d=ji(c).hoistableScripts,v=Il(i),b=d.get(v);b||(b=c.querySelector(au(v)),b||(i=_({src:i,async:!0,type:"module"},o),(o=si.get(v))&&fg(i,o),b=c.createElement("script"),Sn(b),Zn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function i_(i,o,c,d){var v=(v=Y.current)?Eh(v):null;if(!v)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Al(c.href),c=ji(v).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Al(c.href);var b=ji(v).hoistableStyles,N=b.get(i);if(N||(v=v.ownerDocument||v,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,N),(b=v.querySelector(iu(i)))&&!b._p&&(N.instance=b,N.state.loading=5),si.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},si.set(i,c),b||MA(v,i,c,N.state))),o&&d===null)throw Error(s(528,""));return N}if(o&&d!==null)throw Error(s(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Il(c),c=ji(v).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Al(i){return'href="'+_s(i)+'"'}function iu(i){return'link[rel="stylesheet"]['+i+"]"}function a_(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function MA(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Zn(o,"link",c),Sn(o),i.head.appendChild(o))}function Il(i){return'[src="'+_s(i)+'"]'}function au(i){return"script[async]"+i}function r_(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+_s(c.href)+'"]');if(d)return o.instance=d,Sn(d),d;var v=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Sn(d),Zn(d,"style",v),Nh(d,c.precedence,i),o.instance=d;case"stylesheet":v=Al(c.href);var b=i.querySelector(iu(v));if(b)return o.state.loading|=4,o.instance=b,Sn(b),b;d=a_(c),(v=si.get(v))&&hg(d,v),b=(i.ownerDocument||i).createElement("link"),Sn(b);var N=b;return N._p=new Promise(function(D,G){N.onload=D,N.onerror=G}),Zn(b,"link",d),o.state.loading|=4,Nh(b,c.precedence,i),o.instance=b;case"script":return b=Il(c.src),(v=i.querySelector(au(b)))?(o.instance=v,Sn(v),v):(d=c,(v=si.get(b))&&(d=_({},c),fg(d,v)),i=i.ownerDocument||i,v=i.createElement("script"),Sn(v),Zn(v,"link",d),i.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Nh(d,c.precedence,i));return o.instance}function Nh(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,b=v,N=0;N<d.length;N++){var D=d[N];if(D.dataset.precedence===o)b=D;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function hg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function fg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Th=null;function o_(i,o,c){if(Th===null){var d=new Map,v=Th=new Map;v.set(c,d)}else v=Th,d=v.get(c),d||(d=new Map,v.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),v=0;v<c.length;v++){var b=c[v];if(!(b[Ii]||b[Tn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var N=b.getAttribute(o)||"";N=i+N;var D=d.get(N);D?D.push(b):d.set(N,[b])}}return d}function l_(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function PA(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function c_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function LA(i,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Al(d.href),b=o.querySelector(iu(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Sh.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=b,Sn(b);return}b=o.ownerDocument||o,d=a_(d),(v=si.get(v))&&hg(d,v),b=b.createElement("link"),Sn(b);var N=b;N._p=new Promise(function(D,G){N.onload=D,N.onerror=G}),Zn(b,"link",d),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Sh.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var mg=0;function VA(i,o){return i.stylesheets&&i.count===0&&Ah(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Ah(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+o);0<i.imgBytes&&mg===0&&(mg=62500*xA());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ah(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>mg?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function Sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ah(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ch=null;function Ah(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ch=new Map,o.forEach(UA,i),Ch=null,Sh.call(i))}function UA(i,o){if(!(o.state.loading&4)){var c=Ch.get(i);if(c)var d=c.get(null);else{c=new Map,Ch.set(i,c);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var N=v[b];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(c.set(N.dataset.precedence,N),d=N)}d&&c.set(null,d)}v=o.instance,N=v.getAttribute("data-precedence"),b=c.get(N)||d,b===d&&c.set(null,v),c.set(N,v),this.count++,d=Sh.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),o.state.loading|=4}}var ru={$$typeof:P,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function OA(i,o,c,d,v,b,N,D,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function u_(i,o,c,d,v,b,N,D,G,ce,xe,be){return i=new OA(i,o,c,N,G,ce,xe,be,D),o=1,b===!0&&(o|=24),b=ks(3,null,null,o),i.current=b,b.stateNode=i,o=Km(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},Xm(b),i}function d_(i){return i?(i=rl,i):rl}function h_(i,o,c,d,v,b){v=d_(v),d.context===null?d.context=v:d.pendingContext=v,d=cr(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=ur(i,d,o),c!==null&&(Cs(c,i,o),Uc(c,i,o))}function f_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function pg(i,o){f_(i,o),(i=i.alternate)&&f_(i,o)}function m_(i){if(i.tag===13||i.tag===31){var o=lo(i,67108864);o!==null&&Cs(o,i,67108864),pg(i,67108864)}}function p_(i){if(i.tag===13||i.tag===31){var o=Us();o=Wr(o);var c=lo(i,o);c!==null&&Cs(c,i,o),pg(i,o)}}var Ih=!0;function zA(i,o,c,d){var v=j.T;j.T=null;var b=se.p;try{se.p=2,gg(i,o,c,d)}finally{se.p=b,j.T=v}}function FA(i,o,c,d){var v=j.T;j.T=null;var b=se.p;try{se.p=8,gg(i,o,c,d)}finally{se.p=b,j.T=v}}function gg(i,o,c,d){if(Ih){var v=xg(d);if(v===null)ng(i,o,d,Rh,c),x_(i,d);else if(qA(v,i,o,c,d))d.stopPropagation();else if(x_(i,d),o&4&&-1<BA.indexOf(i)){for(;v!==null;){var b=$s(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var N=xn(b.pendingLanes);if(N!==0){var D=b;for(D.pendingLanes|=2,D.entangledLanes|=2;N;){var G=1<<31-Te(N);D.entanglements[1]|=G,N&=~G}Hi(b),(zt&6)===0&&(hh=At()+500,eu(0))}}break;case 31:case 13:D=lo(b,2),D!==null&&Cs(D,b,2),mh(),pg(b,2)}if(b=xg(d),b===null&&ng(i,o,d,Rh,c),b===v)break;v=b}v!==null&&d.stopPropagation()}else ng(i,o,d,null,c)}}function xg(i){return i=Ks(i),yg(i)}var Rh=null;function yg(i){if(Rh=null,i=Ri(i),i!==null){var o=l(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=u(o),i!==null)return i;i=null}else if(c===31){if(i=h(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Rh=i,null}function g_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case Le:return 2;case Fe:return 8;case et:case Xe:return 32;case pt:return 268435456;default:return 32}default:return 32}}var vg=!1,_r=null,wr=null,Er=null,ou=new Map,lu=new Map,Nr=[],BA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x_(i,o){switch(i){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":ou.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(o.pointerId)}}function cu(i,o,c,d,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[v]},o!==null&&(o=$s(o),o!==null&&m_(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function qA(i,o,c,d,v){switch(o){case"focusin":return _r=cu(_r,i,o,c,d,v),!0;case"dragenter":return wr=cu(wr,i,o,c,d,v),!0;case"mouseover":return Er=cu(Er,i,o,c,d,v),!0;case"pointerover":var b=v.pointerId;return ou.set(b,cu(ou.get(b)||null,i,o,c,d,v)),!0;case"gotpointercapture":return b=v.pointerId,lu.set(b,cu(lu.get(b)||null,i,o,c,d,v)),!0}return!1}function y_(i){var o=Ri(i.target);if(o!==null){var c=l(o);if(c!==null){if(o=c.tag,o===13){if(o=u(c),o!==null){i.blockedOn=o,oi(i.priority,function(){p_(c)});return}}else if(o===31){if(o=h(c),o!==null){i.blockedOn=o,oi(i.priority,function(){p_(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function jh(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=xg(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);wc=d,c.target.dispatchEvent(d),wc=null}else return o=$s(c),o!==null&&m_(o),i.blockedOn=c,!1;o.shift()}return!0}function v_(i,o,c){jh(i)&&c.delete(o)}function HA(){vg=!1,_r!==null&&jh(_r)&&(_r=null),wr!==null&&jh(wr)&&(wr=null),Er!==null&&jh(Er)&&(Er=null),ou.forEach(v_),lu.forEach(v_)}function Dh(i,o){i.blockedOn===o&&(i.blockedOn=null,vg||(vg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,HA)))}var kh=null;function b_(i){kh!==i&&(kh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kh===i&&(kh=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],v=i[o+2];if(typeof d!="function"){if(yg(d||c)===null)continue;break}var b=$s(c);b!==null&&(i.splice(o,3),o-=3,xp(b,{pending:!0,data:v,method:c.method,action:d},d,v))}}))}function Rl(i){function o(G){return Dh(G,i)}_r!==null&&Dh(_r,i),wr!==null&&Dh(wr,i),Er!==null&&Dh(Er,i),ou.forEach(o),lu.forEach(o);for(var c=0;c<Nr.length;c++){var d=Nr[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Nr.length&&(c=Nr[0],c.blockedOn===null);)y_(c),c.blockedOn===null&&Nr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var v=c[d],b=c[d+1],N=v[zn]||null;if(typeof b=="function")N||b_(c);else if(N){var D=null;if(b&&b.hasAttribute("formAction")){if(v=b,N=b[zn]||null)D=N.formAction;else if(yg(v)!==null)continue}else D=N.action;typeof D=="function"?c[d+1]=D:(c.splice(d,3),d-=3),b_(c)}}}function __(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(N){return v=N})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function bg(i){this._internalRoot=i}Mh.prototype.render=bg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var c=o.current,d=Us();h_(c,d,i,o,null,null)},Mh.prototype.unmount=bg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;h_(i.current,2,null,i,null,null),mh(),o[Ai]=null}};function Mh(i){this._internalRoot=i}Mh.prototype.unstable_scheduleHydration=function(i){if(i){var o=md();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Nr.length&&o!==0&&o<Nr[c].priority;c++);Nr.splice(c,0,i),c===0&&y_(i)}};var w_=e.version;if(w_!=="19.2.3")throw Error(s(527,w_,"19.2.3"));se.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(o),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var GA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{St=Ph.inject(GA),X=Ph}catch{}}return du.createRoot=function(i,o){if(!a(i))throw Error(s(299));var c=!1,d="",v=Iv,b=Rv,N=jv;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError)),o=u_(i,1,!1,null,null,c,d,null,v,b,N,__),i[Ai]=o.current,tg(i),new bg(o)},du.hydrateRoot=function(i,o,c){if(!a(i))throw Error(s(299));var d=!1,v="",b=Iv,N=Rv,D=jv,G=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(G=c.formState)),o=u_(i,1,!0,o,c??null,d,v,G,b,N,D,__),o.context=d_(null),c=o.current,d=Us(),d=Wr(d),v=cr(d),v.callback=null,ur(c,v,d),c=d,o.current.lanes=c,We(o,c),Hi(o),i[Ai]=o.current,tg(i),new Mh(o)},du.version="19.2.3",du}var D_;function sI(){if(D_)return Eg.exports;D_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Eg.exports=nI(),Eg.exports}var iI=sI();/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var k_="popstate";function aI(t={}){function e(a,l){let{pathname:u="/",search:h="",hash:m=""}=Po(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),$g("",{pathname:u,search:h,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let u=a.document.querySelector("base"),h="";if(u&&u.getAttribute("href")){let m=a.location.href,f=m.indexOf("#");h=f===-1?m:m.slice(0,f)}return h+"#"+(typeof l=="string"?l:ku(l))}function s(a,l){qs(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return oI(e,n,s,t)}function cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rI(){return Math.random().toString(36).substring(2,10)}function M_(t,e){return{usr:t.state,key:t.key,idx:e}}function $g(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Po(e):e,state:n,key:e&&e.key||s||rI()}}function ku({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Po(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function oI(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,u=a.history,h="POP",m=null,f=y();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function y(){return(u.state||{idx:null}).idx}function _(){h="POP";let k=y(),q=k==null?null:k-f;f=k,m&&m({action:h,location:z.location,delta:q})}function w(k,q){h="PUSH";let H=$g(z.location,k,q);n&&n(H,k),f=y()+1;let P=M_(H,f),W=z.createHref(H);try{u.pushState(P,"",W)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;a.location.assign(W)}l&&m&&m({action:h,location:z.location,delta:1})}function T(k,q){h="REPLACE";let H=$g(z.location,k,q);n&&n(H,k),f=y();let P=M_(H,f),W=z.createHref(H);u.replaceState(P,"",W),l&&m&&m({action:h,location:z.location,delta:0})}function M(k){return lI(k)}let z={get action(){return h},get location(){return t(a,u)},listen(k){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(k_,_),m=k,()=>{a.removeEventListener(k_,_),m=null}},createHref(k){return e(a,k)},createURL:M,encodeLocation(k){let q=M(k);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:w,replace:T,go(k){return u.go(k)}};return z}function lI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),cn(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:ku(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function oN(t,e,n="/"){return cI(t,e,n,!1)}function cI(t,e,n,s){let a=typeof e=="string"?Po(e):e,l=La(a.pathname||"/",n);if(l==null)return null;let u=lN(t);uI(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let f=_I(l);h=vI(u[m],f,s)}return h}function lN(t,e=[],n=[],s="",a=!1){let l=(u,h,m=a,f)=>{let y={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&m)return;cn(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let _=Ia([s,y.relativePath]),w=n.concat(y);u.children&&u.children.length>0&&(cn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),lN(u.children,e,w,_,m)),!(u.path==null&&!u.index)&&e.push({path:_,score:xI(_,u.index),routesMeta:w})};return t.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))l(u,h);else for(let f of cN(u.path))l(u,h,!0,f)}),e}function cN(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let u=cN(s.join("/")),h=[];return h.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&h.push(...u),h.map(m=>t.startsWith("/")&&m===""?"/":m)}function uI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yI(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var dI=/^:[\w-]+$/,hI=3,fI=2,mI=1,pI=10,gI=-2,P_=t=>t==="*";function xI(t,e){let n=t.split("/"),s=n.length;return n.some(P_)&&(s+=gI),e&&(s+=fI),n.filter(a=>!P_(a)).reduce((a,l)=>a+(dI.test(l)?hI:l===""?mI:pI),s)}function yI(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function vI(t,e,n=!1){let{routesMeta:s}=t,a={},l="/",u=[];for(let h=0;h<s.length;++h){let m=s[h],f=h===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=uf({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},y),w=m.route;if(!_&&f&&n&&!s[s.length-1].route.index&&(_=uf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!_)return null;Object.assign(a,_.params),u.push({params:a,pathname:Ia([l,_.pathname]),pathnameBase:TI(Ia([l,_.pathnameBase])),route:w}),_.pathnameBase!=="/"&&(l=Ia([l,_.pathnameBase]))}return u}function uf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=bI(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((f,{paramName:y,isOptional:_},w)=>{if(y==="*"){let M=h[w]||"";u=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const T=h[w];return _&&!T?f[y]=void 0:f[y]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:u,pattern:t}}function bI(t,e=!1,n=!0){qs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(s.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function _I(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function La(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var uN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wI=t=>uN.test(t);function EI(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Po(t):t,l;if(n)if(wI(n))l=n;else{if(n.includes("//")){let u=n;n=n.replace(/\/\/+/g,"/"),qs(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${n}`)}n.startsWith("/")?l=L_(n.substring(1),"/"):l=L_(n,e)}else l=e;return{pathname:l,search:SI(s),hash:CI(a)}}function L_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Cg(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function P0(t){let e=NI(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function L0(t,e,n,s=!1){let a;typeof t=="string"?a=Po(t):(a={...t},cn(!a.pathname||!a.pathname.includes("?"),Cg("?","pathname","search",a)),cn(!a.pathname||!a.pathname.includes("#"),Cg("#","pathname","hash",a)),cn(!a.search||!a.search.includes("#"),Cg("#","search","hash",a)));let l=t===""||a.pathname==="",u=l?"/":a.pathname,h;if(u==null)h=n;else{let _=e.length-1;if(!s&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),_-=1;a.pathname=w.join("/")}h=_>=0?e[_]:"/"}let m=EI(a,h),f=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(f||y)&&(m.pathname+="/"),m}var Ia=t=>t.join("/").replace(/\/\/+/g,"/"),TI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,AI=class{constructor(t,e,n,s=!1){this.status=t,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function II(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function RI(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var dN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function hN(t,e){let n=t;if(typeof n!="string"||!uN.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(dN)try{let l=new URL(window.location.href),u=n.startsWith("//")?new URL(l.protocol+n):new URL(n),h=La(u.pathname,e);u.origin===l.origin&&h!=null?n=h+u.search+u.hash:a=!0}catch{qs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fN=["POST","PUT","PATCH","DELETE"];new Set(fN);var jI=["GET",...fN];new Set(jI);var tc=I.createContext(null);tc.displayName="DataRouter";var Hf=I.createContext(null);Hf.displayName="DataRouterState";var DI=I.createContext(!1),mN=I.createContext({isTransitioning:!1});mN.displayName="ViewTransition";var kI=I.createContext(new Map);kI.displayName="Fetchers";var MI=I.createContext(null);MI.displayName="Await";var Hs=I.createContext(null);Hs.displayName="Navigation";var Yu=I.createContext(null);Yu.displayName="Location";var Ni=I.createContext({outlet:null,matches:[],isDataRoute:!1});Ni.displayName="Route";var V0=I.createContext(null);V0.displayName="RouteError";var pN="REACT_ROUTER_ERROR",PI="REDIRECT",LI="ROUTE_ERROR_RESPONSE";function VI(t){if(t.startsWith(`${pN}:${PI}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function UI(t){if(t.startsWith(`${pN}:${LI}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new AI(e.status,e.statusText,e.data)}catch{}}function OI(t,{relative:e}={}){cn(nc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=I.useContext(Hs),{hash:a,pathname:l,search:u}=Wu(t,{relative:e}),h=l;return n!=="/"&&(h=l==="/"?n:Ia([n,l])),s.createHref({pathname:h,search:u,hash:a})}function nc(){return I.useContext(Yu)!=null}function Ti(){return cn(nc(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Yu).location}var gN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xN(t){I.useContext(Hs).static||I.useLayoutEffect(t)}function qa(){let{isDataRoute:t}=I.useContext(Ni);return t?eR():zI()}function zI(){cn(nc(),"useNavigate() may be used only in the context of a <Router> component.");let t=I.useContext(tc),{basename:e,navigator:n}=I.useContext(Hs),{matches:s}=I.useContext(Ni),{pathname:a}=Ti(),l=JSON.stringify(P0(s)),u=I.useRef(!1);return xN(()=>{u.current=!0}),I.useCallback((m,f={})=>{if(qs(u.current,gN),!u.current)return;if(typeof m=="number"){n.go(m);return}let y=L0(m,JSON.parse(l),a,f.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ia([e,y.pathname])),(f.replace?n.replace:n.push)(y,f.state,f)},[e,n,l,a,t])}var FI=I.createContext(null);function BI(t){let e=I.useContext(Ni).outlet;return I.useMemo(()=>e&&I.createElement(FI.Provider,{value:t},e),[e,t])}function Wu(t,{relative:e}={}){let{matches:n}=I.useContext(Ni),{pathname:s}=Ti(),a=JSON.stringify(P0(n));return I.useMemo(()=>L0(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function qI(t,e){return yN(t,e)}function yN(t,e,n,s,a){var H;cn(nc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=I.useContext(Hs),{matches:u}=I.useContext(Ni),h=u[u.length-1],m=h?h.params:{},f=h?h.pathname:"/",y=h?h.pathnameBase:"/",_=h&&h.route;{let P=_&&_.path||"";bN(f,!_||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let w=Ti(),T;if(e){let P=typeof e=="string"?Po(e):e;cn(y==="/"||((H=P.pathname)==null?void 0:H.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${P.pathname}" was given in the \`location\` prop.`),T=P}else T=w;let M=T.pathname||"/",z=M;if(y!=="/"){let P=y.replace(/^\//,"").split("/");z="/"+M.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=oN(t,{pathname:z});qs(_||k!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),qs(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=JI(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},m,P.params),pathname:Ia([y,l.encodeLocation?l.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?y:Ia([y,l.encodeLocation?l.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),u,n,s,a);return e&&q?I.createElement(Yu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},q):q}function HI(){let t=ZI(),e=II(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:l},"ErrorBoundary")," or"," ",I.createElement("code",{style:l},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:a},n):null,u)}var GI=I.createElement(HI,null),vN=class extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=UI(t.digest);n&&(t=n)}let e=t!==void 0?I.createElement(Ni.Provider,{value:this.props.routeContext},I.createElement(V0.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?I.createElement($I,{error:t},e):e}};vN.contextType=DI;var Ag=new WeakMap;function $I({children:t,error:e}){let{basename:n}=I.useContext(Hs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=VI(e.digest);if(s){let a=Ag.get(e);if(a)throw a;let l=hN(s.location,n);if(dN&&!Ag.get(e))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw Ag.set(e,u),u}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function KI({routeContext:t,match:e,children:n}){let s=I.useContext(tc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Ni.Provider,{value:t},n)}function JI(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=n==null?void 0:n.errors;if(u!=null){let y=l.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);cn(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let h=!1,m=-1;if(n)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=y),_.route.id){let{loaderData:w,errors:T}=n,M=_.route.loader&&!w.hasOwnProperty(_.route.id)&&(!T||T[_.route.id]===void 0);if(_.route.lazy||M){h=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let f=n&&s?(y,_)=>{var w,T;s(y,{location:n.location,params:((T=(w=n.matches)==null?void 0:w[0])==null?void 0:T.params)??{},unstable_pattern:RI(n.matches),errorInfo:_})}:void 0;return l.reduceRight((y,_,w)=>{let T,M=!1,z=null,k=null;n&&(T=u&&_.route.id?u[_.route.id]:void 0,z=_.route.errorElement||GI,h&&(m<0&&w===0?(bN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,k=null):m===w&&(M=!0,k=_.route.hydrateFallbackElement||null)));let q=e.concat(l.slice(0,w+1)),H=()=>{let P;return T?P=z:M?P=k:_.route.Component?P=I.createElement(_.route.Component,null):_.route.element?P=_.route.element:P=y,I.createElement(KI,{match:_,routeContext:{outlet:y,matches:q,isDataRoute:n!=null},children:P})};return n&&(_.route.ErrorBoundary||_.route.errorElement||w===0)?I.createElement(vN,{location:n.location,revalidation:n.revalidation,component:z,error:T,children:H(),routeContext:{outlet:null,matches:q,isDataRoute:!0},onError:f}):H()},null)}function U0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YI(t){let e=I.useContext(tc);return cn(e,U0(t)),e}function WI(t){let e=I.useContext(Hf);return cn(e,U0(t)),e}function XI(t){let e=I.useContext(Ni);return cn(e,U0(t)),e}function O0(t){let e=XI(t),n=e.matches[e.matches.length-1];return cn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function QI(){return O0("useRouteId")}function ZI(){var s;let t=I.useContext(V0),e=WI("useRouteError"),n=O0("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function eR(){let{router:t}=YI("useNavigate"),e=O0("useNavigate"),n=I.useRef(!1);return xN(()=>{n.current=!0}),I.useCallback(async(a,l={})=>{qs(n.current,gN),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...l}))},[t,e])}var V_={};function bN(t,e,n){!e&&!V_[t]&&(V_[t]=!0,qs(!1,n))}I.memo(tR);function tR({routes:t,future:e,state:n,onError:s}){return yN(t,void 0,n,s,e)}function nR({to:t,replace:e,state:n,relative:s}){cn(nc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=I.useContext(Hs);qs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=I.useContext(Ni),{pathname:u}=Ti(),h=qa(),m=L0(t,P0(l),u,s==="path"),f=JSON.stringify(m);return I.useEffect(()=>{h(JSON.parse(f),{replace:e,state:n,relative:s})},[h,f,s,e,n]),null}function sR(t){return BI(t.context)}function qn(t){cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iR({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:l=!1,unstable_useTransitions:u}){cn(!nc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),m=I.useMemo(()=>({basename:h,navigator:a,static:l,unstable_useTransitions:u,future:{}}),[h,a,l,u]);typeof n=="string"&&(n=Po(n));let{pathname:f="/",search:y="",hash:_="",state:w=null,key:T="default"}=n,M=I.useMemo(()=>{let z=La(f,h);return z==null?null:{location:{pathname:z,search:y,hash:_,state:w,key:T},navigationType:s}},[h,f,y,_,w,T,s]);return qs(M!=null,`<Router basename="${h}"> is not able to match the URL "${f}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:I.createElement(Hs.Provider,{value:m},I.createElement(Yu.Provider,{children:e,value:M}))}function aR({children:t,location:e}){return qI(Kg(t),e)}function Kg(t,e=[]){let n=[];return I.Children.forEach(t,(s,a)=>{if(!I.isValidElement(s))return;let l=[...e,a];if(s.type===I.Fragment){n.push.apply(n,Kg(s.props.children,l));return}cn(s.type===qn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Kg(s.props.children,l)),n.push(u)}),n}var Yh="get",Wh="application/x-www-form-urlencoded";function Gf(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function rR(t){return Gf(t)&&t.tagName.toLowerCase()==="button"}function oR(t){return Gf(t)&&t.tagName.toLowerCase()==="form"}function lR(t){return Gf(t)&&t.tagName.toLowerCase()==="input"}function cR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uR(t,e){return t.button===0&&(!e||e==="_self")&&!cR(t)}var Lh=null;function dR(){if(Lh===null)try{new FormData(document.createElement("form"),0),Lh=!1}catch{Lh=!0}return Lh}var hR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ig(t){return t!=null&&!hR.has(t)?(qs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wh}"`),null):t}function fR(t,e){let n,s,a,l,u;if(oR(t)){let h=t.getAttribute("action");s=h?La(h,e):null,n=t.getAttribute("method")||Yh,a=Ig(t.getAttribute("enctype"))||Wh,l=new FormData(t)}else if(rR(t)||lR(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||h.getAttribute("action");if(s=m?La(m,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||Yh,a=Ig(t.getAttribute("formenctype"))||Ig(h.getAttribute("enctype"))||Wh,l=new FormData(h,t),!dR()){let{name:f,type:y,value:_}=t;if(y==="image"){let w=f?`${f}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else f&&l.append(f,_)}}else{if(Gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yh,s=null,a=Wh,u=t}return l&&a==="text/plain"&&(u=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function z0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mR(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&La(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function pR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xR(t,e,n){let s=await Promise.all(t.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await pR(l,n);return u.links?u.links():[]}return[]}));return _R(s.flat(1).filter(gR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function U_(t,e,n,s,a,l){let u=(m,f)=>n[f]?m.route.id!==n[f].route.id:!0,h=(m,f)=>{var y;return n[f].pathname!==m.pathname||((y=n[f].route.path)==null?void 0:y.endsWith("*"))&&n[f].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,f)=>u(m,f)||h(m,f)):l==="data"?e.filter((m,f)=>{var _;let y=s.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,f)||h(m,f))return!0;if(m.route.shouldRevalidate){let w=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((_=n[0])==null?void 0:_.params)||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function yR(t,e,{includeHydrateFallback:n}={}){return vR(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function vR(t){return[...new Set(t)]}function bR(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function _R(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let l=JSON.stringify(bR(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}function _N(){let t=I.useContext(tc);return z0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function wR(){let t=I.useContext(Hf);return z0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var F0=I.createContext(void 0);F0.displayName="FrameworkContext";function wN(){let t=I.useContext(F0);return z0(t,"You must render this element inside a <HydratedRouter> element"),t}function ER(t,e){let n=I.useContext(F0),[s,a]=I.useState(!1),[l,u]=I.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:f,onMouseLeave:y,onTouchStart:_}=e,w=I.useRef(null);I.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let z=q=>{q.forEach(H=>{u(H.isIntersecting)})},k=new IntersectionObserver(z,{threshold:.5});return w.current&&k.observe(w.current),()=>{k.disconnect()}}},[t]),I.useEffect(()=>{if(s){let z=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(z)}}},[s]);let T=()=>{a(!0)},M=()=>{a(!1),u(!1)};return n?t!=="intent"?[l,w,{}]:[l,w,{onFocus:hu(h,T),onBlur:hu(m,M),onMouseEnter:hu(f,T),onMouseLeave:hu(y,M),onTouchStart:hu(_,T)}]:[!1,w,{}]}function hu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function NR({page:t,...e}){let{router:n}=_N(),s=I.useMemo(()=>oN(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?I.createElement(SR,{page:t,matches:s,...e}):null}function TR(t){let{manifest:e,routeModules:n}=wN(),[s,a]=I.useState([]);return I.useEffect(()=>{let l=!1;return xR(t,e,n).then(u=>{l||a(u)}),()=>{l=!0}},[t,e,n]),s}function SR({page:t,matches:e,...n}){let s=Ti(),{manifest:a,routeModules:l}=wN(),{basename:u}=_N(),{loaderData:h,matches:m}=wR(),f=I.useMemo(()=>U_(t,e,m,a,s,"data"),[t,e,m,a,s]),y=I.useMemo(()=>U_(t,e,m,a,s,"assets"),[t,e,m,a,s]),_=I.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let M=new Set,z=!1;if(e.forEach(q=>{var P;let H=a.routes[q.route.id];!H||!H.hasLoader||(!f.some(W=>W.route.id===q.route.id)&&q.route.id in h&&((P=l[q.route.id])!=null&&P.shouldRevalidate)||H.hasClientLoader?z=!0:M.add(q.route.id))}),M.size===0)return[];let k=mR(t,u,"data");return z&&M.size>0&&k.searchParams.set("_routes",e.filter(q=>M.has(q.route.id)).map(q=>q.route.id).join(",")),[k.pathname+k.search]},[u,h,s,a,f,e,t,l]),w=I.useMemo(()=>yR(y,a),[y,a]),T=TR(y);return I.createElement(I.Fragment,null,_.map(M=>I.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),w.map(M=>I.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),T.map(({key:M,link:z})=>I.createElement("link",{key:M,nonce:n.nonce,...z})))}function CR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var AR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{AR&&(window.__reactRouterVersion="7.11.0")}catch{}function IR({basename:t,children:e,unstable_useTransitions:n,window:s}){let a=I.useRef();a.current==null&&(a.current=aI({window:s,v5Compat:!0}));let l=a.current,[u,h]=I.useState({action:l.action,location:l.location}),m=I.useCallback(f=>{n===!1?h(f):I.startTransition(()=>h(f))},[n]);return I.useLayoutEffect(()=>l.listen(m),[l,m]),I.createElement(iR,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:n})}var EN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wn=I.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:u,state:h,target:m,to:f,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:w,...T},M){let{basename:z,unstable_useTransitions:k}=I.useContext(Hs),q=typeof f=="string"&&EN.test(f),H=hN(f,z);f=H.to;let P=OI(f,{relative:a}),[W,te,L]=ER(s,T),C=kR(f,{replace:u,state:h,target:m,preventScrollReset:y,relative:a,viewTransition:_,unstable_defaultShouldRevalidate:w,unstable_useTransitions:k});function A(U){e&&e(U),U.defaultPrevented||C(U)}let R=I.createElement("a",{...T,...L,href:H.absoluteURL||P,onClick:H.isExternal||l?e:A,ref:CR(M,te),target:m,"data-discover":!q&&n==="render"?"true":void 0});return W&&!q?I.createElement(I.Fragment,null,R,I.createElement(NR,{page:P})):R});wn.displayName="Link";var RR=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:u,viewTransition:h,children:m,...f},y){let _=Wu(u,{relative:f.relative}),w=Ti(),T=I.useContext(Hf),{navigator:M,basename:z}=I.useContext(Hs),k=T!=null&&UR(_)&&h===!0,q=M.encodeLocation?M.encodeLocation(_).pathname:_.pathname,H=w.pathname,P=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(H=H.toLowerCase(),P=P?P.toLowerCase():null,q=q.toLowerCase()),P&&z&&(P=La(P,z)||P);const W=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let te=H===q||!a&&H.startsWith(q)&&H.charAt(W)==="/",L=P!=null&&(P===q||!a&&P.startsWith(q)&&P.charAt(q.length)==="/"),C={isActive:te,isPending:L,isTransitioning:k},A=te?e:void 0,R;typeof s=="function"?R=s(C):R=[s,te?"active":null,L?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(C):l;return I.createElement(wn,{...f,"aria-current":A,className:R,ref:y,style:U,to:u,viewTransition:h},typeof m=="function"?m(C):m)});RR.displayName="NavLink";var jR=I.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:l,method:u=Yh,action:h,onSubmit:m,relative:f,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:w,...T},M)=>{let{unstable_useTransitions:z}=I.useContext(Hs),k=LR(),q=VR(h,{relative:f}),H=u.toLowerCase()==="get"?"get":"post",P=typeof h=="string"&&EN.test(h),W=te=>{if(m&&m(te),te.defaultPrevented)return;te.preventDefault();let L=te.nativeEvent.submitter,C=(L==null?void 0:L.getAttribute("formmethod"))||u,A=()=>k(L||te.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:a,state:l,relative:f,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:w});z&&n!==!1?I.startTransition(()=>A()):A()};return I.createElement("form",{ref:M,method:H,action:q,onSubmit:s?m:W,...T,"data-discover":!P&&t==="render"?"true":void 0})});jR.displayName="Form";function DR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NN(t){let e=I.useContext(tc);return cn(e,DR(t)),e}function kR(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:h,unstable_useTransitions:m}={}){let f=qa(),y=Ti(),_=Wu(t,{relative:l});return I.useCallback(w=>{if(uR(w,e)){w.preventDefault();let T=n!==void 0?n:ku(y)===ku(_),M=()=>f(t,{replace:T,state:s,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:h});m?I.startTransition(()=>M()):M()}},[y,f,_,n,s,e,t,a,l,u,h,m])}var MR=0,PR=()=>`__${String(++MR)}__`;function LR(){let{router:t}=NN("useSubmit"),{basename:e}=I.useContext(Hs),n=QI(),s=t.fetch,a=t.navigate;return I.useCallback(async(l,u={})=>{let{action:h,method:m,encType:f,formData:y,body:_}=fR(l,e);if(u.navigate===!1){let w=u.fetcherKey||PR();await s(w,n,u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:_,formMethod:u.method||m,formEncType:u.encType||f,flushSync:u.flushSync})}else await a(u.action||h,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:_,formMethod:u.method||m,formEncType:u.encType||f,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[s,a,e,n])}function VR(t,{relative:e}={}){let{basename:n}=I.useContext(Hs),s=I.useContext(Ni);cn(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Wu(t||".",{relative:e})},u=Ti();if(t==null){l.search=u.search;let h=new URLSearchParams(l.search),m=h.getAll("index");if(m.some(y=>y==="")){h.delete("index"),m.filter(_=>_).forEach(_=>h.append("index",_));let y=h.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Ia([n,l.pathname])),ku(l)}function UR(t,{relative:e}={}){let n=I.useContext(mN);cn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=NN("useViewTransitionState"),a=Wu(t,{relative:e});if(!n.isTransitioning)return!1;let l=La(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=La(n.nextLocation.pathname,s)||n.nextLocation.pathname;return uf(a.pathname,u)!=null||uf(a.pathname,l)!=null}/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zR=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),O_=t=>{const e=zR(t);return e.charAt(0).toUpperCase()+e.slice(1)},TN=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),FR=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},m)=>I.createElement("svg",{ref:m,...BR,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:TN("lucide",a),...!l&&!FR(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,y])=>I.createElement(f,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const n=I.forwardRef(({className:s,...a},l)=>I.createElement(qR,{ref:l,iconNode:e,className:TN(`lucide-${OR(O_(t))}`,`lucide-${t}`,s),...a}));return n.displayName=O_(t),n};/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],GR=Ee("arrow-left-right",HR);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],KR=Ee("arrow-left",$R);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],SN=Ee("award",JR);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],df=Ee("bell",YR);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],wu=Ee("briefcase",WR);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],sc=Ee("building-2",XR);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],B0=Ee("building",QR);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]],q0=Ee("cake",ZR);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],tj=Ee("calendar-days",ej);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ns=Ee("calendar",nj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Mu=Ee("camera",sj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],aj=Ee("check-check",ij);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oj=Ee("check",rj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Pu=Ee("chevron-down",lj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],H0=Ee("chevron-left",cj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$l=Ee("chevron-right",uj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Lu=Ee("chevron-up",dj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xu=Ee("circle-alert",hj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],CN=Ee("circle-arrow-up",fj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ao=Ee("circle-check",mj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],gj=Ee("circle-plus",pj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yj=Ee("circle-question-mark",xj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],z_=Ee("circle-user",vj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Kl=Ee("clipboard-list",bj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$i=Ee("clock",_j);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],Ej=Ee("corner-down-right",wj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Tj=Ee("crown",Nj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Eu=Ee("download",Sj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],Aj=Ee("eraser",Cj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$f=Ee("external-link",Ij);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Kf=Ee("eye-off",Rj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ra=Ee("eye",jj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],kj=Ee("file-pen",Dj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],Pj=Ee("file-search",Mj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Vj=Ee("file-spreadsheet",Lj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hf=Ee("file-text",Uj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],zj=Ee("file-up",Oj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ff=Ee("funnel",Fj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ja=Ee("globe",Bj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Hj=Ee("hash",qj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],$j=Ee("history",Gj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ki=Ee("image",Kj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],AN=Ee("layout-dashboard",Jj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],G0=Ee("layout-grid",Yj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],Xj=Ee("layout-template",Wj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Zj=Ee("link",Qj);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],F_=Ee("list",eD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Je=Ee("loader-circle",tD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],sD=Ee("lock-open",nD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Un=Ee("lock",iD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],rD=Ee("log-in",aD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lD=Ee("log-out",oD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Jl=Ee("mail",cD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ss=Ee("map-pin",uD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Vu=Ee("megaphone",dD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],fD=Ee("menu",hD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],pD=Ee("message-circle",mD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],mf=Ee("message-square",gD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],yD=Ee("minimize-2",xD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M5 12h14",key:"1ays0h"}]],bD=Ee("minus",vD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wD=Ee("package",_D);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],B_=Ee("palette",ED);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ol=Ee("panels-top-left",ND);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],IN=Ee("party-popper",TD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],q_=Ee("pen-line",SD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],xi=Ee("pen-tool",CD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],na=Ee("pen",AD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],RN=Ee("phone-call",ID);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Lo=Ee("phone",RD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vn=Ee("plus",jD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],jN=Ee("printer",DD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],MD=Ee("quote",kD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],LD=Ee("refresh-cw",PD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],UD=Ee("rotate-ccw",VD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Fs=Ee("save",OD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Va=Ee("search",zD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Jf=Ee("send",FD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Da=Ee("settings",BD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],HD=Ee("shield-alert",qD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],DN=Ee("shield-check",GD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],$0=Ee("shield",$D);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]],kN=Ee("signature",KD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],YD=Ee("sparkles",JD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xs=Ee("square-check-big",WD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],QD=Ee("square-pen",XD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],No=Ee("square",ZD);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],MN=Ee("tag",ek);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],nk=Ee("text-align-center",tk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],ik=Ee("text-align-end",sk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],PN=Ee("text-align-start",ak);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],ok=Ee("ticket",rk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Bt=Ee("trash-2",lk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bs=Ee("triangle-alert",ck);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Nu=Ee("type",uk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hk=Ee("upload",dk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],LN=Ee("user-check",fk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],VN=Ee("user-plus",mk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ji=Ee("user",pk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Uu=Ee("users",gk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],yk=Ee("wand-sparkles",xk);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pn=Ee("x",vk),bk=()=>{};var H_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},_k=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],u=t[n++],h=t[n++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],u=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},ON={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const l=t[a],u=a+1<t.length,h=u?t[a+1]:0,m=a+2<t.length,f=m?t[a+2]:0,y=l>>2,_=(l&3)<<4|h>>4;let w=(h&15)<<2|f>>6,T=f&63;m||(T=64,u||(w=64)),s.push(n[y],n[_],n[w],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_k(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const f=a<t.length?n[t.charAt(a)]:64;++a;const _=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||h==null||f==null||_==null)throw new wk;const w=l<<2|h>>4;if(s.push(w),f!==64){const T=h<<4&240|f>>2;if(s.push(T),_!==64){const M=f<<6&192|_;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ek=function(t){const e=UN(t);return ON.encodeByteArray(e,!0)},pf=function(t){return Ek(t).replace(/\./g,"")},zN=function(t){try{return ON.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=()=>Nk().__FIREBASE_DEFAULTS__,Sk=()=>{if(typeof process>"u"||typeof H_>"u")return;const t=H_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ck=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zN(t[1]);return e&&JSON.parse(e)},Yf=()=>{try{return bk()||Tk()||Sk()||Ck()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FN=t=>{var e,n;return(n=(e=Yf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},BN=t=>{const e=FN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},qN=()=>{var t;return(t=Yf())==null?void 0:t.config},HN=t=>{var e;return(e=Yf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function K0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pf(JSON.stringify(n)),pf(JSON.stringify(u)),""].join(".")}const Tu={};function Ik(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?t.emulator.push(e):t.prod.push(e);return t}function Rk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let G_=!1;function J0(t,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||Tu[t]===e||Tu[t]||G_)return;Tu[t]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",l=Ik().prod.length>0;function u(){const w=document.getElementById(s);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,T){w.setAttribute("width","24"),w.setAttribute("id",T),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{G_=!0,u()},w}function y(w,T){w.setAttribute("id",T),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=Rk(s),T=n("text"),M=document.getElementById(T)||document.createElement("span"),z=n("learnmore"),k=document.getElementById(z)||document.createElement("a"),q=n("preprendIcon"),H=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const P=w.element;h(P),y(k,z);const W=f();m(H,q),P.append(H,M,k,W),document.body.appendChild(P)}l?(M.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ds())}function Dk(){var e;const t=(e=Yf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Pk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lk(){const t=ds();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Vk(){return!Dk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ok(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="FirebaseError";class ra extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=zk,Object.setPrototypeOf(this,ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qu.prototype.create)}}class Qu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?Fk(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new ra(a,h,s)}}function Fk(t,e){return t.replace(Bk,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const Bk=/\{\$([^}]+)}/g;function qk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const l=t[a],u=e[a];if($_(l)&&$_(u)){if(!Io(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function $_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function pu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function gu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Hk(t,e){const n=new Gk(t,e);return n.subscribe.bind(n)}class Gk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");$k(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=Rg),a.error===void 0&&(a.error=Rg),a.complete===void 0&&(a.complete=Rg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $k(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){return t&&t._delegate?t._delegate:t}class Vr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Ak;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yk(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Jk(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Jk(t){return t===wo?void 0:t}function Yk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Kk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Et||(Et={}));const Xk={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},Qk=Et.INFO,Zk={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},eM=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=Zk[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Y0{constructor(e){this.name=e,this._logLevel=Qk,this._logHandler=eM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const tM=(t,e)=>e.some(n=>t instanceof n);let K_,J_;function nM(){return K_||(K_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sM(){return J_||(J_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $N=new WeakMap,Jg=new WeakMap,KN=new WeakMap,jg=new WeakMap,W0=new WeakMap;function iM(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(kr(t.result)),a()},u=()=>{s(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&$N.set(n,t)}).catch(()=>{}),W0.set(e,t),e}function aM(t){if(Jg.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),a()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});Jg.set(t,e)}let Yg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rM(t){Yg=t(Yg)}function oM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Dg(this),e,...n);return KN.set(s,e.sort?e.sort():[e]),kr(s)}:sM().includes(t)?function(...e){return t.apply(Dg(this),e),kr($N.get(this))}:function(...e){return kr(t.apply(Dg(this),e))}}function lM(t){return typeof t=="function"?oM(t):(t instanceof IDBTransaction&&aM(t),tM(t,nM())?new Proxy(t,Yg):t)}function kr(t){if(t instanceof IDBRequest)return iM(t);if(jg.has(t))return jg.get(t);const e=lM(t);return e!==t&&(jg.set(t,e),W0.set(e,t)),e}const Dg=t=>W0.get(t);function cM(t,e,{blocked:n,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(t,e),h=kr(u);return s&&u.addEventListener("upgradeneeded",m=>{s(kr(u.result),m.oldVersion,m.newVersion,kr(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const uM=["get","getKey","getAll","getAllKeys","count"],dM=["put","add","delete","clear"],kg=new Map;function Y_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kg.get(e))return kg.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=dM.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||uM.includes(n)))return;const l=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let f=m.store;return s&&(f=f.index(h.shift())),(await Promise.all([f[n](...h),a&&m.done]))[0]};return kg.set(e,l),l}rM(t=>({...t,get:(e,n,s)=>Y_(e,n)||t.get(e,n,s),has:(e,n)=>!!Y_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fM(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function fM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wg="@firebase/app",W_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new Y0("@firebase/app"),mM="@firebase/app-compat",pM="@firebase/analytics-compat",gM="@firebase/analytics",xM="@firebase/app-check-compat",yM="@firebase/app-check",vM="@firebase/auth",bM="@firebase/auth-compat",_M="@firebase/database",wM="@firebase/data-connect",EM="@firebase/database-compat",NM="@firebase/functions",TM="@firebase/functions-compat",SM="@firebase/installations",CM="@firebase/installations-compat",AM="@firebase/messaging",IM="@firebase/messaging-compat",RM="@firebase/performance",jM="@firebase/performance-compat",DM="@firebase/remote-config",kM="@firebase/remote-config-compat",MM="@firebase/storage",PM="@firebase/storage-compat",LM="@firebase/firestore",VM="@firebase/ai",UM="@firebase/firestore-compat",OM="firebase",zM="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="[DEFAULT]",FM={[Wg]:"fire-core",[mM]:"fire-core-compat",[gM]:"fire-analytics",[pM]:"fire-analytics-compat",[yM]:"fire-app-check",[xM]:"fire-app-check-compat",[vM]:"fire-auth",[bM]:"fire-auth-compat",[_M]:"fire-rtdb",[wM]:"fire-data-connect",[EM]:"fire-rtdb-compat",[NM]:"fire-fn",[TM]:"fire-fn-compat",[SM]:"fire-iid",[CM]:"fire-iid-compat",[AM]:"fire-fcm",[IM]:"fire-fcm-compat",[RM]:"fire-perf",[jM]:"fire-perf-compat",[DM]:"fire-rc",[kM]:"fire-rc-compat",[MM]:"fire-gcs",[PM]:"fire-gcs-compat",[LM]:"fire-fst",[UM]:"fire-fst-compat",[VM]:"fire-vertex","fire-js":"fire-js",[OM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,BM=new Map,Qg=new Map;function X_(t,e){try{t.container.addComponent(e)}catch(n){Ua.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ro(t){const e=t.name;if(Qg.has(e))return Ua.debug(`There were multiple attempts to register component ${e}.`),!1;Qg.set(e,t);for(const n of gf.values())X_(n,t);for(const n of BM.values())X_(n,t);return!0}function Wf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Os(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Qu("app","Firebase",qM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=zM;function JN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Xg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Mr.create("bad-app-name",{appName:String(a)});if(n||(n=qN()),!n)throw Mr.create("no-options");const l=gf.get(a);if(l){if(Io(n,l.options)&&Io(s,l.config))return l;throw Mr.create("duplicate-app",{appName:a})}const u=new Wk(a);for(const m of Qg.values())u.addComponent(m);const h=new HM(n,s,u);return gf.set(a,h),h}function X0(t=Xg){const e=gf.get(t);if(!e&&t===Xg&&qN())return JN();if(!e)throw Mr.create("no-app",{appName:t});return e}function Yi(t,e,n){let s=FM[t]??t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ua.warn(u.join(" "));return}Ro(new Vr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="firebase-heartbeat-database",$M=1,Ou="firebase-heartbeat-store";let Mg=null;function YN(){return Mg||(Mg=cM(GM,$M,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),Mg}async function KM(t){try{const n=(await YN()).transaction(Ou),s=await n.objectStore(Ou).get(WN(t));return await n.done,s}catch(e){if(e instanceof ra)Ua.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ua.warn(n.message)}}}async function Q_(t,e){try{const s=(await YN()).transaction(Ou,"readwrite");await s.objectStore(Ou).put(e,WN(t)),await s.done}catch(n){if(n instanceof ra)Ua.warn(n.message);else{const s=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ua.warn(s.message)}}}function WN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=1024,YM=30;class WM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QM(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Z_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>YM){const u=ZM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ua.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Z_(),{heartbeatsToSend:s,unsentEntries:a}=XM(this._heartbeatsCache.heartbeats),l=pf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Ua.warn(n),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function XM(t,e=JM){const n=[];let s=t.slice();for(const a of t){const l=n.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),e1(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),e1(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class QM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uk()?Ok().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Q_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Q_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function e1(t){return pf(JSON.stringify({version:2,heartbeats:t})).length}function ZM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){Ro(new Vr("platform-logger",e=>new hM(e),"PRIVATE")),Ro(new Vr("heartbeat",e=>new WM(e),"PRIVATE")),Yi(Wg,W_,t),Yi(Wg,W_,"esm2020"),Yi("fire-js","")}e4("");var t4="firebase",n4="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yi(t4,n4,"app");var t1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,XN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function R(){}R.prototype=A.prototype,C.F=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(U,B,$){for(var F=Array(arguments.length-2),je=2;je<arguments.length;je++)F[je-2]=arguments[je];return A.prototype[B].apply(U,F)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,A,R){R||(R=0);const U=Array(16);if(typeof A=="string")for(var B=0;B<16;++B)U[B]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(B=0;B<16;++B)U[B]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],B=C.g[2];let $=C.g[3],F;F=A+($^R&(B^$))+U[0]+3614090360&4294967295,A=R+(F<<7&4294967295|F>>>25),F=$+(B^A&(R^B))+U[1]+3905402710&4294967295,$=A+(F<<12&4294967295|F>>>20),F=B+(R^$&(A^R))+U[2]+606105819&4294967295,B=$+(F<<17&4294967295|F>>>15),F=R+(A^B&($^A))+U[3]+3250441966&4294967295,R=B+(F<<22&4294967295|F>>>10),F=A+($^R&(B^$))+U[4]+4118548399&4294967295,A=R+(F<<7&4294967295|F>>>25),F=$+(B^A&(R^B))+U[5]+1200080426&4294967295,$=A+(F<<12&4294967295|F>>>20),F=B+(R^$&(A^R))+U[6]+2821735955&4294967295,B=$+(F<<17&4294967295|F>>>15),F=R+(A^B&($^A))+U[7]+4249261313&4294967295,R=B+(F<<22&4294967295|F>>>10),F=A+($^R&(B^$))+U[8]+1770035416&4294967295,A=R+(F<<7&4294967295|F>>>25),F=$+(B^A&(R^B))+U[9]+2336552879&4294967295,$=A+(F<<12&4294967295|F>>>20),F=B+(R^$&(A^R))+U[10]+4294925233&4294967295,B=$+(F<<17&4294967295|F>>>15),F=R+(A^B&($^A))+U[11]+2304563134&4294967295,R=B+(F<<22&4294967295|F>>>10),F=A+($^R&(B^$))+U[12]+1804603682&4294967295,A=R+(F<<7&4294967295|F>>>25),F=$+(B^A&(R^B))+U[13]+4254626195&4294967295,$=A+(F<<12&4294967295|F>>>20),F=B+(R^$&(A^R))+U[14]+2792965006&4294967295,B=$+(F<<17&4294967295|F>>>15),F=R+(A^B&($^A))+U[15]+1236535329&4294967295,R=B+(F<<22&4294967295|F>>>10),F=A+(B^$&(R^B))+U[1]+4129170786&4294967295,A=R+(F<<5&4294967295|F>>>27),F=$+(R^B&(A^R))+U[6]+3225465664&4294967295,$=A+(F<<9&4294967295|F>>>23),F=B+(A^R&($^A))+U[11]+643717713&4294967295,B=$+(F<<14&4294967295|F>>>18),F=R+($^A&(B^$))+U[0]+3921069994&4294967295,R=B+(F<<20&4294967295|F>>>12),F=A+(B^$&(R^B))+U[5]+3593408605&4294967295,A=R+(F<<5&4294967295|F>>>27),F=$+(R^B&(A^R))+U[10]+38016083&4294967295,$=A+(F<<9&4294967295|F>>>23),F=B+(A^R&($^A))+U[15]+3634488961&4294967295,B=$+(F<<14&4294967295|F>>>18),F=R+($^A&(B^$))+U[4]+3889429448&4294967295,R=B+(F<<20&4294967295|F>>>12),F=A+(B^$&(R^B))+U[9]+568446438&4294967295,A=R+(F<<5&4294967295|F>>>27),F=$+(R^B&(A^R))+U[14]+3275163606&4294967295,$=A+(F<<9&4294967295|F>>>23),F=B+(A^R&($^A))+U[3]+4107603335&4294967295,B=$+(F<<14&4294967295|F>>>18),F=R+($^A&(B^$))+U[8]+1163531501&4294967295,R=B+(F<<20&4294967295|F>>>12),F=A+(B^$&(R^B))+U[13]+2850285829&4294967295,A=R+(F<<5&4294967295|F>>>27),F=$+(R^B&(A^R))+U[2]+4243563512&4294967295,$=A+(F<<9&4294967295|F>>>23),F=B+(A^R&($^A))+U[7]+1735328473&4294967295,B=$+(F<<14&4294967295|F>>>18),F=R+($^A&(B^$))+U[12]+2368359562&4294967295,R=B+(F<<20&4294967295|F>>>12),F=A+(R^B^$)+U[5]+4294588738&4294967295,A=R+(F<<4&4294967295|F>>>28),F=$+(A^R^B)+U[8]+2272392833&4294967295,$=A+(F<<11&4294967295|F>>>21),F=B+($^A^R)+U[11]+1839030562&4294967295,B=$+(F<<16&4294967295|F>>>16),F=R+(B^$^A)+U[14]+4259657740&4294967295,R=B+(F<<23&4294967295|F>>>9),F=A+(R^B^$)+U[1]+2763975236&4294967295,A=R+(F<<4&4294967295|F>>>28),F=$+(A^R^B)+U[4]+1272893353&4294967295,$=A+(F<<11&4294967295|F>>>21),F=B+($^A^R)+U[7]+4139469664&4294967295,B=$+(F<<16&4294967295|F>>>16),F=R+(B^$^A)+U[10]+3200236656&4294967295,R=B+(F<<23&4294967295|F>>>9),F=A+(R^B^$)+U[13]+681279174&4294967295,A=R+(F<<4&4294967295|F>>>28),F=$+(A^R^B)+U[0]+3936430074&4294967295,$=A+(F<<11&4294967295|F>>>21),F=B+($^A^R)+U[3]+3572445317&4294967295,B=$+(F<<16&4294967295|F>>>16),F=R+(B^$^A)+U[6]+76029189&4294967295,R=B+(F<<23&4294967295|F>>>9),F=A+(R^B^$)+U[9]+3654602809&4294967295,A=R+(F<<4&4294967295|F>>>28),F=$+(A^R^B)+U[12]+3873151461&4294967295,$=A+(F<<11&4294967295|F>>>21),F=B+($^A^R)+U[15]+530742520&4294967295,B=$+(F<<16&4294967295|F>>>16),F=R+(B^$^A)+U[2]+3299628645&4294967295,R=B+(F<<23&4294967295|F>>>9),F=A+(B^(R|~$))+U[0]+4096336452&4294967295,A=R+(F<<6&4294967295|F>>>26),F=$+(R^(A|~B))+U[7]+1126891415&4294967295,$=A+(F<<10&4294967295|F>>>22),F=B+(A^($|~R))+U[14]+2878612391&4294967295,B=$+(F<<15&4294967295|F>>>17),F=R+($^(B|~A))+U[5]+4237533241&4294967295,R=B+(F<<21&4294967295|F>>>11),F=A+(B^(R|~$))+U[12]+1700485571&4294967295,A=R+(F<<6&4294967295|F>>>26),F=$+(R^(A|~B))+U[3]+2399980690&4294967295,$=A+(F<<10&4294967295|F>>>22),F=B+(A^($|~R))+U[10]+4293915773&4294967295,B=$+(F<<15&4294967295|F>>>17),F=R+($^(B|~A))+U[1]+2240044497&4294967295,R=B+(F<<21&4294967295|F>>>11),F=A+(B^(R|~$))+U[8]+1873313359&4294967295,A=R+(F<<6&4294967295|F>>>26),F=$+(R^(A|~B))+U[15]+4264355552&4294967295,$=A+(F<<10&4294967295|F>>>22),F=B+(A^($|~R))+U[6]+2734768916&4294967295,B=$+(F<<15&4294967295|F>>>17),F=R+($^(B|~A))+U[13]+1309151649&4294967295,R=B+(F<<21&4294967295|F>>>11),F=A+(B^(R|~$))+U[4]+4149444226&4294967295,A=R+(F<<6&4294967295|F>>>26),F=$+(R^(A|~B))+U[11]+3174756917&4294967295,$=A+(F<<10&4294967295|F>>>22),F=B+(A^($|~R))+U[2]+718787259&4294967295,B=$+(F<<15&4294967295|F>>>17),F=R+($^(B|~A))+U[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(B+(F<<21&4294967295|F>>>11))&4294967295,C.g[2]=C.g[2]+B&4294967295,C.g[3]=C.g[3]+$&4294967295}s.prototype.v=function(C,A){A===void 0&&(A=C.length);const R=A-this.blockSize,U=this.C;let B=this.h,$=0;for(;$<A;){if(B==0)for(;$<=R;)a(this,C,$),$+=this.blockSize;if(typeof C=="string"){for(;$<A;)if(U[B++]=C.charCodeAt($++),B==this.blockSize){a(this,U),B=0;break}}else for(;$<A;)if(U[B++]=C[$++],B==this.blockSize){a(this,U),B=0;break}}this.h=B,this.o+=A},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,R=0;R<4;++R)for(let U=0;U<32;U+=8)C[A++]=this.g[R]>>>U&255;return C};function l(C,A){var R=h;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function u(C,A){this.h=A;const R=[];let U=!0;for(let B=C.length-1;B>=0;B--){const $=C[B]|0;U&&$==A||(R[B]=$,U=!1)}this.g=R}var h={};function m(C){return-128<=C&&C<128?l(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return _;if(C<0)return k(f(-C));const A=[];let R=1;for(let U=0;C>=R;U++)A[U]=C/R|0,R*=4294967296;return new u(A,0)}function y(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return k(y(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=f(Math.pow(A,8));let U=_;for(let $=0;$<C.length;$+=8){var B=Math.min(8,C.length-$);const F=parseInt(C.substring($,$+B),A);B<8?(B=f(Math.pow(A,B)),U=U.j(B).add(f(F))):(U=U.j(R),U=U.add(f(F)))}return U}var _=m(0),w=m(1),T=m(16777216);t=u.prototype,t.m=function(){if(z(this))return-k(this).m();let C=0,A=1;for(let R=0;R<this.g.length;R++){const U=this.i(R);C+=(U>=0?U:4294967296+U)*A,A*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M(this))return"0";if(z(this))return"-"+k(this).toString(C);const A=f(Math.pow(C,6));var R=this;let U="";for(;;){const B=W(R,A).g;R=q(R,B.j(A));let $=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=B,M(R))return $+U;for(;$.length<6;)$="0"+$;U=$+U}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function M(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function z(C){return C.h==-1}t.l=function(C){return C=q(this,C),z(C)?-1:M(C)?0:1};function k(C){const A=C.g.length,R=[];for(let U=0;U<A;U++)R[U]=~C.g[U];return new u(R,~C.h).add(w)}t.abs=function(){return z(this)?k(this):this},t.add=function(C){const A=Math.max(this.g.length,C.g.length),R=[];let U=0;for(let B=0;B<=A;B++){let $=U+(this.i(B)&65535)+(C.i(B)&65535),F=($>>>16)+(this.i(B)>>>16)+(C.i(B)>>>16);U=F>>>16,$&=65535,F&=65535,R[B]=F<<16|$}return new u(R,R[R.length-1]&-2147483648?-1:0)};function q(C,A){return C.add(k(A))}t.j=function(C){if(M(this)||M(C))return _;if(z(this))return z(C)?k(this).j(k(C)):k(k(this).j(C));if(z(C))return k(this.j(k(C)));if(this.l(T)<0&&C.l(T)<0)return f(this.m()*C.m());const A=this.g.length+C.g.length,R=[];for(var U=0;U<2*A;U++)R[U]=0;for(U=0;U<this.g.length;U++)for(let B=0;B<C.g.length;B++){const $=this.i(U)>>>16,F=this.i(U)&65535,je=C.i(B)>>>16,ze=C.i(B)&65535;R[2*U+2*B]+=F*ze,H(R,2*U+2*B),R[2*U+2*B+1]+=$*ze,H(R,2*U+2*B+1),R[2*U+2*B+1]+=F*je,H(R,2*U+2*B+1),R[2*U+2*B+2]+=$*je,H(R,2*U+2*B+2)}for(C=0;C<A;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=A;C<2*A;C++)R[C]=0;return new u(R,0)};function H(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function P(C,A){this.g=C,this.h=A}function W(C,A){if(M(A))throw Error("division by zero");if(M(C))return new P(_,_);if(z(C))return A=W(k(C),A),new P(k(A.g),k(A.h));if(z(A))return A=W(C,k(A)),new P(k(A.g),A.h);if(C.g.length>30){if(z(C)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var R=w,U=A;U.l(C)<=0;)R=te(R),U=te(U);var B=L(R,1),$=L(U,1);for(U=L(U,2),R=L(R,2);!M(U);){var F=$.add(U);F.l(C)<=0&&(B=B.add(R),$=F),U=L(U,1),R=L(R,1)}return A=q(C,B.j(A)),new P(B,A)}for(B=_;C.l(A)>=0;){for(R=Math.max(1,Math.floor(C.m()/A.m())),U=Math.ceil(Math.log(R)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),$=f(R),F=$.j(A);z(F)||F.l(C)>0;)R-=U,$=f(R),F=$.j(A);M($)&&($=w),B=B.add($),C=q(C,F)}return new P(B,C)}t.B=function(C){return W(this,C).h},t.and=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let U=0;U<A;U++)R[U]=this.i(U)&C.i(U);return new u(R,this.h&C.h)},t.or=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let U=0;U<A;U++)R[U]=this.i(U)|C.i(U);return new u(R,this.h|C.h)},t.xor=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let U=0;U<A;U++)R[U]=this.i(U)^C.i(U);return new u(R,this.h^C.h)};function te(C){const A=C.g.length+1,R=[];for(let U=0;U<A;U++)R[U]=C.i(U)<<1|C.i(U-1)>>>31;return new u(R,C.h)}function L(C,A){const R=A>>5;A%=32;const U=C.g.length-R,B=[];for(let $=0;$<U;$++)B[$]=A>0?C.i($+R)>>>A|C.i($+R+1)<<32-A:C.i($+R);return new u(B,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,XN=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=y,Pr=u}).apply(typeof t1<"u"?t1:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QN,xu,ZN,Xh,Zg,eT,tT,nT;(function(){var t,e=Object.defineProperty;function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var E=0;E<x.length;++E){var S=x[E];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=n(this);function a(x,E){if(E)e:{var S=s;x=x.split(".");for(var V=0;V<x.length-1;V++){var re=x[V];if(!(re in S))break e;S=S[re]}x=x[x.length-1],V=S[x],E=E(V),E!=V&&E!=null&&e(S,x,{configurable:!0,writable:!0,value:E})}}a("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(x){return x||function(E){var S=[],V;for(V in E)Object.prototype.hasOwnProperty.call(E,V)&&S.push([V,E[V]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(x){var E=typeof x;return E=="object"&&x!=null||E=="function"}function m(x,E,S){return x.call.apply(x.bind,arguments)}function f(x,E,S){return f=m,f.apply(null,arguments)}function y(x,E){var S=Array.prototype.slice.call(arguments,1);return function(){var V=S.slice();return V.push.apply(V,arguments),x.apply(this,V)}}function _(x,E){function S(){}S.prototype=E.prototype,x.Z=E.prototype,x.prototype=new S,x.prototype.constructor=x,x.Ob=function(V,re,fe){for(var Ae=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)Ae[lt-2]=arguments[lt];return E.prototype[re].apply(V,Ae)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function T(x){const E=x.length;if(E>0){const S=Array(E);for(let V=0;V<E;V++)S[V]=x[V];return S}return[]}function M(x,E){for(let V=1;V<arguments.length;V++){const re=arguments[V];var S=typeof re;if(S=S!="object"?S:re?Array.isArray(re)?"array":S:"null",S=="array"||S=="object"&&typeof re.length=="number"){S=x.length||0;const fe=re.length||0;x.length=S+fe;for(let Ae=0;Ae<fe;Ae++)x[S+Ae]=re[Ae]}else x.push(re)}}class z{constructor(E,S){this.i=E,this.j=S,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(x){u.setTimeout(()=>{throw x},0)}function q(){var x=C;let E=null;return x.g&&(E=x.g,x.g=x.g.next,x.g||(x.h=null),E.next=null),E}class H{constructor(){this.h=this.g=null}add(E,S){const V=P.get();V.set(E,S),this.h?this.h.next=V:this.g=V,this.h=V}}var P=new z(()=>new W,x=>x.reset());class W{constructor(){this.next=this.g=this.h=null}set(E,S){this.h=E,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let te,L=!1,C=new H,A=()=>{const x=Promise.resolve(void 0);te=()=>{x.then(R)}};function R(){for(var x;x=q();){try{x.h.call(x.g)}catch(S){k(S)}var E=P;E.j(x),E.h<100&&(E.h++,x.next=E.g,E.g=x)}L=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(x,E){this.type=x,this.g=this.target=E,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,E=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const S=()=>{};u.addEventListener("test",S,E),u.removeEventListener("test",S,E)}catch{}return x})();function F(x){return/^[\s\xa0]*$/.test(x)}function je(x,E){B.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,E)}_(je,B),je.prototype.init=function(x,E){const S=this.type=x.type,V=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=E,E=x.relatedTarget,E||(S=="mouseover"?E=x.fromElement:S=="mouseout"&&(E=x.toElement)),this.relatedTarget=E,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),j=0;function se(x,E,S,V,re){this.listener=x,this.proxy=null,this.src=E,this.type=S,this.capture=!!V,this.ha=re,this.key=++j,this.da=this.fa=!1}function K(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function ne(x,E,S){for(const V in x)E.call(S,x[V],V,x)}function J(x,E){for(const S in x)E.call(void 0,x[S],S,x)}function O(x){const E={};for(const S in x)E[S]=x[S];return E}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(x,E){let S,V;for(let re=1;re<arguments.length;re++){V=arguments[re];for(S in V)x[S]=V[S];for(let fe=0;fe<Z.length;fe++)S=Z[fe],Object.prototype.hasOwnProperty.call(V,S)&&(x[S]=V[S])}}function ee(x){this.src=x,this.g={},this.h=0}ee.prototype.add=function(x,E,S,V,re){const fe=x.toString();x=this.g[fe],x||(x=this.g[fe]=[],this.h++);const Ae=Y(x,E,V,re);return Ae>-1?(E=x[Ae],S||(E.fa=!1)):(E=new se(E,this.src,fe,!!V,re),E.fa=S,x.push(E)),E};function Ne(x,E){const S=E.type;if(S in x.g){var V=x.g[S],re=Array.prototype.indexOf.call(V,E,void 0),fe;(fe=re>=0)&&Array.prototype.splice.call(V,re,1),fe&&(K(E),x.g[S].length==0&&(delete x.g[S],x.h--))}}function Y(x,E,S,V){for(let re=0;re<x.length;++re){const fe=x[re];if(!fe.da&&fe.listener==E&&fe.capture==!!S&&fe.ha==V)return re}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),Se={};function De(x,E,S,V,re){if(Array.isArray(E)){for(let fe=0;fe<E.length;fe++)De(x,E[fe],S,V,re);return null}return S=ue(S),x&&x[ze]?x.J(E,S,h(V)?!!V.capture:!1,re):ut(x,E,S,!1,V,re)}function ut(x,E,S,V,re,fe){if(!E)throw Error("Invalid event type");const Ae=h(re)?!!re.capture:!!re;let lt=Jt(x);if(lt||(x[pe]=lt=new ee(x)),S=lt.add(E,S,V,Ae,fe),S.proxy)return S;if(V=st(),S.proxy=V,V.src=x,V.listener=S,x.addEventListener)$||(re=Ae),re===void 0&&(re=!1),x.addEventListener(E.toString(),V,re);else if(x.attachEvent)x.attachEvent(it(E.toString()),V);else if(x.addListener&&x.removeListener)x.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return S}function st(){function x(S){return E.call(x.src,x.listener,S)}const E=mt;return x}function _e(x,E,S,V,re){if(Array.isArray(E))for(var fe=0;fe<E.length;fe++)_e(x,E[fe],S,V,re);else V=h(V)?!!V.capture:!!V,S=ue(S),x&&x[ze]?(x=x.i,fe=String(E).toString(),fe in x.g&&(E=x.g[fe],S=Y(E,S,V,re),S>-1&&(K(E[S]),Array.prototype.splice.call(E,S,1),E.length==0&&(delete x.g[fe],x.h--)))):x&&(x=Jt(x))&&(E=x.g[E.toString()],x=-1,E&&(x=Y(E,S,V,re)),(S=x>-1?E[x]:null)&&Ve(S))}function Ve(x){if(typeof x!="number"&&x&&!x.da){var E=x.src;if(E&&E[ze])Ne(E.i,x);else{var S=x.type,V=x.proxy;E.removeEventListener?E.removeEventListener(S,V,x.capture):E.detachEvent?E.detachEvent(it(S),V):E.addListener&&E.removeListener&&E.removeListener(V),(S=Jt(E))?(Ne(S,x),S.h==0&&(S.src=null,E[pe]=null)):K(x)}}}function it(x){return x in Se?Se[x]:Se[x]="on"+x}function mt(x,E){if(x.da)x=!0;else{E=new je(E,this);const S=x.listener,V=x.ha||x.src;x.fa&&Ve(x),x=S.call(V,E)}return x}function Jt(x){return x=x[pe],x instanceof ee?x:null}var en="__closure_events_fn_"+(Math.random()*1e9>>>0);function ue(x){return typeof x=="function"?x:(x[en]||(x[en]=function(E){return x.handleEvent(E)}),x[en])}function Ie(){U.call(this),this.i=new ee(this),this.M=this,this.G=null}_(Ie,U),Ie.prototype[ze]=!0,Ie.prototype.removeEventListener=function(x,E,S,V){_e(this,x,E,S,V)};function Re(x,E){var S,V=x.G;if(V)for(S=[];V;V=V.G)S.push(V);if(x=x.M,V=E.type||E,typeof E=="string")E=new B(E,x);else if(E instanceof B)E.target=E.target||x;else{var re=E;E=new B(V,x),oe(E,re)}re=!0;let fe,Ae;if(S)for(Ae=S.length-1;Ae>=0;Ae--)fe=E.g=S[Ae],re=ot(fe,V,!0,E)&&re;if(fe=E.g=x,re=ot(fe,V,!0,E)&&re,re=ot(fe,V,!1,E)&&re,S)for(Ae=0;Ae<S.length;Ae++)fe=E.g=S[Ae],re=ot(fe,V,!1,E)&&re}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var x=this.i;for(const E in x.g){const S=x.g[E];for(let V=0;V<S.length;V++)K(S[V]);delete x.g[E],x.h--}}this.G=null},Ie.prototype.J=function(x,E,S,V){return this.i.add(String(x),E,!1,S,V)},Ie.prototype.K=function(x,E,S,V){return this.i.add(String(x),E,!0,S,V)};function ot(x,E,S,V){if(E=x.i.g[String(E)],!E)return!0;E=E.concat();let re=!0;for(let fe=0;fe<E.length;++fe){const Ae=E[fe];if(Ae&&!Ae.da&&Ae.capture==S){const lt=Ae.listener,yn=Ae.ha||Ae.src;Ae.fa&&Ne(x.i,Ae),re=lt.call(yn,V)!==!1&&re}}return re&&!V.defaultPrevented}function tn(x,E){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(x,E||0)}function dt(x){x.g=tn(()=>{x.g=null,x.i&&(x.i=!1,dt(x))},x.l);const E=x.h;x.h=null,x.m.apply(null,E)}class At extends U{constructor(E,S){super(),this.m=E,this.l=S,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ge(x){U.call(this),this.h=x,this.g={}}_(ge,U);var Le=[];function Fe(x){ne(x.g,function(E,S){this.g.hasOwnProperty(S)&&Ve(E)},x),x.g={}}ge.prototype.N=function(){ge.Z.N.call(this),Fe(this)},ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var et=u.JSON.stringify,Xe=u.JSON.parse,pt=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function gt(){}function jt(){}var St={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function X(){B.call(this,"d")}_(X,B);function de(){B.call(this,"c")}_(de,B);var Te={},Ge=null;function Ut(){return Ge=Ge||new Ie}Te.Ia="serverreachability";function It(x){B.call(this,Te.Ia,x)}_(It,B);function Dt(x){const E=Ut();Re(E,new It(E))}Te.STAT_EVENT="statevent";function vt(x,E){B.call(this,Te.STAT_EVENT,x),this.stat=E}_(vt,B);function Ft(x){const E=Ut();Re(E,new vt(E,x))}Te.Ja="timingevent";function xn(x,E){B.call(this,Te.Ja,x),this.size=E}_(xn,B);function fn(x,E){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},E)}function bt(){this.g=!0}bt.prototype.ua=function(){this.g=!1};function ie(x,E,S,V,re,fe){x.info(function(){if(x.g)if(fe){var Ae="",lt=fe.split("&");for(let Ot=0;Ot<lt.length;Ot++){var yn=lt[Ot].split("=");if(yn.length>1){const on=yn[0];yn=yn[1];const Ys=on.split("_");Ae=Ys.length>=2&&Ys[1]=="type"?Ae+(on+"="+yn+"&"):Ae+(on+"=redacted&")}}}else Ae=null;else Ae=fe;return"XMLHTTP REQ ("+V+") [attempt "+re+"]: "+E+`
`+S+`
`+Ae})}function Ce(x,E,S,V,re,fe,Ae){x.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+re+"]: "+E+`
`+S+`
`+fe+" "+Ae})}function $e(x,E,S,V){x.info(function(){return"XMLHTTP TEXT ("+E+"): "+kt(x,S)+(V?" "+V:"")})}function We(x,E){x.info(function(){return"TIMEOUT: "+E})}bt.prototype.info=function(){};function kt(x,E){if(!x.g)return E;if(!E)return null;try{const fe=JSON.parse(E);if(fe){for(x=0;x<fe.length;x++)if(Array.isArray(fe[x])){var S=fe[x];if(!(S.length<2)){var V=S[1];if(Array.isArray(V)&&!(V.length<1)){var re=V[0];if(re!="noop"&&re!="stop"&&re!="close")for(let Ae=1;Ae<V.length;Ae++)V[Ae]=""}}}}return et(fe)}catch{return E}}var ft={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ci={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hc;function Wr(){}_(Wr,gt),Wr.prototype.g=function(){return new XMLHttpRequest},hc=new Wr;function la(x){return encodeURIComponent(String(x))}function md(x){var E=1;x=x.split(":");const S=[];for(;E>0&&x.length;)S.push(x.shift()),E--;return x.length&&S.push(x.join(":")),S}function oi(x,E,S,V){this.j=x,this.i=E,this.l=S,this.S=V||1,this.V=new ge(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new li}function li(){this.i=null,this.g="",this.h=!1}var Tn={},zn={};function Ai(x,E,S){x.M=1,x.A=Xr(Cn(E)),x.u=S,x.R=!0,Go(x,null)}function Go(x,E){x.F=Date.now(),Ii(x),x.B=Cn(x.A);var S=x.B,V=x.S;Array.isArray(V)||(V=[String(V)]),Yo(S.i,"t",V),x.C=0,S=x.j.L,x.h=new li,x.g=Id(x.j,S?E:null,!x.u),x.P>0&&(x.O=new At(f(x.Y,x,x.g),x.P)),E=x.V,S=x.g,V=x.ba;var re="readystatechange";Array.isArray(re)||(re&&(Le[0]=re.toString()),re=Le);for(let fe=0;fe<re.length;fe++){const Ae=De(S,re[fe],V||E.handleEvent,!1,E.h||E);if(!Ae)break;E.g[Ae.key]=Ae}E=x.J?O(x.J):{},x.u?(x.v||(x.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,E)):(x.v="GET",x.g.ea(x.B,x.v,null,E)),Dt(),ie(x.i,x.v,x.B,x.l,x.S,x.u)}oi.prototype.ba=function(x){x=x.target;const E=this.O;E&&di(x)==3?E.j():this.Y(x)},oi.prototype.Y=function(x){try{if(x==this.g)e:{const lt=di(this.g),yn=this.g.ya(),Ot=this.g.ca();if(!(lt<3)&&(lt!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||lt!=4||yn==7||(yn==8||Ot<=0?Dt(3):Dt(2)),Ri(this);var E=this.g.ca();this.X=E;var S=Cm(this);if(this.o=E==200,Ce(this.i,this.v,this.B,this.l,this.S,lt,E),this.o){if(this.U&&!this.L){t:{if(this.g){var V,re=this.g;if((V=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(V)){var fe=V;break t}}fe=null}if(x=fe)$e(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ji(this,x);else{this.o=!1,this.m=3,Ft(12),Rs(this),$s(this);break e}}if(this.R){x=!0;let on;for(;!this.K&&this.C<S.length;)if(on=gd(this,S),on==zn){lt==4&&(this.m=4,Ft(14),x=!1),$e(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Tn){this.m=4,Ft(15),$e(this.i,this.l,S,"[Invalid Chunk]"),x=!1;break}else $e(this.i,this.l,on,null),ji(this,on);if(pd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||S.length!=0||this.h.h||(this.m=1,Ft(16),x=!1),this.o=this.o&&x,!x)$e(this.i,this.l,S,"[Invalid Chunked Response]"),Rs(this),$s(this);else if(S.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Cc(Ae),Ae.P=!0,Ft(11))}}else $e(this.i,this.l,S,null),ji(this,S);lt==4&&Rs(this),this.o&&!this.K&&(lt==4?Td(this.j,this):(this.o=!1,Ii(this)))}else ua(this.g),E==400&&S.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),Rs(this),$s(this)}}}catch{}finally{}};function Cm(x){if(!pd(x))return x.g.la();const E=Yn(x.g);if(E==="")return"";let S="";const V=E.length,re=di(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Rs(x),$s(x),"";x.h.i=new u.TextDecoder}for(let fe=0;fe<V;fe++)x.h.h=!0,S+=x.h.i.decode(E[fe],{stream:!(re&&fe==V-1)});return E.length=0,x.h.g+=S,x.C=0,x.h.g}function pd(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function gd(x,E){var S=x.C,V=E.indexOf(`
`,S);return V==-1?zn:(S=Number(E.substring(S,V)),isNaN(S)?Tn:(V+=1,V+S>E.length?zn:(E=E.slice(V,V+S),x.C=V+S,E)))}oi.prototype.cancel=function(){this.K=!0,Rs(this)};function Ii(x){x.T=Date.now()+x.H,$o(x,x.H)}function $o(x,E){if(x.D!=null)throw Error("WatchDog timer not null");x.D=fn(f(x.aa,x),E)}function Ri(x){x.D&&(u.clearTimeout(x.D),x.D=null)}oi.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(We(this.i,this.B),this.M!=2&&(Dt(),Ft(17)),Rs(this),this.m=2,$s(this)):$o(this,this.T-x)};function $s(x){x.j.I==0||x.K||Td(x.j,x)}function Rs(x){Ri(x);var E=x.O;E&&typeof E.dispose=="function"&&E.dispose(),x.O=null,Fe(x.V),x.g&&(E=x.g,x.g=null,E.abort(),E.dispose())}function ji(x,E){try{var S=x.j;if(S.I!=0&&(S.g==x||ki(S.h,x))){if(!x.L&&ki(S.h,x)&&S.I==3){try{var V=S.Ba.g.parse(E)}catch{V=null}if(Array.isArray(V)&&V.length==3){var re=V;if(re[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<x.F)el(S),nr(S);else break e;io(S),Ft(18)}}else S.xa=re[1],0<S.xa-S.K&&re[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=fn(f(S.Va,S),6e3));Di(S.h)<=1&&S.ta&&(S.ta=void 0)}else Oi(S,11)}else if((x.L||S.g==x)&&el(S),!F(E))for(re=S.Ba.g.parse(E),E=0;E<re.length;E++){let Ot=re[E];const on=Ot[0];if(!(on<=S.K))if(S.K=on,Ot=Ot[1],S.I==2)if(Ot[0]=="c"){S.M=Ot[1],S.ba=Ot[2];const Ys=Ot[3];Ys!=null&&(S.ka=Ys,S.j.info("VER="+S.ka));const zi=Ot[4];zi!=null&&(S.za=zi,S.j.info("SVER="+S.za));const hi=Ot[5];hi!=null&&typeof hi=="number"&&hi>0&&(V=1.5*hi,S.O=V,S.j.info("backChannelRequestTimeoutMs_="+V)),V=S;const fi=x.g;if(fi){const ao=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var fe=V.h;fe.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(pc(fe,fe.h),fe.h=null))}if(V.G){const tl=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(V.wa=tl,Gt(V.J,V.G,tl))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-x.F,S.j.info("Handshake RTT: "+S.T+"ms")),V=S;var Ae=x;if(V.na=Ad(V,V.L?V.ba:null,V.W),Ae.L){gc(V.h,Ae);var lt=Ae,yn=V.O;yn&&(lt.H=yn),lt.D&&(Ri(lt),Ii(lt)),V.g=Ae}else Ed(V);S.i.length>0&&Ui(S)}else Ot[0]!="stop"&&Ot[0]!="close"||Oi(S,7);else S.I==3&&(Ot[0]=="stop"||Ot[0]=="close"?Ot[0]=="stop"?Oi(S,7):Tc(S):Ot[0]!="noop"&&S.l&&S.l.qa(Ot),S.A=0)}}Dt(4)}catch{}}var Sn=class{constructor(x,E){this.g=x,this.map=E}};function fc(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mc(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Di(x){return x.h?1:x.g?x.g.size:0}function ki(x,E){return x.h?x.h==E:x.g?x.g.has(E):!1}function pc(x,E){x.g?x.g.add(E):x.h=E}function gc(x,E){x.h&&x.h==E?x.h=null:x.g&&x.g.has(E)&&x.g.delete(E)}fc.prototype.cancel=function(){if(this.i=xc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function xc(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let E=x.i;for(const S of x.g.values())E=E.concat(S.G);return E}return T(x.i)}var xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ko(x,E){if(x){x=x.split("&");for(let S=0;S<x.length;S++){const V=x[S].indexOf("=");let re,fe=null;V>=0?(re=x[S].substring(0,V),fe=x[S].substring(V+1)):re=x[S],E(re,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function js(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;x instanceof js?(this.l=x.l,Fn(this,x.j),this.o=x.o,this.g=x.g,Ya(this,x.u),this.h=x.h,yc(this,_d(x.i)),this.m=x.m):x&&(E=String(x).match(xd))?(this.l=!1,Fn(this,E[1]||"",!0),this.o=Mi(E[2]||""),this.g=Mi(E[3]||"",!0),Ya(this,E[4]),this.h=Mi(E[5]||"",!0),yc(this,E[6]||"",!0),this.m=Mi(E[7]||"")):(this.l=!1,this.i=new Xa(null,this.l))}js.prototype.toString=function(){const x=[];var E=this.j;E&&x.push(Qr(E,Jo,!0),":");var S=this.g;return(S||E=="file")&&(x.push("//"),(E=this.o)&&x.push(Qr(E,Jo,!0),"@"),x.push(la(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&x.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&x.push("/"),x.push(Qr(S,S.charAt(0)=="/"?vc:yd,!0))),(S=this.i.toString())&&x.push("?",S),(S=this.m)&&x.push("#",Qr(S,vd)),x.join("")},js.prototype.resolve=function(x){const E=Cn(this);let S=!!x.j;S?Fn(E,x.j):S=!!x.o,S?E.o=x.o:S=!!x.g,S?E.g=x.g:S=x.u!=null;var V=x.h;if(S)Ya(E,x.u);else if(S=!!x.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var re=E.h.lastIndexOf("/");re!=-1&&(V=E.h.slice(0,re+1)+V)}if(re=V,re==".."||re==".")V="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){V=re.lastIndexOf("/",0)==0,re=re.split("/");const fe=[];for(let Ae=0;Ae<re.length;){const lt=re[Ae++];lt=="."?V&&Ae==re.length&&fe.push(""):lt==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),V&&Ae==re.length&&fe.push("")):(fe.push(lt),V=!0)}V=fe.join("/")}else V=re}return S?E.h=V:S=x.i.toString()!=="",S?yc(E,_d(x.i)):S=!!x.m,S&&(E.m=x.m),E};function Cn(x){return new js(x)}function Fn(x,E,S){x.j=S?Mi(E,!0):E,x.j&&(x.j=x.j.replace(/:$/,""))}function Ya(x,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);x.u=E}else x.u=null}function yc(x,E,S){E instanceof Xa?(x.i=E,Wo(x.i,x.l)):(S||(E=Qr(E,Wa)),x.i=new Xa(E,x.l))}function Gt(x,E,S){x.i.set(E,S)}function Xr(x){return Gt(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Mi(x,E){return x?E?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Qr(x,E,S){return typeof x=="string"?(x=encodeURI(x).replace(E,_s),S&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function _s(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Jo=/[#\/\?@]/g,yd=/[#\?:]/g,vc=/[#\?]/g,Wa=/[#\?@]/g,vd=/#/g;function Xa(x,E){this.h=this.g=null,this.i=x||null,this.j=!!E}function ws(x){x.g||(x.g=new Map,x.h=0,x.i&&Ko(x.i,function(E,S){x.add(decodeURIComponent(E.replace(/\+/g," ")),S)}))}t=Xa.prototype,t.add=function(x,E){ws(this),this.i=null,x=Qa(this,x);let S=this.g.get(x);return S||this.g.set(x,S=[]),S.push(E),this.h+=1,this};function bd(x,E){ws(x),E=Qa(x,E),x.g.has(E)&&(x.i=null,x.h-=x.g.get(E).length,x.g.delete(E))}function bc(x,E){return ws(x),E=Qa(x,E),x.g.has(E)}t.forEach=function(x,E){ws(this),this.g.forEach(function(S,V){S.forEach(function(re){x.call(E,re,V,this)},this)},this)};function _c(x,E){ws(x);let S=[];if(typeof E=="string")bc(x,E)&&(S=S.concat(x.g.get(Qa(x,E))));else for(x=Array.from(x.g.values()),E=0;E<x.length;E++)S=S.concat(x[E]);return S}t.set=function(x,E){return ws(this),this.i=null,x=Qa(this,x),bc(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[E]),this.h+=1,this},t.get=function(x,E){return x?(x=_c(this,x),x.length>0?String(x[0]):E):E};function Yo(x,E,S){bd(x,E),S.length>0&&(x.i=null,x.g.set(Qa(x,E),T(S)),x.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],E=Array.from(this.g.keys());for(let V=0;V<E.length;V++){var S=E[V];const re=la(S);S=_c(this,S);for(let fe=0;fe<S.length;fe++){let Ae=re;S[fe]!==""&&(Ae+="="+la(S[fe])),x.push(Ae)}}return this.i=x.join("&")};function _d(x){const E=new Xa;return E.i=x.i,x.g&&(E.g=new Map(x.g),E.h=x.h),E}function Qa(x,E){return E=String(E),x.j&&(E=E.toLowerCase()),E}function Wo(x,E){E&&!x.j&&(ws(x),x.i=null,x.g.forEach(function(S,V){const re=V.toLowerCase();V!=re&&(bd(this,V),Yo(this,re,S))},x)),x.j=E}function ci(x,E){const S=new bt;if(u.Image){const V=new Image;V.onload=y(Ks,S,"TestLoadImage: loaded",!0,E,V),V.onerror=y(Ks,S,"TestLoadImage: error",!1,E,V),V.onabort=y(Ks,S,"TestLoadImage: abort",!1,E,V),V.ontimeout=y(Ks,S,"TestLoadImage: timeout",!1,E,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=x}else E(!1)}function wc(x,E){const S=new bt,V=new AbortController,re=setTimeout(()=>{V.abort(),Ks(S,"TestPingServer: timeout",!1,E)},1e4);fetch(x,{signal:V.signal}).then(fe=>{clearTimeout(re),fe.ok?Ks(S,"TestPingServer: ok",!0,E):Ks(S,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(re),Ks(S,"TestPingServer: error",!1,E)})}function Ks(x,E,S,V,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),V(S)}catch{}}function Za(){this.g=new pt}function Pi(x){this.i=x.Sb||null,this.h=x.ab||!1}_(Pi,gt),Pi.prototype.g=function(){return new Zr(this.i,this.h)};function Zr(x,E){Ie.call(this),this.H=x,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Zr,Ie),t=Zr.prototype,t.open=function(x,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=E,this.readyState=1,ui(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(E.body=x),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,er(this)),this.readyState=0},t.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xo(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xo(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}t.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var E=x.value?x.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!x.done}))&&(this.response=this.responseText+=E)}x.done?er(this):ui(this),this.readyState==3&&Xo(this)}},t.Oa=function(x){this.g&&(this.response=this.responseText=x,er(this))},t.Na=function(x){this.g&&(this.response=x,er(this))},t.ga=function(){this.g&&er(this)};function er(x){x.readyState=4,x.l=null,x.j=null,x.B=null,ui(x)}t.setRequestHeader=function(x,E){this.A.append(x,E)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],E=this.h.entries();for(var S=E.next();!S.done;)S=S.value,x.push(S[0]+": "+S[1]),S=E.next();return x.join(`\r
`)};function ui(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Js(x){let E="";return ne(x,function(S,V){E+=V,E+=":",E+=S,E+=`\r
`}),E}function eo(x,E,S){e:{for(V in S){var V=!1;break e}V=!0}V||(S=Js(S),typeof x=="string"?S!=null&&la(S):Gt(x,E,S))}function Yt(x){Ie.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Yt,Ie);var Li=/^https?$/i,Ec=["POST","PUT"];t=Yt.prototype,t.Fa=function(x){this.H=x},t.ea=function(x,E,S,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);E=E?E.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hc.g(),this.g.onreadystatechange=w(f(this.Ca,this));try{this.B=!0,this.g.open(E,String(x),!0),this.B=!1}catch(fe){to(this,fe);return}if(x=S||"",S=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var re in V)S.set(re,V[re]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const fe of V.keys())S.set(fe,V.get(fe));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(S.keys()).find(fe=>fe.toLowerCase()=="content-type"),re=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(Ec,E,void 0)>=0)||V||re||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,Ae]of S)this.g.setRequestHeader(fe,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(fe){to(this,fe)}};function to(x,E){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=E,x.o=5,Nc(x),ca(x)}function Nc(x){x.A||(x.A=!0,Re(x,"complete"),Re(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Re(this,"complete"),Re(this,"abort"),ca(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ca(this,!0)),Yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?no(this):this.Xa())},t.Xa=function(){no(this)};function no(x){if(x.h&&typeof l<"u"){if(x.v&&di(x)==4)setTimeout(x.Ca.bind(x),0);else if(Re(x,"readystatechange"),di(x)==4){x.h=!1;try{const fe=x.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var S;if(!(S=E)){var V;if(V=fe===0){let Ae=String(x.D).match(xd)[1]||null;!Ae&&u.self&&u.self.location&&(Ae=u.self.location.protocol.slice(0,-1)),V=!Li.test(Ae?Ae.toLowerCase():"")}S=V}if(S)Re(x,"complete"),Re(x,"success");else{x.o=6;try{var re=di(x)>2?x.g.statusText:""}catch{re=""}x.l=re+" ["+x.ca()+"]",Nc(x)}}finally{ca(x)}}}}function ca(x,E){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const S=x.g;x.g=null,E||Re(x,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function di(x){return x.g?x.g.readyState:0}t.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(x){if(this.g){var E=this.g.responseText;return x&&E.indexOf(x)==0&&(E=E.substring(x.length)),Xe(E)}};function Yn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function ua(x){const E={};x=(x.g&&di(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<x.length;V++){if(F(x[V]))continue;var S=md(x[V]);const re=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const fe=E[re]||[];E[re]=fe,fe.push(S)}J(E,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(x,E,S){return S&&S.internalChannelParams&&S.internalChannelParams[x]||E}function tr(x){this.za=0,this.i=[],this.j=new bt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,x),this.Za=Vi("retryDelaySeedMs",1e4,x),this.Ta=Vi("forwardChannelMaxRetries",2,x),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new fc(x&&x.concurrentRequestLimit),this.Ba=new Za,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=tr.prototype,t.ka=8,t.I=1,t.connect=function(x,E,S,V){Ft(0),this.W=x,this.H=E||{},S&&V!==void 0&&(this.H.OSID=S,this.H.OAID=V),this.F=this.X,this.J=Ad(this,null,this.W),Ui(this)};function Tc(x){if(Qo(x),x.I==3){var E=x.V++,S=Cn(x.J);if(Gt(S,"SID",x.M),Gt(S,"RID",E),Gt(S,"TYPE","terminate"),so(x,S),E=new oi(x,x.j,E),E.M=2,E.A=Xr(Cn(S)),S=!1,u.navigator&&u.navigator.sendBeacon)try{S=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!S&&u.Image&&(new Image().src=E.A,S=!0),S||(E.g=Id(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ii(E)}Cd(x)}function nr(x){x.g&&(Cc(x),x.g.cancel(),x.g=null)}function Qo(x){nr(x),x.v&&(u.clearTimeout(x.v),x.v=null),el(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function Ui(x){if(!mc(x.h)&&!x.m){x.m=!0;var E=x.Ea;te||A(),L||(te(),L=!0),C.add(E,x),x.D=0}}function Zo(x,E){return Di(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=E.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=fn(f(x.Ea,x,E),Sd(x,x.D)),x.D++,!0)}t.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const re=new oi(this,this.j,x);let fe=this.o;if(this.U&&(fe?(fe=O(fe),oe(fe,this.U)):fe=this.U),this.u!==null||this.R||(re.J=fe,fe=null),this.S)e:{for(var E=0,S=0;S<this.i.length;S++){t:{var V=this.i[S];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(E+=V,E>4096){E=S;break e}if(E===4096||S===this.i.length-1){E=S+1;break e}}E=1e3}else E=1e3;E=wd(this,re,E),S=Cn(this.J),Gt(S,"RID",x),Gt(S,"CVER",22),this.G&&Gt(S,"X-HTTP-Session-Id",this.G),so(this,S),fe&&(this.R?E="headers="+la(Js(fe))+"&"+E:this.u&&eo(S,this.u,fe)),pc(this.h,re),this.Ra&&Gt(S,"TYPE","init"),this.S?(Gt(S,"$req",E),Gt(S,"SID","null"),re.U=!0,Ai(re,S,null)):Ai(re,S,E),this.I=2}}else this.I==3&&(x?Sc(this,x):this.i.length==0||mc(this.h)||Sc(this))};function Sc(x,E){var S;E?S=E.l:S=x.V++;const V=Cn(x.J);Gt(V,"SID",x.M),Gt(V,"RID",S),Gt(V,"AID",x.K),so(x,V),x.u&&x.o&&eo(V,x.u,x.o),S=new oi(x,x.j,S,x.D+1),x.u===null&&(S.J=x.o),E&&(x.i=E.G.concat(x.i)),E=wd(x,S,1e3),S.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),pc(x.h,S),Ai(S,V,E)}function so(x,E){x.H&&ne(x.H,function(S,V){Gt(E,V,S)}),x.l&&ne({},function(S,V){Gt(E,V,S)})}function wd(x,E,S){S=Math.min(x.i.length,S);const V=x.l?f(x.l.Ka,x.l,x):null;e:{var re=x.i;let lt=-1;for(;;){const yn=["count="+S];lt==-1?S>0?(lt=re[0].g,yn.push("ofs="+lt)):lt=0:yn.push("ofs="+lt);let Ot=!0;for(let on=0;on<S;on++){var fe=re[on].g;const Ys=re[on].map;if(fe-=lt,fe<0)lt=Math.max(0,re[on].g-100),Ot=!1;else try{fe="req"+fe+"_"||"";try{var Ae=Ys instanceof Map?Ys:Object.entries(Ys);for(const[zi,hi]of Ae){let fi=hi;h(hi)&&(fi=et(hi)),yn.push(fe+zi+"="+encodeURIComponent(fi))}}catch(zi){throw yn.push(fe+"type="+encodeURIComponent("_badmap")),zi}}catch{V&&V(Ys)}}if(Ot){Ae=yn.join("&");break e}}Ae=void 0}return x=x.i.splice(0,S),E.G=x,Ae}function Ed(x){if(!x.g&&!x.v){x.Y=1;var E=x.Da;te||A(),L||(te(),L=!0),C.add(E,x),x.A=0}}function io(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=fn(f(x.Da,x),Sd(x,x.A)),x.A++,!0)}t.Da=function(){if(this.v=null,Nd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=fn(f(this.Wa,this),x)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),nr(this),Nd(this))};function Cc(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function Nd(x){x.g=new oi(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var E=Cn(x.na);Gt(E,"RID","rpc"),Gt(E,"SID",x.M),Gt(E,"AID",x.K),Gt(E,"CI",x.F?"0":"1"),!x.F&&x.ia&&Gt(E,"TO",x.ia),Gt(E,"TYPE","xmlhttp"),so(x,E),x.u&&x.o&&eo(E,x.u,x.o),x.O&&(x.g.H=x.O);var S=x.g;x=x.ba,S.M=1,S.A=Xr(Cn(E)),S.u=null,S.R=!0,Go(S,x)}t.Va=function(){this.C!=null&&(this.C=null,nr(this),io(this),Ft(19))};function el(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function Td(x,E){var S=null;if(x.g==E){el(x),Cc(x),x.g=null;var V=2}else if(ki(x.h,E))S=E.G,gc(x.h,E),V=1;else return;if(x.I!=0){if(E.o)if(V==1){S=E.u?E.u.length:0,E=Date.now()-E.F;var re=x.D;V=Ut(),Re(V,new xn(V,S)),Ui(x)}else Ed(x);else if(re=E.m,re==3||re==0&&E.X>0||!(V==1&&Zo(x,E)||V==2&&io(x)))switch(S&&S.length>0&&(E=x.h,E.i=E.i.concat(S)),re){case 1:Oi(x,5);break;case 4:Oi(x,10);break;case 3:Oi(x,6);break;default:Oi(x,2)}}}function Sd(x,E){let S=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(S*=2),S*E}function Oi(x,E){if(x.j.info("Error code "+E),E==2){var S=f(x.bb,x),V=x.Ua;const re=!V;V=new js(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Fn(V,"https"),Xr(V),re?ci(V.toString(),S):wc(V.toString(),S)}else Ft(2);x.I=0,x.l&&x.l.pa(E),Cd(x),Qo(x)}t.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Cd(x){if(x.I=0,x.ja=[],x.l){const E=xc(x.h);(E.length!=0||x.i.length!=0)&&(M(x.ja,E),M(x.ja,x.i),x.h.i.length=0,T(x.i),x.i.length=0),x.l.oa()}}function Ad(x,E,S){var V=S instanceof js?Cn(S):new js(S);if(V.g!="")E&&(V.g=E+"."+V.g),Ya(V,V.u);else{var re=u.location;V=re.protocol,E=E?E+"."+re.hostname:re.hostname,re=+re.port;const fe=new js(null);V&&Fn(fe,V),E&&(fe.g=E),re&&Ya(fe,re),S&&(fe.h=S),V=fe}return S=x.G,E=x.wa,S&&E&&Gt(V,S,E),Gt(V,"VER",x.ka),so(x,V),V}function Id(x,E,S){if(E&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=x.Aa&&!x.ma?new Yt(new Pi({ab:S})):new Yt(x.ma),E.Fa(x.L),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rd(){}t=Rd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function sr(){}sr.prototype.g=function(x,E){return new ms(x,E)};function ms(x,E){Ie.call(this),this.g=new tr(E),this.l=x,this.h=E&&E.messageUrlParams||null,x=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(x?x["X-WebChannel-Content-Type"]=E.messageContentType:x={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(x?x["X-WebChannel-Client-Profile"]=E.sa:x={"X-WebChannel-Client-Profile":E.sa}),this.g.U=x,(x=E&&E.Qb)&&!F(x)&&(this.g.u=x),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!F(E)&&(this.g.G=E,x=this.h,x!==null&&E in x&&(x=this.h,E in x&&delete x[E])),this.j=new da(this)}_(ms,Ie),ms.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ms.prototype.close=function(){Tc(this.g)},ms.prototype.o=function(x){var E=this.g;if(typeof x=="string"){var S={};S.__data__=x,x=S}else this.v&&(S={},S.__data__=et(x),x=S);E.i.push(new Sn(E.Ya++,x)),E.I==3&&Ui(E)},ms.prototype.N=function(){this.g.l=null,delete this.j,Tc(this.g),delete this.g,ms.Z.N.call(this)};function jd(x){X.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var E=x.__sm__;if(E){e:{for(const S in E){x=S;break e}x=void 0}(this.i=x)&&(x=this.i,E=E!==null&&x in E?E[x]:void 0),this.data=E}else this.data=x}_(jd,X);function Dd(){de.call(this),this.status=1}_(Dd,de);function da(x){this.g=x}_(da,Rd),da.prototype.ra=function(){Re(this.g,"a")},da.prototype.qa=function(x){Re(this.g,new jd(x))},da.prototype.pa=function(x){Re(this.g,new Dd)},da.prototype.oa=function(){Re(this.g,"b")},sr.prototype.createWebChannel=sr.prototype.g,ms.prototype.send=ms.prototype.o,ms.prototype.open=ms.prototype.m,ms.prototype.close=ms.prototype.close,nT=function(){return new sr},tT=function(){return Ut()},eT=Te,Zg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ft.NO_ERROR=0,ft.TIMEOUT=8,ft.HTTP_ERROR=6,Xh=ft,Ci.COMPLETE="complete",ZN=Ci,jt.EventType=St,St.OPEN="a",St.CLOSE="b",St.ERROR="c",St.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,xu=jt,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,QN=Yt}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const n1="@firebase/firestore",s1="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ls.UNAUTHENTICATED=new ls(null),ls.GOOGLE_CREDENTIALS=new ls("google-credentials-uid"),ls.FIRST_PARTY=new ls("first-party-uid"),ls.MOCK_USER=new ls("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new Y0("@firebase/firestore");function jl(){return jo.logLevel}function Ue(t,...e){if(jo.logLevel<=Et.DEBUG){const n=e.map(Q0);jo.debug(`Firestore (${ic}): ${t}`,...n)}}function Oa(t,...e){if(jo.logLevel<=Et.ERROR){const n=e.map(Q0);jo.error(`Firestore (${ic}): ${t}`,...n)}}function Yl(t,...e){if(jo.logLevel<=Et.WARN){const n=e.map(Q0);jo.warn(`Firestore (${ic}): ${t}`,...n)}}function Q0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,sT(t,s,n)}function sT(t,e,n){let s=`FIRESTORE (${ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Oa(s),new Error(s)}function qt(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||sT(e,a,s)}function rt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends ra{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ls.UNAUTHENTICATED)))}shutdown(){}}class i4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class a4{constructor(e){this.t=e,this.currentUser=ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qt(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let l=new ka;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ka,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ka)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qt(typeof s.accessToken=="string",31837,{l:s}),new iT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qt(e===null||typeof e=="string",2055,{h:e}),new ls(e)}}class r4{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=ls.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o4{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new r4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ls.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class i1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qt(this.o===void 0,3512);const s=l=>{l.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new i1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new i1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=c4(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<n&&(s+=e.charAt(a[l]%62))}return s}}function Nt(t,e){return t<e?-1:t>e?1:0}function e0(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=t.charAt(s),l=e.charAt(s);if(a!==l)return Pg(a)===Pg(l)?Nt(a,l):Pg(a)?1:-1}return Nt(t.length,e.length)}const u4=55296,d4=57343;function Pg(t){const e=t.charCodeAt(0);return e>=u4&&e<=d4}function Wl(t,e,n){return t.length===e.length&&t.every(((s,a)=>n(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="__name__";class Gi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ze(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const l=Gi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return Nt(e.length,n.length)}static compareSegments(e,n){const s=Gi.isNumericId(e),a=Gi.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Gi.extractNumericId(e).compare(Gi.extractNumericId(n)):e0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}}class nn extends Gi{construct(e,n,s){return new nn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ke(ve.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new nn(n)}static emptyPath(){return new nn([])}}const h4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ts extends Gi{construct(e,n,s){return new ts(e,n,s)}static isValidIdentifier(e){return h4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ts.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===a1}static keyField(){return new ts([a1])}static fromServerFormat(e){const n=[];let s="",a=0;const l=()=>{if(s.length===0)throw new ke(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ke(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ke(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new ke(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ts(n)}static emptyPath(){return new ts([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.path=e}static fromPath(e){return new He(nn.fromString(e))}static fromName(e){return new He(nn.fromString(e).popFirst(5))}static empty(){return new He(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new nn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e,n){if(!n)throw new ke(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function f4(t,e,n,s){if(e===!0&&s===!0)throw new ke(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function r1(t){if(!He.isDocumentKey(t))throw new ke(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function o1(t){if(He.isDocumentKey(t))throw new ke(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ze(12329,{type:typeof t})}function ys(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xf(t);throw new ke(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,e){const n={typeString:t};return e&&(n.value=e),n}function ed(t,e){if(!rT(t))throw new ke(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const u=t[s];if(a&&typeof u!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){n=`Expected '${s}' field to equal '${l.value}'`;break}}if(n)throw new ke(ve.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=-62135596800,c1=1e6;class rn{static now(){return rn.fromMillis(Date.now())}static fromDate(e){return rn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*c1);return new rn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<l1)throw new ke(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c1}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ed(e,rn._jsonSchema))return new rn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-l1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rn._jsonSchemaVersion="firestore/timestamp/1.0",rn._jsonSchema={type:Mn("string",rn._jsonSchemaVersion),seconds:Mn("number"),nanoseconds:Mn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new rn(0,0))}static max(){return new nt(new rn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;function m4(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=nt.fromTimestamp(s===1e9?new rn(n+1,0):new rn(n,s));return new Ur(a,He.empty(),e)}function p4(t){return new Ur(t.readTime,t.key,zu)}class Ur{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ur(nt.min(),He.empty(),zu)}static max(){return new Ur(nt.max(),He.empty(),zu)}}function g4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=He.comparator(t.documentKey,e.documentKey),n!==0?n:Nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==x4)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,s)=>{n(e)}))}static reject(e){return new we(((n,s)=>{s(e)}))}static waitFor(e){return new we(((n,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&n()}),(m=>s(m)))})),u=!0,l===a&&n()}))}static or(e){let n=we.resolve(!1);for(const s of e)n=n.next((a=>a?we.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,l)=>{s.push(n.call(this,a,l))})),this.waitFor(s)}static mapArray(e,n){return new we(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let m=0;m<l;m++){const f=m;n(e[f]).next((y=>{u[f]=y,++h,h===l&&s(u)}),(y=>a(y)))}}))}static doWhile(e,n){return new we(((s,a)=>{const l=()=>{e()===!0?n().next((()=>{l()}),a):s()};l()}))}}function v4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=-1;function Zf(t){return t==null}function xf(t){return t===0&&1/t==-1/0}function b4(t){return typeof t=="number"&&Number.isInteger(t)&&!xf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="";function _4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=u1(e)),e=w4(t.get(n),e);return u1(e)}function w4(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case oT:n+="";break;default:n+=l}}return n}function u1(t){return t+oT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.comparator=e,this.root=n||es.EMPTY}insert(e,n){return new dn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?s(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class es{constructor(e,n,s,a,l){this.key=e,this.value=n,this.color=s??es.RED,this.left=a??es.EMPTY,this.right=l??es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,l){return new es(e??this.key,n??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,s),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return es.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1;es.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,s,a,l){return this}insert(e,n,s){return new es(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.comparator=e,this.data=new dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new h1(this.data.getIterator())}getIteratorFrom(e){return new h1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new On(this.comparator);return n.data=e,n}}class h1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.fields=e,e.sort(ts.comparator)}static empty(){return new zs([])}unionWith(e){let n=new On(ts.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new zs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new cT("Invalid base64 string: "+l):l}})(e);return new is(n)}static fromUint8Array(e){const n=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new is(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}is.EMPTY_BYTE_STRING=new is("");const E4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(qt(!!t,39018),typeof t=="string"){let e=0;const n=E4.exec(t);if(qt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:En(t.seconds),nanos:En(t.nanos)}}function En(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?is.fromBase64String(t):is.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="server_timestamp",dT="__type__",hT="__previous_value__",fT="__local_write_time__";function tx(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dT])==null?void 0:s.stringValue)===uT}function em(t){const e=t.mapValue.fields[hT];return tx(e)?em(e):e}function Fu(t){const e=Or(t.mapValue.fields[fT].timestampValue);return new rn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n,s,a,l,u,h,m,f,y){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=f,this.isUsingEmulator=y}}const yf="(default)";class Bu{constructor(e,n){this.projectId=e,this.database=n||yf}static empty(){return new Bu("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof Bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="__type__",T4="__max__",Oh={mapValue:{}},pT="__vector__",vf="value";function Fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tx(t)?4:C4(t)?9007199254740991:S4(t)?10:11:Ze(28295,{value:t})}function sa(t,e){if(t===e)return!0;const n=Fr(t);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Or(a.timestampValue),h=Or(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,l){return zr(a.bytesValue).isEqual(zr(l.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,l){return En(a.geoPointValue.latitude)===En(l.geoPointValue.latitude)&&En(a.geoPointValue.longitude)===En(l.geoPointValue.longitude)})(t,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return En(a.integerValue)===En(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=En(a.doubleValue),h=En(l.doubleValue);return u===h?xf(u)===xf(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return Wl(t.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(d1(u)!==d1(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!sa(u[m],h[m])))return!1;return!0})(t,e);default:return Ze(52216,{left:t})}}function qu(t,e){return(t.values||[]).find((n=>sa(n,e)))!==void 0}function Xl(t,e){if(t===e)return 0;const n=Fr(t),s=Fr(e);if(n!==s)return Nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(t.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=En(l.integerValue||l.doubleValue),m=En(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(t,e);case 3:return f1(t.timestampValue,e.timestampValue);case 4:return f1(Fu(t),Fu(e));case 5:return e0(t.stringValue,e.stringValue);case 6:return(function(l,u){const h=zr(l),m=zr(u);return h.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),m=u.split("/");for(let f=0;f<h.length&&f<m.length;f++){const y=Nt(h[f],m[f]);if(y!==0)return y}return Nt(h.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=Nt(En(l.latitude),En(u.latitude));return h!==0?h:Nt(En(l.longitude),En(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return m1(t.arrayValue,e.arrayValue);case 10:return(function(l,u){var w,T,M,z;const h=l.fields||{},m=u.fields||{},f=(w=h[vf])==null?void 0:w.arrayValue,y=(T=m[vf])==null?void 0:T.arrayValue,_=Nt(((M=f==null?void 0:f.values)==null?void 0:M.length)||0,((z=y==null?void 0:y.values)==null?void 0:z.length)||0);return _!==0?_:m1(f,y)})(t.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Oh.mapValue&&u===Oh.mapValue)return 0;if(l===Oh.mapValue)return 1;if(u===Oh.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),f=u.fields||{},y=Object.keys(f);m.sort(),y.sort();for(let _=0;_<m.length&&_<y.length;++_){const w=e0(m[_],y[_]);if(w!==0)return w;const T=Xl(h[m[_]],f[y[_]]);if(T!==0)return T}return Nt(m.length,y.length)})(t.mapValue,e.mapValue);default:throw Ze(23264,{he:n})}}function f1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Nt(t,e);const n=Or(t),s=Or(e),a=Nt(n.seconds,s.seconds);return a!==0?a:Nt(n.nanos,s.nanos)}function m1(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const l=Xl(n[a],s[a]);if(l)return l}return Nt(n.length,s.length)}function Ql(t){return t0(t)}function t0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Or(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return zr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return He.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",a=!0;for(const l of n.values||[])a?a=!1:s+=",",s+=t0(l);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${t0(n.fields[u])}`;return a+"}"})(t.mapValue):Ze(61005,{value:t})}function Qh(t){switch(Fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=em(t);return e?16+Qh(e):16;case 5:return 2*t.stringValue.length;case 6:return zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Qh(l)),0)})(t.arrayValue);case 10:case 11:return(function(s){let a=0;return Hr(s.fields,((l,u)=>{a+=l.length+Qh(u)})),a})(t.mapValue);default:throw Ze(13486,{value:t})}}function p1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function n0(t){return!!t&&"integerValue"in t}function nx(t){return!!t&&"arrayValue"in t}function g1(t){return!!t&&"nullValue"in t}function x1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function S4(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mT])==null?void 0:s.stringValue)===pT}function Su(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Su(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Su(t.arrayValue.values[n]);return e}return{...t}}function C4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===T4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.value=e}static empty(){return new Is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(n)}setAll(e){let n=ts.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,s,a),s={},a=[],n=h.popLast()}u?s[h.lastSegment()]=Su(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,s,a)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Zh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Hr(n,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Is(Su(this.value))}}function gT(t){const e=[];return Hr(t.fields,((n,s)=>{const a=new ts([n]);if(Zh(s)){const l=gT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new zs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,s,a,l,u,h){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new cs(e,0,nt.min(),nt.min(),nt.min(),Is.empty(),0)}static newFoundDocument(e,n,s,a){return new cs(e,1,n,nt.min(),s,a,0)}static newNoDocument(e,n){return new cs(e,2,n,nt.min(),nt.min(),Is.empty(),0)}static newUnknownDocument(e,n){return new cs(e,3,n,nt.min(),nt.min(),Is.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.position=e,this.inclusive=n}}function y1(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const l=e[a],u=t.position[a];if(l.field.isKeyField()?s=He.comparator(He.fromName(u.referenceValue),n.key):s=Xl(u,n.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function v1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sa(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function A4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{}class kn extends xT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new R4(e,n,s):n==="array-contains"?new k4(e,s):n==="in"?new M4(e,s):n==="not-in"?new P4(e,s):n==="array-contains-any"?new L4(e,s):new kn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new j4(e,s):new D4(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xl(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison(Xl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends xT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new wi(e,n)}matches(e){return yT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yT(t){return t.op==="and"}function vT(t){return I4(t)&&yT(t)}function I4(t){for(const e of t.filters)if(e instanceof wi)return!1;return!0}function s0(t){if(t instanceof kn)return t.field.canonicalString()+t.op.toString()+Ql(t.value);if(vT(t))return t.filters.map((e=>s0(e))).join(",");{const e=t.filters.map((n=>s0(n))).join(",");return`${t.op}(${e})`}}function bT(t,e){return t instanceof kn?(function(s,a){return a instanceof kn&&s.op===a.op&&s.field.isEqual(a.field)&&sa(s.value,a.value)})(t,e):t instanceof wi?(function(s,a){return a instanceof wi&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&bT(u,a.filters[h])),!0):!1})(t,e):void Ze(19439)}function _T(t){return t instanceof kn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ql(n.value)}`})(t):t instanceof wi?(function(n){return n.op.toString()+" {"+n.getFilters().map(_T).join(" ,")+"}"})(t):"Filter"}class R4 extends kn{constructor(e,n,s){super(e,n,s),this.key=He.fromName(s.referenceValue)}matches(e){const n=He.comparator(e.key,this.key);return this.matchesComparison(n)}}class j4 extends kn{constructor(e,n){super(e,"in",n),this.keys=wT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class D4 extends kn{constructor(e,n){super(e,"not-in",n),this.keys=wT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function wT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>He.fromName(s.referenceValue)))}class k4 extends kn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nx(n)&&qu(n.arrayValue,this.value)}}class M4 extends kn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qu(this.value.arrayValue,n)}}class P4 extends kn{constructor(e,n){super(e,"not-in",n)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qu(this.value.arrayValue,n)}}class L4 extends kn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nx(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>qu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function b1(t,e=null,n=[],s=[],a=null,l=null,u=null){return new V4(t,e,n,s,a,l,u)}function sx(t){const e=rt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>s0(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Zf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Ql(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Ql(s))).join(",")),e.Te=n}return e.Te}function ix(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v1(t.startAt,e.startAt)&&v1(t.endAt,e.endAt)}function i0(t){return He.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n=null,s=[],a=[],l=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function U4(t,e,n,s,a,l,u,h){return new oc(t,e,n,s,a,l,u,h)}function tm(t){return new oc(t)}function _1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ET(t){return t.collectionGroup!==null}function Cu(t){const e=rt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new On(ts.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Hu(l,s))})),n.has(ts.keyField().canonicalString())||e.Ie.push(new Hu(ts.keyField(),s))}return e.Ie}function Wi(t){const e=rt(t);return e.Ee||(e.Ee=O4(e,Cu(t))),e.Ee}function O4(t,e){if(t.limitType==="F")return b1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Hu(a.field,l)}));const n=t.endAt?new bf(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new bf(t.startAt.position,t.startAt.inclusive):null;return b1(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function a0(t,e){const n=t.filters.concat([e]);return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function r0(t,e,n){return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nm(t,e){return ix(Wi(t),Wi(e))&&t.limitType===e.limitType}function NT(t){return`${sx(Wi(t))}|lt:${t.limitType}`}function Dl(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>_T(a))).join(", ")}]`),Zf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>Ql(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>Ql(a))).join(",")),`Target(${s})`})(Wi(t))}; limitType=${t.limitType})`}function sm(t,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):He.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(t,e)&&(function(s,a){for(const l of Cu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(t,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(t,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,m){const f=y1(u,h,m);return u.inclusive?f<=0:f<0})(s.startAt,Cu(s),a)||s.endAt&&!(function(u,h,m){const f=y1(u,h,m);return u.inclusive?f>=0:f>0})(s.endAt,Cu(s),a))})(t,e)}function z4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TT(t){return(e,n)=>{let s=!1;for(const a of Cu(t)){const l=F4(a,e,n);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function F4(t,e,n){const s=t.field.isKeyField()?He.comparator(e.key,n.key):(function(l,u,h){const m=u.data.field(l),f=h.data.field(l);return m!==null&&f!==null?Xl(m,f):Ze(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ze(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,((n,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return lT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new dn(He.comparator);function za(){return B4}const ST=new dn(He.comparator);function yu(...t){let e=ST;for(const n of t)e=e.insert(n.key,n);return e}function CT(t){let e=ST;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function To(){return Au()}function AT(){return Au()}function Au(){return new Oo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const q4=new dn(He.comparator),H4=new On(He.comparator);function Tt(...t){let e=H4;for(const n of t)e=e.add(n);return e}const G4=new On(Nt);function $4(){return G4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xf(e)?"-0":e}}function IT(t){return{integerValue:""+t}}function K4(t,e){return b4(e)?IT(e):ax(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this._=void 0}}function J4(t,e,n){return t instanceof _f?(function(a,l){const u={fields:{[dT]:{stringValue:uT},[fT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&tx(l)&&(l=em(l)),l&&(u.fields[hT]=l),{mapValue:u}})(n,e):t instanceof Gu?jT(t,e):t instanceof $u?DT(t,e):(function(a,l){const u=RT(a,l),h=w1(u)+w1(a.Ae);return n0(u)&&n0(a.Ae)?IT(h):ax(a.serializer,h)})(t,e)}function Y4(t,e,n){return t instanceof Gu?jT(t,e):t instanceof $u?DT(t,e):n}function RT(t,e){return t instanceof wf?(function(s){return n0(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class _f extends im{}class Gu extends im{constructor(e){super(),this.elements=e}}function jT(t,e){const n=kT(e);for(const s of t.elements)n.some((a=>sa(a,s)))||n.push(s);return{arrayValue:{values:n}}}class $u extends im{constructor(e){super(),this.elements=e}}function DT(t,e){let n=kT(e);for(const s of t.elements)n=n.filter((a=>!sa(a,s)));return{arrayValue:{values:n}}}class wf extends im{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function w1(t){return En(t.integerValue||t.doubleValue)}function kT(t){return nx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function W4(t,e){return t.field.isEqual(e.field)&&(function(s,a){return s instanceof Gu&&a instanceof Gu||s instanceof $u&&a instanceof $u?Wl(s.elements,a.elements,sa):s instanceof wf&&a instanceof wf?sa(s.Ae,a.Ae):s instanceof _f&&a instanceof _f})(t.transform,e.transform)}class X4{constructor(e,n){this.version=e,this.transformResults=n}}class vs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class am{}function MT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rm(t.key,vs.none()):new td(t.key,t.data,vs.none());{const n=t.data,s=Is.empty();let a=new On(ts.comparator);for(let l of e.fields)if(!a.has(l)){let u=n.field(l);u===null&&l.length>1&&(l=l.popLast(),u=n.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Gr(t.key,s,new zs(a.toArray()),vs.none())}}function Q4(t,e,n){t instanceof td?(function(a,l,u){const h=a.value.clone(),m=N1(a.fieldTransforms,l,u.transformResults);h.setAll(m),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Gr?(function(a,l,u){if(!ef(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=N1(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(PT(a)),m.setAll(h),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(t,e,n):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Iu(t,e,n,s){return t instanceof td?(function(l,u,h,m){if(!ef(l.precondition,u))return h;const f=l.value.clone(),y=T1(l.fieldTransforms,m,u);return f.setAll(y),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(t,e,n,s):t instanceof Gr?(function(l,u,h,m){if(!ef(l.precondition,u))return h;const f=T1(l.fieldTransforms,m,u),y=u.data;return y.setAll(PT(l)),y.setAll(f),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(t,e,n,s):(function(l,u,h){return ef(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function Z4(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),l=RT(s.transform,a||null);l!=null&&(n===null&&(n=Is.empty()),n.set(s.field,l))}return n||null}function E1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Wl(s,a,((l,u)=>W4(l,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class td extends am{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Gr extends am{constructor(e,n,s,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function PT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function N1(t,e,n){const s=new Map;qt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const l=t[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,Y4(u,h,n[a]))}return s}function T1(t,e,n){const s=new Map;for(const a of t){const l=a.transform,u=n.data.field(a.field);s.set(a.field,J4(l,u,e))}return s}class rm extends am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eP extends am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Q4(l,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Iu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Iu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=AT();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=n.has(a.key)?null:h;const m=MT(u,h);m!==null&&s.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(nt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,((n,s)=>E1(n,s)))&&Wl(this.baseMutations,e.baseMutations,((n,s)=>E1(n,s)))}}class rx{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){qt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return q4})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new rx(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,Rt;function iP(t){switch(t){case ve.OK:return Ze(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Ze(15467,{code:t})}}function LT(t){if(t===void 0)return Oa("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Dn.OK:return ve.OK;case Dn.CANCELLED:return ve.CANCELLED;case Dn.UNKNOWN:return ve.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return ve.INTERNAL;case Dn.UNAVAILABLE:return ve.UNAVAILABLE;case Dn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Dn.NOT_FOUND:return ve.NOT_FOUND;case Dn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Dn.ABORTED:return ve.ABORTED;case Dn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Dn.DATA_LOSS:return ve.DATA_LOSS;default:return Ze(39323,{code:t})}}(Rt=Dn||(Dn={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new Pr([4294967295,4294967295],0);function S1(t){const e=aP().encode(t),n=new XN;return n.update(e),new Uint8Array(n.digest())}function C1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Pr([n,s],0),new Pr([a,l],0)]}class ox{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new vu(`Invalid padding: ${n}`);if(s<0)throw new vu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new vu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pr.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(Pr.fromNumber(s)));return a.compare(rP)===1&&(a=new Pr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=S1(e),[s,a]=C1(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new ox(l,a,n);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=S1(e),[s,a]=C1(n);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,s,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new om(nt.min(),a,new dn(Nt),za(),Tt())}}class nd{constructor(e,n,s,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new nd(s,n,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class VT{constructor(e,n){this.targetId=e,this.Ce=n}}class UT{constructor(e,n,s=is.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class A1{constructor(){this.ve=0,this.Fe=I1(),this.Me=is.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Tt(),n=Tt(),s=Tt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Ze(38017,{changeType:l})}})),new nd(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=I1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oP{constructor(e){this.Ge=e,this.ze=new Map,this.je=za(),this.Je=zh(),this.He=zh(),this.Ye=new dn(Nt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ze(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const l=a.target;if(i0(l))if(s===0){const u=new He(l.path);this.et(n,u,cs.newNoDocument(u,nt.min()))}else qt(s===1,20013,{expectedCount:s});else{const u=this._t(n);if(u!==s){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(n);const f=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=n;let u,h;try{u=zr(s).toUint8Array()}catch(m){if(m instanceof cT)return Yl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new ox(u,a,l)}catch(m){return Yl(m instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(n,l,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&i0(h.target)){const m=new He(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,cs.newNoDocument(m,e))}l.Be&&(n.set(u,l.ke()),l.qe())}}));let s=Tt();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((m=>{const f=this.ot(m);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new om(e,n,this.Ye,this.je,s);return this.je=za(),this.Je=zh(),this.He=zh(),this.Ye=new dn(Nt),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new A1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new On(Nt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new On(Nt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new A1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zh(){return new dn(He.comparator)}function I1(){return new dn(He.comparator)}const lP={asc:"ASCENDING",desc:"DESCENDING"},cP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uP={and:"AND",or:"OR"};class dP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function o0(t,e){return t.useProto3Json||Zf(e)?e:{value:e}}function Ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hP(t,e){return Ef(t,e.toTimestamp())}function Xi(t){return qt(!!t,49232),nt.fromTimestamp((function(n){const s=Or(n);return new rn(s.seconds,s.nanos)})(t))}function lx(t,e){return l0(t,e).canonicalString()}function l0(t,e){const n=(function(a){return new nn(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function zT(t){const e=nn.fromString(t);return qt(GT(e),10190,{key:e.toString()}),e}function c0(t,e){return lx(t.databaseId,e.path)}function Lg(t,e){const n=zT(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new He(BT(n))}function FT(t,e){return lx(t.databaseId,e)}function fP(t){const e=zT(t);return e.length===4?nn.emptyPath():BT(e)}function u0(t){return new nn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BT(t){return qt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function R1(t,e,n){return{name:c0(t,e),fields:n.value.mapValue.fields}}function mP(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ze(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(f,y){return f.useProto3Json?(qt(y===void 0||typeof y=="string",58123),is.fromBase64String(y||"")):(qt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),is.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(f){const y=f.code===void 0?ve.UNKNOWN:LT(f.code);return new ke(y,f.message||"")})(u);n=new UT(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Lg(t,s.document.name),l=Xi(s.document.updateTime),u=s.document.createTime?Xi(s.document.createTime):nt.min(),h=new Is({mapValue:{fields:s.document.fields}}),m=cs.newFoundDocument(a,l,u,h),f=s.targetIds||[],y=s.removedTargetIds||[];n=new tf(f,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Lg(t,s.document),l=s.readTime?Xi(s.readTime):nt.min(),u=cs.newNoDocument(a,l),h=s.removedTargetIds||[];n=new tf([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Lg(t,s.document),l=s.removedTargetIds||[];n=new tf([],l,a,null)}else{if(!("filter"in e))return Ze(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new sP(a,l),h=s.targetId;n=new VT(h,u)}}return n}function pP(t,e){let n;if(e instanceof td)n={update:R1(t,e.key,e.value)};else if(e instanceof rm)n={delete:c0(t,e.key)};else if(e instanceof Gr)n={update:R1(t,e.key,e.data),updateMask:NP(e.fieldMask)};else{if(!(e instanceof eP))return Ze(16599,{Vt:e.type});n={verify:c0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof _f)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Gu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof $u)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof wf)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Ze(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:hP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ze(27497)})(t,e.precondition)),n}function gP(t,e){return t&&t.length>0?(qt(e!==void 0,14353),t.map((n=>(function(a,l){let u=a.updateTime?Xi(a.updateTime):Xi(l);return u.isEqual(nt.min())&&(u=Xi(l)),new X4(u,a.transformResults||[])})(n,e)))):[]}function xP(t,e){return{documents:[FT(t,e.path)]}}function yP(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=FT(t,a);const l=(function(f){if(f.length!==0)return HT(wi.create(f,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const u=(function(f){if(f.length!==0)return f.map((y=>(function(w){return{field:kl(w.field),direction:_P(w.dir)}})(y)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=o0(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:a}}function vP(t){let e=fP(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){qt(s===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=(function(_){const w=qT(_);return w instanceof wi&&vT(w)?w.getFilters():[w]})(n.where));let u=[];n.orderBy&&(u=(function(_){return _.map((w=>(function(M){return new Hu(Ml(M.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(w)))})(n.orderBy));let h=null;n.limit&&(h=(function(_){let w;return w=typeof _=="object"?_.value:_,Zf(w)?null:w})(n.limit));let m=null;n.startAt&&(m=(function(_){const w=!!_.before,T=_.values||[];return new bf(T,w)})(n.startAt));let f=null;return n.endAt&&(f=(function(_){const w=!_.before,T=_.values||[];return new bf(T,w)})(n.endAt)),U4(e,a,u,l,h,"F",m,f)}function bP(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ml(n.unaryFilter.field);return kn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Ml(n.unaryFilter.field);return kn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ml(n.unaryFilter.field);return kn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ml(n.unaryFilter.field);return kn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kn.create(Ml(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return wi.create(n.compositeFilter.filters.map((s=>qT(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}})(n.compositeFilter.op))})(t):Ze(30097,{filter:t})}function _P(t){return lP[t]}function wP(t){return cP[t]}function EP(t){return uP[t]}function kl(t){return{fieldPath:t.canonicalString()}}function Ml(t){return ts.fromServerFormat(t.fieldPath)}function HT(t){return t instanceof kn?(function(n){if(n.op==="=="){if(x1(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NAN"}};if(g1(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x1(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NAN"}};if(g1(n.value))return{unaryFilter:{field:kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(n.field),op:wP(n.op),value:n.value}}})(t):t instanceof wi?(function(n){const s=n.getFilters().map((a=>HT(a)));return s.length===1?s[0]:{compositeFilter:{op:EP(n.op),filters:s}}})(t):Ze(54877,{filter:t})}function NP(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function GT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,s,a,l=nt.min(),u=nt.min(),h=is.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.yt=e}}function SP(t){const e=vP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?r0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.Cn=new AP}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(Ur.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(Ur.min())}updateCollectionGroup(e,n,s){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class AP{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new On(nn.comparator),l=!a.has(s);return this.index[n]=a.add(s),l}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new On(nn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$T=41943040;class As{static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As($T,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zl(0)}static cr(){return new Zl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="LruGarbageCollector",IP=1048576;function k1([t,e],[n,s]){const a=Nt(t,n);return a===0?Nt(e,s):a}class RP{constructor(e){this.Ir=e,this.buffer=new On(k1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();k1(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jP{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ue(D1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rc(n)?Ue(D1,"Ignoring IndexedDB error during garbage collection: ",n):await ac(n)}await this.Vr(3e5)}))}}class DP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(Qf.ce);const s=new RP(n);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(j1)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j1):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,l,u,h,m,f;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,n)))).next((_=>(l=_,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(f=Date.now(),jl()<=Et.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${_} documents in `+(f-m)+`ms
Total Duration: ${f-y}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function kP(t,e){return new DP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.changes=new Oo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?we.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&Iu(s.mutation,a,zs.empty(),rn.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Tt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Tt()){const a=To();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((l=>{let u=yu();return l.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const s=To();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Tt())))}populateOverlays(e,n,s){const a=[];return s.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,s,a){let l=za();const u=Au(),h=(function(){return Au()})();return n.forEach(((m,f)=>{const y=s.get(f.key);a.has(f.key)&&(y===void 0||y.mutation instanceof Gr)?l=l.insert(f.key,f):y!==void 0?(u.set(f.key,y.mutation.getFieldMask()),Iu(y.mutation,f,y.mutation.getFieldMask(),rn.now())):u.set(f.key,zs.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((f,y)=>u.set(f,y))),n.forEach(((f,y)=>h.set(f,new PP(y,u.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,n){const s=Au();let a=new dn(((u,h)=>u-h)),l=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((m=>{const f=n.get(m);if(f===null)return;let y=s.get(m)||zs.empty();y=h.applyToLocalView(f,y),s.set(m,y);const _=(a.get(h.batchId)||Tt()).add(m);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),f=m.key,y=m.value,_=AT();y.forEach((w=>{if(!l.has(w)){const T=MT(n.get(w),s.get(w));T!==null&&_.set(w,T),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,_))}return we.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(u){return He.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ET(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-l.size):we.resolve(To());let h=zu,m=l;return u.next((f=>we.forEach(f,((y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(y)?we.resolve():this.remoteDocumentCache.getEntry(e,y).next((w=>{m=m.insert(y,w)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,m,f,Tt()))).next((y=>({batchId:h,changes:CT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new He(n)).next((s=>{let a=yu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const l=n.collectionGroup;let u=yu();return this.indexManager.getCollectionParents(e,l).next((h=>we.forEach(h,(m=>{const f=(function(_,w){return new oc(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,s,a).next((y=>{y.forEach(((_,w)=>{u=u.insert(_,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l,a)))).next((u=>{l.forEach(((m,f)=>{const y=f.getKey();u.get(y)===null&&(u=u.insert(y,cs.newInvalidDocument(y)))}));let h=yu();return u.forEach(((m,f)=>{const y=l.get(m);y!==void 0&&Iu(y.mutation,f,zs.empty(),rn.now()),sm(n,f)&&(h=h.insert(m,f))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Xi(a.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:SP(a.bundledQuery),readTime:Xi(a.readTime)}})(n)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.overlays=new dn(He.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const s=To();return we.forEach(n,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,l)=>{this.St(e,n,l)})),we.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),we.resolve()}getOverlaysForCollection(e,n,s){const a=To(),l=n.length+1,u=new He(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,f=m.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return we.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let l=new dn(((f,y)=>f-y));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>s){let y=l.get(f.largestBatchId);y===null&&(y=To(),l=l.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const h=To(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((f,y)=>h.set(f,y))),!(h.size()>=a)););return we.resolve(h)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new nP(n,s));let l=this.qr.get(n);l===void 0&&(l=Tt(),this.qr.set(n,l)),this.qr.set(n,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.sessionToken=is.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.Qr=new On(Hn.$r),this.Ur=new On(Hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Hn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Hn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new He(new nn([])),s=new Hn(n,e),a=new Hn(n,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new He(new nn([])),s=new Hn(n,e),a=new Hn(n,e+1);let l=Tt();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const n=new Hn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Hn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return He.comparator(e.key,n.key)||Nt(e.Yr,n.Yr)}static Kr(e,n){return Nt(e.Yr,n.Yr)||He.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new On(Hn.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new tP(l,n,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new Hn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return we.resolve(u)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),l=a<0?0:a;return we.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?ex:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Hn(n,0),a=new Hn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),we.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new On(Nt);return n.forEach((a=>{const l=new Hn(a,0),u=new Hn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),we.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let l=s;He.isDocumentKey(l)||(l=l.child(""));const u=new Hn(new He(l),0);let h=new On(Nt);return this.Zr.forEachWhile((m=>{const f=m.key.path;return!!s.isPrefixOf(f)&&(f.length===a&&(h=h.add(m.Yr)),!0)}),u),we.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return we.forEach(n.mutations,(a=>{const l=new Hn(a.key,n.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Hn(n,0),a=this.Zr.firstAfterOrEqual(s);return we.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.ri=e,this.docs=(function(){return new dn(He.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return we.resolve(s?s.document.mutableCopy():cs.newInvalidDocument(n))}getEntries(e,n){let s=za();return n.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():cs.newInvalidDocument(a))})),we.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let l=za();const u=n.path,h=new He(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:f,value:{document:y}}=m.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||g4(p4(y),s)<=0||(a.has(y.key)||sm(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return we.resolve(l)}getAllFromCollectionGroup(e,n,s,a){Ze(9500)}ii(e,n){return we.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new BP(this)}getSize(e){return we.resolve(this.size)}}class BP extends MP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.persistence=e,this.si=new Oo((n=>sx(n)),ix),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new cx,this.targetCount=0,this.ai=Zl.ur()}forEachTarget(e,n){return this.si.forEach(((s,a)=>n(a))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Zl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),we.waitFor(l).next((()=>a))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return we.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),we.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),we.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return we.resolve(s)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qf(0),this.li=!1,this.li=!0,this.hi=new OP,this.referenceDelegate=e(this),this.Pi=new qP(this),this.indexManager=new CP,this.remoteDocumentCache=(function(a){return new FP(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new TP(n),this.Ii=new VP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new zP(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ue("MemoryPersistence","Starting transaction:",e);const a=new HP(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,n){return we.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class HP extends y4{constructor(e){super(),this.currentSequenceNumber=e}}class ux{constructor(e){this.persistence=e,this.Ri=new cx,this.Vi=null}static mi(e){return new ux(e)}get fi(){if(this.Vi)return this.Vi;throw Ze(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),we.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(s=>{const a=He.fromPath(s);return this.gi(e,a).next((l=>{l||n.removeEntry(a,nt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Nf{constructor(e,n){this.persistence=e,this.pi=new Oo((s=>_4(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=kP(this,n)}static mi(e,n){return new Nf(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?we.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,n).next((h=>{h||(s++,l.removeEntry(u,nt.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),we.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qh(e.data.value)),n}br(e,n,s){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return we.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Tt(),a=Tt();for(const l of n.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new dx(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Vk()?8:v4(ds())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const l={result:null};return this.ys(e,n).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,n,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new GP;return this.Ss(e,n,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>l.result))}bs(e,n,s,a){return s.documentReadCount<this.fs?(jl()<=Et.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",Dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(jl()<=Et.DEBUG&&Ue("QueryEngine","Query:",Dl(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(jl()<=Et.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",Dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(n))):we.resolve())}ys(e,n){if(_1(n))return we.resolve(null);let s=Wi(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=r0(n,null,"F"),s=Wi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Tt(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((m=>{const f=this.Ds(n,h);return this.Cs(n,f,u,m.readTime)?this.ys(e,r0(n,null,"F")):this.vs(e,f,n,m)}))))})))))}ws(e,n,s,a){return _1(n)||a.isEqual(nt.min())?we.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(n,l);return this.Cs(n,u,s,a)?we.resolve(null):(jl()<=Et.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Dl(n)),this.vs(e,u,n,m4(a,zu)).next((h=>h)))}))}Ds(e,n){let s=new On(TT(e));return n.forEach(((a,l)=>{sm(e,l)&&(s=s.add(l))})),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,s){return jl()<=Et.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Dl(n)),this.ps.getDocumentsMatchingQuery(e,n,Ur.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(n.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="LocalStore",KP=3e8;class JP{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new dn(Nt),this.xs=new Oo((l=>sx(l)),ix),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function YP(t,e,n,s){return new JP(t,e,n,s)}async function JT(t,e){const n=rt(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let m=Tt();for(const f of a){u.push(f.batchId);for(const y of f.mutations)m=m.add(y.key)}for(const f of l){h.push(f.batchId);for(const y of f.mutations)m=m.add(y.key)}return n.localDocuments.getDocuments(s,m).next((f=>({Ls:f,removedBatchIds:u,addedBatchIds:h})))}))}))}function WP(t,e){const n=rt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,f,y){const _=f.batch,w=_.keys();let T=we.resolve();return w.forEach((M=>{T=T.next((()=>y.getEntry(m,M))).next((z=>{const k=f.docVersions.get(M);qt(k!==null,48541),z.version.compareTo(k)<0&&(_.applyToRemoteDocument(z,f),z.isValidDocument()&&(z.setReadTime(f.commitVersion),y.addEntry(z)))}))})),T.next((()=>h.mutationQueue.removeMutationBatch(m,_)))})(n,s,e,l).next((()=>l.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let m=Tt();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(m=m.add(h.batch.mutations[f].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function YT(t){const e=rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function XP(t,e){const n=rt(t),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const h=[];e.targetChanges.forEach(((y,_)=>{const w=a.get(_);if(!w)return;h.push(n.Pi.removeMatchingKeys(l,y.removedDocuments,_).next((()=>n.Pi.addMatchingKeys(l,y.addedDocuments,_))));let T=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(is.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,s)),a=a.insert(_,T),(function(z,k,q){return z.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=KP?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(w,T,y)&&h.push(n.Pi.updateTargetData(l,T))}));let m=za(),f=Tt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))})),h.push(QP(l,u,e.documentUpdates).next((y=>{m=y.ks,f=y.qs}))),!s.isEqual(nt.min())){const y=n.Pi.getLastRemoteSnapshotVersion(l).next((_=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(y)}return we.waitFor(h).next((()=>u.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,m,f))).next((()=>m))})).then((l=>(n.Ms=a,l)))}function QP(t,e,n){let s=Tt(),a=Tt();return n.forEach((l=>s=s.add(l))),e.getEntries(t,s).next((l=>{let u=za();return n.forEach(((h,m)=>{const f=l.get(h);m.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(nt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||m.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Ue(hx,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function ZP(t,e){const n=rt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ex),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function e6(t,e){const n=rt(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.Pi.getTargetData(s,e).next((l=>l?(a=l,we.resolve(a)):n.Pi.allocateTargetId(s).next((u=>(a=new jr(e,u,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function d0(t,e,n){const s=rt(t),a=s.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!rc(u))throw u;Ue(hx,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function M1(t,e,n){const s=rt(t);let a=nt.min(),l=Tt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,f,y){const _=rt(m),w=_.xs.get(y);return w!==void 0?we.resolve(_.Ms.get(w)):_.Pi.getTargetData(f,y)})(s,u,Wi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{l=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,n?a:nt.min(),n?l:Tt()))).next((h=>(t6(s,z4(e),h),{documents:h,Qs:l})))))}function t6(t,e,n){let s=t.Os.get(e)||nt.min();n.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),t.Os.set(e,s)}class P1{constructor(){this.activeTargetIds=$4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n6{constructor(){this.Mo=new P1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new P1,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="ConnectivityMonitor";class V1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ue(L1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ue(L1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function h0(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",i6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===yf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,l){const u=h0(),h=this.zo(e,n.toUriEncodedString());Ue(Vg,`Sending RPC '${e}' ${u}:`,h,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:f}=new URL(h),y=Vo(f);return this.Jo(e,h,m,s,y).then((_=>(Ue(Vg,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Yl(Vg,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,n,s,a,l,u){return this.Go(e,n,s,a,l)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ic})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,n){const s=i6[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="WebChannelConnection";class o6 extends a6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,l){const u=h0();return new Promise(((h,m)=>{const f=new QN;f.setWithCredentials(!0),f.listenOnce(ZN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Xh.NO_ERROR:const _=f.getResponseJson();Ue(os,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case Xh.TIMEOUT:Ue(os,`RPC '${e}' ${u} timed out`),m(new ke(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:const w=f.getStatus();if(Ue(os,`RPC '${e}' ${u} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const M=T==null?void 0:T.error;if(M&&M.status&&M.message){const z=(function(q){const H=q.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(H)>=0?H:ve.UNKNOWN})(M.status);m(new ke(z,M.message))}else m(new ke(ve.UNKNOWN,"Server responded with status "+f.getStatus()))}else m(new ke(ve.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{l_:e,streamId:u,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ue(os,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);Ue(os,`RPC '${e}' ${u} sending request:`,a),f.send(n,"POST",y,s,15)}))}T_(e,n,s){const a=h0(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nT(),h=tT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const y=l.join("");Ue(os,`Creating RPC '${e}' stream ${a}: ${y}`,m);const _=u.createWebChannel(y,m);this.I_(_);let w=!1,T=!1;const M=new r6({Yo:k=>{T?Ue(os,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(w||(Ue(os,`Opening RPC '${e}' stream ${a} transport.`),_.open(),w=!0),Ue(os,`RPC '${e}' stream ${a} sending:`,k),_.send(k))},Zo:()=>_.close()}),z=(k,q,H)=>{k.listen(q,(P=>{try{H(P)}catch(W){setTimeout((()=>{throw W}),0)}}))};return z(_,xu.EventType.OPEN,(()=>{T||(Ue(os,`RPC '${e}' stream ${a} transport opened.`),M.o_())})),z(_,xu.EventType.CLOSE,(()=>{T||(T=!0,Ue(os,`RPC '${e}' stream ${a} transport closed`),M.a_(),this.E_(_))})),z(_,xu.EventType.ERROR,(k=>{T||(T=!0,Yl(os,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),M.a_(new ke(ve.UNAVAILABLE,"The operation could not be completed")))})),z(_,xu.EventType.MESSAGE,(k=>{var q;if(!T){const H=k.data[0];qt(!!H,16349);const P=H,W=(P==null?void 0:P.error)||((q=P[0])==null?void 0:q.error);if(W){Ue(os,`RPC '${e}' stream ${a} received error:`,W);const te=W.status;let L=(function(R){const U=Dn[R];if(U!==void 0)return LT(U)})(te),C=W.message;L===void 0&&(L=ve.INTERNAL,C="Unknown error status: "+te+" with message "+W.message),T=!0,M.a_(new ke(L,C)),_.close()}else Ue(os,`RPC '${e}' stream ${a} received:`,H),M.u_(H)}})),z(h,eT.STAT_EVENT,(k=>{k.stat===Zg.PROXY?Ue(os,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===Zg.NOPROXY&&Ue(os,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t){return new dP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&Ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="PersistentStream";class XT{constructor(e,n,s,a,l,u,h,m){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Oa(n.toString()),Oa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===n&&this.G_(s,a)}),(s=>{e((()=>{const a=new ke(ve.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ue(U1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ue(U1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l6 extends XT{constructor(e,n,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,u),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return nt.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?nt.min():u.readTime?Xi(u.readTime):nt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=u0(this.serializer),n.addTarget=(function(l,u){let h;const m=u.target;if(h=i0(m)?{documents:xP(l,m)}:{query:yP(l,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=OT(l,u.resumeToken);const f=o0(l,u.expectedCount);f!==null&&(h.expectedCount=f)}else if(u.snapshotVersion.compareTo(nt.min())>0){h.readTime=Ef(l,u.snapshotVersion.toTimestamp());const f=o0(l,u.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const s=bP(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=u0(this.serializer),n.removeTarget=e,this.q_(n)}}class c6 extends XT{constructor(e,n,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=gP(e.writeResults,e.commitTime),s=Xi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=u0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>pP(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{}class d6 extends u6{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ke(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,l0(n,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ve.UNKNOWN,l.toString())}))}Ho(e,n,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,l0(n,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(ve.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class h6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Oa(n),this.aa=!1):Ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="RemoteStore";class f6{constructor(e,n,s,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{zo(this)&&(Ue(Do,"Restarting streams for network reachability change."),await(async function(m){const f=rt(m);f.Ea.add(4),await sd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await cm(f)})(this))}))})),this.Ra=new h6(s,a)}}async function cm(t){if(zo(t))for(const e of t.da)await e(!0)}async function sd(t){for(const e of t.da)await e(!1)}function QT(t,e){const n=rt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gx(n)?px(n):lc(n).O_()&&mx(n,e))}function fx(t,e){const n=rt(t),s=lc(n);n.Ia.delete(e),s.O_()&&ZT(n,e),n.Ia.size===0&&(s.O_()?s.L_():zo(n)&&n.Ra.set("Unknown"))}function mx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lc(t).Y_(e)}function ZT(t,e){t.Va.Ue(e),lc(t).Z_(e)}function px(t){t.Va=new oP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),lc(t).start(),t.Ra.ua()}function gx(t){return zo(t)&&!lc(t).x_()&&t.Ia.size>0}function zo(t){return rt(t).Ea.size===0}function eS(t){t.Va=void 0}async function m6(t){t.Ra.set("Online")}async function p6(t){t.Ia.forEach(((e,n)=>{mx(t,e)}))}async function g6(t,e){eS(t),gx(t)?(t.Ra.ha(e),px(t)):t.Ra.set("Unknown")}async function x6(t,e,n){if(t.Ra.set("Online"),e instanceof UT&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(s){Ue(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tf(t,s)}else if(e instanceof tf?t.Va.Ze(e):e instanceof VT?t.Va.st(e):t.Va.tt(e),!n.isEqual(nt.min()))try{const s=await YT(t.localStore);n.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((m,f)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(f);y&&l.Ia.set(f,y.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,f)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(is.EMPTY_BYTE_STRING,y.snapshotVersion)),ZT(l,m);const _=new jr(y.target,m,f,y.sequenceNumber);mx(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(s){Ue(Do,"Failed to raise snapshot:",s),await Tf(t,s)}}async function Tf(t,e,n){if(!rc(e))throw e;t.Ea.add(1),await sd(t),t.Ra.set("Offline"),n||(n=()=>YT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ue(Do,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await cm(t)}))}function tS(t,e){return e().catch((n=>Tf(t,n,e)))}async function um(t){const e=rt(t),n=Br(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ex;for(;y6(e);)try{const a=await ZP(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,v6(e,a)}catch(a){await Tf(e,a)}nS(e)&&sS(e)}function y6(t){return zo(t)&&t.Ta.length<10}function v6(t,e){t.Ta.push(e);const n=Br(t);n.O_()&&n.X_&&n.ea(e.mutations)}function nS(t){return zo(t)&&!Br(t).x_()&&t.Ta.length>0}function sS(t){Br(t).start()}async function b6(t){Br(t).ra()}async function _6(t){const e=Br(t);for(const n of t.Ta)e.ea(n.mutations)}async function w6(t,e,n){const s=t.Ta.shift(),a=rx.from(s,e,n);await tS(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await um(t)}async function E6(t,e){e&&Br(t).X_&&await(async function(s,a){if((function(u){return iP(u)&&u!==ve.ABORTED})(a.code)){const l=s.Ta.shift();Br(s).B_(),await tS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await um(s)}})(t,e),nS(t)&&sS(t)}async function O1(t,e){const n=rt(t);n.asyncQueue.verifyOperationInProgress(),Ue(Do,"RemoteStore received new credentials");const s=zo(n);n.Ea.add(3),await sd(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await cm(n)}async function N6(t,e){const n=rt(t);e?(n.Ea.delete(2),await cm(n)):e||(n.Ea.add(2),await sd(n),n.Ra.set("Unknown"))}function lc(t){return t.ma||(t.ma=(function(n,s,a){const l=rt(n);return l.sa(),new l6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:m6.bind(null,t),t_:p6.bind(null,t),r_:g6.bind(null,t),H_:x6.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),gx(t)?px(t):t.Ra.set("Unknown")):(await t.ma.stop(),eS(t))}))),t.ma}function Br(t){return t.fa||(t.fa=(function(n,s,a){const l=rt(n);return l.sa(),new c6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:b6.bind(null,t),r_:E6.bind(null,t),ta:_6.bind(null,t),na:w6.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await um(t)):(await t.fa.stop(),t.Ta.length>0&&(Ue(Do,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,s,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,l){const u=Date.now()+s,h=new xx(e,n,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yx(t,e){if(Oa("AsyncQueue",`${e}: ${t}`),rc(t))return new ke(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{static emptySet(e){return new zl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||He.comparator(n.key,s.key):(n,s)=>He.comparator(n.key,s.key),this.keyedMap=yu(),this.sortedSet=new dn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.ga=new dn(He.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ze(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class ec{constructor(e,n,s,a,l,u,h,m,f){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,n,s,a,l){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new ec(e,n,zl.emptySet(n),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class S6{constructor(){this.queries=F1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=rt(n),l=a.queries;a.queries=F1(),l.forEach(((u,h)=>{for(const m of h.Sa)m.onError(s)}))})(this,new ke(ve.ABORTED,"Firestore shutting down"))}}function F1(){return new Oo((t=>NT(t)),nm)}async function vx(t,e){const n=rt(t);let s=3;const a=e.query;let l=n.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new T6,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await n.onListen(a,!0);break;case 1:l.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(u){const h=yx(u,`Initialization of query '${Dl(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&_x(n)}async function bx(t,e){const n=rt(t),s=e.query;let a=3;const l=n.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function C6(t,e){const n=rt(t);let s=!1;for(const a of e){const l=a.query,u=n.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&_x(n)}function A6(t,e,n){const s=rt(t),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);s.queries.delete(e)}function _x(t){t.Ca.forEach((e=>{e.next()}))}var f0,B1;(B1=f0||(f0={})).Ma="default",B1.Cache="cache";class wx{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new ec(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==f0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.key=e}}class aS{constructor(e){this.key=e}}class I6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tt(),this.mutatedKeys=Tt(),this.eu=TT(e),this.tu=new zl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new z1,a=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,_)=>{const w=a.get(y),T=sm(this.query,_)?_:null,M=!!w&&this.mutatedKeys.has(w.key),z=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;w&&T?w.data.isEqual(T.data)?M!==z&&(s.track({type:3,doc:T}),k=!0):this.su(w,T)||(s.track({type:2,doc:T}),k=!0,(m&&this.eu(T,m)>0||f&&this.eu(T,f)<0)&&(h=!0)):!w&&T?(s.track({type:0,doc:T}),k=!0):w&&!T&&(s.track({type:1,doc:w}),k=!0,(m||f)&&(h=!0)),k&&(T?(u=u.add(T),l=z?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),s.track({type:1,doc:y})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,_)=>(function(T,M){const z=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Rt:k})}};return z(T)-z(M)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(s),a=a??!1;const h=n&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,f=m!==this.Za;return this.Za=m,u.length!==0||f?{snapshot:new ec(this.query,e.tu,l,u,e.mutatedKeys,m===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new z1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Tt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new aS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new iS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Tt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ec.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ex="SyncEngine";class R6{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class j6{constructor(e){this.key=e,this.hu=!1}}class D6{constructor(e,n,s,a,l,u){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Oo((h=>NT(h)),nm),this.Iu=new Map,this.Eu=new Set,this.du=new dn(He.comparator),this.Au=new Map,this.Ru=new cx,this.Vu={},this.mu=new Map,this.fu=Zl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k6(t,e,n=!0){const s=dS(t);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await rS(s,e,n,!0),a}async function M6(t,e){const n=dS(t);await rS(n,e,!0,!1)}async function rS(t,e,n,s){const a=await e6(t.localStore,Wi(e)),l=a.targetId,u=t.sharedClientState.addLocalQueryTarget(l,n);let h;return s&&(h=await P6(t,e,l,u==="current",a.resumeToken)),t.isPrimaryClient&&n&&QT(t.remoteStore,a),h}async function P6(t,e,n,s,a){t.pu=(_,w,T)=>(async function(z,k,q,H){let P=k.view.ru(q);P.Cs&&(P=await M1(z.localStore,k.query,!1).then((({documents:C})=>k.view.ru(C,P))));const W=H&&H.targetChanges.get(k.targetId),te=H&&H.targetMismatches.get(k.targetId)!=null,L=k.view.applyChanges(P,z.isPrimaryClient,W,te);return H1(z,k.targetId,L.au),L.snapshot})(t,_,w,T);const l=await M1(t.localStore,e,!0),u=new I6(e,l.Qs),h=u.ru(l.documents),m=nd.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),f=u.applyChanges(h,t.isPrimaryClient,m);H1(t,n,f.au);const y=new R6(e,n,u);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function L6(t,e,n){const s=rt(t),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!nm(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await d0(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&fx(s.remoteStore,a.targetId),m0(s,a.targetId)})).catch(ac)):(m0(s,a.targetId),await d0(s.localStore,a.targetId,!0))}async function V6(t,e){const n=rt(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),fx(n.remoteStore,s.targetId))}async function U6(t,e,n){const s=G6(t);try{const a=await(function(u,h){const m=rt(u),f=rn.now(),y=h.reduce(((T,M)=>T.add(M.key)),Tt());let _,w;return m.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let M=za(),z=Tt();return m.Ns.getEntries(T,y).next((k=>{M=k,M.forEach(((q,H)=>{H.isValidDocument()||(z=z.add(q))}))})).next((()=>m.localDocuments.getOverlayedDocuments(T,M))).next((k=>{_=k;const q=[];for(const H of h){const P=Z4(H,_.get(H.key).overlayedDocument);P!=null&&q.push(new Gr(H.key,P,gT(P.value.mapValue),vs.exists(!0)))}return m.mutationQueue.addMutationBatch(T,f,q,h)})).next((k=>{w=k;const q=k.applyToLocalDocumentSet(_,z);return m.documentOverlayCache.saveOverlays(T,k.batchId,q)}))})).then((()=>({batchId:w.batchId,changes:CT(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,m){let f=u.Vu[u.currentUser.toKey()];f||(f=new dn(Nt)),f=f.insert(h,m),u.Vu[u.currentUser.toKey()]=f})(s,a.batchId,n),await id(s,a.changes),await um(s.remoteStore)}catch(a){const l=yx(a,"Failed to persist write");n.reject(l)}}async function oS(t,e){const n=rt(t);try{const s=await XP(n.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=n.Au.get(l);u&&(qt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?qt(u.hu,14607):a.removedDocuments.size>0&&(qt(u.hu,42227),u.hu=!1))})),await id(n,s,e)}catch(s){await ac(s)}}function q1(t,e,n){const s=rt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const m=rt(u);m.onlineState=h;let f=!1;m.queries.forEach(((y,_)=>{for(const w of _.Sa)w.va(h)&&(f=!0)})),f&&_x(m)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O6(t,e,n){const s=rt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new dn(He.comparator);u=u.insert(l,cs.newNoDocument(l,nt.min()));const h=Tt().add(l),m=new om(nt.min(),new Map,new dn(Nt),u,h);await oS(s,m),s.du=s.du.remove(l),s.Au.delete(e),Nx(s)}else await d0(s.localStore,e,!1).then((()=>m0(s,e,n))).catch(ac)}async function z6(t,e){const n=rt(t),s=e.batch.batchId;try{const a=await WP(n.localStore,e);cS(n,s,null),lS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await id(n,a)}catch(a){await ac(a)}}async function F6(t,e,n){const s=rt(t);try{const a=await(function(u,h){const m=rt(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let y;return m.mutationQueue.lookupMutationBatch(f,h).next((_=>(qt(_!==null,37113),y=_.keys(),m.mutationQueue.removeMutationBatch(f,_)))).next((()=>m.mutationQueue.performConsistencyCheck(f))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(f,y,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y))).next((()=>m.localDocuments.getDocuments(f,y)))}))})(s.localStore,e);cS(s,e,n),lS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await id(s,a)}catch(a){await ac(a)}}function lS(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function cS(t,e,n){const s=rt(t);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function m0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||uS(t,s)}))}function uS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Nx(t))}function H1(t,e,n){for(const s of n)s instanceof iS?(t.Ru.addReference(s.key,e),B6(t,s)):s instanceof aS?(Ue(Ex,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||uS(t,s.key)):Ze(19791,{wu:s})}function B6(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Ue(Ex,"New document in limbo: "+n),t.Eu.add(s),Nx(t))}function Nx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new He(nn.fromString(e)),s=t.fu.next();t.Au.set(s,new j6(n)),t.du=t.du.insert(n,s),QT(t.remoteStore,new jr(Wi(tm(n.path)),s,"TargetPurposeLimboResolution",Qf.ce))}}async function id(t,e,n){const s=rt(t),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,m)=>{u.push(s.pu(m,e,n).then((f=>{var y;if((f||n)&&s.isPrimaryClient){const _=f?!f.fromCache:(y=n==null?void 0:n.targetChanges.get(m.targetId))==null?void 0:y.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(f){a.push(f);const _=dx.As(m.targetId,f);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(m,f){const y=rt(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>we.forEach(f,(w=>we.forEach(w.Es,(T=>y.persistence.referenceDelegate.addReference(_,w.targetId,T))).next((()=>we.forEach(w.ds,(T=>y.persistence.referenceDelegate.removeReference(_,w.targetId,T)))))))))}catch(_){if(!rc(_))throw _;Ue(hx,"Failed to update sequence numbers: "+_)}for(const _ of f){const w=_.targetId;if(!_.fromCache){const T=y.Ms.get(w),M=T.snapshotVersion,z=T.withLastLimboFreeSnapshotVersion(M);y.Ms=y.Ms.insert(w,z)}}})(s.localStore,l))}async function q6(t,e){const n=rt(t);if(!n.currentUser.isEqual(e)){Ue(Ex,"User change. New user:",e.toKey());const s=await JT(n.localStore,e);n.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((m=>{m.reject(new ke(ve.CANCELLED,u))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await id(n,s.Ls)}}function H6(t,e){const n=rt(t),s=n.Au.get(e);if(s&&s.hu)return Tt().add(s.key);{let a=Tt();const l=n.Iu.get(e);if(!l)return a;for(const u of l){const h=n.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function dS(t){const e=rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O6.bind(null,e),e.Pu.H_=C6.bind(null,e.eventManager),e.Pu.yu=A6.bind(null,e.eventManager),e}function G6(t){const e=rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F6.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YP(this.persistence,new $P,e.initialUser,this.serializer)}Cu(e){return new KT(ux.mi,this.serializer)}Du(e){return new n6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class $6 extends Sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qt(this.persistence.referenceDelegate instanceof Nf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new jP(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new KT((s=>Nf.mi(s,n)),this.serializer)}}class p0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>q1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=q6.bind(null,this.syncEngine),await N6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new S6})()}createDatastore(e){const n=lm(e.databaseInfo.databaseId),s=(function(l){return new o6(l)})(e.databaseInfo);return(function(l,u,h,m){return new d6(l,u,h,m)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,l,u,h){return new f6(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>q1(this.syncEngine,n,0)),(function(){return V1.v()?new V1:new s6})())}createSyncEngine(e,n){return(function(a,l,u,h,m,f,y){const _=new D6(a,l,u,h,m,f);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(a){const l=rt(a);Ue(Do,"RemoteStore shutting down."),l.Ea.add(5),await sd(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}p0.provider={build:()=>new p0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Oa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class K6{constructor(e,n,s,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=ls.UNAUTHENTICATED,this.clientId=Z0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{Ue(qr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Ue(qr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=yx(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Og(t,e){t.asyncQueue.verifyOperationInProgress(),Ue(qr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async a=>{s.isEqual(a)||(await JT(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function G1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await J6(t);Ue(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>O1(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,a)=>O1(e.remoteStore,a))),t._onlineComponents=e}async function J6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue(qr,"Using user provided OfflineComponentProvider");try{await Og(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ve.FAILED_PRECONDITION||a.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Yl("Error using user provided cache. Falling back to memory cache: "+n),await Og(t,new Sf)}}else Ue(qr,"Using default OfflineComponentProvider"),await Og(t,new $6(void 0));return t._offlineComponents}async function hS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue(qr,"Using user provided OnlineComponentProvider"),await G1(t,t._uninitializedComponentsProvider._online)):(Ue(qr,"Using default OnlineComponentProvider"),await G1(t,new p0))),t._onlineComponents}function Y6(t){return hS(t).then((e=>e.syncEngine))}async function Cf(t){const e=await hS(t),n=e.eventManager;return n.onListen=k6.bind(null,e.syncEngine),n.onUnlisten=L6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=M6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=V6.bind(null,e.syncEngine),n}function W6(t,e,n={}){const s=new ka;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,f){const y=new Tx({next:w=>{y.Nu(),u.enqueueAndForget((()=>bx(l,_)));const T=w.docs.has(h);!T&&w.fromCache?f.reject(new ke(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&m&&m.source==="server"?f.reject(new ke(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),_=new wx(tm(h.path),y,{includeMetadataChanges:!0,qa:!0});return vx(l,_)})(await Cf(t),t.asyncQueue,e,n,s))),s.promise}function X6(t,e,n={}){const s=new ka;return t.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,m,f){const y=new Tx({next:w=>{y.Nu(),u.enqueueAndForget((()=>bx(l,_))),w.fromCache&&m.source==="server"?f.reject(new ke(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),_=new wx(h,y,{includeMetadataChanges:!0,qa:!0});return vx(l,_)})(await Cf(t),t.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firestore.googleapis.com",K1=!0;class J1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mS,this.ssl=K1}else this.host=e.host,this.ssl=e.ssl??K1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IP)throw new ke(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ke(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ke(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ke(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dm{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new s4;switch(s.type){case"firstParty":return new o4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ke(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=$1.get(n);s&&(Ue("ComponentProvider","Removing Datastore"),$1.delete(n),s.terminate())})(this),Promise.resolve()}}function Q6(t,e,n,s={}){var f;t=ys(t,dm);const a=Vo(e),l=t._getSettings(),u={...l,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(K0(`https://${h}`),J0("Firestore",!0)),l.host!==mS&&l.host!==h&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:h,ssl:a,emulatorOptions:s};if(!Io(m,u)&&(t._setSettings(m),s.mockUserToken)){let y,_;if(typeof s.mockUserToken=="string")y=s.mockUserToken,_=ls.MOCK_USER;else{y=GN(s.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ke(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ls(w)}t._authCredentials=new i4(new iT(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $r(this.firestore,e,this._query)}}class gn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ed(n,gn._jsonSchema))return new gn(e,s||null,new He(nn.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:Mn("string",gn._jsonSchemaVersion),referencePath:Mn("string")};class Lr extends $r{constructor(e,n,s){super(e,n,tm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new He(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function Ye(t,e,...n){if(t=un(t),aT("collection","path",e),t instanceof dm){const s=nn.fromString(e,...n);return o1(s),new Lr(t,null,s)}{if(!(t instanceof gn||t instanceof Lr))throw new ke(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(nn.fromString(e,...n));return o1(s),new Lr(t.firestore,null,s)}}function hn(t,e,...n){if(t=un(t),arguments.length===1&&(e=Z0.newId()),aT("doc","path",e),t instanceof dm){const s=nn.fromString(e,...n);return r1(s),new gn(t,null,new He(s))}{if(!(t instanceof gn||t instanceof Lr))throw new ke(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(nn.fromString(e,...n));return r1(s),new gn(t.firestore,t instanceof Lr?t.converter:null,new He(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="AsyncQueue";class W1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WT(this,"async_queue_retry"),this._c=()=>{const s=Ug();s&&Ue(Y1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Ug();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ug();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ka;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rc(e))throw e;Ue(Y1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Oa("INTERNAL UNHANDLED ERROR: ",X1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=xx.createAndSchedule(this,e,n,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ze(47125,{Pc:X1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function X1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(t,["next","error","complete"])}class ia extends dm{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new W1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W1(e),this._firestoreClient=void 0,await e}}}function Z6(t,e){const n=typeof t=="object"?t:X0(),s=typeof t=="string"?t:yf,a=Wf(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=BN("firestore");l&&Q6(a,...l)}return a}function ad(t){if(t._terminated)throw new ke(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||e5(t),t._firestoreClient}function e5(t){var s,a,l;const e=t._freezeSettings(),n=(function(h,m,f,y){return new N4(h,m,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,fS(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new K6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ii(is.fromBase64String(e))}catch(n){throw new ke(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ii(is.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ed(e,ii._jsonSchema))return ii.fromBase64String(e.bytes)}}ii._jsonSchemaVersion="firestore/bytes/1.0",ii._jsonSchema={type:Mn("string",ii._jsonSchemaVersion),bytes:Mn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qi._jsonSchemaVersion}}static fromJSON(e){if(ed(e,Qi._jsonSchema))return new Qi(e.latitude,e.longitude)}}Qi._jsonSchemaVersion="firestore/geoPoint/1.0",Qi._jsonSchema={type:Mn("string",Qi._jsonSchemaVersion),latitude:Mn("number"),longitude:Mn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ed(e,Zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zi(e.vectorValues);throw new ke(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:Mn("string",Zi._jsonSchemaVersion),vectorValues:Mn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=/^__.*__$/;class n5{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new td(e,this.data,n,this.fieldTransforms)}}class pS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ac:t})}}class Cx{constructor(e,n,s,a,l,u){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Af(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gS(this.Ac)&&t5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class s5{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||lm(e)}Cc(e,n,s,a=!1){return new Cx({Ac:e,methodName:n,Dc:s,path:ts.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function od(t){const e=t._freezeSettings(),n=lm(t._databaseId);return new s5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ax(t,e,n,s,a,l={}){const u=t.Cc(l.merge||l.mergeFields?2:0,e,n,a);Ix("Data must be an object, but it was:",u,s);const h=vS(s,u);let m,f;if(l.merge)m=new zs(u.fieldMask),f=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const w=g0(e,_,n);if(!u.contains(w))throw new ke(ve.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);_S(y,w)||y.push(w)}m=new zs(y),f=u.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,f=u.fieldTransforms;return new n5(new Is(h),m,f)}class hm extends Sx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hm}}function xS(t,e,n,s){const a=t.Cc(1,e,n);Ix("Data must be an object, but it was:",a,s);const l=[],u=Is.empty();Hr(s,((m,f)=>{const y=Rx(e,m,n);f=un(f);const _=a.yc(y);if(f instanceof hm)l.push(y);else{const w=ld(f,_);w!=null&&(l.push(y),u.set(y,w))}}));const h=new zs(l);return new pS(u,h,a.fieldTransforms)}function yS(t,e,n,s,a,l){const u=t.Cc(1,e,n),h=[g0(e,s,n)],m=[a];if(l.length%2!=0)throw new ke(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)h.push(g0(e,l[w])),m.push(l[w+1]);const f=[],y=Is.empty();for(let w=h.length-1;w>=0;--w)if(!_S(f,h[w])){const T=h[w];let M=m[w];M=un(M);const z=u.yc(T);if(M instanceof hm)f.push(T);else{const k=ld(M,z);k!=null&&(f.push(T),y.set(T,k))}}const _=new zs(f);return new pS(y,_,u.fieldTransforms)}function i5(t,e,n,s=!1){return ld(n,t.Cc(s?4:3,e))}function ld(t,e){if(bS(t=un(t)))return Ix("Unsupported field value:",e,t),vS(t,e);if(t instanceof Sx)return(function(s,a){if(!gS(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let m=ld(h,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(t,e)}return(function(s,a){if((s=un(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return K4(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=rn.fromDate(s);return{timestampValue:Ef(a.serializer,l)}}if(s instanceof rn){const l=new rn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ef(a.serializer,l)}}if(s instanceof Qi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ii)return{bytesValue:OT(a.serializer,s._byteString)};if(s instanceof gn){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:lx(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Zi)return(function(u,h){return{mapValue:{fields:{[mT]:{stringValue:pT},[vf]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return ax(h.serializer,f)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Xf(s)}`)})(t,e)}function vS(t,e){const n={};return lT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,((s,a)=>{const l=ld(a,e.mc(s));l!=null&&(n[s]=l)})),{mapValue:{fields:n}}}function bS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rn||t instanceof Qi||t instanceof ii||t instanceof gn||t instanceof Sx||t instanceof Zi)}function Ix(t,e,n){if(!bS(n)||!rT(n)){const s=Xf(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function g0(t,e,n){if((e=un(e))instanceof rd)return e._internalPath;if(typeof e=="string")return Rx(t,e);throw Af("Field path arguments must be of type string or ",t,!1,void 0,n)}const a5=new RegExp("[~\\*/\\[\\]]");function Rx(t,e,n){if(e.search(a5)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rd(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Af(t,e,n,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${s}`),u&&(m+=` in document ${a}`),m+=")"),new ke(ve.INVALID_ARGUMENT,h+t+m)}function _S(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,s,a,l){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r5 extends wS{data(){return super.data()}}function fm(t,e){return typeof e=="string"?Rx(t,e):e instanceof rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ke(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jx{}class NS extends jx{}function Nn(t,e,...n){let s=[];e instanceof jx&&s.push(e),s=s.concat(n),(function(l){const u=l.filter((m=>m instanceof Dx)).length,h=l.filter((m=>m instanceof mm)).length;if(u>1||u>0&&h>0)throw new ke(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)t=a._apply(t);return t}class mm extends NS{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new mm(e,n,s)}_apply(e){const n=this._parse(e);return TS(e._query,n),new $r(e.firestore,e.converter,a0(e._query,n))}_parse(e){const n=od(e.firestore);return(function(l,u,h,m,f,y,_){let w;if(f.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ke(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ew(_,y);const M=[];for(const z of _)M.push(Z1(m,l,z));w={arrayValue:{values:M}}}else w=Z1(m,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ew(_,y),w=i5(h,u,_,y==="in"||y==="not-in");return kn.create(f,y,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gn(t,e,n){const s=e,a=fm("where",t);return mm._create(a,s,n)}class Dx extends jx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dx(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:wi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const m of h)TS(u,m),u=a0(u,m)})(e._query,n),new $r(e.firestore,e.converter,a0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kx extends NS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kx(e,n)}_apply(e){const n=(function(a,l,u){if(a.startAt!==null)throw new ke(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ke(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hu(l,u)})(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new oc(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function Fo(t,e="asc"){const n=e,s=fm("orderBy",t);return kx._create(s,n)}function Z1(t,e,n){if(typeof(n=un(n))=="string"){if(n==="")throw new ke(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ET(e)&&n.indexOf("/")!==-1)throw new ke(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(nn.fromString(n));if(!He.isDocumentKey(s))throw new ke(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return p1(t,new He(s))}if(n instanceof gn)return p1(t,n._key);throw new ke(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(n)}.`)}function ew(t,e){if(!Array.isArray(t)||t.length===0)throw new ke(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TS(t,e){const n=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ke(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class o5{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return En(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Hr(e,((a,l)=>{s[a]=this.convertValue(l,n)})),s}convertVectorValue(e){var s,a,l;const n=(l=(a=(s=e.fields)==null?void 0:s[vf].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>En(u.doubleValue)));return new Zi(n)}convertGeoPoint(e){return new Qi(En(e.latitude),En(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=em(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=Or(e);return new rn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=nn.fromString(e);qt(GT(s),9688,{name:e});const a=new Bu(s.get(1),s.get(3)),l=new He(s.popFirst(5));return a.isEqual(n)||Oa(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class bu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends wS{constructor(e,n,s,a,l,u){super(e,n,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(fm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=So._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:Mn("string",So._jsonSchemaVersion),bundleSource:Mn("string","DocumentSnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class nf extends So{data(e={}){return super.data(e)}}class Co{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new bu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new nf(this._firestore,this._userDataWriter,s.key,s,new bu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const m=new nf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new bu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const m=new nf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new bu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,y=-1;return h.type!==0&&(f=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:l5(h.type),doc:m,oldIndex:f,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Z0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t){t=ys(t,gn);const e=ys(t.firestore,ia);return W6(ad(e),t._key).then((n=>AS(e,t,n)))}Co._jsonSchemaVersion="firestore/querySnapshot/1.0",Co._jsonSchema={type:Mn("string",Co._jsonSchemaVersion),bundleSource:Mn("string","QuerySnapshot"),bundleName:Mn("string"),bundle:Mn("string")};class Px extends o5{constructor(e){super(),this.firestore=e}convertBytes(e){return new ii(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function $n(t){t=ys(t,$r);const e=ys(t.firestore,ia),n=ad(e),s=new Px(e);return ES(t._query),X6(n,t._query).then((a=>new Co(e,s,t,a)))}function SS(t,e,n){t=ys(t,gn);const s=ys(t.firestore,ia),a=Mx(t.converter,e,n);return cd(s,[Ax(od(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,vs.none())])}function as(t,e,n,...s){t=ys(t,gn);const a=ys(t.firestore,ia),l=od(a);let u;return u=typeof(e=un(e))=="string"||e instanceof rd?yS(l,"updateDoc",t._key,e,n,s):xS(l,"updateDoc",t._key,e),cd(a,[u.toMutation(t._key,vs.exists(!0))])}function CS(t){return cd(ys(t.firestore,ia),[new rm(t._key,vs.none())])}function hs(t,e){const n=ys(t.firestore,ia),s=hn(t),a=Mx(t.converter,e);return cd(n,[Ax(od(t.firestore),"addDoc",s._key,a,t.converter!==null,{}).toMutation(s._key,vs.exists(!1))]).then((()=>s))}function fs(t,...e){var m,f,y;t=un(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Q1(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Q1(e[s])){const _=e[s];e[s]=(m=_.next)==null?void 0:m.bind(_),e[s+1]=(f=_.error)==null?void 0:f.bind(_),e[s+2]=(y=_.complete)==null?void 0:y.bind(_)}let l,u,h;if(t instanceof gn)u=ys(t.firestore,ia),h=tm(t._key.path),l={next:_=>{e[s]&&e[s](AS(u,t,_))},error:e[s+1],complete:e[s+2]};else{const _=ys(t,$r);u=ys(_.firestore,ia),h=_._query;const w=new Px(u);l={next:T=>{e[s]&&e[s](new Co(u,w,_,T))},error:e[s+1],complete:e[s+2]},ES(t._query)}return(function(w,T,M,z){const k=new Tx(z),q=new wx(T,k,M);return w.asyncQueue.enqueueAndForget((async()=>vx(await Cf(w),q))),()=>{k.Nu(),w.asyncQueue.enqueueAndForget((async()=>bx(await Cf(w),q)))}})(ad(u),h,a,l)}function cd(t,e){return(function(s,a){const l=new ka;return s.asyncQueue.enqueueAndForget((async()=>U6(await Y6(s),a,l))),l.promise})(ad(t),e)}function AS(t,e,n){const s=n.docs.get(e._key),a=new Px(t);return new So(t,a,e._key,s,new bu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=od(e)}set(e,n,s){this._verifyNotCommitted();const a=zg(e,this._firestore),l=Mx(a.converter,n,s),u=Ax(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,s);return this._mutations.push(u.toMutation(a._key,vs.none())),this}update(e,n,s,...a){this._verifyNotCommitted();const l=zg(e,this._firestore);let u;return u=typeof(n=un(n))=="string"||n instanceof rd?yS(this._dataReader,"WriteBatch.update",l._key,n,s,a):xS(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(u.toMutation(l._key,vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zg(e,this._firestore);return this._mutations=this._mutations.concat(new rm(n._key,vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zg(t,e){if((t=un(t)).firestore!==e)throw new ke(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(t){return ad(t=ys(t,ia)),new u5(t,(e=>cd(t,e)))}(function(e,n=!0){(function(a){ic=a})(Uo),Ro(new Vr("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new ia(new a4(s.getProvider("auth-internal")),new l4(u,s.getProvider("app-check-internal")),(function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ke(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(f.options.projectId,y)})(u,a),u);return l={useFetchStreams:n,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Yi(n1,s1,e),Yi(n1,s1,"esm2020")})();function IS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h5=IS,RS=new Qu("auth","Firebase",IS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Y0("@firebase/auth");function f5(t,...e){If.logLevel<=Et.WARN&&If.warn(`Auth (${Uo}): ${t}`,...e)}function sf(t,...e){If.logLevel<=Et.ERROR&&If.error(`Auth (${Uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,...e){throw Lx(t,...e)}function ea(t,...e){return Lx(t,...e)}function jS(t,e,n){const s={...h5(),[e]:n};return new Qu("auth","Firebase",s).create(e,{appName:t.name})}function Ma(t){return jS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return RS.create(t,...e)}function Qe(t,e,...n){if(!t)throw Lx(e,...n)}function Ca(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sf(e),new Error(e)}function Fa(t,e){t||Ca(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function m5(){return tw()==="http:"||tw()==="https:"}function tw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m5()||Mk()||"connection"in navigator)?navigator.onLine:!0}function g5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fa(n>e,"Short delay should be less than long delay!"),this.isMobile=jk()||Pk()}get(){return p5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t,e){Fa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ca("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ca("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ca("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v5=new ud(3e4,6e4);function Ha(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ga(t,e,n,s,a={}){return kS(t,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=Zu({key:t.config.apiKey,...u}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:m,...l};return kk()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Vo(t.emulatorConfig.host)&&(f.credentials="include"),DS.fetch()(await MS(t,t.config.apiHost,n,h),f)})}async function kS(t,e,n){t._canInitEmulator=!1;const s={...x5,...e};try{const a=new _5(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Bh(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[m,f]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(t,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Bh(t,"email-already-in-use",u);if(m==="USER_DISABLED")throw Bh(t,"user-disabled",u);const y=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw jS(t,y,f);Ei(t,y)}}catch(a){if(a instanceof ra)throw a;Ei(t,"network-request-failed",{message:String(a)})}}async function dd(t,e,n,s,a={}){const l=await Ga(t,e,n,s,a);return"mfaPendingCredential"in l&&Ei(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function MS(t,e,n,s){const a=`${e}${n}?${s}`,l=t,u=l.config.emulator?Vx(t.config,a):`${t.config.apiScheme}://${a}`;return y5.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function b5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ea(this.auth,"network-request-failed")),v5.get())})}}function Bh(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=ea(t,e,s);return a.customData._tokenResponse=n,a}function nw(t){return t!==void 0&&t.enterprise!==void 0}class w5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return b5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function E5(t,e){return Ga(t,"GET","/v2/recaptchaConfig",Ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e){return Ga(t,"POST","/v1/accounts:delete",e)}async function Rf(t,e){return Ga(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T5(t,e=!1){const n=un(t),s=await n.getIdToken(e),a=Ux(s);Qe(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Ru(Fg(a.auth_time)),issuedAtTime:Ru(Fg(a.iat)),expirationTime:Ru(Fg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Fg(t){return Number(t)*1e3}function Ux(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=zN(n);return a?JSON.parse(a):(sf("Failed to decode base64 JWT payload"),null)}catch(a){return sf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function sw(t){const e=Ux(t);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ra&&S5(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function S5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(t){var _;const e=t.auth,n=await t.getIdToken(),s=await Ku(t,Rf(e,{idToken:n}));Qe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?PS(a.providerUserInfo):[],u=I5(t.providerData,l),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),f=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new y0(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,y)}async function A5(t){const e=un(t);await jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I5(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function PS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(t,e){const n=await kS(t,{},async()=>{const s=Zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,u=await MS(t,a,"/v1/token",`key=${l}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:s};return t.emulatorConfig&&Vo(t.emulatorConfig.host)&&(m.credentials="include"),DS.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function j5(t,e){return Ga(t,"POST","/v2/accounts:revokeToken",Ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const n=sw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:l}=await R5(e,n);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:l}=n,u=new Fl;return s&&(Qe(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Qe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Qe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return Ca("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e){Qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new C5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new y0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return Qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T5(this,e)}reload(){return A5(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await jf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Os(this.auth.app))return Promise.reject(Ma(this.auth));const e=await this.getIdToken();return await Ku(this,N5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,a=n.email??void 0,l=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,m=n._redirectEventId??void 0,f=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:_,emailVerified:w,isAnonymous:T,providerData:M,stsTokenManager:z}=n;Qe(_&&z,e,"internal-error");const k=Fl.fromJSON(this.name,z);Qe(typeof _=="string",e,"internal-error"),Sr(s,e.name),Sr(a,e.name),Qe(typeof w=="boolean",e,"internal-error"),Qe(typeof T=="boolean",e,"internal-error"),Sr(l,e.name),Sr(u,e.name),Sr(h,e.name),Sr(m,e.name),Sr(f,e.name),Sr(y,e.name);const q=new yi({uid:_,auth:e,email:a,emailVerified:w,displayName:s,isAnonymous:T,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:k,createdAt:f,lastLoginAt:y});return M&&Array.isArray(M)&&(q.providerData=M.map(H=>({...H}))),m&&(q._redirectEventId=m),q}static async _fromIdTokenResponse(e,n,s=!1){const a=new Fl;a.updateFromServerResponse(n);const l=new yi({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await jf(l),l}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];Qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?PS(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new Fl;h.updateFromIdToken(s);const m=new yi({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new y0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,f),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=new Map;function Aa(t){Fa(t instanceof Function,"Expected a class definition");let e=iw.get(t);return e?(Fa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LS.type="NONE";const aw=LS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e,n){return`firebase:${t}:${e}:${n}`}class Bl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=af(this.userKey,a.apiKey,l),this.fullPersistenceKey=af("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rf(this.auth,{idToken:e}).catch(()=>{});return n?yi._fromGetAccountInfoResponse(this.auth,n,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Bl(Aa(aw),e,s);const a=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||Aa(aw);const u=af(s,e.config.apiKey,e.name);let h=null;for(const f of n)try{const y=await f._get(u);if(y){let _;if(typeof y=="string"){const w=await Rf(e,{idToken:y}).catch(()=>{});if(!w)break;_=await yi._fromGetAccountInfoResponse(e,w,y)}else _=yi._fromJSON(e,y);f!==l&&(h=_),l=f;break}}catch{}const m=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Bl(l,e,s):(l=m[0],h&&await l._set(u,h.toJSON()),await Promise.all(n.map(async f=>{if(f!==l)try{await f._remove(u)}catch{}})),new Bl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BS(e))return"Blackberry";if(qS(e))return"Webos";if(US(e))return"Safari";if((e.includes("chrome/")||OS(e))&&!e.includes("edge/"))return"Chrome";if(FS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function VS(t=ds()){return/firefox\//i.test(t)}function US(t=ds()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OS(t=ds()){return/crios\//i.test(t)}function zS(t=ds()){return/iemobile/i.test(t)}function FS(t=ds()){return/android/i.test(t)}function BS(t=ds()){return/blackberry/i.test(t)}function qS(t=ds()){return/webos/i.test(t)}function Ox(t=ds()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D5(t=ds()){var e;return Ox(t)&&!!((e=window.navigator)!=null&&e.standalone)}function k5(){return Lk()&&document.documentMode===10}function HS(t=ds()){return Ox(t)||FS(t)||qS(t)||BS(t)||/windows phone/i.test(t)||zS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t,e=[]){let n;switch(t){case"Browser":n=rw(ds());break;case"Worker":n=`${rw(ds())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=l=>new Promise((u,h)=>{try{const m=e(l);u(m)}catch(m){h(m)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e={}){return Ga(t,"GET","/v2/passwordPolicy",Ha(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=6;class V5{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??L5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ow(this),this.idTokenSubscription=new ow(this),this.beforeStateQueue=new M5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Aa(n)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Bl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rf(this,{idToken:e}),s=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Os(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&(m!=null&&m.user)&&(s=m.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Os(this.app))return Promise.reject(Ma(this));const n=e?un(e):null;return n&&Qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Os(this.app)?Promise.reject(Ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Os(this.app)?Promise.reject(Ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P5(this),n=new V5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await j5(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Aa(e)||this._popupRedirectResolver;Qe(n,this,"argument-error"),this.redirectPersistenceManager=await Bl.create(this,[Aa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,a);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&f5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Kr(t){return un(t)}class ow{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hk(n=>this.observer=n)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O5(t){pm=t}function $S(t){return pm.loadJS(t)}function z5(){return pm.recaptchaEnterpriseScript}function F5(){return pm.gapiScript}function B5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class q5{constructor(){this.enterprise=new H5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class H5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G5="recaptcha-enterprise",KS="NO_RECAPTCHA";class $5{constructor(e){this.type=G5,this.auth=Kr(e)}async verify(e="verify",n=!1){async function s(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{E5(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const f=new w5(m);return l.tenantId==null?l._agentRecaptchaConfig=f:l._tenantRecaptchaConfigs[l.tenantId]=f,u(f.siteKey)}}).catch(m=>{h(m)})})}function a(l,u,h){const m=window.grecaptcha;nw(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(f=>{u(f)}).catch(()=>{u(KS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new q5().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(h=>{if(!n&&nw(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=z5();m.length!==0&&(m+=h),$S(m).then(()=>{a(h,l,u)}).catch(f=>{u(f)})}}).catch(h=>{u(h)})})}}async function lw(t,e,n,s=!1,a=!1){const l=new $5(t);let u;if(a)u=KS;else try{u=await l.verify(n)}catch{u=await l.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,f=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Df(t,e,n,s,a){var l;if((l=t._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await lw(t,e,n,n==="getOobCode");return s(t,u)}else return s(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await lw(t,e,n,n==="getOobCode");return s(t,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t,e){const n=Wf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Io(l,e??{}))return a;Ei(a,"already-initialized")}return n.initialize({options:e})}function J5(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Aa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Y5(t,e,n){const s=Kr(t);Qe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=JS(e),{host:u,port:h}=W5(e),m=h===null?"":`:${h}`,f={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Qe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Qe(Io(f,s.config.emulator)&&Io(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,Vo(u)?(K0(`${l}//${u}${m}`),J0("Auth",!0)):X5()}function JS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function W5(t){const e=JS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:cw(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:cw(u)}}}function cw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function X5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ca("not implemented")}_getIdTokenResponse(e){return Ca("not implemented")}_linkToIdToken(e,n){return Ca("not implemented")}_getReauthenticationResolver(e){return Ca("not implemented")}}async function Q5(t,e){return Ga(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(t,e){return dd(t,"POST","/v1/accounts:signInWithPassword",Ha(t,e))}async function e3(t,e){return Ga(t,"POST","/v1/accounts:sendOobCode",Ha(t,e))}async function t3(t,e){return e3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n3(t,e){return dd(t,"POST","/v1/accounts:signInWithEmailLink",Ha(t,e))}async function s3(t,e){return dd(t,"POST","/v1/accounts:signInWithEmailLink",Ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends zx{constructor(e,n,s,a=null){super("password",s),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Ju(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ju(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,n,"signInWithPassword",Z5);case"emailLink":return n3(e,{email:this._email,oobCode:this._password});default:Ei(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,s,"signUpPassword",Q5);case"emailLink":return s3(e,{idToken:n,email:this._email,oobCode:this._password});default:Ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t,e){return dd(t,"POST","/v1/accounts:signInWithIdp",Ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="http://localhost";class ko extends zx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=n;if(!s||!a)return null;const u=new ko(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return ql(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ql(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ql(e,n)}buildRequest(){const e={requestUri:i3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function r3(t){const e=pu(gu(t)).link,n=e?pu(gu(e)).deep_link_id:null,s=pu(gu(t)).deep_link_id;return(s?pu(gu(s)).link:null)||s||n||e||t}class Fx{constructor(e){const n=pu(gu(e)),s=n.apiKey??null,a=n.oobCode??null,l=a3(n.mode??null);Qe(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=r3(e);try{return new Fx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,n){return Ju._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Fx.parseLink(n);return Qe(s,"argument-error"),Ju._fromEmailAndCode(e,s.code,s.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends YS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends hd{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ar.credential(n,s)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends hd{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends hd{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Rr.credential(n,s)}catch{return null}}}Rr.TWITTER_SIGN_IN_METHOD="twitter.com";Rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(t,e){return dd(t,"POST","/v1/accounts:signUp",Ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const l=await yi._fromIdTokenResponse(e,s,a),u=uw(s);return new Mo({user:l,providerId:u,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=uw(s);return new Mo({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function uw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends ra{constructor(e,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new kf(e,n,s,a)}}function WS(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(t,l,e,s):l})}async function l3(t,e,n=!1){const s=await Ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mo._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t,e,n=!1){const{auth:s}=t;if(Os(s.app))return Promise.reject(Ma(s));const a="reauthenticate";try{const l=await Ku(t,WS(s,a,e,t),n);Qe(l.idToken,s,"internal-error");const u=Ux(l.idToken);Qe(u,s,"internal-error");const{sub:h}=u;return Qe(t.uid===h,s,"user-mismatch"),Mo._forOperation(t,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ei(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e,n=!1){if(Os(t.app))return Promise.reject(Ma(t));const s="signIn",a=await WS(t,s,e),l=await Mo._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(l.user),l}async function c3(t,e){return QS(Kr(t),e)}async function u3(t,e){return XS(un(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t){const e=Kr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function d3(t,e,n){const s=Kr(t);await Df(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",t3)}async function h3(t,e,n){if(Os(t.app))return Promise.reject(Ma(t));const s=Kr(t),u=await Df(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",o3).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&ZS(t),m}),h=await Mo._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function f3(t,e,n){return Os(t.app)?Promise.reject(Ma(t)):c3(un(t),Bo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ZS(t),s})}function m3(t,e,n,s){return un(t).onIdTokenChanged(e,n,s)}function p3(t,e,n){return un(t).beforeAuthStateChanged(e,n)}function g3(t,e,n,s){return un(t).onAuthStateChanged(e,n,s)}function x3(t){return un(t).signOut()}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=1e3,v3=10;class t2 extends e2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!n&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);k5()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,v3):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},y3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}t2.type="LOCAL";const b3=t2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends e2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}n2.type="SESSION";const s2=n2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new gm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:l}=n.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async f=>f(n.origin,l)),m=await _3(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,m)=>{const f=Bx("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const w=_;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(w.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(){return window}function E3(t){ta().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){return typeof ta().WorkerGlobalScope<"u"&&typeof ta().importScripts=="function"}async function N3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function S3(){return i2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebaseLocalStorageDb",C3=1,Pf="firebaseLocalStorage",r2="fbase_key";class fd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xm(t,e){return t.transaction([Pf],e?"readwrite":"readonly").objectStore(Pf)}function A3(){const t=indexedDB.deleteDatabase(a2);return new fd(t).toPromise()}function v0(){const t=indexedDB.open(a2,C3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Pf,{keyPath:r2})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Pf)?e(s):(s.close(),await A3(),e(await v0()))})})}async function dw(t,e,n){const s=xm(t,!0).put({[r2]:e,value:n});return new fd(s).toPromise()}async function I3(t,e){const n=xm(t,!1).get(e),s=await new fd(n).toPromise();return s===void 0?null:s.value}function hw(t,e){const n=xm(t,!0).delete(e);return new fd(n).toPromise()}const R3=800,j3=3;class o2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>j3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gm._getInstance(S3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await N3(),!this.activeServiceWorker)return;this.sender=new w3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||T3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v0();return await dw(e,Mf,"1"),await hw(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>dw(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>I3(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=xm(a,!1).getAll();return new fd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o2.type="LOCAL";const D3=o2;new ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t,e){return e?Aa(e):(Qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx extends zx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M3(t){return QS(t.auth,new qx(t),t.bypassAuthState)}function P3(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),XS(n,new qx(t),t.bypassAuthState)}async function L3(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),l3(n,new qx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M3;case"linkViaPopup":case"linkViaRedirect":return L3;case"reauthViaPopup":case"reauthViaRedirect":return P3;default:Ei(this.auth,"internal-error")}}resolve(e){Fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new ud(2e3,1e4);class Ll extends l2{constructor(e,n,s,a,l){super(e,n,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Fa(this.filter.length===1,"Popup operations only handle one event");const e=Bx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ea(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ea(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,V3.get())};e()}}Ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="pendingRedirect",rf=new Map;class O3 extends l2{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const s=await z3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z3(t,e){const n=q3(e),s=B3(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function F3(t,e){rf.set(t._key(),e)}function B3(t){return Aa(t._redirectPersistence)}function q3(t){return af(U3,t.config.apiKey,t.name)}async function H3(t,e,n=!1){if(Os(t.app))return Promise.reject(Ma(t));const s=Kr(t),a=k3(s,e),u=await new O3(s,a,n).execute();return u&&!n&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=600*1e3;class $3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!c2(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(ea(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=G3&&this.cachedEventUids.clear(),this.cachedEventUids.has(fw(e))}saveEventToCache(e){this.cachedEventUids.add(fw(e)),this.lastProcessedEventTime=Date.now()}}function fw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function c2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,e={}){return Ga(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W3=/^https?/;async function X3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J3(t);for(const n of e)try{if(Q3(n))return}catch{}Ei(t,"unauthorized-domain")}function Q3(t){const e=x0(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===s}if(!W3.test(n))return!1;if(Y3.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=new ud(3e4,6e4);function mw(){const t=ta().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eL(t){return new Promise((e,n)=>{var a,l,u;function s(){mw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mw(),n(ea(t,"network-request-failed"))},timeout:Z3.get()})}if((l=(a=ta().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=ta().gapi)!=null&&u.load)s();else{const h=B5("iframefcb");return ta()[h]=()=>{gapi.load?s():n(ea(t,"network-request-failed"))},$S(`${F5()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw of=null,e})}let of=null;function tL(t){return of=of||eL(t),of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=new ud(5e3,15e3),sL="__/auth/iframe",iL="emulator/auth/iframe",aL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oL(t){const e=t.config;Qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vx(e,iL):`https://${t.config.authDomain}/${sL}`,s={apiKey:e.apiKey,appName:t.name,v:Uo},a=rL.get(t.config.apiHost);a&&(s.eid=a);const l=t._getFrameworks();return l.length&&(s.fw=l.join(",")),`${n}?${Zu(s).slice(1)}`}async function lL(t){const e=await tL(t),n=ta().gapi;return Qe(n,t,"internal-error"),e.open({where:document.body,url:oL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aL,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=ea(t,"network-request-failed"),h=ta().setTimeout(()=>{l(u)},nL.get());function m(){ta().clearTimeout(h),a(s)}s.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uL=500,dL=600,hL="_blank",fL="http://localhost";class pw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mL(t,e,n,s=uL,a=dL){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const m={...cL,width:s.toString(),height:a.toString(),top:l,left:u},f=ds().toLowerCase();n&&(h=OS(f)?hL:n),VS(f)&&(e=e||fL,m.scrollbars="yes");const y=Object.entries(m).reduce((w,[T,M])=>`${w}${T}=${M},`,"");if(D5(f)&&h!=="_self")return pL(e||"",h),new pw(null);const _=window.open(e||"",h,y);Qe(_,t,"popup-blocked");try{_.focus()}catch{}return new pw(_)}function pL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="__/auth/handler",xL="emulator/auth/handler",yL=encodeURIComponent("fac");async function gw(t,e,n,s,a,l){Qe(t.config.authDomain,t,"auth-domain-config-required"),Qe(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Uo,eventId:a};if(e instanceof YS){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",qk(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))u[y]=_}if(e instanceof hd){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(u.scopes=y.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const m=await t._getAppCheckToken(),f=m?`#${yL}=${encodeURIComponent(m)}`:"";return`${vL(t)}?${Zu(h).slice(1)}${f}`}function vL({config:t}){return t.emulator?Vx(t,xL):`https://${t.authDomain}/${gL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="webStorageSupport";class bL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s2,this._completeRedirectFn=H3,this._overrideRedirectResult=F3}async _openPopup(e,n,s,a){var u;Fa((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await gw(e,n,s,x0(),a);return mL(e,l,Bx())}async _openRedirect(e,n,s,a){await this._originValidation(e);const l=await gw(e,n,s,x0(),a);return E3(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Fa(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await lL(e),s=new $3(e);return n.register("authEvent",a=>(Qe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bg,{type:Bg},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[Bg];l!==void 0&&n(!!l),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HS()||US()||Ox()}}const _L=bL;var xw="@firebase/auth",yw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NL(t){Ro(new Vr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Qe(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GS(t)},f=new U5(s,a,l,m);return J5(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ro(new Vr("auth-internal",e=>{const n=Kr(e.getProvider("auth").getImmediate());return(s=>new wL(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yi(xw,yw,EL(t)),Yi(xw,yw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=300,SL=HN("authIdTokenMaxAge")||TL;let vw=null;const CL=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>SL)return;const a=n==null?void 0:n.token;vw!==a&&(vw=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function AL(t=X0()){const e=Wf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=K5(t,{popupRedirectResolver:_L,persistence:[D3,b3,s2]}),s=HN("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=CL(l.toString());p3(n,u,()=>u(n.currentUser)),m3(n,h=>u(h))}}const a=FN("auth");return a&&Y5(n,`http://${a}`),n}function IL(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}O5({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const l=ea("internal-error");l.customData=a,n(l)},s.type="text/javascript",s.charset="UTF-8",IL().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="firebasestorage.googleapis.com",RL="storageBucket",jL=120*1e3,DL=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends ra{constructor(e,n,s=0){super(qg(e),`Firebase Storage: ${n} (${qg(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,oa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var aa;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(aa||(aa={}));function qg(t){return"storage/"+t}function kL(){const t="An unknown error occurred, please check the error payload for server response.";return new oa(aa.UNKNOWN,t)}function ML(){return new oa(aa.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PL(){return new oa(aa.CANCELED,"User canceled the upload/download.")}function LL(t){return new oa(aa.INVALID_URL,"Invalid URL '"+t+"'.")}function VL(t){return new oa(aa.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bw(t){return new oa(aa.INVALID_ARGUMENT,t)}function d2(){return new oa(aa.APP_DELETED,"The Firebase app was deleted.")}function UL(t){return new oa(aa.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=vi.makeFromUrl(e,n)}catch{return new vi(e,"")}if(s.path==="")return s;throw VL(e)}static makeFromUrl(e,n){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),m={bucket:1,path:3};function f(W){W.path_=decodeURIComponent(W.path)}const y="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",T=new RegExp(`^https?://${_}/${y}/b/${a}/o${w}`,"i"),M={bucket:1,path:3},z=n===u2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",q=new RegExp(`^https?://${z}/${a}/${k}`,"i"),P=[{regex:h,indices:m,postModify:l},{regex:T,indices:M,postModify:f},{regex:q,indices:{bucket:1,path:2},postModify:f}];for(let W=0;W<P.length;W++){const te=P[W],L=te.regex.exec(e);if(L){const C=L[te.indices.bucket];let A=L[te.indices.path];A||(A=""),s=new vi(C,A),te.postModify(s);break}}if(s==null)throw LL(e);return s}}class OL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t,e,n){let s=1,a=null,l=null,u=!1,h=0;function m(){return h===2}let f=!1;function y(...k){f||(f=!0,e.apply(null,k))}function _(k){a=setTimeout(()=>{a=null,t(T,m())},k)}function w(){l&&clearTimeout(l)}function T(k,...q){if(f){w();return}if(k){w(),y.call(null,k,...q);return}if(m()||u){w(),y.call(null,k,...q);return}s<64&&(s*=2);let P;h===1?(h=2,P=0):P=(s+Math.random())*1e3,_(P)}let M=!1;function z(k){M||(M=!0,w(),!f&&(a!==null?(k||(h=2),clearTimeout(a),_(0)):k||(h=1)))}return _(0),l=setTimeout(()=>{u=!0,z(!0)},n),z}function FL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){return t!==void 0}function _w(t,e,n,s){if(s<e)throw bw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw bw(`Invalid value for '${t}'. Expected ${n} or less.`)}function qL(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const a=e(s)+"="+e(t[s]);n=n+a+"&"}return n=n.slice(0,-1),n}var Lf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lf||(Lf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return n||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n,s,a,l,u,h,m,f,y,_,w=!0,T=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=f,this.progressCallback_=y,this.connectionFactory_=_,this.retry=w,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,z)=>{this.resolve_=M,this.reject_=z,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new qh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=h=>{const m=h.loaded,f=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,f)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const h=l.getErrorCode()===Lf.NO_ERROR,m=l.getStatus();if(!h||HL(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Lf.ABORT;s(!1,new qh(!1,null,y));return}const f=this.successCodes_.indexOf(m)!==-1;s(!0,new qh(f,l))})},n=(s,a)=>{const l=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());BL(m)?l(m):l()}catch(m){u(m)}else if(h!==null){const m=kL();m.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,m)):u(m)}else if(a.canceled){const m=this.appDelete_?d2():PL();u(m)}else{const m=ML();u(m)}};this.canceled_?n(!1,new qh(!1,null,!0)):this.backoffId_=zL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function $L(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function KL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function YL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WL(t,e,n,s,a,l,u=!0,h=!1){const m=qL(t.urlParams),f=t.url+m,y=Object.assign({},t.headers);return JL(y,e),$L(y,n),KL(y,l),YL(y,s),new GL(f,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,u,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QL(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this._service=e,n instanceof vi?this._location=n:this._location=vi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vf(e,n)}get root(){const e=new vi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QL(this._location.path)}get storage(){return this._service}get parent(){const e=XL(this._location.path);if(e===null)return null;const n=new vi(this._location.bucket,e);return new Vf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UL(e)}}function ww(t,e){const n=e==null?void 0:e[RL];return n==null?null:vi.makeFromBucketSpec(n,t)}function ZL(t,e,n,s={}){t.host=`${e}:${n}`;const a=Vo(e);a&&(K0(`https://${t.host}/b`),J0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(t._overrideAuthToken=typeof l=="string"?l:GN(l,t.app.options.projectId))}class eV{constructor(e,n,s,a,l,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=u2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jL,this._maxUploadRetryTime=DL,this._requests=new Set,a!=null?this._bucket=vi.makeFromBucketSpec(a,this._host):this._bucket=ww(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vi.makeFromBucketSpec(this._url,e):this._bucket=ww(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vf(this,e)}_makeRequest(e,n,s,a,l=!0){if(this._deleted)return new OL(d2());{const u=WL(e,this._appId,s,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,a).getPromise()}}const Ew="@firebase/storage",Nw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="storage";function tV(t=X0(),e){t=un(t);const s=Wf(t,h2).getImmediate({identifier:e}),a=BN("storage");return a&&nV(s,...a),s}function nV(t,e,n,s={}){ZL(t,e,n,s)}function sV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new eV(n,s,a,e,Uo)}function iV(){Ro(new Vr(h2,sV,"PUBLIC").setMultipleInstances(!0)),Yi(Ew,Nw,""),Yi(Ew,Nw,"esm2020")}iV();const aV={apiKey:"AIzaSyDa_qvmvyVyJVe936hW5QoDtviIrITcvDI",authDomain:"ramais-63a73.firebaseapp.com",projectId:"ramais-63a73",storageBucket:"ramais-63a73.firebasestorage.app",messagingSenderId:"695161860787",appId:"1:695161860787:web:98e73e5fc79a5cbb2f76c6",measurementId:"G-X3121MPE65"},Hx=JN(aV),Me=Z6(Hx),ju=AL(Hx);tV(Hx);var _n=(t=>(t.MASTER="MASTER",t.ADMIN="ADMIN",t.COMMUNICATION="COMMUNICATION",t.USER="USER",t))(_n||{}),Lt=(t=>(t.TODO="TODO",t.IN_PROGRESS="IN_PROGRESS",t.DONE="DONE",t))(Lt||{});const f2=I.createContext({currentUser:null,user:null,loading:!0,logout:async()=>{},isAdmin:!1,isMaster:!1,isCommunication:!1,refreshUser:async()=>{},globalSettings:null}),Kn=()=>I.useContext(f2),rV=({children:t})=>{const[e,n]=I.useState(null),[s,a]=I.useState(null),[l,u]=I.useState(null),[h,m]=I.useState(!0);I.useEffect(()=>{const M=fs(hn(Me,"settings","general"),q=>{q.exists()?u(q.data()):u({publicDirectory:!0,showBirthdaysPublicly:!0,showRoomsPublicly:!0,showNewsPublicly:!0,showRolePublicly:!0,showWelcomeSection:!0,dashboardShowRooms:!0,dashboardShowNews:!0,dashboardShowBirthdays:!0,showRoleInternal:!0})});let z=null;const k=g3(ju,async q=>{if(n(q),q){z&&z();const H=Nn(Ye(Me,"people"),Gn("uid","==",q.uid));z=fs(H,P=>{if(P.empty)a({id:"temp",uid:q.uid,name:q.displayName||"Usurio",email:q.email||"",role:"No identificado",systemRole:_n.USER,department:"Geral",extension:"",whatsapp:"",avatar:q.photoURL||"",birthday:"",signatureImage:""});else{const W=P.docs[0].data();a({id:P.docs[0].id,uid:W.uid,name:W.name,role:W.role,systemRole:W.systemRole||_n.USER,department:W.department||W.sector,unit:W.unit,extension:W.extension,whatsapp:W.whatsapp||"",email:W.email,avatar:W.photoBase64||W.photoUrl||`https://ui-avatars.com/api/?name=${encodeURIComponent(W.name)}&background=0d9488&color=fff`,birthday:W.birthday,showRole:W.showRole??!0,showInPublicDirectory:W.showInPublicDirectory??!0,signatureImage:W.signatureImage||""})}m(!1)},P=>{console.error("Error fetching user profile:",P),m(!1)})}else a(null),m(!1)});return()=>{M(),k(),z&&z()}},[]);const f=async()=>{await x3(ju),a(null),n(null)},y=I.useCallback(async()=>{console.log("User refresh requested (handled by realtime listener)")},[]),_=(s==null?void 0:s.systemRole)===_n.MASTER,w=(s==null?void 0:s.systemRole)===_n.ADMIN||_,T=(s==null?void 0:s.systemRole)===_n.COMMUNICATION||w;return h?r.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-slate-50 gap-4",children:[r.jsx(Je,{className:"animate-spin text-emerald-600",size:48}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("p",{className:"text-slate-700 font-semibold text-lg",children:"Iniciando iRamais Hub..."}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Conectando ao sistema"})]})]}):r.jsx(f2.Provider,{value:{currentUser:s,user:e,loading:h,logout:f,isAdmin:w,isMaster:_,isCommunication:T,refreshUser:y,globalSettings:l},children:t})},Pa=({className:t="h-10"})=>{const{globalSettings:e}=Kn(),n="http://intermaritima.com.br/images/logo2.png",s=(e==null?void 0:e.companyLogo)||n;return r.jsx("img",{src:s,alt:"Empresa Logo",className:`${t} object-contain transition-all duration-300`,onError:a=>{a.target.src=n}})},m2=(t,e)=>t.photoBase64?t.photoBase64:t.photoUrl?t.photoUrl:`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=0d9488&color=fff`,Ht=t=>{if(t===void 0||t===null)return null;if(Array.isArray(t))return t.map(e=>Ht(e));if(typeof t=="object"){const e={};return Object.keys(t).forEach(n=>{e[n]=Ht(t[n])}),e}return t},Gs=async(t,e)=>{if(!e||typeof e!="string")throw new Error("ID do registro invlido.");try{const n=hn(Me,t,e.trim());return await CS(n),!0}catch(n){throw n}},oV=()=>{const t="0123456789ABCDEF";let e="";for(let n=0;n<24;n++)e+=t.charAt(Math.floor(Math.random()*t.length)),(n+1)%6===0&&n!==23&&(e+="-");return e},lV=t=>fs(Ye(Me,"term_templates"),e=>{t(e.docs.map(n=>({id:n.id,...n.data()})))}),p2=(t,e)=>{const n=e?Nn(Ye(Me,"terms"),Gn("employeeId","==",e)):Nn(Ye(Me,"terms"),Fo("createdAt","desc"));return fs(n,s=>{let a=s.docs.map(l=>({id:l.id,...l.data()}));e&&a.sort((l,u)=>new Date(u.createdAt).getTime()-new Date(l.createdAt).getTime()),t(a)})},cV=t=>fs(Ye(Me,"units"),e=>{t(e.docs.map(n=>({id:n.id,...n.data()})))}),uV=t=>fs(Ye(Me,"sectors"),e=>{t(e.docs.map(n=>({id:n.id,name:n.data().name})))}),dV=t=>fs(Ye(Me,"people"),e=>{t(e.docs.map(n=>{const s=n.data();return{id:n.id,uid:s.uid,name:s.name||"",role:s.role||"Colaborador",systemRole:s.systemRole||_n.USER,department:s.sector||s.department||"Geral",unit:s.unit||"",extension:s.extension||"",whatsapp:s.whatsapp||"",email:s.email||"",avatar:m2(s,s.name||"User"),birthday:s.birthday||"",showRole:s.showRole!==void 0?s.showRole:!0,showInPublicDirectory:s.showInPublicDirectory!==void 0?s.showInPublicDirectory:!0,signatureImage:s.signatureImage||""}}))}),hV=t=>fs(Ye(Me,"systems"),e=>{t(e.docs.map(n=>({id:n.id,...n.data()})))}),g2=t=>fs(Ye(Me,"units_assinatura"),e=>{t(e.docs.map(n=>({id:n.id,...n.data()})))}),fV=t=>fs(Ye(Me,"sectors_assinatura"),e=>{t(e.docs.map(n=>({id:n.id,name:n.data().name,description:n.data().description||""})))}),x2=(t,e)=>{const n=e?Nn(Ye(Me,"signature_requests"),Gn("userId","==",e)):Nn(Ye(Me,"signature_requests"),Fo("createdAt","desc"));return fs(n,s=>{let a=s.docs.map(l=>({id:l.id,...l.data()}));e&&a.sort((l,u)=>new Date(u.createdAt).getTime()-new Date(l.createdAt).getTime()),t(a)})},mV=t=>{const e=Nn(Ye(Me,"signature_logs"),Fo("createdAt","desc"));return fs(e,n=>{t(n.docs.map(s=>({id:s.id,...s.data()})))})},pV=async()=>{try{const t=hn(Me,"settings","general"),e=await c5(t);return e.exists()?e.data():{publicDirectory:!0,showBirthdaysPublicly:!0,showRoomsPublicly:!0,showNewsPublicly:!0,showRolePublicly:!0,showWelcomeSection:!0,dashboardShowRooms:!0,dashboardShowNews:!0,dashboardShowBirthdays:!0,showRoleInternal:!0}}catch{return{publicDirectory:!0,showBirthdaysPublicly:!0,showRoomsPublicly:!0,showNewsPublicly:!0,showRolePublicly:!0,showWelcomeSection:!0,dashboardShowRooms:!0,dashboardShowNews:!0,dashboardShowBirthdays:!0,showRoleInternal:!0}}},y2=async t=>{const e=hn(Me,"settings","general");await SS(e,Ht(t),{merge:!0})},Jr=async()=>{try{const t=Nn(Ye(Me,"people"));return(await $n(t)).docs.map(n=>{const s=n.data();return{id:n.id,uid:s.uid,name:s.name||"",role:s.role||"Colaborador",systemRole:s.systemRole||_n.USER,department:s.sector||s.department||"Geral",unit:s.unit||"",extension:s.extension||"",whatsapp:s.whatsapp||"",email:s.email||"",avatar:m2(s,s.name||"User"),birthday:s.birthday||"",showRole:s.showRole!==void 0?s.showRole:!0,showInPublicDirectory:s.showInPublicDirectory!==void 0?s.showInPublicDirectory:!0,signatureImage:s.signatureImage||""}})}catch{return[]}},v2=async(t,e)=>{const n=Ht({...t,photoBase64:e||null,createdAt:new Date().toISOString()});await hs(Ye(Me,"people"),n)},Gx=async(t,e,n)=>{const s=hn(Me,"people",t),a=Ht({...e,photoBase64:n||void 0,updatedAt:new Date().toISOString()});await as(s,a)},gV=async t=>{await Gs("people",t)},ym=async t=>{try{await hs(Ye(Me,"notifications"),Ht({...t,read:!1,createdAt:new Date().toISOString()}))}catch(e){console.error("Erro ao criar notificao:",e)}},b2=async t=>{await as(hn(Me,"notifications",t),{read:!0})},_2=async t=>{const e=Nn(Ye(Me,"notifications"),Gn("userId","==",t)),s=(await $n(e)).docs.map(a=>CS(a.ref));await Promise.all(s)},xV=async(t,e,n,s)=>{await hs(Ye(Me,"messages"),Ht({senderId:t,receiverId:e,text:n,timestamp:new Date().toISOString(),read:!1,deleted:!1,participants:[t,e]})),await ym({userId:e,type:"chat",title:`Nova mensagem de ${s}`,message:n.substring(0,50)+(n.length>50?"...":""),read:!1,createdAt:new Date().toISOString(),link:"/directory",senderId:t})},yV=async(t,e)=>{const n=Nn(Ye(Me,"messages"),Gn("receiverId","==",t),Gn("senderId","==",e),Gn("read","==",!1)),s=await $n(n),a=d5(Me);s.docs.forEach(l=>{a.update(l.ref,{read:!0})}),await a.commit()},vV=async t=>{await as(hn(Me,"messages",t),{deleted:!0})},$a=async()=>(await $n(Ye(Me,"units"))).docs.map(e=>({id:e.id,...e.data()})),bV=async t=>await hs(Ye(Me,"units"),Ht(t)),_V=async t=>{const{id:e,...n}=t;await as(hn(Me,"units",e),Ht(n))},wV=async t=>await Gs("units",t),qo=async()=>(await $n(Ye(Me,"sectors"))).docs.map(e=>({id:e.id,name:e.data().name})),EV=async t=>await hs(Ye(Me,"sectors"),{name:t.name}),NV=async t=>await as(hn(Me,"sectors",t.id),{name:t.name}),TV=async t=>await Gs("sectors",t),SV=async()=>(await $n(Ye(Me,"term_templates"))).docs.map(e=>({id:e.id,...e.data()})),CV=async t=>{await hs(Ye(Me,"term_templates"),Ht({...t,createdAt:new Date().toISOString()}))},AV=async(t,e)=>{await as(hn(Me,"term_templates",t),Ht(e))},IV=async t=>{const e=oV(),n=await hs(Ye(Me,"terms"),Ht({...t,status:"PENDENTE",token:e,createdAt:new Date().toISOString()}));return await ym({userId:t.employeeId,type:"term",title:"Novo Termo para Assinatura",message:`Um novo termo de ${t.type} foi emitido para voc.`,read:!1,createdAt:new Date().toISOString(),link:"/signatures"}),n.id},RV=async(t,e,n)=>{await as(hn(Me,"terms",t),{status:"ASSINADO",employeeCpf:e,signatureImage:n,signedAt:new Date().toISOString()})},jV=async t=>await Gs("terms",t),DV=async t=>{const{id:e,...n}=t;return await hs(Ye(Me,"units_assinatura"),Ht(n))},kV=async(t,e)=>{await as(hn(Me,"units_assinatura",t),Ht(e))},MV=async t=>await Gs("units_assinatura",t),PV=async t=>await hs(Ye(Me,"sectors_assinatura"),Ht({name:t.name,description:t.description||""})),LV=async(t,e)=>{await as(hn(Me,"sectors_assinatura",t),Ht(e))},VV=async t=>await Gs("sectors_assinatura",t),Tw=async t=>{await hs(Ye(Me,"signature_logs"),Ht(t))},UV=async t=>await Gs("signature_logs",t),OV=async t=>{const e=await hs(Ye(Me,"signature_requests"),Ht({...t,status:"PENDING",createdAt:new Date().toISOString()}));await hs(Ye(Me,"tasks"),Ht({title:`Assinatura: ${t.userName}`,description:`Solicitao de assinatura de e-mail iniciada por ${t.userName}. Notas: ${t.notes||"Sem observaes"}`,assigneeId:"",status:Lt.TODO,dueDate:new Date(Date.now()+2880*60*1e3).toISOString().split("T")[0],creatorId:t.userId,creatorDepartment:"TI",createdAt:new Date().toISOString(),signatureRequestId:e.id}));const n=Nn(Ye(Me,"people"),Gn("department","==","TI"));(await $n(n)).forEach(a=>{ym({userId:a.id,type:"system",title:"Nova Solicitao de Assinatura",message:`${t.userName} solicitou uma assinatura de e-mail.`,read:!1,createdAt:new Date().toISOString(),link:"/admin-signatures"})})},zV=async(t,e,n,s,a)=>{if(!t)throw new Error("ID invlido");const l=hn(Me,"signature_requests",t);await as(l,Ht({status:e,completedAt:new Date().toISOString(),completedBy:n,signatureData:a||null}));try{const u=Nn(Ye(Me,"tasks"),Gn("signatureRequestId","==",t)),h=await $n(u);if(!h.empty){const m=h.docs[0],f=Nn(Ye(Me,"people"),Gn("name","==",n)),y=await $n(f),_=y.empty?null:y.docs[0].id;await as(hn(Me,"tasks",m.id),{status:Lt.DONE,completedAt:new Date().toISOString(),completedBy:_})}}catch(u){console.error("Erro ao fechar tarefa de assinatura:",u)}s&&await ym({userId:s,type:"system",title:"Assinatura Concluda",message:"Sua assinatura de e-mail est pronta.",read:!1,createdAt:new Date().toISOString(),link:"/signatures"})},FV=async t=>await Gs("signature_requests",t),w2=async()=>(await $n(Ye(Me,"tasks"))).docs.map(e=>({id:e.id,...e.data()})),BV=async t=>{await hs(Ye(Me,"tasks"),Ht({...t,completedAt:null,completedBy:null,createdAt:new Date().toISOString()}))},Sw=async(t,e)=>{await as(hn(Me,"tasks",t),Ht(e))},qV=async t=>{await Gs("tasks",t)},E2=async()=>(await $n(Ye(Me,"systems"))).docs.map(e=>({id:e.id,...e.data()})),HV=async()=>(await $n(Ye(Me,"equipments"))).docs.map(e=>({id:e.id,...e.data()})),GV=async t=>{await hs(Ye(Me,"systems"),Ht(t))},$V=async(t,e)=>{await as(hn(Me,"systems",t),Ht(e))},KV=async t=>{await Gs("systems",t)},$x=async()=>{const t=Nn(Ye(Me,"news"),Fo("date","desc"));return(await $n(t)).docs.map(n=>({id:n.id,...n.data()}))},JV=async t=>{await hs(Ye(Me,"news"),Ht({...t,createdAt:new Date().toISOString()}))},YV=async(t,e)=>{await as(hn(Me,"news",t),Ht(e))},WV=async t=>{await Gs("news",t)},vm=async()=>(await $n(Ye(Me,"meetingRooms"))).docs.map(e=>({id:e.id,...e.data()})),XV=async t=>{await hs(Ye(Me,"meetingRooms"),Ht({...t,capacity:Number(t.capacity)}))},QV=async(t,e)=>{await as(hn(Me,"meetingRooms",t),Ht({...e,capacity:Number(e.capacity)}))},ZV=async t=>{await Gs("meetingRooms",t)},eU=async t=>{const e=`${t.roomId}_${t.date}_${t.time.replace(":","-")}`;await SS(hn(Me,"appointments",e),Ht({...t,createdAt:new Date().toISOString()}))},tU=async(t,e)=>{await as(hn(Me,"appointments",t),Ht(e))},nU=async t=>{await Gs("appointments",t)},sU=t=>{if(!t)return"";const e=["de","do","da","dos","das","e","em","com","para"],n=["i","ii","iii","iv","v","vi","vii","viii","ix","x"],s=["ti","rh","sesmt","dp","it","ceo","cfo","coo","cto","adm","qhse","comex"];return t.toLowerCase().split(" ").filter(a=>a.length>0).map((a,l)=>l>0&&e.includes(a)?a:n.includes(a)||s.includes(a)?a.toUpperCase():a.charAt(0).toUpperCase()+a.slice(1)).join(" ")},iU=()=>{var Z,oe;const[t,e]=I.useState(!1),n=Ti(),s=qa(),{currentUser:a,logout:l,isAdmin:u,isCommunication:h,user:m,isMaster:f,globalSettings:y}=Kn(),[_,w]=I.useState([]),[T,M]=I.useState(!1),z=I.useRef(null),k=I.useRef(new Set),q=I.useRef(!0),[H,P]=I.useState(!1),[W,te]=I.useState(!1),[L,C]=I.useState({name:"",extension:"",whatsapp:"",birthday:"",avatar:"",signatureImage:""}),[A,R]=I.useState(void 0),[U,B]=I.useState(void 0),$=ee=>n.pathname===ee;I.useEffect(()=>{if(!a)return;const ee=Nn(Ye(Me,"notifications"),Gn("userId","==",a.id),Fo("createdAt","desc")),Ne=fs(ee,pe=>{const Se=pe.docs.map(De=>({id:De.id,...De.data()}));if(q.current)Se.forEach(De=>k.current.add(De.id)),q.current=!1;else{const De=Se.filter(ut=>!ut.read&&!k.current.has(ut.id));De.length>0&&k.current.add(De[0].id)}w(Se)}),Y=pe=>{z.current&&!z.current.contains(pe.target)&&M(!1)};return document.addEventListener("mousedown",Y),()=>{Ne(),document.removeEventListener("mousedown",Y)}},[a]);const F=_.filter(ee=>!ee.read).length,je=async ee=>{ee.read||await b2(ee.id),M(!1),ee.link&&(ee.type==="chat"&&ee.senderId?s(ee.link,{state:{openChatWith:ee.senderId}}):s(ee.link))},ze=async()=>{if(a)try{await _2(a.id)}catch(ee){console.error("Erro ao limpar notificaes:",ee)}},j=async()=>{s("/"),setTimeout(async()=>{await l()},100)},se=()=>{a&&(C({name:a.name,extension:a.extension,whatsapp:a.whatsapp||"",birthday:a.birthday||"",avatar:a.avatar,signatureImage:a.signatureImage||""}),R(void 0),B(void 0),P(!0),e(!1))},K=(ee,Ne)=>{var pe;const Y=(pe=ee.target.files)==null?void 0:pe[0];if(Y){const Se=new FileReader;Se.onload=De=>{var st;const ut=new Image;ut.onload=()=>{const _e=document.createElement("canvas");let Ve=ut.width,it=ut.height;const mt=Ne==="avatar"?300:600;Ve>it?Ve>mt&&(it*=mt/Ve,Ve=mt):it>mt&&(Ve*=mt/it,it=mt),_e.width=Ve,_e.height=it;const Jt=_e.getContext("2d");Jt==null||Jt.drawImage(ut,0,0,Ve,it);const en=_e.toDataURL("image/png",.8);Ne==="avatar"?(R(en),C(ue=>({...ue,avatar:en}))):(B(en),C(ue=>({...ue,signatureImage:en})))},ut.src=(st=De.target)==null?void 0:st.result},Se.readAsDataURL(Y)}},ne=async()=>{if(a){if(!L.name)return alert("O nome  obrigatrio.");te(!0);try{const ee={name:L.name,extension:L.extension,whatsapp:L.whatsapp,birthday:L.birthday,uid:m==null?void 0:m.uid,signatureImage:L.signatureImage};a.id==="temp"||!a.id?await v2(ee,A):await Gx(a.id,ee,A),alert("Perfil atualizado com sucesso!"),P(!1)}catch{alert("Erro ao atualizar perfil.")}finally{te(!1)}}};if(!a)return null;const J=[{path:"/dashboard",label:"Dashboard",icon:AN},{path:"/directory",label:"Ramais & Pessoas",icon:Uu},{path:"/systems",label:"Sistemas & Links",icon:G0},{path:"/meeting-rooms",label:"Salas de Reunio",icon:ns},{path:"/tasks",label:"Tarefas",icon:xs},{path:"/signatures",label:"Assinaturas & Termos",icon:xi}],O=f||u||((oe=(Z=y==null?void 0:y.termsDeptPermissions)==null?void 0:Z[a.department])==null?void 0:oe.enabled);return r.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col md:flex-row font-sans text-slate-900 relative overflow-x-hidden",children:[r.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 bg-white border-b shadow-sm z-30 relative sticky top-0",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx(Pa,{className:"h-8 w-auto"})}),r.jsx("button",{onClick:()=>e(!0),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:r.jsx(fD,{})})]}),t&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-40 md:hidden backdrop-blur-sm transition-opacity",onClick:()=>e(!1)}),r.jsxs("aside",{className:`fixed inset-y-0 left-0 z-50 w-72 bg-slate-900 text-slate-300 transition-transform duration-300 ease-in-out transform ${t?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static md:h-screen flex flex-col shadow-2xl md:shadow-none`,children:[r.jsxs("div",{className:"flex md:hidden items-center justify-between p-4 border-b border-slate-800",children:[r.jsx(Pa,{className:"h-8 w-auto brightness-0 invert"}),r.jsx("button",{onClick:()=>e(!1),className:"p-2 text-slate-400 hover:text-white rounded-lg",children:r.jsx(Pn,{size:24})})]}),r.jsx("div",{className:"p-6 hidden md:flex items-center justify-center",children:r.jsx(Pa,{className:"w-52 h-auto"})}),r.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-6 overflow-y-auto custom-scrollbar",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:"Menu Principal"}),J.map(ee=>r.jsxs(wn,{to:ee.path,onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$(ee.path)?"bg-emerald-600 text-white shadow-md shadow-emerald-900/20":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(ee.icon,{size:20}),r.jsx("span",{className:"font-medium",children:ee.label})]},ee.path)),h&&r.jsxs(wn,{to:"/news-editor",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/news-editor")?"bg-emerald-600 text-white shadow-md shadow-emerald-900/20":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(kj,{size:20}),r.jsx("span",{className:"font-medium",children:"Criar Postagem"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 flex items-center gap-1",children:[r.jsx($0,{size:12})," Administrativo"]}),f&&r.jsxs(wn,{to:"/admin-users",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/admin-users")?"bg-slate-700 text-white border-l-4 border-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(Un,{size:20})," ",r.jsx("span",{children:"Gesto de Usurios"})]}),u&&r.jsxs(r.Fragment,{children:[r.jsxs(wn,{to:"/admin-employees",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/admin-employees")?"bg-slate-700 text-white border-l-4 border-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(Uu,{size:20})," ",r.jsx("span",{children:"Gesto Colaboradores"})]}),r.jsxs(wn,{to:"/admin-systems",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/admin-systems")?"bg-slate-700 text-white border-l-4 border-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(Da,{size:20})," ",r.jsx("span",{children:"Gesto de Sistemas & Links"})]}),r.jsxs(wn,{to:"/admin-rooms",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/admin-rooms")?"bg-slate-700 text-white border-l-4 border-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(Ol,{size:20})," ",r.jsx("span",{children:"Gesto Salas"})]}),r.jsxs(wn,{to:"/admin-org",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/admin-org")?"bg-slate-700 text-white border-l-4 border-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(B0,{size:20})," ",r.jsx("span",{children:"Gesto Organizacional"})]}),r.jsxs(wn,{to:"/admin-signatures",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/admin-signatures")?"bg-slate-700 text-white border-l-4 border-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(xi,{size:20})," ",r.jsx("span",{children:"Assinaturas de E-mail"})]})]}),O&&r.jsxs(wn,{to:"/admin-terms",onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${$("/admin-terms")?"bg-slate-700 text-white border-l-4 border-emerald-500":"hover:bg-slate-800 hover:text-white"}`,children:[r.jsx(Kl,{size:20})," ",r.jsx("span",{children:"Gesto de Termos"})]})]})]}),r.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900",children:[r.jsxs("div",{className:"flex items-center gap-3 px-2 mb-4 group cursor-pointer",onClick:se,children:[r.jsxs("div",{className:"relative shrink-0",children:[r.jsx("img",{src:a.avatar,className:"w-10 h-10 rounded-full border-2 border-emerald-500 object-cover group-hover:border-white transition-colors"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-slate-700 rounded-full p-0.5 border border-slate-900 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Da,{size:10,className:"text-white"})})]}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("p",{className:"text-sm font-semibold text-white leading-tight truncate group-hover:text-emerald-400 transition-colors",children:a.name.split(" ")[0]})}),r.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[r.jsx("span",{className:"text-[10px] bg-slate-800 px-1.5 py-0.5 rounded text-slate-300 border border-slate-700 inline-block truncate w-fit max-w-full",children:sU(a.role)}),r.jsx("span",{className:"text-[10px] text-slate-400 truncate leading-tight pl-0.5",children:a.department}),a.unit&&r.jsx("span",{className:"text-[9px] text-slate-500 truncate leading-tight pl-0.5",children:a.unit})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors",children:[r.jsx(Da,{size:14}),r.jsx("span",{children:"Editar"})]}),r.jsxs("button",{onClick:j,className:"flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium text-slate-400 hover:text-red-400 bg-slate-800 hover:bg-slate-700 rounded-lg transition-colors",children:[r.jsx(lD,{size:14}),r.jsx("span",{children:"Sair"})]})]})]})]}),r.jsxs("main",{className:`flex-1 flex flex-col h-[calc(100vh-64px)] md:h-screen transition-all ${t?"overflow-hidden":"overflow-y-auto"}`,children:[r.jsxs("header",{className:"sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h1",{className:"text-xl font-bold text-slate-800 hidden md:block",children:"iRamais Hub"}),r.jsxs(wn,{to:"/",className:"flex items-center gap-2 text-xs md:text-sm font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 px-3 py-1.5 rounded-lg transition-colors border border-emerald-100",children:[r.jsx(ja,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Portal do Visitante"}),r.jsx("span",{className:"sm:hidden",children:"Incio"})]})]}),r.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto justify-end",children:[r.jsxs("div",{className:"relative hidden md:block",children:[r.jsx(Va,{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Pesquisar no iRamais Hub...",className:"pl-9 pr-4 py-2 bg-slate-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-64"})]}),r.jsxs("div",{className:"relative",ref:z,children:[r.jsxs("button",{onClick:()=>M(!T),className:`relative p-2 transition-colors rounded-full ${T?"bg-emerald-50 text-emerald-600":"text-slate-500 hover:text-emerald-600"}`,children:[r.jsx(df,{size:20}),F>0&&r.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white animate-pulse"})]}),T&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-slate-200 z-50 overflow-hidden animate-fade-in",children:[r.jsxs("div",{className:"p-3 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"Notificaes"}),_.length>0&&r.jsx("button",{onClick:ze,className:"text-[10px] text-slate-500 hover:text-red-500 font-medium",children:"Limpar tudo"})]}),r.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:_.length>0?_.map(ee=>r.jsx("div",{onClick:()=>je(ee),className:`p-3 border-b border-slate-50 cursor-pointer hover:bg-slate-50 transition-colors ${ee.read?"":"bg-blue-50/30"}`,children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:`mt-1.5 w-2 h-2 rounded-full shrink-0 ${ee.read?"bg-slate-300":ee.type==="term"?"bg-emerald-500":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:`text-sm ${ee.read?"text-slate-600":"font-bold text-slate-800"}`,children:ee.title}),r.jsx("span",{className:"text-[10px] text-slate-400 whitespace-nowrap ml-2",children:new Date(ee.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5 line-clamp-2",children:ee.message}),ee.type==="term"&&r.jsx("span",{className:"inline-block mt-1 text-[10px] bg-emerald-100 text-emerald-700 px-1.5 py-0.5 rounded",children:"Termo de Responsabilidade"})]})]})},ee.id)):r.jsxs("div",{className:"p-8 text-center text-slate-400",children:[r.jsx(df,{size:24,className:"mx-auto mb-2 opacity-20"}),r.jsx("p",{className:"text-xs",children:"Nenhuma notificao."})]})}),r.jsx("div",{className:"p-2 bg-slate-50 text-center border-t border-slate-100",children:r.jsx(wn,{to:"/tasks",onClick:()=>M(!1),className:"text-xs font-medium text-emerald-600 hover:underline",children:"Ver todas as tarefas"})})]})]})]})]}),r.jsx("div",{className:"p-4 md:p-8 max-w-7xl mx-auto w-full",children:r.jsx(sR,{})})]}),H&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden animate-fade-in custom-scrollbar overflow-y-auto max-h-[95vh]",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50 sticky top-0 z-10",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ji,{className:"text-emerald-600",size:20})," Minha Conta"]}),r.jsx("button",{onClick:()=>P(!1),className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-200 rounded-full transition-colors",children:r.jsx(Pn,{size:20})})]}),r.jsxs("div",{className:"p-6 space-y-8",children:[r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden border-4 border-white shadow-md",children:L.avatar?r.jsx("img",{src:L.avatar,className:"w-full h-full object-cover"}):r.jsx(Ji,{className:"text-slate-400",size:32})}),r.jsxs("label",{className:"absolute bottom-0 right-0 bg-emerald-600 text-white p-2 rounded-full cursor-pointer hover:bg-emerald-700 transition-colors shadow-sm",children:[r.jsx(Mu,{size:14}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ee=>K(ee,"avatar")})]})]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Foto de Perfil (Avatar)"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Nome Completo"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ji,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),r.jsx("input",{type:"text",value:L.name,onChange:ee=>C({...L,name:ee.target.value}),className:"w-full pl-9 p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Ramal"}),r.jsxs("div",{className:"relative",children:[r.jsx(Lo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),r.jsx("input",{type:"text",value:L.extension,onChange:ee=>C({...L,extension:ee.target.value}),className:"w-full pl-9 p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"WhatsApp"}),r.jsxs("div",{className:"relative",children:[r.jsx(pD,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),r.jsx("input",{type:"text",value:L.whatsapp,onChange:ee=>C({...L,whatsapp:ee.target.value}),className:"w-full pl-9 p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm",placeholder:"5571..."})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1",children:"Data de Nascimento"}),r.jsxs("div",{className:"relative",children:[r.jsx(ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),r.jsx("input",{type:"date",value:L.birthday,onChange:ee=>C({...L,birthday:ee.target.value}),className:"w-full pl-9 p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm"})]})]})]})]}),r.jsxs("div",{className:"border-t pt-8",children:[r.jsxs("h4",{className:"text-sm font-bold text-slate-700 flex items-center gap-2 mb-4",children:[r.jsx(kN,{size:18,className:"text-emerald-600"})," Assinatura para Documentos Digital"]}),r.jsx("p",{className:"text-xs text-slate-500 mb-4 leading-relaxed",children:"Esta assinatura ser utilizada nos termos e outros documentos oficiais que voc assinar digitalmente atravs do sistema."}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 bg-slate-50 p-6 rounded-2xl border border-slate-100",children:[r.jsxs("div",{className:"relative shrink-0 group",children:[r.jsx("div",{className:"w-48 h-24 bg-white border-2 border-dashed border-slate-300 rounded-xl flex items-center justify-center overflow-hidden shadow-inner p-2 group-hover:border-emerald-400 transition-colors",children:L.signatureImage?r.jsx("img",{src:L.signatureImage,className:"max-w-full max-h-full object-contain mix-blend-multiply"}):r.jsxs("div",{className:"text-slate-300 flex flex-col items-center",children:[r.jsx(xi,{size:24,className:"opacity-20 mb-1"}),r.jsx("span",{className:"text-[10px] font-black uppercase",children:"Sem Assinatura"})]})}),r.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-emerald-600 text-white p-2 rounded-full cursor-pointer hover:bg-emerald-700 transition-all shadow-md group-hover:scale-110",children:[r.jsx(hk,{size:14}),r.jsx("input",{type:"file",accept:"image/png, image/jpeg",className:"hidden",onChange:ee=>K(ee,"signature")})]})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest",children:"Recomendao:"}),r.jsxs("ul",{className:"text-[10px] text-slate-500 space-y-1",children:[r.jsx("li",{children:" Use papel branco liso com caneta preta ou azul forte."}),r.jsx("li",{children:" Tire uma foto bem iluminada e recorte apenas a assinatura."}),r.jsx("li",{children:" Formato ideal: **PNG com fundo transparente**."})]}),L.signatureImage&&r.jsx("button",{onClick:()=>C(ee=>({...ee,signatureImage:""})),className:"text-[10px] font-bold text-red-500 hover:underline flex items-center gap-1 mt-2",children:"Remover Assinatura"})]})]})]}),r.jsx("div",{className:"p-4 bg-amber-50 rounded-xl border border-amber-100 text-[10px] text-amber-800 leading-relaxed",children:r.jsxs("p",{children:[r.jsx("strong",{children:"IMPORTANTE:"})," Para sua segurana, a assinatura manuscrita (opcional) ser estampada junto a uma chave criptogrfica (hash) e seus dados de CPF/Senha validados no ato da assinatura de cada termo."]})})]}),r.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 sticky bottom-0 z-10",children:[r.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded-lg font-medium text-sm",disabled:W,children:"Cancelar"}),r.jsxs("button",{onClick:ne,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 flex items-center gap-2 text-sm disabled:opacity-50",disabled:W,children:[W?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Fs,{size:16})," Salvar Perfil"]})]})]})})]})},aU=()=>{const t=[];for(let e=8;e<=17;e++)t.push(`${String(e).padStart(2,"0")}:00`),t.push(`${String(e).padStart(2,"0")}:30`);return t},rU=aU(),oU=()=>{const{currentUser:t,globalSettings:e}=Kn(),[n,s]=I.useState([]),[a,l]=I.useState([]),[u,h]=I.useState([]),[m,f]=I.useState([]),[y,_]=I.useState([]),[w,T]=I.useState([]),[M,z]=I.useState(!0),[k,q]=I.useState(null),[H,P]=I.useState(new Date().getMonth()),[W,te]=I.useState(new Set),L=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];I.useEffect(()=>{(async()=>{z(!0);try{const ne=new Date().toISOString().split("T")[0],[J,O,Z,oe,ee]=await Promise.all([$x(),Jr(),w2(),vm(),$a()]),Ne=Nn(Ye(Me,"appointments"),Gn("date","==",ne)),pe=(await $n(Ne)).docs.map(Se=>({id:Se.id,...Se.data()}));s(J.filter(Se=>Se.published)),l(O),h(Z),f(oe),_(ee),T(pe)}catch(ne){console.error("Erro ao carregar dashboard:",ne)}finally{z(!1)}})()},[]);const C=()=>P(K=>K===0?11:K-1),A=()=>P(K=>K===11?0:K+1),R=K=>{te(ne=>{const J=new Set(ne);return J.has(K)?J.delete(K):J.add(K),J})},U=I.useMemo(()=>{if(!(t!=null&&t.birthday))return!1;const K=new Date,[ne,J,O]=t.birthday.split("-").map(Number);return K.getMonth()+1===J&&K.getDate()===O},[t]),B=I.useMemo(()=>{const K=new Date,ne=K.getDate(),J=K.getMonth(),O=a.filter(oe=>oe.birthday?parseInt(oe.birthday.split("-")[1])===H+1:!1).sort((oe,ee)=>{const Ne=parseInt(oe.birthday.split("-")[2]),Y=parseInt(ee.birthday.split("-")[2]);return Ne-Y}),Z=H===J;return Z?{isCurrentMonth:Z,todaysBirthdays:O.filter(oe=>parseInt(oe.birthday.split("-")[2])===ne),pastBirthdays:O.filter(oe=>parseInt(oe.birthday.split("-")[2])<ne),upcomingBirthdays:O.filter(oe=>parseInt(oe.birthday.split("-")[2])>ne)}:{isCurrentMonth:Z,todaysBirthdays:[],pastBirthdays:[],upcomingBirthdays:O}},[a,H]),$=I.useMemo(()=>t?u.filter(K=>K.assigneeId===t.id&&K.status!==Lt.DONE).length:0,[u,t]),F=I.useMemo(()=>t?u.filter(K=>K.status!==Lt.DONE&&K.creatorDepartment===t.department).length:0,[u,t]),je=K=>{const ne=new Date,J=ne.getDay(),O=ne.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!1}),Z=J===6,oe=J===0,ee=!!K.worksSaturday,Ne=!!K.worksSunday,Y=Z&&!ee||oe&&!Ne,pe=O<(K.startTime||"08:00")||O>=(K.endTime||"18:00"),Se=Y||pe,De=w.filter(st=>st.roomId===K.id).sort((st,_e)=>{const[Ve,it]=st.time.split(":").map(Number),[mt,Jt]=_e.time.split(":").map(Number);return Ve*60+it-(mt*60+Jt)}),ut=De.find(st=>{const[_e,Ve]=st.time.split(":").map(Number),it=new Date;it.setHours(_e,Ve,0,0);const mt=new Date(it);return mt.setMinutes(it.getMinutes()+30),ne>=it&&ne<mt});return{isOccupied:!!ut&&!Se,isClosed:Se,currentMeeting:ut,schedule:De}},ze=K=>K?new Date(K).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"",j=K=>{var ne;switch(K.type){case"header":return r.jsx("h3",{className:"text-xl md:text-2xl font-black text-slate-800 mt-6 mb-3 leading-tight",children:K.content},K.id);case"image":return r.jsx("img",{src:K.content,alt:"",className:"w-full rounded-2xl shadow-md my-6"},K.id);case"quote":return r.jsxs("blockquote",{className:"border-l-4 border-emerald-500 pl-4 py-3 italic my-6 bg-slate-50 text-lg text-slate-600 rounded-r-xl",children:['"',K.content,'"']},K.id);case"button":return r.jsx("div",{className:"my-8 text-center",children:r.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block transition-all hover:scale-105 shadow-lg hover:shadow-xl px-8 py-3 font-bold uppercase tracking-wider bg-emerald-600 text-white rounded-xl text-sm no-underline",children:K.content})},K.id);case"side-by-side":return r.jsxs("div",{className:`flex flex-col md:flex-row gap-6 items-center my-8 ${((ne=K.style)==null?void 0:ne.layoutDirection)==="row-reverse"?"md:flex-row-reverse":""}`,children:[r.jsx("div",{className:"w-full md:w-1/2",children:r.jsx("img",{src:K.url,alt:"",className:"w-full rounded-xl shadow-sm object-cover"})}),r.jsx("div",{className:"w-full md:w-1/2 text-slate-600 leading-relaxed text-base",children:K.content})]},K.id);default:return r.jsx("p",{className:"text-base md:text-lg leading-relaxed text-slate-600 whitespace-pre-wrap mb-4",children:K.content},K.id)}};if(M)return r.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:r.jsxs("div",{className:"flex flex-col items-center gap-2 text-emerald-600",children:[r.jsx(Je,{className:"animate-spin",size:48}),r.jsx("span",{className:"font-medium",children:"Carregando dashboard..."})]})});const se=(e==null?void 0:e.dashboardShowRooms)||(e==null?void 0:e.dashboardShowBirthdays);return r.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[r.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Bem-vindo(a), ",t==null?void 0:t.name.split(" ")[0],"!"]}),r.jsxs("p",{className:"text-emerald-100 max-w-2xl text-lg leading-relaxed",children:["Voc tem ",r.jsxs("span",{className:"font-bold text-white border-b border-emerald-400",children:[$," tarefas"]})," atribudas a voc.",r.jsxs("span",{className:"block sm:inline sm:ml-2",children:["No setor ",r.jsx("span",{className:"font-bold text-white",children:t==null?void 0:t.department}),", existem ",r.jsxs("span",{className:"font-bold text-white",children:[F," pendncias"]})," no total."]})]}),U&&r.jsxs("div",{className:"mt-8 flex flex-col md:flex-row items-center md:items-start gap-6 bg-white/15 backdrop-blur-xl p-6 md:p-8 rounded-[2rem] border border-white/30 animate-fade-in shadow-2xl max-w-4xl ring-1 ring-white/20",children:[r.jsxs("div",{className:"relative shrink-0",children:[r.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full border-4 border-white shadow-2xl overflow-hidden relative z-10",children:r.jsx("img",{src:t==null?void 0:t.avatar,alt:t==null?void 0:t.name,className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute -top-4 -right-2 text-5xl md:text-6xl drop-shadow-lg z-20 animate-bounce select-none",title:"Feliz Aniversrio!",children:""}),r.jsx("div",{className:"absolute -top-6 -left-2 text-4xl drop-shadow-md z-20 animate-pulse select-none opacity-80",children:""}),r.jsx("div",{className:"absolute inset-0 bg-pink-400/30 blur-2xl rounded-full animate-pulse"})]}),r.jsxs("div",{className:"text-center md:text-left space-y-4",children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-black text-white tracking-tight drop-shadow-sm",children:" Feliz aniversrio! "}),r.jsx("div",{className:"space-y-4 text-emerald-50 text-sm md:text-base leading-relaxed font-medium",children:r.jsx("p",{children:"Desejamos um novo ciclo cheio de sade, realizaes e crescimento pessoal e profissional. Conte com a Intermartima para seguir construindo grandes resultados juntos. "})})]})]})]}),r.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-white/10 rounded-full blur-2xl"})]}),r.jsxs("div",{className:`grid grid-cols-1 ${se?"lg:grid-cols-3":"lg:grid-cols-1"} gap-6`,children:[(e==null?void 0:e.dashboardShowNews)&&r.jsxs("div",{className:`${se?"lg:col-span-2":"lg:col-span-1"} space-y-6`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Vu,{className:"text-emerald-600",size:24})," Mural de Notcias"]}),r.jsx(wn,{to:"/news-editor",className:"text-sm text-emerald-600 font-medium hover:underline",children:"Ver todas / Criar"})]}),r.jsx("div",{className:"space-y-4",children:n.length>0?n.map(K=>{var Z;const ne=k===K.id,J=a.find(oe=>oe.name===K.author),O=K.authorAvatar||(J==null?void 0:J.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(K.author)}&background=0d9488&color=fff`;return r.jsxs("div",{className:`bg-white rounded-2xl p-0 shadow-sm border transition-all duration-500 overflow-hidden ${ne?"border-emerald-200 ring-1 ring-emerald-50":"border-slate-100 hover:shadow-md"}`,children:[r.jsxs("div",{className:`flex flex-col md:flex-row ${ne?"bg-slate-50/50":""}`,children:[r.jsxs("div",{className:`h-48 md:h-auto md:w-1/3 bg-slate-200 relative shrink-0 transition-all duration-500 ${ne?"md:h-64":""}`,children:[r.jsx("img",{src:K.thumbnail,alt:K.title,className:"w-full h-full object-cover"}),ne&&r.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center md:hidden",children:r.jsx("span",{className:"bg-white/90 px-4 py-2 rounded-full text-xs font-bold text-slate-800",children:"Visualizando Comunicado"})})]}),r.jsxs("div",{className:"p-6 md:w-2/3 flex flex-col justify-center",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-2",children:[r.jsx("span",{className:"bg-emerald-50 text-emerald-700 px-2 py-0.5 rounded font-bold uppercase tracking-wider text-[10px]",children:K.category}),r.jsx("span",{children:ze(K.date)})]}),r.jsx("h4",{className:`text-lg font-bold text-slate-900 leading-tight mb-2 transition-all ${ne?"text-xl md:text-2xl":""}`,children:K.title}),!ne&&r.jsx("p",{className:"text-slate-600 text-sm line-clamp-2 mb-4",children:((Z=K.blocks.find(oe=>oe.type==="paragraph"))==null?void 0:Z.content)||"Clique para ler mais..."}),r.jsx("div",{className:"flex gap-4 items-center",children:K.externalUrl?r.jsxs("a",{href:K.externalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 font-semibold text-sm hover:text-emerald-800 flex items-center gap-1",children:["Ler Notcia Completa ",r.jsx($f,{size:14})]}):r.jsx("button",{onClick:()=>q(ne?null:K.id),className:`font-bold text-sm flex items-center gap-2 transition-all px-4 py-2 rounded-lg ${ne?"bg-slate-200 text-slate-700 hover:bg-slate-300":"text-emerald-600 hover:text-emerald-800 bg-emerald-50 hover:bg-emerald-100"}`,children:ne?r.jsxs(r.Fragment,{children:[r.jsx(Lu,{size:16})," Recolher Leitura"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pu,{size:16})," Ler Comunicado"]})})})]})]}),ne&&r.jsxs("div",{className:"p-6 md:p-10 border-t border-slate-100 animate-fade-in bg-white",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-4 border-b border-slate-50",children:[r.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-emerald-100 shadow-sm shrink-0",children:r.jsx("img",{src:O,alt:K.author,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Autor da Publicao"}),r.jsx("p",{className:"text-sm font-bold text-slate-700 leading-none",children:K.author})]})]}),r.jsx("div",{className:"max-w-none prose prose-slate",children:K.blocks.map(oe=>j(oe))}),r.jsx("div",{className:"mt-10 pt-6 border-t border-slate-100 flex justify-center",children:r.jsxs("button",{onClick:()=>{var oe;q(null),window.scrollTo({top:((oe=document.getElementById(`news-${K.id}`))==null?void 0:oe.offsetTop)||0,behavior:"smooth"})},className:"group flex flex-col items-center gap-2 text-slate-400 hover:text-emerald-600 transition-all",children:[r.jsx(CN,{size:32,className:"group-hover:scale-110 transition-transform"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Fechar Visualizao"})]})})]}),r.jsx("div",{id:`news-${K.id}`})]},K.id)}):r.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-200 border-dashed text-slate-400",children:[r.jsx(Vu,{size:48,className:"mx-auto mb-4 opacity-20"}),r.jsx("p",{children:"Nenhuma notcia publicada recentemente."})]})})]}),se&&r.jsxs("div",{className:"space-y-6",children:[(e==null?void 0:e.dashboardShowRooms)&&r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(ns,{size:20,className:"text-indigo-600"})," Status das Salas"]}),r.jsx(wn,{to:"/meeting-rooms",className:"text-xs text-indigo-600 hover:underline",children:"Ver agenda"})]}),r.jsx("div",{className:"space-y-4",children:m.length>0?m.map(K=>{const{isOccupied:ne,isClosed:J,schedule:O}=je(K),Z=W.has(K.id),oe=y.find(ee=>ee.id===K.unitId);return r.jsxs("div",{className:"border border-slate-100 rounded-xl p-3 bg-slate-50/50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2 cursor-pointer select-none",onClick:()=>R(K.id),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ss,{size:14,className:"text-slate-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-bold text-slate-700 block leading-tight",children:K.name}),r.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:(oe==null?void 0:oe.name)||"SEDE"})]}),J?r.jsx("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border bg-slate-100 text-slate-500 border-slate-200",children:"Fechado"}):r.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border ${ne?"bg-red-50 text-red-600 border-red-100":"bg-emerald-50 text-emerald-600 border-emerald-100"}`,children:ne?"Ocupada":"Livre"})]}),r.jsx("div",{className:"text-slate-400 hover:text-slate-600 transition-colors",children:Z?r.jsx(Lu,{size:16}):r.jsx(Pu,{size:16})})]}),Z&&r.jsxs("div",{className:"mt-3 animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Agenda Hoje:"}),r.jsxs("span",{className:"text-[9px] font-bold text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:[K.startTime||"08:00"," - ",K.endTime||"18:00"]})]}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:rU.map(ee=>{const Ne=O.find(_e=>_e.time===ee),Y=!!Ne,[pe,Se]=ee.split(":").map(Number),De=new Date,ut=ee>=(K.startTime||"08:00")&&ee<(K.endTime||"18:00"),st=De.getHours()>pe||De.getHours()===pe&&De.getMinutes()>=Se+30;if(Y){const _e=Ne.participants||[];return r.jsxs("div",{className:`flex flex-col border rounded-xl p-2.5 ${st?"bg-slate-100 border-slate-200 opacity-60 grayscale-[50%]":"bg-red-50 border-red-100 shadow-sm"}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded ${st?"bg-slate-200 text-slate-500":"bg-red-100 text-red-600"}`,children:ee}),r.jsxs("div",{className:"flex items-center gap-1 text-[9px] font-bold text-slate-500 truncate",children:[r.jsx(Ji,{size:10})," ",Ne.userName]})]}),r.jsx("p",{className:"text-[10px] font-bold text-slate-800 line-clamp-1",children:Ne.subject}),_e.length>0&&r.jsxs("p",{className:"text-[8px] text-slate-400 mt-1 italic",children:["+",_e.length," convidados"]})]},ee)}return r.jsxs("div",{className:`flex items-center justify-between border rounded-xl p-2 px-3 ${st||J||!ut?"bg-slate-100 border-slate-200 opacity-50":"bg-emerald-50 border-emerald-100"}`,children:[r.jsx("span",{className:"text-[9px] font-bold text-slate-400",children:ee}),r.jsx("span",{className:"text-[8px] uppercase font-bold text-slate-400",children:J||!ut?"Fechado":st?"Encerrado":"Livre"})]},ee)})}),r.jsx(wn,{to:"/meeting-rooms",state:{selectedRoomId:K.id},className:"mt-4 w-full py-2 bg-emerald-600 text-white rounded-xl text-xs font-bold flex items-center justify-center gap-2 hover:bg-emerald-700 transition-all shadow-md shadow-emerald-100",children:"Reservar nesta sala"})]})]},K.id)}):r.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"Nenhuma sala cadastrada."})})]}),(e==null?void 0:e.dashboardShowBirthdays)&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50 flex items-center justify-between",children:[r.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(q0,{size:20,className:"text-pink-500"})," Aniversariantes"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:C,className:"p-1 hover:bg-white rounded-lg transition-colors text-slate-400 hover:text-emerald-600",children:r.jsx(H0,{size:18})}),r.jsx("span",{className:"text-[10px] font-bold text-emerald-700 uppercase min-w-[70px] text-center",children:L[H]}),r.jsx("button",{onClick:A,className:"p-1 hover:bg-white rounded-lg transition-colors text-slate-400 hover:text-emerald-600",children:r.jsx($l,{size:18})})]})]}),r.jsxs("div",{className:"p-4 space-y-4 max-h-[400px] overflow-y-auto custom-scrollbar",children:[B.todaysBirthdays.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest flex items-center gap-1.5 mb-3",children:[r.jsx(IN,{size:14,className:"animate-bounce"}),"  hoje!"]}),B.todaysBirthdays.map(K=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-pink-50 to-orange-50 rounded-xl border border-pink-100 relative group overflow-hidden",children:[r.jsx("img",{src:K.avatar,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:K.name}),r.jsx("p",{className:"text-[10px] text-slate-500 truncate uppercase",children:K.department})]}),r.jsx("div",{className:"text-xl",children:""})]},K.id))]}),r.jsxs("div",{className:"space-y-4",children:[B.isCurrentMonth&&B.pastBirthdays.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest pt-2",children:"Aconteceu este ms"}),B.pastBirthdays.map(K=>r.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 transition-all rounded-xl",children:[r.jsx("img",{src:K.avatar,className:"w-8 h-8 rounded-full border border-slate-100 object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-bold text-slate-700 truncate",children:K.name}),r.jsx("p",{className:"text-[9px] text-slate-400 truncate uppercase",children:K.department})]}),r.jsxs("div",{className:"text-[10px] font-black text-slate-400 bg-slate-50 px-2 py-0.5 rounded-lg border border-slate-200",children:["DIA ",K.birthday.split("-")[2]]})]},K.id))]}),(B.upcomingBirthdays.length>0||!B.isCurrentMonth&&B.upcomingBirthdays.length>0)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-[9px] font-bold text-emerald-600 uppercase tracking-widest pt-2",children:"Prximos do ms"}),B.upcomingBirthdays.map(K=>r.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-xl transition-colors",children:[r.jsx("img",{src:K.avatar,className:"w-8 h-8 rounded-full border border-slate-100 object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-xs font-bold text-slate-700 truncate",children:K.name}),r.jsx("p",{className:"text-[9px] text-slate-400 truncate uppercase",children:K.department})]}),r.jsxs("div",{className:"text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-lg border border-emerald-100",children:["DIA ",K.birthday.split("-")[2]]})]},K.id))]}),B.todaysBirthdays.length===0&&B.pastBirthdays.length===0&&B.upcomingBirthdays.length===0&&r.jsxs("div",{className:"text-center py-8 text-slate-300",children:[r.jsx(tj,{size:32,className:"mx-auto mb-2 opacity-20"}),r.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Sem registros"})]})]})]})]})]})]})]})},lU=({size:t=18,className:e=""})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[r.jsx("path",{d:"M3 21l1.65-3.8a9 9 0 1 1 3.4 2.9L3 21"}),r.jsx("path",{d:"M9 10a.5.5 0 0 0 1 0V9a.5.5 0 0 0-1 0v1a5 5 0 0 0 5 5h1a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1"})]}),cU=t=>{if(!t)return"";const e=["de","do","da","dos","das","e","em","com","para"],n=["i","ii","iii","iv","v","vi","vii","viii","ix","x"],s=["ti","rh","sesmt","dp","it","ceo","cfo","coo","cto","adm","qhse","comex"];return t.toLowerCase().split(" ").filter(a=>a.length>0).map((a,l)=>l>0&&e.includes(a)?a:n.includes(a)||s.includes(a)?a.toUpperCase():a.charAt(0).toUpperCase()+a.slice(1)).join(" ")},uU=({extension:t})=>{const[e,n]=I.useState(0),[s,a]=I.useState(!1),[l,u]=I.useState(!1),h=I.useRef(null),m=I.useRef(null),f=I.useRef(0),y=I.useRef(0),_=te=>{a(!0),f.current=te,u(!1)},w=te=>{if(!s||!h.current||!m.current||l)return;const L=h.current.offsetWidth,C=m.current.offsetWidth,A=L-C;let R=y.current+(te-f.current);R<0&&(R=0),R>A&&(R=A),n(R)},T=()=>{if(!s||!h.current||!m.current)return;const te=h.current.offsetWidth,L=m.current.offsetWidth,C=te-L,A=C*.9;e>=A?(u(!0),n(C),window.location.href=`tel:713879${t}`,setTimeout(()=>{u(!1),n(0),y.current=0},2e3)):(n(0),y.current=0),a(!1)},M=te=>{_(te.clientX),y.current=e},z=te=>{s&&w(te.clientX)},k=()=>{T()},q=()=>{s&&T()},H=te=>{_(te.touches[0].clientX),y.current=e},P=te=>{s&&w(te.touches[0].clientX)},W=()=>{T()};return r.jsxs("div",{ref:h,className:`relative h-12 rounded-full overflow-hidden select-none transition-colors duration-300 ${l?"bg-green-500":"bg-slate-100 border border-slate-200"}`,onMouseMove:z,onMouseUp:k,onMouseLeave:q,onTouchMove:P,onTouchEnd:W,children:[r.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-sm font-medium transition-opacity duration-300 ${s?"opacity-50":"opacity-100"}`,children:l?r.jsxs("span",{className:"text-white font-bold flex items-center gap-2",children:[r.jsx(RN,{size:16})," Ligando..."]}):r.jsxs("span",{className:"text-slate-500 flex items-center gap-2 pl-4",children:["Ramal ",r.jsx("span",{className:"text-slate-800 font-bold",children:t})," ",r.jsx($l,{size:14,className:"opacity-50"})]})}),r.jsx("div",{ref:m,style:{transform:`translateX(${e}px)`,touchAction:"none"},className:`absolute top-1 bottom-1 w-10 h-10 rounded-full flex items-center justify-center shadow-md cursor-grab active:cursor-grabbing z-10 transition-colors duration-200 ${l?"bg-white text-green-600":"bg-emerald-600 text-white left-1"}`,onMouseDown:M,onTouchStart:H,children:r.jsx(Lo,{size:18,className:l?"animate-pulse":""})})]})},dU=()=>{const{currentUser:t,globalSettings:e}=Kn(),n=Ti(),s=qa(),[a,l]=I.useState([]),[u,h]=I.useState([]),[m,f]=I.useState([]),[y,_]=I.useState(!0),[w,T]=I.useState(""),[M,z]=I.useState("All"),[k,q]=I.useState("All"),[H,P]=I.useState(null),[W,te]=I.useState(!1),[L,C]=I.useState(""),[A,R]=I.useState([]),U=I.useRef(null);I.useEffect(()=>{(async()=>{_(!0);try{const[se,K,ne]=await Promise.all([Jr(),qo(),$a()]);l(se),h(K),f(ne)}catch(se){console.error("Erro ao carregar diretrio",se)}finally{_(!1)}})()},[]),I.useEffect(()=>{if(a.length>0&&n.state&&n.state.openChatWith){const j=n.state.openChatWith,se=a.find(K=>K.id===j);se&&(F(se),s(n.pathname,{replace:!0,state:{}}))}},[a,n.state,s,n.pathname]),I.useEffect(()=>{if(!H||!t)return;const j=()=>{yV(t.id,H.id)};j();const se=Nn(Ye(Me,"messages"),Gn("participants","array-contains",t.id),Fo("timestamp","asc")),K=fs(se,ne=>{const O=ne.docs.map(Z=>({id:Z.id,...Z.data()})).filter(Z=>Z.senderId===t.id&&Z.receiverId===H.id||Z.senderId===H.id&&Z.receiverId===t.id);R(O),W||j()});return()=>K()},[H,t,W]),I.useEffect(()=>{var j;(j=U.current)==null||j.scrollIntoView({behavior:"smooth"})},[A,H,W]);const B=a.filter(j=>{const se=j.name.toLowerCase().includes(w.toLowerCase())||j.extension&&j.extension.includes(w)||j.role.toLowerCase().includes(w.toLowerCase()),K=M==="All"||j.department===M,ne=k==="All"||j.unit&&j.unit===k;return se&&K&&ne}),$=j=>j.replace(/\D/g,""),F=j=>{if(j.id===(t==null?void 0:t.id)){alert("Voc no pode conversar consigo mesmo.");return}P(j),te(!1)},je=async j=>{if(j==null||j.preventDefault(),!L.trim()||!H||!t)return;const se=L;C("");try{await xV(t.id,H.id,se,t.name)}catch(K){console.error("Failed to send message",K),alert("Erro ao enviar mensagem.")}},ze=async j=>{if(confirm("Deseja apagar esta mensagem para todos?"))try{await vV(j)}catch{alert("Erro ao apagar mensagem.")}};return y?r.jsxs("div",{className:"flex justify-center p-12 text-slate-500",children:[r.jsx(Je,{className:"animate-spin mr-2"})," Carregando ramais..."]}):r.jsxs("div",{className:"space-y-6 relative min-h-[calc(100vh-140px)]",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Diretrio de Pessoas"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Encontre contatos e ramais de todos os colaboradores"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[r.jsx(Va,{className:"absolute left-3 top-3 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Buscar por nome ou ramal...",value:w,onChange:j=>T(j.target.value),className:"pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-full sm:w-64 text-slate-900"})]}),r.jsxs("select",{value:M,onChange:j=>z(j.target.value),className:"px-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 text-slate-900",children:[r.jsx("option",{value:"All",children:"Todos Departamentos"}),u.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]}),r.jsxs("select",{value:k,onChange:j=>q(j.target.value),className:"px-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 text-slate-900",children:[r.jsx("option",{value:"All",children:"Todas Unidades"}),m.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[B.map(j=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 flex flex-col items-center text-center transition-all hover:shadow-lg hover:-translate-y-1 group relative",children:[r.jsxs("div",{className:"w-24 h-24 mb-4 relative",children:[r.jsx("img",{src:j.avatar,alt:j.name,className:"w-full h-full rounded-full object-cover border-4 border-slate-50 group-hover:border-emerald-50 transition-colors"}),r.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-emerald-500 rounded-full border-2 border-white",title:"Online"})]}),r.jsx("h3",{className:"font-bold text-lg text-slate-900",children:j.name}),(e==null?void 0:e.showRoleInternal)&&j.showRole!==!1&&r.jsx("p",{className:"text-emerald-600 text-sm font-medium mb-1",children:cU(j.role)}),r.jsxs("div",{className:"flex flex-col items-center gap-1 mb-4",children:[r.jsxs("p",{className:"text-slate-400 text-xs flex items-center gap-1 bg-slate-50 px-2 py-0.5 rounded",children:[r.jsx(sc,{size:12})," ",j.department]}),j.unit&&r.jsxs("p",{className:"text-slate-400 text-[10px] flex items-center gap-1",children:[r.jsx(ss,{size:10})," ",j.unit]})]}),r.jsxs("div",{className:"w-full space-y-3 mt-auto",children:[j.extension?r.jsx(uU,{extension:j.extension}):r.jsx("div",{className:"h-12 flex items-center justify-center bg-slate-50 rounded-lg border border-dashed border-slate-200 text-slate-400 text-xs uppercase font-medium",children:"Sem Ramal"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>F(j),className:"flex-1 flex items-center justify-center gap-2 py-2 bg-emerald-600 text-white rounded-lg text-sm hover:bg-emerald-700 transition-colors shadow-sm shadow-emerald-200",children:[r.jsx(mf,{size:16})," Chat"]}),j.whatsapp&&r.jsx("a",{href:`https://wa.me/${$(j.whatsapp)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center p-2 border border-green-200 bg-green-50 rounded-lg text-green-600 hover:bg-green-100 transition-colors",title:"WhatsApp",children:r.jsx(lU,{size:18})}),r.jsx("a",{href:`mailto:${j.email}`,className:"flex items-center justify-center p-2 border border-slate-200 rounded-lg text-slate-400 hover:bg-slate-50 hover:text-emerald-600 transition-colors",title:"Enviar E-mail",children:r.jsx(Jl,{size:18})})]})]})]},j.id)),B.length===0&&r.jsx("div",{className:"col-span-full py-12 text-center text-slate-500",children:"Nenhum colaborador encontrado com os filtros atuais."})]}),H&&r.jsxs("div",{className:`fixed bottom-0 right-4 w-96 bg-white rounded-t-xl shadow-2xl border border-slate-200 z-50 flex flex-col transition-all duration-300 ${W?"h-14":"h-[500px]"}`,children:[r.jsxs("div",{className:"bg-emerald-700 text-white p-3 rounded-t-xl flex items-center justify-between cursor-pointer",onClick:()=>te(!W),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:H.avatar,alt:"",className:"w-9 h-9 rounded-full border border-white/30"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-400 rounded-full border border-emerald-900"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold leading-tight",children:H.name}),r.jsx("p",{className:"text-[10px] text-emerald-100 leading-tight opacity-80",children:H.role})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{className:"p-1 hover:bg-emerald-600 rounded",children:r.jsx(yD,{size:16})}),r.jsx("button",{onClick:j=>{j.stopPropagation(),P(null)},className:"p-1 hover:bg-emerald-600 rounded",children:r.jsx(Pn,{size:16})})]})]}),!W&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 bg-[#e5ddd5] p-4 overflow-y-auto custom-scrollbar flex flex-col gap-2 relative",children:[r.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png')] pointer-events-none"}),r.jsxs("div",{className:"text-center text-[10px] bg-white/50 self-center rounded-full px-3 py-1 text-slate-500 my-2 shadow-sm z-10 backdrop-blur-sm",children:["Incio da conversa com ",H.name]}),A.length===0&&r.jsx("p",{className:"text-center text-xs text-slate-400 italic mt-4 z-10",children:"Nenhuma mensagem ainda."}),A.map(j=>{const se=j.senderId===(t==null?void 0:t.id);return r.jsxs("div",{className:`relative max-w-[80%] p-2 px-3 rounded-lg text-sm shadow-sm group z-10 ${se?"bg-[#dcf8c6] self-end rounded-tr-none":"bg-white self-start rounded-tl-none"}`,children:[se&&!j.deleted&&r.jsx("button",{onClick:()=>ze(j.id),className:"absolute -top-2 -left-2 bg-white text-red-500 rounded-full p-1 shadow-md opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-50",title:"Apagar mensagem",children:r.jsx(Bt,{size:12})}),j.deleted?r.jsx("div",{className:"flex items-center gap-1 text-slate-400 italic text-xs py-1",children:r.jsx("span",{className:"block",children:" Mensagem apagada"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-slate-800 leading-snug whitespace-pre-wrap",children:j.text}),r.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1 select-none",children:[r.jsx("span",{className:"text-[9px] text-slate-500",children:new Date(j.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),se&&r.jsx("span",{title:j.read?"Lida":"Enviada",children:j.read?r.jsx(aj,{size:14,className:"text-blue-500"}):r.jsx(oj,{size:14,className:"text-slate-400"})})]})]})]},j.id)}),r.jsx("div",{ref:U})]}),r.jsxs("form",{onSubmit:je,className:"p-3 bg-[#f0f0f0] border-t border-slate-200 flex gap-2 z-20",children:[r.jsx("input",{type:"text",value:L,onChange:j=>C(j.target.value),placeholder:"Digite uma mensagem...",className:"flex-1 bg-white border border-slate-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 text-slate-900"}),r.jsx("button",{type:"submit",disabled:!L.trim(),className:"p-2.5 bg-emerald-600 text-white rounded-full hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:r.jsx(Jf,{size:18})})]})]})]})]})},hU=()=>{const{currentUser:t,isMaster:e}=Kn(),n=qa(),[s,a]=I.useState([]),[l,u]=I.useState([]),[h,m]=I.useState(!0),[f,y]=I.useState("ALL"),[_,w]=I.useState(!1),[T,M]=I.useState("create"),[z,k]=I.useState(!1),[q,H]=I.useState(null),[P,W]=I.useState({title:"",description:"",assigneeId:"",dueDate:"",status:Lt.TODO});I.useEffect(()=>{t&&te()},[t]);const te=async()=>{if(t){m(!0);try{const[J,O]=await Promise.all([w2(),Jr()]);a(J),u(O)}catch(J){console.error("Erro ao carregar dados",J)}finally{m(!1)}}},L=J=>l.find(O=>O.id===J),C=J=>l.find(O=>O.id===J),A=J=>l.find(O=>O.id===J),R=J=>{var O,Z;return!!(J.signatureRequestId||(O=J.title)!=null&&O.startsWith("Assinatura:")||J.creatorDepartment==="TI"&&((Z=J.title)!=null&&Z.includes("Assinatura")))},U=()=>{M("create"),W({title:"",description:"",assigneeId:"",dueDate:"",status:Lt.TODO}),w(!0)},B=J=>{M("view"),W({...J}),w(!0)},$=()=>{M("edit")},F=async(J,O,Z)=>{Z&&Z.stopPropagation();const oe=s.find(Ne=>Ne.id===J);if(oe&&R(oe)&&O===Lt.DONE){alert("Tarefas de assinatura devem ser processadas e finalizadas atravs do menu de Assinaturas no Painel Admin para garantir a gerao da imagem.");return}const ee={status:O};O===Lt.DONE?(ee.completedAt=new Date().toISOString(),ee.completedBy=t==null?void 0:t.id):(ee.completedAt=null,ee.completedBy=null),a(Ne=>Ne.map(Y=>Y.id===J?{...Y,...ee}:Y)),_&&P.id===J&&W(Ne=>({...Ne,...ee}));try{await Sw(J,ee)}catch(Ne){console.error("Erro ao atualizar status",Ne),te()}},je=async()=>{if(!P.title||!P.dueDate){alert("Por favor, preencha o ttulo e a data.");return}if(t){k(!0);try{T==="create"?await BV({title:P.title,description:P.description||"",assigneeId:P.assigneeId||"",dueDate:P.dueDate,status:Lt.TODO,creatorId:t.id,creatorDepartment:t.department}):T==="edit"&&P.id&&await Sw(P.id,{title:P.title,description:P.description,assigneeId:P.assigneeId,dueDate:P.dueDate}),await te(),w(!1)}catch{alert("Erro ao salvar tarefa. Verifique sua conexo.")}finally{k(!1)}}},ze=()=>{if(!P.id)return;const J=P.creatorId===(t==null?void 0:t.id);e||J?H(P):alert("Voc no tem permisso para excluir esta tarefa.")},j=async()=>{if(q!=null&&q.id){k(!0);try{await qV(q.id),a(J=>J.filter(O=>O.id!==q.id)),H(null),w(!1)}catch{alert("Erro ao excluir tarefa")}finally{k(!1)}}},se={[Lt.TODO]:"bg-slate-100 text-slate-600 border-slate-200",[Lt.IN_PROGRESS]:"bg-amber-100 text-amber-700 border-amber-200",[Lt.DONE]:"bg-emerald-100 text-emerald-700 border-emerald-200"},ne=s.filter(J=>{if(!t)return!1;const O=J.creatorId===t.id,Z=J.assigneeId===t.id,oe=J.creatorDepartment===t.department;return O||Z||oe||e}).filter(J=>f==="ALL"||J.status===f);return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:48})}):r.jsxs("div",{className:"space-y-6 relative",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Tarefas"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Organize demandas pessoais e do seu departamento."})]}),r.jsxs("button",{onClick:U,className:"bg-emerald-600 text-white px-4 py-3 md:py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 w-full md:w-auto font-medium",children:[r.jsx(Vn,{size:18})," ",r.jsx("span",{className:"md:inline",children:"Nova Tarefa"})]})]}),r.jsx("div",{className:"flex gap-2 border-b border-slate-200 pb-1 overflow-x-auto custom-scrollbar -mx-4 px-4 md:mx-0 md:px-0",children:["ALL",Lt.TODO,Lt.IN_PROGRESS,Lt.DONE].map(J=>r.jsx("button",{onClick:()=>y(J),className:`whitespace-nowrap px-4 py-2 text-sm font-medium rounded-t-lg transition-colors flex-shrink-0 ${f===J?"text-emerald-600 border-b-2 border-emerald-600 bg-emerald-50/50":"text-slate-500 hover:text-slate-800"}`,children:J==="ALL"?"Todas":J==="TODO"?"A Fazer":J==="IN_PROGRESS"?"Em Andamento":"Concludo"},J))}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse hidden md:table min-w-[800px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold tracking-wider",children:[r.jsx("th",{className:"px-6 py-4",children:"Tarefa"}),r.jsx("th",{className:"px-6 py-4",children:"Origem"}),r.jsx("th",{className:"px-6 py-4",children:"Responsvel"}),r.jsx("th",{className:"px-6 py-4",children:"Prazo"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Status / Ao"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:ne.map(J=>{const O=L(J.assigneeId),Z=J.creatorId===(t==null?void 0:t.id),oe=C(J.creatorId),ee=R(J),Ne=A(J.completedBy),Y=J.status===Lt.DONE&&!Z&&!e||ee;return r.jsxs("tr",{onClick:()=>B(J),className:"hover:bg-slate-50 transition-colors cursor-pointer group",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"font-semibold text-slate-800 group-hover:text-emerald-600 transition-colors",children:J.title}),r.jsx("p",{className:"text-xs text-slate-500 truncate max-w-xs",children:J.description})]}),r.jsx("td",{className:"px-6 py-4",children:Z?r.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded border border-emerald-100 flex items-center gap-1 w-fit",children:[r.jsx(z_,{size:10})," Eu"]}):oe?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:oe.avatar,alt:"",className:"w-6 h-6 rounded-full object-cover border border-slate-100"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-bold text-slate-700 leading-none",children:oe.name.split(" ")[0]}),r.jsx("span",{className:"text-[9px] text-slate-400 leading-none mt-0.5",children:oe.department})]})]}):r.jsx("span",{className:"text-xs text-slate-400 italic",children:"Desconhecido"})}),r.jsx("td",{className:"px-6 py-4",children:O?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:O.avatar,alt:O.name,className:"w-6 h-6 rounded-full object-cover"}),r.jsx("p",{className:"text-sm text-slate-700 leading-none",children:O.name.split(" ")[0]})]}):r.jsx("span",{className:"text-sm text-slate-400 italic",children:"No atribudo"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-600",children:[r.jsx(ns,{size:14}),J.dueDate?new Date(J.dueDate).toLocaleDateString("pt-BR"):"-"]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[ee&&J.status!==Lt.DONE?r.jsxs("button",{onClick:pe=>{pe.stopPropagation(),n("/admin-signatures")},className:"bg-emerald-600 text-white px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1.5 hover:bg-emerald-700 transition-colors shadow-sm",children:[r.jsx(xi,{size:12})," Processar Agora"]}):r.jsxs("div",{className:"relative inline-block",children:[r.jsxs("select",{value:J.status,disabled:Y,onClick:pe=>pe.stopPropagation(),onChange:pe=>F(J.id,pe.target.value,pe),className:`text-xs font-bold px-3 py-1 rounded-full border appearance-none focus:outline-none focus:ring-2 focus:ring-offset-1 ${se[J.status]} ${Y?"opacity-60 cursor-not-allowed pr-6":"cursor-pointer"}`,children:[r.jsx("option",{value:Lt.TODO,children:"A Fazer"}),r.jsx("option",{value:Lt.IN_PROGRESS,children:"Em Andamento"}),r.jsx("option",{value:Lt.DONE,children:"Concludo"})]}),Y&&r.jsx(Un,{size:10,className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none"})]}),J.status===Lt.DONE&&r.jsxs("span",{className:"text-[10px] text-emerald-600 flex items-center gap-1",children:[r.jsx(xs,{size:10})," ",Ne?`Por: ${Ne.name.split(" ")[0]}`:"Concludo"]})]})})]},J.id)})})]})}),r.jsx("div",{className:"md:hidden divide-y divide-slate-100",children:ne.map(J=>{const O=L(J.assigneeId),Z=J.creatorId===(t==null?void 0:t.id),oe=C(J.creatorId),ee=A(J.completedBy),Ne=R(J),Y=J.status===Lt.DONE&&!Z&&!e||Ne;return r.jsxs("div",{onClick:()=>B(J),className:"p-5 flex flex-col gap-4 cursor-pointer active:bg-slate-50",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-start mb-1 relative",children:r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:Z?r.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded border border-emerald-100 flex items-center gap-1 w-fit",children:[r.jsx(z_,{size:10})," Minha Tarefa"]}):oe?r.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 rounded-full pr-2 py-0.5 pl-0.5 border border-slate-100",children:[r.jsx("img",{src:oe.avatar,className:"w-5 h-5 rounded-full object-cover"}),r.jsxs("span",{className:"text-[10px] font-bold text-slate-600",children:["De: ",oe.name.split(" ")[0]]})]}):null}),r.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:J.title})]})}),r.jsx("p",{className:"text-sm text-slate-500 leading-relaxed line-clamp-2",children:J.description})]}),r.jsxs("div",{className:"flex flex-col gap-3 mt-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:O?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:O.avatar,alt:"",className:"w-6 h-6 rounded-full object-cover border border-white shadow-sm"}),r.jsx("span",{className:"text-xs text-slate-600",children:O.name.split(" ")[0]})]}):r.jsx("span",{className:"text-slate-400 italic text-xs",children:"Sem responsvel"})}),Ne&&J.status!==Lt.DONE?r.jsxs("button",{onClick:pe=>{pe.stopPropagation(),n("/admin-signatures")},className:"bg-emerald-600 text-white px-4 py-1.5 rounded-full text-xs font-bold flex items-center gap-1.5 shadow-md",children:[r.jsx(xi,{size:12})," Processar Agora"]}):r.jsxs("div",{className:`text-xs font-bold px-3 py-1 rounded-full border flex items-center gap-1 ${se[J.status]} ${Y?"opacity-70":""}`,children:[J.status==="TODO"?"A Fazer":J.status==="IN_PROGRESS"?"Em Andamento":"Concludo",Y&&r.jsx(Un,{size:10})]})]}),J.status===Lt.DONE&&r.jsxs("div",{className:"text-[10px] text-emerald-600 bg-emerald-50 px-2 py-1 rounded self-end flex items-center gap-1 border border-emerald-100",children:[r.jsx(xs,{size:10})," ",ee?`Concludo por: ${ee.name.split(" ")[0]}`:"Concludo"]})]})]},J.id)})}),ne.length===0&&r.jsxs("div",{className:"p-12 text-center text-slate-500 bg-slate-50/50",children:[r.jsx(Ao,{size:48,className:"mx-auto mb-4 text-slate-300"}),r.jsx("p",{children:"Nenhuma tarefa encontrada."})]})]}),_&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50 shrink-0",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[T==="create"&&r.jsxs(r.Fragment,{children:[r.jsx(Vn,{className:"text-emerald-600"})," Nova Tarefa"]}),T==="view"&&r.jsxs(r.Fragment,{children:[r.jsx(Ao,{className:"text-emerald-600"})," Detalhes da Tarefa"]}),T==="edit"&&r.jsxs(r.Fragment,{children:[r.jsx(q_,{className:"text-emerald-600"})," Editar Tarefa"]})]}),r.jsx("button",{onClick:()=>w(!1),className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-200 rounded-full transition-colors",children:r.jsx(Pn,{size:24})})]}),r.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto custom-scrollbar flex-1",children:[T==="view"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 leading-tight",children:P.title}),r.jsx("div",{className:"shrink-0 ml-4 relative",children:(()=>{const J=R(P),O=P.status===Lt.DONE&&P.creatorId!==(t==null?void 0:t.id)&&!e||J;return J&&P.status!==Lt.DONE?r.jsxs("button",{onClick:()=>n("/admin-signatures"),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-emerald-700 transition-all shadow-md active:scale-95",children:[r.jsx(xi,{size:14})," Processar Agora"]}):r.jsxs(r.Fragment,{children:[r.jsxs("select",{value:P.status,disabled:O,onChange:Z=>F(P.id,Z.target.value),className:`text-xs font-bold px-3 py-1.5 rounded-full border appearance-none focus:outline-none focus:ring-2 focus:ring-offset-1 ${se[P.status||Lt.TODO]} ${O?"opacity-60 cursor-not-allowed pr-6":"cursor-pointer"}`,children:[r.jsx("option",{value:Lt.TODO,children:"A Fazer"}),r.jsx("option",{value:Lt.IN_PROGRESS,children:"Em Andamento"}),r.jsx("option",{value:Lt.DONE,children:"Concludo"})]}),O&&r.jsx(Un,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 pointer-events-none"})]})})()})]}),r.jsx("div",{className:"mt-2 flex items-center gap-2 text-sm text-slate-500",children:r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ns,{size:14})," Prazo: ",P.dueDate?new Date(P.dueDate).toLocaleDateString("pt-BR"):"Sem prazo"]})})]}),P.status===Lt.DONE&&P.completedAt&&r.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-xl p-3 flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 p-2 rounded-full text-emerald-600",children:r.jsx(xs,{size:20})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs font-bold text-emerald-800 uppercase",children:"Tarefa Concluda"}),r.jsxs("p",{className:"text-xs text-emerald-700",children:["Em: ",r.jsx("strong",{children:new Date(P.completedAt).toLocaleString("pt-BR")})]}),P.completedBy&&(()=>{const J=A(P.completedBy);return J?r.jsxs("p",{className:"text-xs text-emerald-700 mt-0.5 flex items-center gap-1",children:["Por: ",r.jsx("img",{src:J.avatar,className:"w-4 h-4 rounded-full inline-block"})," ",r.jsx("strong",{children:J.name})]}):null})()]})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[r.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Descrio"}),r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap leading-relaxed text-sm",children:P.description||r.jsx("span",{className:"italic text-slate-400",children:"Sem descrio."})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"border border-slate-100 rounded-xl p-3",children:[r.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"Responsvel"}),(()=>{const J=L(P.assigneeId||"");return J?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:J.avatar,className:"w-8 h-8 rounded-full object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-slate-700 leading-none",children:J.name}),r.jsx("p",{className:"text-[10px] text-slate-500",children:J.department})]})]}):r.jsx("span",{className:"text-sm text-slate-400 italic",children:"No atribudo"})})()]}),r.jsxs("div",{className:"border border-slate-100 rounded-xl p-3",children:[r.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2",children:"Criado por"}),(()=>{const J=C(P.creatorId);return J?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:J.avatar,className:"w-8 h-8 rounded-full object-cover"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-slate-700 leading-none",children:J.name}),r.jsx("p",{className:"text-[10px] text-slate-500",children:J.department})]})]}):r.jsx("span",{className:"text-sm text-slate-400 italic",children:"Sistema"})})()]})]})]}),(T==="create"||T==="edit")&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ttulo da Tarefa"}),r.jsx("input",{type:"text",value:P.title,onChange:J=>W({...P,title:J.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900",placeholder:"Ex: Atualizar Relatrio...",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descrio"}),r.jsxs("div",{className:"relative",children:[r.jsx("textarea",{value:P.description,onChange:J=>W({...P,description:J.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 min-h-[120px] bg-white text-slate-900",placeholder:"Detalhes da tarefa..."}),r.jsx(PN,{className:"absolute top-3 right-3 text-slate-300 w-4 h-4 pointer-events-none"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Responsvel"}),r.jsx("button",{type:"button",onClick:()=>W({...P,assigneeId:t==null?void 0:t.id}),className:"text-xs text-emerald-600 font-medium hover:underline focus:outline-none",children:"Atribuir a mim"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:P.assigneeId,onChange:J=>W({...P,assigneeId:J.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 appearance-none bg-white text-slate-900",children:[r.jsx("option",{value:"",children:"Selecione..."}),l.map(J=>r.jsxs("option",{value:J.id,children:[J.name," (",J.department,")"]},J.id))]}),r.jsx(Ji,{className:"absolute top-1/2 -translate-y-1/2 right-3 text-slate-400 w-4 h-4 pointer-events-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prazo"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"date",value:P.dueDate,onChange:J=>W({...P,dueDate:J.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900"}),r.jsx(ns,{className:"absolute top-1/2 -translate-y-1/2 right-3 text-slate-400 w-4 h-4 pointer-events-none"})]})]})]})]})]}),r.jsxs("div",{className:"p-6 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 shrink-0",children:[T==="view"&&r.jsxs(r.Fragment,{children:[(P.creatorId===(t==null?void 0:t.id)||e)&&r.jsxs("button",{type:"button",onClick:ze,disabled:z,className:"px-4 py-2 rounded-lg font-medium text-sm flex items-center gap-2 mr-auto transition-colors text-red-600 hover:bg-red-50",title:"Excluir tarefa permanentemente",children:[r.jsx(Bt,{size:16})," Excluir"]}),P.creatorId===(t==null?void 0:t.id)&&!R(P)&&r.jsxs("button",{onClick:$,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 rounded-lg font-medium text-sm flex items-center gap-2 shadow-sm",children:[r.jsx(q_,{size:16})," Editar"]}),r.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors text-sm shadow-md shadow-emerald-200",children:"Fechar"})]}),(T==="create"||T==="edit")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{T==="edit"?M("view"):w(!1)},className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded-lg font-medium text-sm",disabled:z,children:"Cancelar"}),r.jsxs("button",{onClick:je,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 flex items-center gap-2 disabled:opacity-50 text-sm shadow-md shadow-emerald-200",disabled:z,children:[z?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Fs,{size:16}),T==="create"?"Criar Tarefa":"Salvar Alteraes"]})]})]})]})}),q&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[80] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-14 h-14 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:28})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Excluir Tarefa?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Tem certeza que deseja excluir ",r.jsxs("strong",{children:['"',q.title,'"']}),"?",r.jsx("br",{}),"Esta ao no pode ser desfeita."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:()=>H(null),className:"flex-1 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm transition-colors",disabled:z,children:"Cancelar"}),r.jsx("button",{type:"button",onClick:j,className:"flex-1 py-2.5 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors flex items-center justify-center gap-2",disabled:z,children:z?r.jsx(Je,{size:16,className:"animate-spin"}):"Sim, excluir"})]})]})})})]})};var fU={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mU,pU;function gU(){return{geminiUrl:mU,vertexUrl:pU}}function xU(t,e,n,s){var a,l;if(!(t!=null&&t.baseUrl)){const u=gU();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:n:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ka{}function Pe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[h])){const m=t[h];if(Array.isArray(n))for(let f=0;f<m.length;f++){const y=m[f];g(y,e.slice(l+1),n[f])}else for(const f of m)g(f,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in t||(t[h]=[{}]);const m=t[h];g(m[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const s=e[e.length-1],a=t[s];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(h=>p(h,e.slice(s+1),n)):n}else return n}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function yU(t,e){for(const[n,s]of Object.entries(e)){const a=n.split("."),l=s.split("."),u=new Set;let h=-1;for(let m=0;m<a.length;m++)if(a[m]==="*"){h=m;break}if(h!==-1&&l.length>h)for(let m=h;m<l.length;m++){const f=l[m];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}b0(t,a,l,0,u)}}function b0(t,e,n,s,a){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=t;if(u in h&&Array.isArray(h[u]))for(const m of h[u])b0(m,e,n,s+1,a)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,h=Object.keys(u).filter(f=>!f.startsWith("_")&&!a.has(f)),m={};for(const f of h)m[f]=u[f];for(const[f,y]of Object.entries(m)){const _=[];for(const w of n.slice(s))w==="*"?_.push(f):_.push(w);g(u,_,y)}for(const f of h)delete u[f]}}else{const u=t;l in u&&b0(u[l],e,n,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kx(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vU(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const s=p(t,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function bU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],wU(u)),e}function _U(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["response"]);return u!=null&&g(e,["response"],EU(u)),e}function wU(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>NU(u))),g(e,["generatedVideos"],l)}const s=p(t,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function EU(t){const e={},n=p(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>TU(u))),g(e,["generatedVideos"],l)}const s=p(t,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function NU(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],jU(n)),e}function TU(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],DU(n)),e}function SU(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function CU(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function AU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["response"]);return u!=null&&g(e,["response"],IU(u)),e}function IU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["parent"]);s!=null&&g(e,["parent"],s);const a=p(t,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function N2(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["response"]);return u!=null&&g(e,["response"],RU(u)),e}function RU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["parent"]);s!=null&&g(e,["parent"],s);const a=p(t,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function jU(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const s=p(t,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Kx(s));const a=p(t,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function DU(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const s=p(t,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Kx(s));const a=p(t,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cw||(Cw={}));var Aw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Aw||(Aw={}));var Iw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Iw||(Iw={}));var Dr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Dr||(Dr={}));var Rw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Rw||(Rw={}));var jw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jw||(jw={}));var Dw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Dw||(Dw={}));var kw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(kw||(kw={}));var Mw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Mw||(Mw={}));var Pw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Pw||(Pw={}));var Lw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Lw||(Lw={}));var Vw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Vw||(Vw={}));var Uw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Uw||(Uw={}));var Ow;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ow||(Ow={}));var zw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zw||(zw={}));var Fw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fw||(Fw={}));var Bw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Bw||(Bw={}));var qw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(qw||(qw={}));var Hw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Hw||(Hw={}));var Uf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Uf||(Uf={}));var Gw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gw||(Gw={}));var $w;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($w||($w={}));var Kw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Kw||(Kw={}));var _0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_0||(_0={}));var Jw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Jw||(Jw={}));var Yw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Yw||(Yw={}));var Ww;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ww||(Ww={}));var Xw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Xw||(Xw={}));var Qw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Qw||(Qw={}));var Zw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Zw||(Zw={}));var eE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(eE||(eE={}));var tE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(tE||(tE={}));var nE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(nE||(nE={}));var sE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(sE||(sE={}));var iE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(iE||(iE={}));var aE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aE||(aE={}));var rE;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rE||(rE={}));var oE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(oE||(oE={}));var lE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(lE||(lE={}));var cE;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(cE||(cE={}));var uE;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(uE||(uE={}));var dE;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(dE||(dE={}));var hE;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(hE||(hE={}));var fE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(fE||(fE={}));var mE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(mE||(mE={}));var pE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(pE||(pE={}));var gE;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(gE||(gE={}));var xE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(xE||(xE={}));var yE;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(yE||(yE={}));var vE;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vE||(vE={}));var bE;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(bE||(bE={}));var _E;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(_E||(_E={}));var wE;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wE||(wE={}));var EE;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(EE||(EE={}));var NE;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(NE||(NE={}));var Vl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Vl||(Vl={}));class w0{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class fu{get text(){var e,n,s,a,l,u,h,m;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",y=!1;const _=[];for(const w of(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[T,M]of Object.entries(w))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(M!==null||M!==void 0)&&_.push(T);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;y=!0,f+=w.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?f:void 0}get data(){var e,n,s,a,l,u,h,m;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const y=[];for(const _ of(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[w,T]of Object.entries(_))w!=="inlineData"&&(T!==null||T!==void 0)&&y.push(w);_.inlineData&&typeof _.inlineData.data=="string"&&(f+=atob(_.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,s,a,l,u,h,m;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,s,a,l,u,h,m,f;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,s,a,l,u,h,m,f;if(((a=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.output}}class TE{}class SE{}class kU{}class MU{}class PU{}class LU{}class CE{}class AE{}class IE{}class VU{}class Of{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Of;let a;const l=e;return n?a=_U(l):a=bU(l),Object.assign(s,a),s}}class RE{}class jE{}class DE{}class kE{}class UU{}class OU{}class zU{}class Jx{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Jx,l=AU(e);return Object.assign(s,l),s}}class FU{}class BU{}class qU{}class ME{}class HU{get text(){var e,n,s;let a="",l=!1;const u=[];for(const h of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[m,f]of Object.entries(h))m!=="text"&&m!=="thought"&&f!==null&&u.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,n,s;let a="";const l=[];for(const u of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,m]of Object.entries(u))h!=="inlineData"&&m!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class GU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Yx{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Yx,l=N2(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function T2(t,e){const n=Vt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function S2(t){return Array.isArray(t)?t.map(e=>zf(e)):[zf(t)]}function zf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function C2(t){const e=zf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function A2(t){const e=zf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function I2(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>PE(e)):[PE(t)]}function E0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function LE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function VE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function us(t){if(t==null)throw new Error("ContentUnion is required");return E0(t)?t:{role:"user",parts:I2(t)}}function Wx(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=us(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=us(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>us(n)):[us(e)]}function ai(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(LE(t)||VE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[us(t)]}const e=[],n=[],s=E0(t[0]);for(const a of t){const l=E0(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(LE(a)||VE(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return s||e.push({role:"user",parts:I2(n)}),e}function $U(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Dr).includes(n[0].toUpperCase())?n[0].toUpperCase():Dr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Dr).includes(s.toUpperCase())?s.toUpperCase():Dr.TYPE_UNSPECIFIED})}}function Hl(t){const e={},n=["items"],s=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&$U(t.type,e);for(const[u,h]of Object.entries(t))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Dr).includes(h.toUpperCase())?h.toUpperCase():Dr.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Hl(h);else if(s.includes(u)){const m=[];for(const f of h){if(f.type=="null"){e.nullable=!0;continue}m.push(Hl(f))}e[u]=m}else if(a.includes(u)){const m={};for(const[f,y]of Object.entries(h))m[f]=Hl(y);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=h}return e}function Xx(t){return Hl(t)}function Qx(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Zx(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function cc(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Hl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Hl(e.response));return t}function uc(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function KU(t,e,n,s=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function Ja(t,e){if(typeof e!="string")throw new Error("name must be a string");return KU(t,e,"cachedContents")}function R2(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Yr(t){return Kx(t)}function JU(t){return t!=null&&typeof t=="object"&&"name"in t}function YU(t){return t!=null&&typeof t=="object"&&"video"in t}function WU(t){return t!=null&&typeof t=="object"&&"uri"in t}function j2(t){var e;let n;if(JU(t)&&(n=t.name),!(WU(t)&&(n=t.uri,n===void 0))&&!(YU(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function D2(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function k2(t){for(const e of["models","tunedModels","publisherModels"])if(XU(t,e))return t[e];return[]}function XU(t,e){return t!==null&&typeof t=="object"&&e in t}function QU(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function ZU(t,e={}){const n=[],s=new Set;for(const a of t){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=QU(a,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function M2(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function eO(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function P2(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function dc(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function L2(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tO(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const s=p(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>PO(u))),g(e,["inlinedResponses"],l)}const a=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function nO(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const s=p(t,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=p(t,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function sO(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const s=p(t,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=p(t,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function lf(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=p(t,["metadata","state"]);a!=null&&g(e,["state"],L2(a));const l=p(t,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=p(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=p(t,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const m=p(t,["metadata","model"]);m!=null&&g(e,["model"],m);const f=p(t,["metadata","output"]);return f!=null&&g(e,["dest"],tO(P2(f))),e}function N0(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["displayName"]);s!=null&&g(e,["displayName"],s);const a=p(t,["state"]);a!=null&&g(e,["state"],L2(a));const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["createTime"]);u!=null&&g(e,["createTime"],u);const h=p(t,["startTime"]);h!=null&&g(e,["startTime"],h);const m=p(t,["endTime"]);m!=null&&g(e,["endTime"],m);const f=p(t,["updateTime"]);f!=null&&g(e,["updateTime"],f);const y=p(t,["model"]);y!=null&&g(e,["model"],y);const _=p(t,["inputConfig"]);_!=null&&g(e,["src"],iO(_));const w=p(t,["outputConfig"]);w!=null&&g(e,["dest"],nO(P2(w)));const T=p(t,["completionStats"]);return T!=null&&g(e,["completionStats"],T),e}function iO(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const s=p(t,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=p(t,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function aO(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=p(e,["fileName"]);s!=null&&g(n,["fileName"],s);const a=p(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>MO(t,u))),g(n,["requests","requests"],l)}return n}function rO(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const s=p(t,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=p(t,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function oO(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function lO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],dc(t,s)),n}function cO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],dc(t,s)),n}function uO(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const s=p(t,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],dO(s));const a=p(t,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=p(t,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=p(t,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const m=p(t,["index"]);m!=null&&g(e,["index"],m);const f=p(t,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const y=p(t,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(T=>T)),g(e,["safetyRatings"],w)}const _=p(t,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function dO(t){const e={},n=p(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function V2(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>BO(l))),g(e,["parts"],a)}const s=p(t,["role"]);return s!=null&&g(e,["role"],s),e}function hO(t,e){const n={},s=p(t,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function fO(t,e){const n={},s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(t,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],sO(eO(a))),n}function UE(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["src"]);a!=null&&g(n,["batch","inputConfig"],aO(t,M2(t,a)));const l=p(e,["config"]);return l!=null&&hO(l,n),n}function mO(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["model"],Vt(t,s));const a=p(e,["src"]);a!=null&&g(n,["inputConfig"],rO(M2(t,a)));const l=p(e,["config"]);return l!=null&&fO(l,n),n}function pO(t,e){const n={},s=p(t,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),n}function gO(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["src"]);a!=null&&g(n,["batch","inputConfig"],EO(t,a));const l=p(e,["config"]);return l!=null&&pO(l,n),n}function xO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],dc(t,s)),n}function yO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],dc(t,s)),n}function vO(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["name"]);s!=null&&g(e,["name"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);return l!=null&&g(e,["error"],l),e}function bO(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["name"]);s!=null&&g(e,["name"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);return l!=null&&g(e,["error"],l),e}function _O(t,e){const n={},s=p(e,["contents"]);if(s!=null){let l=Wx(t,s);Array.isArray(l)&&(l=l.map(u=>u)),g(n,["requests[]","request","content"],l)}const a=p(e,["config"]);return a!=null&&(g(n,["_self"],wO(a,n)),yU(n,{"requests[].*":"requests[].request.*"})),n}function wO(t,e){const n={},s=p(t,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=p(t,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=p(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function EO(t,e){const n={},s=p(e,["fileName"]);s!=null&&g(n,["file_name"],s);const a=p(e,["inlinedRequests"]);return a!=null&&g(n,["requests"],_O(t,a)),n}function NO(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function TO(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const s=p(t,["args"]);s!=null&&g(e,["args"],s);const a=p(t,["name"]);if(a!=null&&g(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SO(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const s=p(t,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CO(t,e,n){const s={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&g(n,["systemInstruction"],V2(us(a)));const l=p(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=p(e,["topP"]);u!=null&&g(s,["topP"],u);const h=p(e,["topK"]);h!=null&&g(s,["topK"],h);const m=p(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const f=p(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const y=p(e,["stopSequences"]);y!=null&&g(s,["stopSequences"],y);const _=p(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=p(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const T=p(e,["presencePenalty"]);T!=null&&g(s,["presencePenalty"],T);const M=p(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const z=p(e,["seed"]);z!=null&&g(s,["seed"],z);const k=p(e,["responseMimeType"]);k!=null&&g(s,["responseMimeType"],k);const q=p(e,["responseSchema"]);q!=null&&g(s,["responseSchema"],Xx(q));const H=p(e,["responseJsonSchema"]);if(H!=null&&g(s,["responseJsonSchema"],H),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=p(e,["safetySettings"]);if(n!==void 0&&P!=null){let F=P;Array.isArray(F)&&(F=F.map(je=>qO(je))),g(n,["safetySettings"],F)}const W=p(e,["tools"]);if(n!==void 0&&W!=null){let F=uc(W);Array.isArray(F)&&(F=F.map(je=>GO(cc(je)))),g(n,["tools"],F)}const te=p(e,["toolConfig"]);if(n!==void 0&&te!=null&&g(n,["toolConfig"],HO(te)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=p(e,["cachedContent"]);n!==void 0&&L!=null&&g(n,["cachedContent"],Ja(t,L));const C=p(e,["responseModalities"]);C!=null&&g(s,["responseModalities"],C);const A=p(e,["mediaResolution"]);A!=null&&g(s,["mediaResolution"],A);const R=p(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Qx(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=p(e,["thinkingConfig"]);U!=null&&g(s,["thinkingConfig"],U);const B=p(e,["imageConfig"]);B!=null&&g(s,["imageConfig"],kO(B));const $=p(e,["enableEnhancedCivicAnswers"]);return $!=null&&g(s,["enableEnhancedCivicAnswers"],$),s}function AO(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(f=>uO(f))),g(e,["candidates"],m)}const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const h=p(t,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function IO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],dc(t,s)),n}function RO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],dc(t,s)),n}function jO(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function DO(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function kO(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const s=p(t,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function MO(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["request","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let h=ai(a);Array.isArray(h)&&(h=h.map(m=>V2(m))),g(n,["request","contents"],h)}const l=p(e,["metadata"]);l!=null&&g(n,["metadata"],l);const u=p(e,["config"]);return u!=null&&g(n,["request","generationConfig"],CO(t,u,p(n,["request"],{}))),n}function PO(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],AO(n));const s=p(t,["error"]);return s!=null&&g(e,["error"],s),e}function LO(t,e){const n={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function VO(t,e){const n={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),n}function UO(t){const e={},n=p(t,["config"]);return n!=null&&LO(n,e),e}function OO(t){const e={},n=p(t,["config"]);return n!=null&&VO(n,e),e}function zO(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>lf(u))),g(e,["batchJobs"],l)}return e}function FO(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>N0(u))),g(e,["batchJobs"],l)}return e}function BO(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const s=p(t,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(t,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(t,["fileData"]);l!=null&&g(e,["fileData"],NO(l));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],TO(u));const h=p(t,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(t,["inlineData"]);m!=null&&g(e,["inlineData"],oO(m));const f=p(t,["text"]);f!=null&&g(e,["text"],f);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const _=p(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=p(t,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function qO(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=p(t,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function HO(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],SO(n));const s=p(t,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function GO(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=p(t,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],jO(h));const m=p(t,["googleSearch"]);m!=null&&g(e,["googleSearch"],DO(m));const f=p(t,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ba;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ba||(Ba={}));class Ho{constructor(e,n,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,a)}init(e,n,s){var a,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $O extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ho(Ba.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=UE(this.apiClient,e),s=n._url,a=Pe("{model}:batchGenerateContent",s),h=n.batch.inputConfig.requests,m=h.requests,f=[];for(const y of m){const _=Object.assign({},y);if(_.systemInstruction){const w=_.systemInstruction;delete _.systemInstruction;const T=_.request;T.systemInstruction=w,_.request=T}f.push(_)}return h.requests=f,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=mO(this.apiClient,e);return h=Pe("batchPredictionJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>N0(y))}else{const f=UE(this.apiClient,e);return h=Pe("{model}:batchGenerateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>lf(y))}}async createEmbeddingsInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gO(this.apiClient,e);return l=Pe("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>lf(m))}}async get(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=RO(this.apiClient,e);return h=Pe("batchPredictionJobs/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>N0(y))}else{const f=IO(this.apiClient,e);return h=Pe("batches/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>lf(y))}}async cancel(e){var n,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const m=cO(this.apiClient,e);u=Pe("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=lO(this.apiClient,e);u=Pe("batches/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=OO(e);return h=Pe("batchPredictionJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=FO(y),w=new ME;return Object.assign(w,_),w})}else{const f=UO(e);return h=Pe("batches",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=zO(y),w=new ME;return Object.assign(w,_),w})}}async delete(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=yO(this.apiClient,e);return h=Pe("batchPredictionJobs/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>bO(y))}else{const f=xO(this.apiClient,e);return h=Pe("batches/{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>vO(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KO(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function OE(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>g8(l))),g(e,["parts"],a)}const s=p(t,["role"]);return s!=null&&g(e,["role"],s),e}function JO(t,e){const n={},s=p(t,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(t,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=p(t,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let y=ai(u);Array.isArray(y)&&(y=y.map(_=>OE(_))),g(e,["contents"],y)}const h=p(t,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],OE(us(h)));const m=p(t,["tools"]);if(e!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(_=>y8(_))),g(e,["tools"],y)}const f=p(t,["toolConfig"]);if(e!==void 0&&f!=null&&g(e,["toolConfig"],x8(f)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function YO(t,e){const n={},s=p(t,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(t,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=p(t,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let _=ai(u);Array.isArray(_)&&(_=_.map(w=>w)),g(e,["contents"],_)}const h=p(t,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],us(h));const m=p(t,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(w=>v8(w))),g(e,["tools"],_)}const f=p(t,["toolConfig"]);e!==void 0&&f!=null&&g(e,["toolConfig"],f);const y=p(t,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),n}function WO(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["model"],T2(t,s));const a=p(e,["config"]);return a!=null&&JO(a,n),n}function XO(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["model"],T2(t,s));const a=p(e,["config"]);return a!=null&&YO(a,n),n}function QO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],Ja(t,s)),n}function ZO(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],Ja(t,s)),n}function e8(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function t8(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function n8(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function s8(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const s=p(t,["args"]);s!=null&&g(e,["args"],s);const a=p(t,["name"]);if(a!=null&&g(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i8(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const s=p(t,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function a8(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const s=p(t,["name"]);s!=null&&g(e,["name"],s);const a=p(t,["parameters"]);a!=null&&g(e,["parameters"],a);const l=p(t,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const h=p(t,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function r8(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],Ja(t,s)),n}function o8(t,e){const n={},s=p(e,["name"]);return s!=null&&g(n,["_url","name"],Ja(t,s)),n}function l8(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function c8(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function u8(t,e){const n={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),n}function d8(t,e){const n={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),n}function h8(t){const e={},n=p(t,["config"]);return n!=null&&u8(n,e),e}function f8(t){const e={},n=p(t,["config"]);return n!=null&&d8(n,e),e}function m8(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function p8(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function g8(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const s=p(t,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(t,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(t,["fileData"]);l!=null&&g(e,["fileData"],n8(l));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],s8(u));const h=p(t,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(t,["inlineData"]);m!=null&&g(e,["inlineData"],KO(m));const f=p(t,["text"]);f!=null&&g(e,["text"],f);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const _=p(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=p(t,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function x8(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],i8(n));const s=p(t,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function y8(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=p(t,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],l8(h));const m=p(t,["googleSearch"]);m!=null&&g(e,["googleSearch"],c8(m));const f=p(t,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function v8(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(w=>a8(w))),g(e,["functionDeclarations"],_)}const s=p(t,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=p(t,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=p(t,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=p(t,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const m=p(t,["googleMaps"]);m!=null&&g(e,["googleMaps"],m);const f=p(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],f);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function b8(t,e){const n={},s=p(t,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(t,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),n}function _8(t,e){const n={},s=p(t,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=p(t,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),n}function w8(t,e){const n={},s=p(e,["name"]);s!=null&&g(n,["_url","name"],Ja(t,s));const a=p(e,["config"]);return a!=null&&b8(a,n),n}function E8(t,e){const n={},s=p(e,["name"]);s!=null&&g(n,["_url","name"],Ja(t,s));const a=p(e,["config"]);return a!=null&&_8(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N8 extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ho(Ba.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=XO(this.apiClient,e);return h=Pe("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=WO(this.apiClient,e);return h=Pe("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=o8(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=r8(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=ZO(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=t8(y),w=new DE;return Object.assign(w,_),w})}else{const f=QO(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=e8(y),w=new DE;return Object.assign(w,_),w})}}async update(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=E8(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=w8(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=f8(e);return h=Pe("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=p8(y),w=new kE;return Object.assign(w,_),w})}else{const f=h8(e);return h=Pe("cachedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=m8(y),w=new kE;return Object.assign(w,_),w})}}}function Ff(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function zE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tt(t){return this instanceof tt?(this.v=t,this):new tt(t)}function bi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(T){return function(M){return Promise.resolve(M).then(T,_)}}function h(T,M){s[T]&&(a[T]=function(z){return new Promise(function(k,q){l.push([T,z,k,q])>1||m(T,z)})},M&&(a[T]=M(a[T])))}function m(T,M){try{f(s[T](M))}catch(z){w(l[0][3],z)}}function f(T){T.value instanceof tt?Promise.resolve(T.value.v).then(y,_):w(l[0][2],T)}function y(T){m("next",T)}function _(T){m("throw",T)}function w(T,M){T(M),l.shift(),l.length&&m(l[0][0],l[0][1])}}function _i(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zE=="function"?zE(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(u){return new Promise(function(h,m){u=t[l](u),a(h,m,u.done,u.value)})}}function a(l,u,h,m){Promise.resolve(m).then(function(f){l({value:f,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T8(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:U2(n)}function U2(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function S8(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function FE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const a=[];let l=!0;for(;s<n&&t[s].role==="model";)a.push(t[s]),l&&!U2(t[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class C8{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new A8(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class A8{constructor(e,n,s,a={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),S8(l)}async sendMessage(e){var n;await this.sendPromise;const s=us(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,h;const m=await a,f=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let w=[];y!=null&&(w=(h=y.slice(_))!==null&&h!==void 0?h:[]);const T=f?[f]:[];this.recordHistory(s,T,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const s=us(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?FE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return bi(this,arguments,function*(){var a,l,u,h,m,f;const y=[];try{for(var _=!0,w=_i(e),T;T=yield tt(w.next()),a=T.done,!a;_=!0){h=T.value,_=!1;const M=h;if(T8(M)){const z=(f=(m=M.candidates)===null||m===void 0?void 0:m[0])===null||f===void 0?void 0:f.content;z!==void 0&&y.push(z)}yield yield tt(M)}}catch(M){l={error:M}}finally{try{!_&&!a&&(u=w.return)&&(yield tt(u.call(w)))}finally{if(l)throw l.error}}this.recordHistory(n,y)})}recordHistory(e,n,s){let a=[];n.length>0&&n.every(l=>l.role!==void 0)?a=n:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...FE(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bm extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,bm.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I8(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function R8(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function j8(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],j2(n)),e}function D8(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function k8(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],j2(n)),e}function M8(t,e){const n={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),n}function P8(t){const e={},n=p(t,["config"]);return n!=null&&M8(n,e),e}function L8(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V8 extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ho(Ba.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=P8(e);return l=Pe("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=L8(m),y=new FU;return Object.assign(y,f),y})}}async createInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=I8(e);return l=Pe("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=R8(m),y=new BU;return Object.assign(y,f),y})}}async get(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=k8(e);return l=Pe("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=j8(e);return l=Pe("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=D8(m),y=new qU;return Object.assign(y,f),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cf(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function U8(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>ez(l))),g(e,["parts"],a)}const s=p(t,["role"]);return s!=null&&g(e,["role"],s),e}function O8(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function z8(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const s=p(t,["args"]);s!=null&&g(e,["args"],s);const a=p(t,["name"]);if(a!=null&&g(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function F8(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const s=p(t,["name"]);s!=null&&g(e,["name"],s);const a=p(t,["parameters"]);a!=null&&g(e,["parameters"],a);const l=p(t,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const h=p(t,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function B8(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const s=p(t,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=p(t,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=p(t,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=p(t,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const m=p(t,["logprobs"]);m!=null&&g(e,["logprobs"],m);const f=p(t,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const _=p(t,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const w=p(t,["responseLogprobs"]);w!=null&&g(e,["responseLogprobs"],w);const T=p(t,["responseMimeType"]);T!=null&&g(e,["responseMimeType"],T);const M=p(t,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const z=p(t,["responseSchema"]);z!=null&&g(e,["responseSchema"],z);const k=p(t,["routingConfig"]);k!=null&&g(e,["routingConfig"],k);const q=p(t,["seed"]);q!=null&&g(e,["seed"],q);const H=p(t,["speechConfig"]);H!=null&&g(e,["speechConfig"],H);const P=p(t,["stopSequences"]);P!=null&&g(e,["stopSequences"],P);const W=p(t,["temperature"]);W!=null&&g(e,["temperature"],W);const te=p(t,["thinkingConfig"]);te!=null&&g(e,["thinkingConfig"],te);const L=p(t,["topK"]);L!=null&&g(e,["topK"],L);const C=p(t,["topP"]);if(C!=null&&g(e,["topP"],C),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function q8(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function H8(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function G8(t,e){const n={},s=p(t,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=p(t,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=p(t,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=p(t,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const _=p(t,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],Zx(_));const w=p(t,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const T=p(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],T);const M=p(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],U8(us(M)));const z=p(t,["tools"]);if(e!==void 0&&z!=null){let L=uc(z);Array.isArray(L)&&(L=L.map(C=>nz(cc(C)))),g(e,["setup","tools"],L)}const k=p(t,["sessionResumption"]);e!==void 0&&k!=null&&g(e,["setup","sessionResumption"],tz(k));const q=p(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&g(e,["setup","inputAudioTranscription"],q);const H=p(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","outputAudioTranscription"],H);const P=p(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&g(e,["setup","realtimeInputConfig"],P);const W=p(t,["contextWindowCompression"]);e!==void 0&&W!=null&&g(e,["setup","contextWindowCompression"],W);const te=p(t,["proactivity"]);if(e!==void 0&&te!=null&&g(e,["setup","proactivity"],te),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $8(t,e){const n={},s=p(t,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],B8(s));const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=p(t,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=p(t,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=p(t,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const _=p(t,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],Zx(_));const w=p(t,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const T=p(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],T);const M=p(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],us(M));const z=p(t,["tools"]);if(e!==void 0&&z!=null){let C=uc(z);Array.isArray(C)&&(C=C.map(A=>sz(cc(A)))),g(e,["setup","tools"],C)}const k=p(t,["sessionResumption"]);e!==void 0&&k!=null&&g(e,["setup","sessionResumption"],k);const q=p(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&g(e,["setup","inputAudioTranscription"],q);const H=p(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","outputAudioTranscription"],H);const P=p(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&g(e,["setup","realtimeInputConfig"],P);const W=p(t,["contextWindowCompression"]);e!==void 0&&W!=null&&g(e,["setup","contextWindowCompression"],W);const te=p(t,["proactivity"]);e!==void 0&&te!=null&&g(e,["setup","proactivity"],te);const L=p(t,["explicitVadSignal"]);return e!==void 0&&L!=null&&g(e,["setup","explicitVadSignal"],L),n}function K8(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["setup","model"],Vt(t,s));const a=p(e,["config"]);return a!=null&&g(n,["config"],G8(a,n)),n}function J8(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["setup","model"],Vt(t,s));const a=p(e,["config"]);return a!=null&&g(n,["config"],$8(a,n)),n}function Y8(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function W8(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function X8(t){const e={},n=p(t,["media"]);if(n!=null){let f=S2(n);Array.isArray(f)&&(f=f.map(y=>cf(y))),g(e,["mediaChunks"],f)}const s=p(t,["audio"]);s!=null&&g(e,["audio"],cf(A2(s)));const a=p(t,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=p(t,["video"]);l!=null&&g(e,["video"],cf(C2(l)));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const h=p(t,["activityStart"]);h!=null&&g(e,["activityStart"],h);const m=p(t,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function Q8(t){const e={},n=p(t,["media"]);if(n!=null){let f=S2(n);Array.isArray(f)&&(f=f.map(y=>y)),g(e,["mediaChunks"],f)}const s=p(t,["audio"]);s!=null&&g(e,["audio"],A2(s));const a=p(t,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=p(t,["video"]);l!=null&&g(e,["video"],C2(l));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const h=p(t,["activityStart"]);h!=null&&g(e,["activityStart"],h);const m=p(t,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function Z8(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const s=p(t,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=p(t,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=p(t,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=p(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],iz(u));const h=p(t,["goAway"]);h!=null&&g(e,["goAway"],h);const m=p(t,["sessionResumptionUpdate"]);m!=null&&g(e,["sessionResumptionUpdate"],m);const f=p(t,["voiceActivityDetectionSignal"]);return f!=null&&g(e,["voiceActivityDetectionSignal"],f),e}function ez(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const s=p(t,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(t,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(t,["fileData"]);l!=null&&g(e,["fileData"],O8(l));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],z8(u));const h=p(t,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(t,["inlineData"]);m!=null&&g(e,["inlineData"],cf(m));const f=p(t,["text"]);f!=null&&g(e,["text"],f);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const _=p(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=p(t,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function tz(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nz(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=p(t,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],q8(h));const m=p(t,["googleSearch"]);m!=null&&g(e,["googleSearch"],H8(m));const f=p(t,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function sz(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(w=>F8(w))),g(e,["functionDeclarations"],_)}const s=p(t,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=p(t,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=p(t,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=p(t,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const m=p(t,["googleMaps"]);m!=null&&g(e,["googleMaps"],m);const f=p(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],f);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function iz(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const s=p(t,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=p(t,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=p(t,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=p(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=p(t,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const m=p(t,["promptTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(M=>M)),g(e,["promptTokensDetails"],T)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let T=f;Array.isArray(T)&&(T=T.map(M=>M)),g(e,["cacheTokensDetails"],T)}const y=p(t,["candidatesTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(M=>M)),g(e,["responseTokensDetails"],T)}const _=p(t,["toolUsePromptTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(M=>M)),g(e,["toolUsePromptTokensDetails"],T)}const w=p(t,["trafficType"]);return w!=null&&g(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function az(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function rz(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const s=p(t,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],oz(s));const a=p(t,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=p(t,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=p(t,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const m=p(t,["index"]);m!=null&&g(e,["index"],m);const f=p(t,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const y=p(t,["safetyRatings"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(T=>T)),g(e,["safetyRatings"],w)}const _=p(t,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function oz(t){const e={},n=p(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function lz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let l=ai(a);Array.isArray(l)&&(l=l.map(u=>u)),g(n,["contents"],l)}return n}function cz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function uz(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const s=p(t,["statistics"]);return s!=null&&g(e,["statistics"],dz(s)),e}function dz(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const s=p(t,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function _m(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>b9(l))),g(e,["parts"],a)}const s=p(t,["role"]);return s!=null&&g(e,["role"],s),e}function hz(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const s=p(t,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function fz(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function mz(t,e){const n={},s=p(t,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],us(s));const a=p(t,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>B2(h))),g(e,["tools"],u)}const l=p(t,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],a9(l)),n}function pz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>_m(h))),g(n,["contents"],u)}const l=p(e,["config"]);return l!=null&&fz(l),n}function gz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>h)),g(n,["contents"],u)}const l=p(e,["config"]);return l!=null&&mz(l,n),n}function xz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=p(t,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function yz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function vz(t,e){const n={},s=p(e,["model"]);return s!=null&&g(n,["_url","name"],Vt(t,s)),n}function bz(t,e){const n={},s=p(e,["model"]);return s!=null&&g(n,["_url","name"],Vt(t,s)),n}function _z(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function wz(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function Ez(t,e){const n={},s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(t,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=p(t,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=p(t,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const _=p(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const w=p(t,["includeRaiReason"]);e!==void 0&&w!=null&&g(e,["parameters","includeRaiReason"],w);const T=p(t,["language"]);e!==void 0&&T!=null&&g(e,["parameters","language"],T);const M=p(t,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const z=p(t,["outputCompressionQuality"]);e!==void 0&&z!=null&&g(e,["parameters","outputOptions","compressionQuality"],z);const k=p(t,["addWatermark"]);e!==void 0&&k!=null&&g(e,["parameters","addWatermark"],k);const q=p(t,["labels"]);e!==void 0&&q!=null&&g(e,["labels"],q);const H=p(t,["editMode"]);e!==void 0&&H!=null&&g(e,["parameters","editMode"],H);const P=p(t,["baseSteps"]);return e!==void 0&&P!=null&&g(e,["parameters","editConfig","baseSteps"],P),n}function Nz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const l=p(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>S9(m))),g(n,["instances[0]","referenceImages"],h)}const u=p(e,["config"]);return u!=null&&Ez(u,n),n}function Tz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>wm(l))),g(e,["generatedImages"],a)}return e}function Sz(t,e){const n={},s=p(t,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=p(t,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=p(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Cz(t,e){const n={},s=p(t,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=p(t,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=p(t,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=p(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=p(t,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),n}function Az(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let h=Wx(t,a);Array.isArray(h)&&(h=h.map(m=>m)),g(n,["requests[]","content"],h)}const l=p(e,["config"]);l!=null&&Sz(l,n);const u=p(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],Vt(t,u)),n}function Iz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let u=Wx(t,a);Array.isArray(u)&&(u=u.map(h=>h)),g(n,["instances[]","content"],u)}const l=p(e,["config"]);return l!=null&&Cz(l,n),n}function Rz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=p(t,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function jz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>uz(u))),g(e,["embeddings"],l)}const a=p(t,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function Dz(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const s=p(t,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function kz(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Mz(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const s=p(t,["args"]);s!=null&&g(e,["args"],s);const a=p(t,["name"]);if(a!=null&&g(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Pz(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const s=p(t,["allowedFunctionNames"]);if(s!=null&&g(e,["allowedFunctionNames"],s),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Lz(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const s=p(t,["name"]);s!=null&&g(e,["name"],s);const a=p(t,["parameters"]);a!=null&&g(e,["parameters"],a);const l=p(t,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const h=p(t,["responseJsonSchema"]);return h!=null&&g(e,["responseJsonSchema"],h),e}function Vz(t,e,n){const s={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&g(n,["systemInstruction"],_m(us(a)));const l=p(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=p(e,["topP"]);u!=null&&g(s,["topP"],u);const h=p(e,["topK"]);h!=null&&g(s,["topK"],h);const m=p(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const f=p(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const y=p(e,["stopSequences"]);y!=null&&g(s,["stopSequences"],y);const _=p(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=p(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const T=p(e,["presencePenalty"]);T!=null&&g(s,["presencePenalty"],T);const M=p(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const z=p(e,["seed"]);z!=null&&g(s,["seed"],z);const k=p(e,["responseMimeType"]);k!=null&&g(s,["responseMimeType"],k);const q=p(e,["responseSchema"]);q!=null&&g(s,["responseSchema"],Xx(q));const H=p(e,["responseJsonSchema"]);if(H!=null&&g(s,["responseJsonSchema"],H),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=p(e,["safetySettings"]);if(n!==void 0&&P!=null){let F=P;Array.isArray(F)&&(F=F.map(je=>C9(je))),g(n,["safetySettings"],F)}const W=p(e,["tools"]);if(n!==void 0&&W!=null){let F=uc(W);Array.isArray(F)&&(F=F.map(je=>M9(cc(je)))),g(n,["tools"],F)}const te=p(e,["toolConfig"]);if(n!==void 0&&te!=null&&g(n,["toolConfig"],k9(te)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=p(e,["cachedContent"]);n!==void 0&&L!=null&&g(n,["cachedContent"],Ja(t,L));const C=p(e,["responseModalities"]);C!=null&&g(s,["responseModalities"],C);const A=p(e,["mediaResolution"]);A!=null&&g(s,["mediaResolution"],A);const R=p(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],Qx(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=p(e,["thinkingConfig"]);U!=null&&g(s,["thinkingConfig"],U);const B=p(e,["imageConfig"]);B!=null&&g(s,["imageConfig"],u9(B));const $=p(e,["enableEnhancedCivicAnswers"]);return $!=null&&g(s,["enableEnhancedCivicAnswers"],$),s}function Uz(t,e,n){const s={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&g(n,["systemInstruction"],us(a));const l=p(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=p(e,["topP"]);u!=null&&g(s,["topP"],u);const h=p(e,["topK"]);h!=null&&g(s,["topK"],h);const m=p(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const f=p(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const y=p(e,["stopSequences"]);y!=null&&g(s,["stopSequences"],y);const _=p(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const w=p(e,["logprobs"]);w!=null&&g(s,["logprobs"],w);const T=p(e,["presencePenalty"]);T!=null&&g(s,["presencePenalty"],T);const M=p(e,["frequencyPenalty"]);M!=null&&g(s,["frequencyPenalty"],M);const z=p(e,["seed"]);z!=null&&g(s,["seed"],z);const k=p(e,["responseMimeType"]);k!=null&&g(s,["responseMimeType"],k);const q=p(e,["responseSchema"]);q!=null&&g(s,["responseSchema"],Xx(q));const H=p(e,["responseJsonSchema"]);H!=null&&g(s,["responseJsonSchema"],H);const P=p(e,["routingConfig"]);P!=null&&g(s,["routingConfig"],P);const W=p(e,["modelSelectionConfig"]);W!=null&&g(s,["modelConfig"],W);const te=p(e,["safetySettings"]);if(n!==void 0&&te!=null){let j=te;Array.isArray(j)&&(j=j.map(se=>se)),g(n,["safetySettings"],j)}const L=p(e,["tools"]);if(n!==void 0&&L!=null){let j=uc(L);Array.isArray(j)&&(j=j.map(se=>B2(cc(se)))),g(n,["tools"],j)}const C=p(e,["toolConfig"]);n!==void 0&&C!=null&&g(n,["toolConfig"],C);const A=p(e,["labels"]);n!==void 0&&A!=null&&g(n,["labels"],A);const R=p(e,["cachedContent"]);n!==void 0&&R!=null&&g(n,["cachedContent"],Ja(t,R));const U=p(e,["responseModalities"]);U!=null&&g(s,["responseModalities"],U);const B=p(e,["mediaResolution"]);B!=null&&g(s,["mediaResolution"],B);const $=p(e,["speechConfig"]);$!=null&&g(s,["speechConfig"],Qx($));const F=p(e,["audioTimestamp"]);F!=null&&g(s,["audioTimestamp"],F);const je=p(e,["thinkingConfig"]);je!=null&&g(s,["thinkingConfig"],je);const ze=p(e,["imageConfig"]);if(ze!=null&&g(s,["imageConfig"],d9(ze)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function BE(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>_m(h))),g(n,["contents"],u)}const l=p(e,["config"]);return l!=null&&g(n,["generationConfig"],Vz(t,l,n)),n}function qE(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>h)),g(n,["contents"],u)}const l=p(e,["config"]);return l!=null&&g(n,["generationConfig"],Uz(t,l,n)),n}function HE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(f=>rz(f))),g(e,["candidates"],m)}const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const h=p(t,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function GE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(y=>y)),g(e,["candidates"],f)}const a=p(t,["createTime"]);a!=null&&g(e,["createTime"],a);const l=p(t,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=p(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=p(t,["responseId"]);h!=null&&g(e,["responseId"],h);const m=p(t,["usageMetadata"]);return m!=null&&g(e,["usageMetadata"],m),e}function Oz(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=p(t,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(t,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const m=p(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const f=p(t,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);const y=p(t,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const _=p(t,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const w=p(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&g(e,["parameters","outputOptions","compressionQuality"],w),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=p(t,["imageSize"]);if(e!==void 0&&T!=null&&g(e,["parameters","sampleImageSize"],T),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function zz(t,e){const n={},s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(t,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=p(t,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=p(t,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const m=p(t,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const _=p(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const w=p(t,["includeRaiReason"]);e!==void 0&&w!=null&&g(e,["parameters","includeRaiReason"],w);const T=p(t,["language"]);e!==void 0&&T!=null&&g(e,["parameters","language"],T);const M=p(t,["outputMimeType"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","mimeType"],M);const z=p(t,["outputCompressionQuality"]);e!==void 0&&z!=null&&g(e,["parameters","outputOptions","compressionQuality"],z);const k=p(t,["addWatermark"]);e!==void 0&&k!=null&&g(e,["parameters","addWatermark"],k);const q=p(t,["labels"]);e!==void 0&&q!=null&&g(e,["labels"],q);const H=p(t,["imageSize"]);e!==void 0&&H!=null&&g(e,["parameters","sampleImageSize"],H);const P=p(t,["enhancePrompt"]);return e!==void 0&&P!=null&&g(e,["parameters","enhancePrompt"],P),n}function Fz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&Oz(l,n),n}function Bz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&zz(l,n),n}function qz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>t9(u))),g(e,["generatedImages"],l)}const a=p(t,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],z2(a)),e}function Hz(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>wm(u))),g(e,["generatedImages"],l)}const a=p(t,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],F2(a)),e}function Gz(t,e){const n={},s=p(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=p(t,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=p(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=p(t,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=p(t,["negativePrompt"]);e!==void 0&&m!=null&&g(e,["parameters","negativePrompt"],m);const f=p(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&g(e,["parameters","enhancePrompt"],f),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(t,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],Em(y));const _=p(t,["referenceImages"]);if(e!==void 0&&_!=null){let w=_;Array.isArray(w)&&(w=w.map(T=>K9(T))),g(e,["instances[0]","referenceImages"],w)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function $z(t,e){const n={},s=p(t,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(t,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=p(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=p(t,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const m=p(t,["aspectRatio"]);e!==void 0&&m!=null&&g(e,["parameters","aspectRatio"],m);const f=p(t,["resolution"]);e!==void 0&&f!=null&&g(e,["parameters","resolution"],f);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const _=p(t,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const w=p(t,["negativePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","negativePrompt"],w);const T=p(t,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const M=p(t,["generateAudio"]);e!==void 0&&M!=null&&g(e,["parameters","generateAudio"],M);const z=p(t,["lastFrame"]);e!==void 0&&z!=null&&g(e,["instances[0]","lastFrame"],Si(z));const k=p(t,["referenceImages"]);if(e!==void 0&&k!=null){let P=k;Array.isArray(P)&&(P=P.map(W=>J9(W))),g(e,["instances[0]","referenceImages"],P)}const q=p(t,["mask"]);e!==void 0&&q!=null&&g(e,["instances[0]","mask"],$9(q));const H=p(t,["compressionQuality"]);return e!==void 0&&H!=null&&g(e,["parameters","compressionQuality"],H),n}function Kz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],Xz(u)),e}function Jz(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["response"]);return u!=null&&g(e,["response"],Qz(u)),e}function Yz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&g(n,["instances[0]","image"],Em(l));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],q2(u));const h=p(e,["source"]);h!=null&&Zz(h,n);const m=p(e,["config"]);return m!=null&&Gz(m,n),n}function Wz(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&g(n,["instances[0]","image"],Si(l));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],H2(u));const h=p(e,["source"]);h!=null&&e9(h,n);const m=p(e,["config"]);return m!=null&&$z(m,n),n}function Xz(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>s9(u))),g(e,["generatedVideos"],l)}const s=p(t,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function Qz(t){const e={},n=p(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>i9(u))),g(e,["generatedVideos"],l)}const s=p(t,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function Zz(t,e){const n={},s=p(t,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(t,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Em(a));const l=p(t,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],q2(l)),n}function e9(t,e){const n={},s=p(t,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(t,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Si(a));const l=p(t,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],H2(l)),n}function t9(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],h9(n));const s=p(t,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=p(t,["_self"]);return a!=null&&g(e,["safetyAttributes"],z2(a)),e}function wm(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],O2(n));const s=p(t,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=p(t,["_self"]);a!=null&&g(e,["safetyAttributes"],F2(a));const l=p(t,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function n9(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],O2(n));const s=p(t,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function s9(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],H9(n)),e}function i9(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],G9(n)),e}function a9(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const s=p(t,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=p(t,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=p(t,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=p(t,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const m=p(t,["logprobs"]);m!=null&&g(e,["logprobs"],m);const f=p(t,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const _=p(t,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const w=p(t,["responseLogprobs"]);w!=null&&g(e,["responseLogprobs"],w);const T=p(t,["responseMimeType"]);T!=null&&g(e,["responseMimeType"],T);const M=p(t,["responseModalities"]);M!=null&&g(e,["responseModalities"],M);const z=p(t,["responseSchema"]);z!=null&&g(e,["responseSchema"],z);const k=p(t,["routingConfig"]);k!=null&&g(e,["routingConfig"],k);const q=p(t,["seed"]);q!=null&&g(e,["seed"],q);const H=p(t,["speechConfig"]);H!=null&&g(e,["speechConfig"],H);const P=p(t,["stopSequences"]);P!=null&&g(e,["stopSequences"],P);const W=p(t,["temperature"]);W!=null&&g(e,["temperature"],W);const te=p(t,["thinkingConfig"]);te!=null&&g(e,["thinkingConfig"],te);const L=p(t,["topK"]);L!=null&&g(e,["topK"],L);const C=p(t,["topP"]);if(C!=null&&g(e,["topP"],C),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function r9(t,e){const n={},s=p(e,["model"]);return s!=null&&g(n,["_url","name"],Vt(t,s)),n}function o9(t,e){const n={},s=p(e,["model"]);return s!=null&&g(n,["_url","name"],Vt(t,s)),n}function l9(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function c9(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function u9(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const s=p(t,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function d9(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const s=p(t,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=p(t,["outputMimeType"]);a!=null&&g(e,["imageOutputOptions","mimeType"],a);const l=p(t,["outputCompressionQuality"]);return l!=null&&g(e,["imageOutputOptions","compressionQuality"],l),e}function h9(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],Yr(n));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function O2(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const s=p(t,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Yr(s));const a=p(t,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function Em(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],Yr(n));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Si(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const s=p(t,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Yr(s));const a=p(t,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function f9(t,e,n){const s={},a=p(e,["pageSize"]);n!==void 0&&a!=null&&g(n,["_query","pageSize"],a);const l=p(e,["pageToken"]);n!==void 0&&l!=null&&g(n,["_query","pageToken"],l);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const h=p(e,["queryBase"]);return n!==void 0&&h!=null&&g(n,["_url","models_url"],D2(t,h)),s}function m9(t,e,n){const s={},a=p(e,["pageSize"]);n!==void 0&&a!=null&&g(n,["_query","pageSize"],a);const l=p(e,["pageToken"]);n!==void 0&&l!=null&&g(n,["_query","pageToken"],l);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const h=p(e,["queryBase"]);return n!==void 0&&h!=null&&g(n,["_url","models_url"],D2(t,h)),s}function p9(t,e){const n={},s=p(e,["config"]);return s!=null&&f9(t,s,n),n}function g9(t,e){const n={},s=p(e,["config"]);return s!=null&&m9(t,s,n),n}function x9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["_self"]);if(a!=null){let l=k2(a);Array.isArray(l)&&(l=l.map(u=>T0(u))),g(e,["models"],l)}return e}function y9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["_self"]);if(a!=null){let l=k2(a);Array.isArray(l)&&(l=l.map(u=>S0(u))),g(e,["models"],l)}return e}function v9(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const s=p(t,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=p(t,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function T0(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["displayName"]);s!=null&&g(e,["displayName"],s);const a=p(t,["description"]);a!=null&&g(e,["description"],a);const l=p(t,["version"]);l!=null&&g(e,["version"],l);const u=p(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],P9(u));const h=p(t,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const m=p(t,["outputTokenLimit"]);m!=null&&g(e,["outputTokenLimit"],m);const f=p(t,["supportedGenerationMethods"]);f!=null&&g(e,["supportedActions"],f);const y=p(t,["temperature"]);y!=null&&g(e,["temperature"],y);const _=p(t,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const w=p(t,["topP"]);w!=null&&g(e,["topP"],w);const T=p(t,["topK"]);T!=null&&g(e,["topK"],T);const M=p(t,["thinking"]);return M!=null&&g(e,["thinking"],M),e}function S0(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["displayName"]);s!=null&&g(e,["displayName"],s);const a=p(t,["description"]);a!=null&&g(e,["description"],a);const l=p(t,["versionId"]);l!=null&&g(e,["version"],l);const u=p(t,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(w=>Dz(w))),g(e,["endpoints"],_)}const h=p(t,["labels"]);h!=null&&g(e,["labels"],h);const m=p(t,["_self"]);m!=null&&g(e,["tunedModelInfo"],L9(m));const f=p(t,["defaultCheckpointId"]);f!=null&&g(e,["defaultCheckpointId"],f);const y=p(t,["checkpoints"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(w=>w)),g(e,["checkpoints"],_)}return e}function b9(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const s=p(t,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(t,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(t,["fileData"]);l!=null&&g(e,["fileData"],kz(l));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],Mz(u));const h=p(t,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(t,["inlineData"]);m!=null&&g(e,["inlineData"],az(m));const f=p(t,["text"]);f!=null&&g(e,["text"],f);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const _=p(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=p(t,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function _9(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],Si(n)),e}function w9(t,e){const n={},s=p(t,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=p(t,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=p(t,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=p(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const m=p(t,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const f=p(t,["addWatermark"]);e!==void 0&&f!=null&&g(e,["parameters","addWatermark"],f);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const _=p(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const T=p(t,["labels"]);return e!==void 0&&T!=null&&g(e,["labels"],T),n}function E9(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["source"]);a!=null&&T9(a,n);const l=p(e,["config"]);return l!=null&&w9(l,n),n}function N9(t){const e={},n=p(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>wm(a))),g(e,["generatedImages"],s)}return e}function T9(t,e){const n={},s=p(t,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(t,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Si(a));const l=p(t,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>_9(h))),g(e,["instances[0]","productImages"],u)}return n}function S9(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],Si(n));const s=p(t,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=p(t,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=p(t,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],v9(l));const u=p(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],hz(u));const h=p(t,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const m=p(t,["subjectImageConfig"]);return m!=null&&g(e,["subjectImageConfig"],m),e}function z2(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const s=p(t,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=p(t,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function F2(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const s=p(t,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=p(t,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function C9(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=p(t,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function A9(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],Si(n)),e}function I9(t,e){const n={},s=p(t,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=p(t,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=p(t,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=p(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=p(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const m=p(t,["labels"]);return e!==void 0&&m!=null&&g(e,["labels"],m),n}function R9(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["source"]);a!=null&&D9(a,n);const l=p(e,["config"]);return l!=null&&I9(l,n),n}function j9(t){const e={},n=p(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>n9(a))),g(e,["generatedMasks"],s)}return e}function D9(t,e){const n={},s=p(t,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=p(t,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Si(a));const l=p(t,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],A9(l)),n}function k9(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],Pz(n));const s=p(t,["retrievalConfig"]);return s!=null&&g(e,["retrievalConfig"],s),e}function M9(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=p(t,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],l9(h));const m=p(t,["googleSearch"]);m!=null&&g(e,["googleSearch"],c9(m));const f=p(t,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function B2(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(w=>Lz(w))),g(e,["functionDeclarations"],_)}const s=p(t,["retrieval"]);s!=null&&g(e,["retrieval"],s);const a=p(t,["googleSearchRetrieval"]);a!=null&&g(e,["googleSearchRetrieval"],a);const l=p(t,["computerUse"]);if(l!=null&&g(e,["computerUse"],l),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const h=p(t,["enterpriseWebSearch"]);h!=null&&g(e,["enterpriseWebSearch"],h);const m=p(t,["googleMaps"]);m!=null&&g(e,["googleMaps"],m);const f=p(t,["googleSearch"]);f!=null&&g(e,["googleSearch"],f);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function P9(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(t,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function L9(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(t,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function V9(t,e){const n={},s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(t,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=p(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),n}function U9(t,e){const n={},s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(t,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=p(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),n}function O9(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","name"],Vt(t,s));const a=p(e,["config"]);return a!=null&&V9(a,n),n}function z9(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["config"]);return a!=null&&U9(a,n),n}function F9(t,e){const n={},s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=p(t,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=p(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=p(t,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const m=p(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","compressionQuality"],m);const f=p(t,["enhanceInputImage"]);e!==void 0&&f!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],f);const y=p(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const _=p(t,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const w=p(t,["numberOfImages"]);e!==void 0&&w!=null&&g(e,["parameters","sampleCount"],w);const T=p(t,["mode"]);return e!==void 0&&T!=null&&g(e,["parameters","mode"],T),n}function B9(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["_url","model"],Vt(t,s));const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],Si(a));const l=p(e,["upscaleFactor"]);l!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],l);const u=p(e,["config"]);return u!=null&&F9(u,n),n}function q9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>wm(l))),g(e,["generatedImages"],a)}return e}function H9(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const s=p(t,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Yr(s));const a=p(t,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function G9(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const s=p(t,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Yr(s));const a=p(t,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function $9(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],Si(n));const s=p(t,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function K9(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Em(n));const s=p(t,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function J9(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Si(n));const s=p(t,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function q2(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const s=p(t,["videoBytes"]);s!=null&&g(e,["encodedVideo"],Yr(s));const a=p(t,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function H2(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const s=p(t,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Yr(s));const a=p(t,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y9(t,e){const n={},s=p(t,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),n}function W9(t){const e={},n=p(t,["config"]);return n!=null&&Y9(n,e),e}function X9(t,e){const n={},s=p(t,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),n}function Q9(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const s=p(t,["config"]);return s!=null&&X9(s,e),e}function Z9(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function eF(t,e){const n={},s=p(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=p(t,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),n}function tF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const s=p(t,["metadata"]);s!=null&&g(e,["metadata"],s);const a=p(t,["done"]);a!=null&&g(e,["done"],a);const l=p(t,["error"]);l!=null&&g(e,["error"],l);const u=p(t,["response"]);return u!=null&&g(e,["response"],sF(u)),e}function nF(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const s=p(t,["fileName"]);s!=null&&g(e,["fileName"],s);const a=p(t,["config"]);return a!=null&&eF(a,e),e}function sF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["parent"]);s!=null&&g(e,["parent"],s);const a=p(t,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function iF(t,e){const n={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),n}function aF(t){const e={},n=p(t,["config"]);return n!=null&&iF(n,e),e}function rF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function G2(t,e){const n={},s=p(t,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>m)),g(e,["customMetadata"],h)}const u=p(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function oF(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const s=p(t,["config"]);return s!=null&&G2(s,e),e}function lF(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cF="Content-Type",uF="X-Server-Timeout",dF="User-Agent",C0="x-goog-api-client",hF="1.34.0",fF=`google-genai-sdk/${hF}`,mF="v1beta1",pF="v1beta";class gF{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:mF,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:pF,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const a=[this.getRequestUrlInternal(n)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(n))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,a){if(n&&n.timeout||a){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>l.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&xF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await $E(a),new w0(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async a=>(await $E(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return bi(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";const h="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:y}=yield tt(a.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(y,{stream:!0});try{const M=JSON.parse(_);if("error"in M){const z=JSON.parse(JSON.stringify(M.error)),k=z.status,q=z.code,H=`got status: ${k}. ${JSON.stringify(M)}`;if(q>=400&&q<600)throw new bm({message:H,status:q})}}catch(M){if(M.name==="ApiError")throw M}u+=_;let w=-1,T=0;for(;;){w=-1,T=0;for(const k of m){const q=u.indexOf(k);q!==-1&&(w===-1||q<w)&&(w=q,T=k.length)}if(w===-1)break;const M=u.substring(0,w);u=u.substring(w+T);const z=M.trim();if(z.startsWith(h)){const k=z.substring(h.length).trim();try{const q=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield tt(new w0(q))}catch(q){throw new Error(`exception parsing stream chunk ${k}. ${q}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=fF+" "+this.clientOptions.userAgentExtra;return e[dF]=n,e[C0]=n,e[cF]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(uF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const m={file:a},f=this.getFileName(e),y=Pe("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(y,a.sizeBytes,a.mimeType,f,m,n==null?void 0:n.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,s){var a;const l=this.clientOptions.uploader,u=await l.stat(n),h=String(u.size),m=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),_={};s!=null&&G2(s,_);const w=await this.fetchUploadUrl(f,h,m,y,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(n,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,a,l,u){var h;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const f=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:m});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(h=f==null?void 0:f.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function $E(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(s);throw n>=400&&n<600?new bm({message:a,status:n}):new Error(a)}}function xF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const f=u[m],y=h[m];f&&typeof f=="object"&&!Array.isArray(f)&&y&&typeof y=="object"&&!Array.isArray(y)?h[m]=s(y,f):(y&&f&&typeof y!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof y}, New type: ${typeof f}. Overwriting.`),h[m]=f)}return h}const a=s(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yF="mcp_used/unknown";let vF=!1;function $2(t){for(const e of t)if(bF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return vF}function K2(t){var e;const n=(e=t[C0])!==null&&e!==void 0?e:"";t[C0]=(n+` ${yF}`).trimStart()}function bF(t){return t!==null&&typeof t=="object"&&t instanceof ey}function _F(t){return bi(this,arguments,function*(n,s=100){let a,l=0;for(;l<s;){const u=yield tt(n.listTools({cursor:a}));for(const h of u.tools)yield yield tt(h),l++;if(!u.nextCursor)break;a=u.nextCursor}})}class ey{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ey(e,n)}async initialize(){var e,n,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var h=!0,m=(n=void 0,_i(_F(y))),f;f=await m.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const _=a;u.push(_);const w=_.name;if(l[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);l[w]=y}}catch(_){n={error:_}}finally{try{!h&&!e&&(s=m.return)&&await s.call(m)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ZU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wF(t,e,n){const s=new GU;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(s,a),e(s)}class EF{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=SF(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let f=()=>{};const y=new Promise(P=>{f=P}),_=e.callbacks,w=function(){f({})},T=this.apiClient,M={onopen:w,onmessage:P=>{wF(T,_.onmessage,P)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(P){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(P){}},z=this.webSocketFactory.create(m,TF(u),M);z.connect(),await y;const H={setup:{model:Vt(this.apiClient,e.model)}};return z.send(JSON.stringify(H)),new NF(z,this.apiClient)}}class NF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=W8(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Y8(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Vl.PLAY)}pause(){this.sendPlaybackControl(Vl.PAUSE)}stop(){this.sendPlaybackControl(Vl.STOP)}resetContext(){this.sendPlaybackControl(Vl.RESET_CONTEXT)}close(){this.conn.close()}}function TF(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function SF(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function AF(t,e,n){const s=new HU;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const l=JSON.parse(a);if(t.isVertexAI()){const u=Z8(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class IF{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new EF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let y;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&$2(e.config.tools)&&K2(_);const w=kF(_);if(this.apiClient.isVertexAI())y=`${m}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,y);else{const R=this.apiClient.getApiKey();let U="BidiGenerateContent",B="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",B="access_token"),y=`${m}/ws/google.ai.generativelanguage.${f}.GenerativeService.${U}?${B}=${R}`}let T=()=>{};const M=new Promise(R=>{T=R}),z=e.callbacks,k=function(){var R;(R=z==null?void 0:z.onopen)===null||R===void 0||R.call(z),T({})},q=this.apiClient,H={onopen:k,onmessage:R=>{AF(q,z.onmessage,R)},onerror:(n=z==null?void 0:z.onerror)!==null&&n!==void 0?n:function(R){},onclose:(s=z==null?void 0:z.onclose)!==null&&s!==void 0?s:function(R){}},P=this.webSocketFactory.create(y,DF(w),H);P.connect(),await M;let W=Vt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&W.startsWith("publishers/")){const R=this.apiClient.getProject(),U=this.apiClient.getLocation();W=`projects/${R}/locations/${U}/`+W}let te={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Uf.AUDIO]}:e.config.responseModalities=[Uf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],C=[];for(const R of L)if(this.isCallableTool(R)){const U=R;C.push(await U.tool())}else C.push(R);C.length>0&&(e.config.tools=C);const A={model:W,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?te=J8(this.apiClient,A):te=K8(this.apiClient,A),delete te.config,P.send(JSON.stringify(te)),new jF(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const RF={turnComplete:!0};class jF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=ai(n.turns),e.isVertexAI()||(s=s.map(a=>_m(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(CF)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},RF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Q8(e)}:n={realtimeInput:X8(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function DF(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function kF(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KE=10;function JE(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Gl(u)){a=!0;break}if(!a)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Gl(t){return"callTool"in t&&typeof t.callTool=="function"}function MF(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>Gl(a)))!==null&&s!==void 0?s:!1}function YE(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,a)=>{if(Gl(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(a)}),n}function WE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PF extends Ka{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,a,l,u,h;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!MF(n)||JE(n.config))return await this.generateContentInternal(m);const f=YE(n);if(f.length>0){const z=f.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${z}.`)}let y,_;const w=ai(m.contents),T=(l=(a=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:KE;let M=0;for(;M<T&&(y=await this.generateContentInternal(m),!(!y.functionCalls||y.functionCalls.length===0));){const z=y.candidates[0].content,k=[];for(const q of(h=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Gl(q)){const P=await q.callTool(y.functionCalls);k.push(...P)}M++,_={role:"user",parts:k},m.contents=ai(m.contents),m.contents.push(z),m.contents.push(_),WE(m.config)&&(w.push(z),w.push(_))}return WE(m.config)&&(y.automaticFunctionCallingHistory=w),y},this.generateContentStream=async n=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(n),JE(n.config)){const _=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(_)}const m=YE(n);if(m.length>0){const _=m.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(l=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,y=(h=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(f&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((a=m==null?void 0:m.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async n=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ho(Ba.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var s,a,l,u,h,m;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((m=(h=n.source)===null||h===void 0?void 0:h.video)===null||m===void 0)&&m.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,a;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>Gl(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&$2(e.config.tools)){const m=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let f=Object.assign({},m);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),K2(f),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return h}async initAfcToolsMap(e){var n,s,a;const l=new Map;for(const u of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(Gl(u)){const h=u,m=await h.tool();for(const f of(a=m.functionDeclarations)!==null&&a!==void 0?a:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,h)}}return l}async processAfcStream(e){var n,s,a;const l=(a=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:KE;let u=!1,h=0;const m=await this.initAfcToolsMap(e);return(function(f,y,_){return bi(this,arguments,function*(){for(var w,T,M,z,k,q;h<l;){u&&(h++,u=!1);const te=yield tt(f.processParamsMaybeAddMcpUsage(_)),L=yield tt(f.generateContentStreamInternal(te)),C=[],A=[];try{for(var H=!0,P=(T=void 0,_i(L)),W;W=yield tt(P.next()),w=W.done,!w;H=!0){z=W.value,H=!1;const R=z;if(yield yield tt(R),R.candidates&&(!((k=R.candidates[0])===null||k===void 0)&&k.content)){A.push(R.candidates[0].content);for(const U of(q=R.candidates[0].content.parts)!==null&&q!==void 0?q:[])if(h<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(U.functionCall.name)){const B=yield tt(y.get(U.functionCall.name).callTool([U.functionCall]));C.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(R){T={error:R}}finally{try{!H&&!w&&(M=P.return)&&(yield tt(M.call(P)))}finally{if(T)throw T.error}}if(C.length>0){u=!0;const R=new fu;R.candidates=[{content:{role:"user",parts:C}}],yield yield tt(R);const U=[];U.push(...A),U.push({role:"user",parts:C});const B=ai(_.contents).concat(U);_.contents=B}else break}})})(this,m,e)}async generateContentInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=qE(this.apiClient,e);return h=Pe("{model}:generateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=GE(y),w=new fu;return Object.assign(w,_),w})}else{const f=BE(this.apiClient,e);return h=Pe("{model}:generateContent",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=HE(y),w=new fu;return Object.assign(w,_),w})}}async generateContentStreamInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=qE(this.apiClient,e);return h=Pe("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return bi(this,arguments,function*(){var w,T,M,z;try{for(var k=!0,q=_i(_),H;H=yield tt(q.next()),w=H.done,!w;k=!0){z=H.value,k=!1;const P=z,W=GE(yield tt(P.json()));W.sdkHttpResponse={headers:P.headers};const te=new fu;Object.assign(te,W),yield yield tt(te)}}catch(P){T={error:P}}finally{try{!k&&!w&&(M=q.return)&&(yield tt(M.call(q)))}finally{if(T)throw T.error}}})})}else{const f=BE(this.apiClient,e);return h=Pe("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return bi(this,arguments,function*(){var w,T,M,z;try{for(var k=!0,q=_i(_),H;H=yield tt(q.next()),w=H.done,!w;k=!0){z=H.value,k=!1;const P=z,W=HE(yield tt(P.json()));W.sdkHttpResponse={headers:P.headers};const te=new fu;Object.assign(te,W),yield yield tt(te)}}catch(P){T={error:P}}finally{try{!k&&!w&&(M=q.return)&&(yield tt(M.call(q)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=Iz(this.apiClient,e);return h=Pe("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=jz(y),w=new TE;return Object.assign(w,_),w})}else{const f=Az(this.apiClient,e);return h=Pe("{model}:batchEmbedContents",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=Rz(y),w=new TE;return Object.assign(w,_),w})}}async generateImagesInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=Bz(this.apiClient,e);return h=Pe("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=Hz(y),w=new SE;return Object.assign(w,_),w})}else{const f=Fz(this.apiClient,e);return h=Pe("{model}:predict",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=qz(y),w=new SE;return Object.assign(w,_),w})}}async editImageInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=Nz(this.apiClient,e);return l=Pe("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=Tz(m),y=new kU;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=B9(this.apiClient,e);return l=Pe("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=q9(m),y=new MU;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=E9(this.apiClient,e);return l=Pe("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=N9(m),y=new PU;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=R9(this.apiClient,e);return l=Pe("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=j9(m),y=new LU;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=o9(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>S0(y))}else{const f=r9(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>T0(y))}}async listInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=g9(this.apiClient,e);return h=Pe("{models_url}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=y9(y),w=new CE;return Object.assign(w,_),w})}else{const f=p9(this.apiClient,e);return h=Pe("{models_url}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=x9(y),w=new CE;return Object.assign(w,_),w})}}async update(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=z9(this.apiClient,e);return h=Pe("{model}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>S0(y))}else{const f=O9(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>T0(y))}}async delete(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=bz(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=wz(y),w=new AE;return Object.assign(w,_),w})}else{const f=vz(this.apiClient,e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=_z(y),w=new AE;return Object.assign(w,_),w})}}async countTokens(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=gz(this.apiClient,e);return h=Pe("{model}:countTokens",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=yz(y),w=new IE;return Object.assign(w,_),w})}else{const f=pz(this.apiClient,e);return h=Pe("{model}:countTokens",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=xz(y),w=new IE;return Object.assign(w,_),w})}}async computeTokens(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=lz(this.apiClient,e);return l=Pe("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>{const f=cz(m),y=new VU;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=Wz(this.apiClient,e);return h=Pe("{model}:predictLongRunning",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const _=Jz(y),w=new Of;return Object.assign(w,_),w})}else{const f=Yz(this.apiClient,e);return h=Pe("{model}:predictLongRunning",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const _=Kz(y),w=new Of;return Object.assign(w,_),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LF extends Ka{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=CU(e);return h=Pe("{operationName}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u}else{const f=SU(e);return h=Pe("{operationName}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=vU(e);return l=Pe("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VF(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function UF(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>KF(l))),g(e,["parts"],a)}const s=p(t,["role"]);return s!=null&&g(e,["role"],s),e}function OF(t,e,n){const s={},a=p(e,["expireTime"]);n!==void 0&&a!=null&&g(n,["expireTime"],a);const l=p(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&g(n,["newSessionExpireTime"],l);const u=p(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const h=p(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&g(n,["bidiGenerateContentSetup"],$F(t,h));const m=p(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&g(n,["fieldMask"],m),s}function zF(t,e){const n={},s=p(e,["config"]);return s!=null&&g(n,["config"],OF(t,s,n)),n}function FF(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function BF(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const s=p(t,["args"]);s!=null&&g(e,["args"],s);const a=p(t,["name"]);if(a!=null&&g(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qF(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function HF(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function GF(t,e){const n={},s=p(t,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=p(t,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=p(t,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=p(t,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const _=p(t,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],Zx(_));const w=p(t,["thinkingConfig"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","thinkingConfig"],w);const T=p(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],T);const M=p(t,["systemInstruction"]);e!==void 0&&M!=null&&g(e,["setup","systemInstruction"],UF(us(M)));const z=p(t,["tools"]);if(e!==void 0&&z!=null){let L=uc(z);Array.isArray(L)&&(L=L.map(C=>YF(cc(C)))),g(e,["setup","tools"],L)}const k=p(t,["sessionResumption"]);e!==void 0&&k!=null&&g(e,["setup","sessionResumption"],JF(k));const q=p(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&g(e,["setup","inputAudioTranscription"],q);const H=p(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","outputAudioTranscription"],H);const P=p(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&g(e,["setup","realtimeInputConfig"],P);const W=p(t,["contextWindowCompression"]);e!==void 0&&W!=null&&g(e,["setup","contextWindowCompression"],W);const te=p(t,["proactivity"]);if(e!==void 0&&te!=null&&g(e,["setup","proactivity"],te),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $F(t,e){const n={},s=p(e,["model"]);s!=null&&g(n,["setup","model"],Vt(t,s));const a=p(e,["config"]);return a!=null&&g(n,["config"],GF(a,n)),n}function KF(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const s=p(t,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=p(t,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=p(t,["fileData"]);l!=null&&g(e,["fileData"],FF(l));const u=p(t,["functionCall"]);u!=null&&g(e,["functionCall"],BF(u));const h=p(t,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=p(t,["inlineData"]);m!=null&&g(e,["inlineData"],VF(m));const f=p(t,["text"]);f!=null&&g(e,["text"],f);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const _=p(t,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const w=p(t,["videoMetadata"]);return w!=null&&g(e,["videoMetadata"],w),e}function JF(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function YF(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(_=>_)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);a!=null&&g(e,["computerUse"],a);const l=p(t,["fileSearch"]);l!=null&&g(e,["fileSearch"],l);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=p(t,["googleMaps"]);h!=null&&g(e,["googleMaps"],qF(h));const m=p(t,["googleSearch"]);m!=null&&g(e,["googleSearch"],HF(m));const f=p(t,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${n}.${l}`);e.push(...a)}else e.push(n)}return e.join(",")}function XF(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const l=WF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(f=>u.includes(f)?`generationConfig.${f}`:f));const m=[];l&&m.push(l),h.length>0&&m.push(...h),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class QF extends Ka{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=zF(this.apiClient,e);l=Pe("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const m=XF(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZF(t,e){const n={},s=p(t,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),n}function e7(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const s=p(t,["config"]);return s!=null&&ZF(s,e),e}function t7(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function n7(t,e){const n={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),n}function s7(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const s=p(t,["config"]);return s!=null&&n7(s,e),e}function i7(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const s=p(t,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=p(t,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a7 extends Ka{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ho(Ba.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=t7(e);return l=Pe("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var n,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=e7(e);a=Pe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=s7(e);return l=Pe("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=i7(m),y=new UU;return Object.assign(y,f),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r7 extends Ka{constructor(e,n=new a7(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new Ho(Ba.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=W9(e);return l=Pe("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Z9(e);return l=Pe("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(e){var n,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Q9(e);a=Pe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=aF(e);return l=Pe("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=rF(m),y=new OU;return Object.assign(y,f),y})}}async uploadToFileSearchStoreInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=oF(e);return l=Pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=lF(m),y=new zU;return Object.assign(y,f),y})}}async importFile(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nF(e);return l=Pe("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>{const f=tF(m),y=new Jx;return Object.assign(y,f),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let J2=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return J2=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const o7=()=>J2();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const I0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ri extends Error{}class bs extends ri{constructor(e,n,s,a){super(`${bs.makeMessage(e,n,s)}`),this.status=e,this.headers=a,this.error=n}static makeMessage(e,n,s){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,s,a){if(!e||!a)return new Nm({message:s,cause:I0(n)});const l=n;return e===400?new W2(e,l,s,a):e===401?new X2(e,l,s,a):e===403?new Q2(e,l,s,a):e===404?new Z2(e,l,s,a):e===409?new eC(e,l,s,a):e===422?new tC(e,l,s,a):e===429?new nC(e,l,s,a):e>=500?new sC(e,l,s,a):new bs(e,l,s,a)}}class R0 extends bs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Nm extends bs{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Y2 extends Nm{constructor({message:e}={}){super({message:e??"Request timed out."})}}class W2 extends bs{}class X2 extends bs{}class Q2 extends bs{}class Z2 extends bs{}class eC extends bs{}class tC extends bs{}class nC extends bs{}class sC extends bs{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l7=/^[a-z][a-z0-9+.-]*:/i,c7=t=>l7.test(t);let j0=t=>(j0=Array.isArray,j0(t));const u7=j0;let d7=u7;const XE=d7;function h7(t){if(!t)return!0;for(const e in t)return!1;return!0}function f7(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const m7=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ri(`${t} must be an integer`);if(e<0)throw new ri(`${t} must be a positive integer`);return e},p7=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g7=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x7(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const y7=()=>{var t,e,n,s,a;const l=x7();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pl,"X-Stainless-OS":ZE(Deno.build.os),"X-Stainless-Arch":QE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pl,"X-Stainless-OS":ZE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":QE((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const u=v7();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function v7(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const QE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ZE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Hh;const b7=()=>Hh??(Hh=y7());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _7(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function iC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function w7(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return iC({start(){},async pull(n){const{done:s,value:a}=await e.next();s?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function aC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function E7(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N7=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rC=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Hg(t,e,n){return rC(),new File(t,e??"unknown_file",n)}function T7(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const S7=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",C7=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&oC(t),A7=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function I7(t,e,n){if(rC(),t=await t,C7(t))return t instanceof File?t:Hg([await t.arrayBuffer()],t.name);if(A7(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Hg(await D0(a),e,n)}const s=await D0(t);if(e||(e=T7(t)),!(n!=null&&n.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return Hg(s,e,n)}async function D0(t){var e,n,s,a,l;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(oC(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(S7(t))try{for(var h=!0,m=_i(t),f;f=await m.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const y=a;u.push(...await D0(y))}}catch(y){n={error:y}}finally{try{!h&&!e&&(s=m.return)&&await s.call(m)}finally{if(n)throw n.error}}else{const y=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${y?`; constructor: ${y}`:""}${R7(t)}`)}return u}function R7(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lC{constructor(e){this._client=e}}lC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const eN=Object.freeze(Object.create(null)),j7=(t=cC)=>(function(n,...s){if(n.length===1)return n[0];let a=!1;const l=[],u=n.reduce((y,_,w)=>{var T,M,z;/[?#]/.test(_)&&(a=!0);const k=s[w];let q=(a?encodeURIComponent:t)(""+k);return w!==s.length&&(k==null||typeof k=="object"&&k.toString===((z=Object.getPrototypeOf((M=Object.getPrototypeOf((T=k.hasOwnProperty)!==null&&T!==void 0?T:eN))!==null&&M!==void 0?M:eN))===null||z===void 0?void 0:z.toString))&&(q=k+"",l.push({start:y.length+_.length,length:q.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),y+_+(w===s.length?"":q)},""),h=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=m.exec(h))!==null;)l.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(l.sort((y,_)=>y.start-_.start),l.length>0){let y=0;const _=l.reduce((w,T)=>{const M=" ".repeat(T.start-y),z="^".repeat(T.length);return y=T.start+T.length,w+M+z},"");throw new ri(`Path parameters result in path with invalid segments:
${l.map(w=>w.error).join(`
`)}
${u}
${_}`)}return u}),Gh=j7(cC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uC extends lC{create(e,n){var s;const{api_version:a=this._client.apiVersion}=e,l=Ff(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ri("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ri("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Gh`/${a}/interactions`,Object.assign(Object.assign({body:l},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(Gh`/${a}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(Gh`/${a}/interactions/${e}/cancel`,s)}get(e,n={},s){var a;const l=n??{},{api_version:u=this._client.apiVersion}=l,h=Ff(l,["api_version"]);return this._client.get(Gh`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}uC._key=Object.freeze(["interactions"]);class dC extends uC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D7(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let s=0;for(const a of t)n.set(a,s),s+=a.length;return n}let $h;function ty(t){let e;return($h??(e=new globalThis.TextEncoder,$h=e.encode.bind(e)))(t)}let Kh;function tN(t){let e;return(Kh??(e=new globalThis.TextDecoder,Kh=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tm{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ty(e):e;this.buffer=D7([this.buffer,n]);const s=[];let a;for(;(a=k7(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(tN(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,u=tN(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Tm.NEWLINE_CHARS=new Set([`
`,"\r"]);Tm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function k7(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function M7(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bf={off:0,error:200,warn:300,info:400,debug:500},nN=(t,e,n)=>{if(t){if(f7(Bf,t))return t;gs(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Bf))}`)}};function _u(){}function Jh(t,e,n){return!e||Bf[t]>Bf[n]?_u:e[t].bind(e)}const P7={error:_u,warn:_u,info:_u,debug:_u};let sN=new WeakMap;function gs(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return P7;const a=sN.get(n);if(a&&a[0]===s)return a[1];const l={error:Jh("error",n,s),warn:Jh("warn",n,s),info:Jh("info",n,s),debug:Jh("debug",n,s)};return sN.set(n,[s,l]),l}const Eo=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ul{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let a=!1;const l=s?gs(s):console;function u(){return bi(this,arguments,function*(){var m,f,y,_;if(a)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let w=!1;try{try{for(var T=!0,M=_i(L7(e,n)),z;z=yield tt(M.next()),m=z.done,!m;T=!0){_=z.value,T=!1;const k=_;if(!w)if(k.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield tt(JSON.parse(k.data))}catch(q){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),q}}}catch(k){f={error:k}}finally{try{!T&&!m&&(y=M.return)&&(yield tt(y.call(M)))}finally{if(f)throw f.error}}w=!0}catch(k){if(A0(k))return yield tt(void 0);throw k}finally{w||n.abort()}})}return new Ul(u,n,s)}static fromReadableStream(e,n,s){let a=!1;function l(){return bi(this,arguments,function*(){var m,f,y,_;const w=new Tm,T=aC(e);try{for(var M=!0,z=_i(T),k;k=yield tt(z.next()),m=k.done,!m;M=!0){_=k.value,M=!1;const q=_;for(const H of w.decode(q))yield yield tt(H)}}catch(q){f={error:q}}finally{try{!M&&!m&&(y=z.return)&&(yield tt(y.call(z)))}finally{if(f)throw f.error}}for(const q of w.flush())yield yield tt(q)})}function u(){return bi(this,arguments,function*(){var m,f,y,_;if(a)throw new ri("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let w=!1;try{try{for(var T=!0,M=_i(l()),z;z=yield tt(M.next()),m=z.done,!m;T=!0){_=z.value,T=!1;const k=_;w||k&&(yield yield tt(JSON.parse(k)))}}catch(k){f={error:k}}finally{try{!T&&!m&&(y=M.return)&&(yield tt(y.call(M)))}finally{if(f)throw f.error}}w=!0}catch(k){if(A0(k))return yield tt(void 0);throw k}finally{w||n.abort()}})}return new Ul(u,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),n.push(u)}return l.shift()}});return[new Ul(()=>a(e),this.controller,this.client),new Ul(()=>a(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return iC({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await n.next();if(l)return s.close();const u=ty(JSON.stringify(a)+`
`);s.enqueue(u)}catch(a){s.error(a)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function L7(t,e){return bi(this,arguments,function*(){var s,a,l,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ri("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ri("Attempted to iterate over a response with no body");const h=new U7,m=new Tm,f=aC(t.body);try{for(var y=!0,_=_i(V7(f)),w;w=yield tt(_.next()),s=w.done,!s;y=!0){u=w.value,y=!1;const T=u;for(const M of m.decode(T)){const z=h.decode(M);z&&(yield yield tt(z))}}}catch(T){a={error:T}}finally{try{!y&&!s&&(l=_.return)&&(yield tt(l.call(_)))}finally{if(a)throw a.error}}for(const T of m.flush()){const M=h.decode(T);M&&(yield yield tt(M))}})}function V7(t){return bi(this,arguments,function*(){var n,s,a,l;let u=new Uint8Array;try{for(var h=!0,m=_i(t),f;f=yield tt(m.next()),n=f.done,!n;h=!0){l=f.value,h=!1;const y=l;if(y==null)continue;const _=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?ty(y):y;let w=new Uint8Array(u.length+_.length);w.set(u),w.set(_,u.length),u=w;let T;for(;(T=M7(u))!==-1;)yield yield tt(u.slice(0,T)),u=u.slice(T)}}catch(y){s={error:y}}finally{try{!h&&!n&&(a=m.return)&&(yield tt(a.call(m)))}finally{if(s)throw s.error}}u.length>0&&(yield yield tt(u))})}class U7{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,a]=O7(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function O7(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function z7(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,u=await(async()=>{var h;if(e.options.stream)return gs(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ul.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const m=n.headers.get("content-type"),f=(h=m==null?void 0:m.split(";")[0])===null||h===void 0?void 0:h.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await n.json():await n.text()})();return gs(t).debug(`[${s}] response parsed`,Eo({retryOfRequestLogID:a,url:n.url,status:n.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ny extends Promise{constructor(e,n,s=z7){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new ny(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hC=Symbol("brand.privateNullableHeaders");function*F7(t){if(!t)return;if(hC in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,n;t instanceof Headers?n=t.entries():XE(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=XE(s[1])?s[1]:[s[1]];let u=!1;for(const h of l)h!==void 0&&(e&&!u&&(u=!0,yield[a,null]),yield[a,h])}}const mu=t=>{const e=new Headers,n=new Set;for(const s of t){const a=new Set;for(const[l,u]of F7(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),u===null?(e.delete(l),n.add(h)):(e.append(l,u),n.delete(h))}}return{[hC]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gg=t=>{var e,n,s,a,l,u;if(typeof globalThis.process<"u")return(s=(n=(e=fU)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fC;class Sm{constructor(e){var n,s,a,l,u,h,m,{baseURL:f=Gg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(n=Gg("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:_="v1beta"}=e,w=Ff(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:y,apiVersion:_},w),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(s=T.timeout)!==null&&s!==void 0?s:Sm.DEFAULT_TIMEOUT,this.logger=(a=T.logger)!==null&&a!==void 0?a:console;const M="warn";this.logLevel=M,this.logLevel=(u=(l=nN(T.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:nN(Gg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:M,this.fetchOptions=T.fetchOptions,this.maxRetries=(h=T.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(m=T.fetch)!==null&&m!==void 0?m:_7(),this.encoder=N7,this._options=T,this.apiKey=y,this.apiVersion=_,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=mu([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return mu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return mu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new ri(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Pl}`}defaultIdempotencyKey(){return`stainless-node-retry-${o7()}`}makeStatusError(e,n,s,a){return bs.generate(e,n,s,a)}buildURL(e,n,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=c7(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return h7(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(l.search=this.stringifyQuery(n)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:n},a)))}request(e,n=null){return new ny(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var a,l,u;const h=await e,m=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=m),await this.prepareOptions(h);const{req:f,url:y,timeout:_}=await this.buildRequest(h,{retryCount:m-n});await this.prepareRequest(f,{url:y,options:h});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=s===void 0?"":`, retryOf: ${s}`,M=Date.now();if(gs(this).debug(`[${w}] sending request`,Eo({retryOfRequestLogID:s,method:h.method,url:y,options:h,headers:f.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new R0;const z=new AbortController,k=await this.fetchWithTimeout(y,f,_,z).catch(I0),q=Date.now();if(k instanceof globalThis.Error){const P=`retrying, ${n} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new R0;const W=A0(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(n)return gs(this).info(`[${w}] connection ${W?"timed out":"failed"} - ${P}`),gs(this).debug(`[${w}] connection ${W?"timed out":"failed"} (${P})`,Eo({retryOfRequestLogID:s,url:y,durationMs:q-M,message:k.message})),this.retryRequest(h,n,s??w);throw gs(this).info(`[${w}] connection ${W?"timed out":"failed"} - error; no more retries left`),gs(this).debug(`[${w}] connection ${W?"timed out":"failed"} (error; no more retries left)`,Eo({retryOfRequestLogID:s,url:y,durationMs:q-M,message:k.message})),W?new Y2:new Nm({cause:k})}const H=`[${w}${T}] ${f.method} ${y} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${q-M}ms`;if(!k.ok){const P=await this.shouldRetry(k);if(n&&P){const R=`retrying, ${n} attempts remaining`;return await E7(k.body),gs(this).info(`${H} - ${R}`),gs(this).debug(`[${w}] response error (${R})`,Eo({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,durationMs:q-M})),this.retryRequest(h,n,s??w,k.headers)}const W=P?"error; no more retries left":"error; not retryable";gs(this).info(`${H} - ${W}`);const te=await k.text().catch(R=>I0(R).message),L=p7(te),C=L?void 0:te;throw gs(this).debug(`[${w}] response error (${W})`,Eo({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,message:C,durationMs:Date.now()-M})),this.makeStatusError(k.status,L,C,k.headers)}return gs(this).info(H),gs(this).debug(`[${w}] response start`,Eo({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,durationMs:q-M})),{response:k,options:h,controller:z,requestLogID:w,retryOfRequestLogID:s,startTime:M}}async fetchWithTimeout(e,n,s,a){const l=n||{},{signal:u,method:h}=l,m=Ff(l,["signal","method"]);u&&u.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),y=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},y?{duplex:"half"}:{}),{method:"GET"}),m);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,a){var l;let u;const h=a==null?void 0:a.get("retry-after-ms");if(h){const f=parseFloat(h);Number.isNaN(f)||(u=f)}const m=a==null?void 0:a.get("retry-after");if(m&&!u){const f=parseFloat(m);Number.isNaN(f)?u=Date.parse(m)-Date.now():u=f*1e3}if(!(u&&0<=u&&u<60*1e3)){const f=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,f)}return await g7(u),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const l=n-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,a,l;const u=Object.assign({},e),{method:h,path:m,query:f,defaultBaseURL:y}=u,_=this.buildURL(m,f,y);"timeout"in u&&m7("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:w,body:T}=this.buildBody({options:u}),M=await this.buildHeaders({options:e,method:h,bodyHeaders:w,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:M},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=mu([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),b7()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=mu([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:w7(e)}:this.encoder({body:e,headers:s})}}Sm.DEFAULT_TIMEOUT=6e4;class Jn extends Sm{constructor(){super(...arguments),this.interactions=new dC(this)}}fC=Jn;Jn.GeminiNextGenAPIClient=fC;Jn.GeminiNextGenAPIClientError=ri;Jn.APIError=bs;Jn.APIConnectionError=Nm;Jn.APIConnectionTimeoutError=Y2;Jn.APIUserAbortError=R0;Jn.NotFoundError=Z2;Jn.ConflictError=eC;Jn.RateLimitError=nC;Jn.BadRequestError=W2;Jn.AuthenticationError=X2;Jn.InternalServerError=sC;Jn.PermissionDeniedError=Q2;Jn.UnprocessableEntityError=tC;Jn.toFile=I7;Jn.Interactions=dC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B7(t,e){const n={},s=p(t,["name"]);return s!=null&&g(n,["_url","name"],s),n}function q7(t,e){const n={},s=p(t,["name"]);return s!=null&&g(n,["_url","name"],s),n}function H7(t,e){const n={},s=p(t,["sdkHttpResponse"]);return s!=null&&g(n,["sdkHttpResponse"],s),n}function G7(t,e){const n={},s=p(t,["sdkHttpResponse"]);return s!=null&&g(n,["sdkHttpResponse"],s),n}function $7(t,e,n){const s={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=p(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=p(t,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=p(t,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=p(t,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const m=p(t,["learningRate"]);if(e!==void 0&&m!=null&&g(e,["tuningTask","hyperparameters","learningRate"],m),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function K7(t,e,n){const s={};let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const T=p(t,["validationDataset"]);e!==void 0&&T!=null&&g(e,["supervisedTuningSpec"],iN(T))}else if(a==="PREFERENCE_TUNING"){const T=p(t,["validationDataset"]);e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec"],iN(T))}const l=p(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=p(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=p(t,["epochCount"]);e!==void 0&&T!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(h==="PREFERENCE_TUNING"){const T=p(t,["epochCount"]);e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let m=p(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const T=p(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(m==="PREFERENCE_TUNING"){const T=p(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let f=p(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const T=p(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(f==="PREFERENCE_TUNING"){const T=p(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let y=p(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const T=p(t,["adapterSize"]);e!==void 0&&T!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(y==="PREFERENCE_TUNING"){const T=p(t,["adapterSize"]);e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=p(t,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const w=p(t,["beta"]);return e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),s}function J7(t,e){const n={},s=p(t,["baseModel"]);s!=null&&g(n,["baseModel"],s);const a=p(t,["preTunedModel"]);a!=null&&g(n,["preTunedModel"],a);const l=p(t,["trainingDataset"]);l!=null&&aB(l);const u=p(t,["config"]);return u!=null&&$7(u,n),n}function Y7(t,e){const n={},s=p(t,["baseModel"]);s!=null&&g(n,["baseModel"],s);const a=p(t,["preTunedModel"]);a!=null&&g(n,["preTunedModel"],a);const l=p(t,["trainingDataset"]);l!=null&&rB(l,n,e);const u=p(t,["config"]);return u!=null&&K7(u,n,e),n}function W7(t,e){const n={},s=p(t,["name"]);return s!=null&&g(n,["_url","name"],s),n}function X7(t,e){const n={},s=p(t,["name"]);return s!=null&&g(n,["_url","name"],s),n}function Q7(t,e,n){const s={},a=p(t,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=p(t,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function Z7(t,e,n){const s={},a=p(t,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=p(t,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function eB(t,e){const n={},s=p(t,["config"]);return s!=null&&Q7(s,n),n}function tB(t,e){const n={},s=p(t,["config"]);return s!=null&&Z7(s,n),n}function nB(t,e){const n={},s=p(t,["sdkHttpResponse"]);s!=null&&g(n,["sdkHttpResponse"],s);const a=p(t,["nextPageToken"]);a!=null&&g(n,["nextPageToken"],a);const l=p(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>mC(h))),g(n,["tuningJobs"],u)}return n}function sB(t,e){const n={},s=p(t,["sdkHttpResponse"]);s!=null&&g(n,["sdkHttpResponse"],s);const a=p(t,["nextPageToken"]);a!=null&&g(n,["nextPageToken"],a);const l=p(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>k0(h))),g(n,["tuningJobs"],u)}return n}function iB(t,e){const n={},s=p(t,["name"]);s!=null&&g(n,["model"],s);const a=p(t,["name"]);return a!=null&&g(n,["endpoint"],a),n}function aB(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=p(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(n,["examples","examples"],a)}return n}function rB(t,e,n){const s={};let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=p(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function mC(t,e){const n={},s=p(t,["sdkHttpResponse"]);s!=null&&g(n,["sdkHttpResponse"],s);const a=p(t,["name"]);a!=null&&g(n,["name"],a);const l=p(t,["state"]);l!=null&&g(n,["state"],R2(l));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const h=p(t,["tuningTask","startTime"]);h!=null&&g(n,["startTime"],h);const m=p(t,["tuningTask","completeTime"]);m!=null&&g(n,["endTime"],m);const f=p(t,["updateTime"]);f!=null&&g(n,["updateTime"],f);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const _=p(t,["baseModel"]);_!=null&&g(n,["baseModel"],_);const w=p(t,["_self"]);return w!=null&&g(n,["tunedModel"],iB(w)),n}function k0(t,e){const n={},s=p(t,["sdkHttpResponse"]);s!=null&&g(n,["sdkHttpResponse"],s);const a=p(t,["name"]);a!=null&&g(n,["name"],a);const l=p(t,["state"]);l!=null&&g(n,["state"],R2(l));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const h=p(t,["startTime"]);h!=null&&g(n,["startTime"],h);const m=p(t,["endTime"]);m!=null&&g(n,["endTime"],m);const f=p(t,["updateTime"]);f!=null&&g(n,["updateTime"],f);const y=p(t,["error"]);y!=null&&g(n,["error"],y);const _=p(t,["description"]);_!=null&&g(n,["description"],_);const w=p(t,["baseModel"]);w!=null&&g(n,["baseModel"],w);const T=p(t,["tunedModel"]);T!=null&&g(n,["tunedModel"],T);const M=p(t,["preTunedModel"]);M!=null&&g(n,["preTunedModel"],M);const z=p(t,["supervisedTuningSpec"]);z!=null&&g(n,["supervisedTuningSpec"],z);const k=p(t,["preferenceOptimizationSpec"]);k!=null&&g(n,["preferenceOptimizationSpec"],k);const q=p(t,["tuningDataStats"]);q!=null&&g(n,["tuningDataStats"],q);const H=p(t,["encryptionSpec"]);H!=null&&g(n,["encryptionSpec"],H);const P=p(t,["partnerModelTuningSpec"]);P!=null&&g(n,["partnerModelTuningSpec"],P);const W=p(t,["customBaseModel"]);W!=null&&g(n,["customBaseModel"],W);const te=p(t,["experiment"]);te!=null&&g(n,["experiment"],te);const L=p(t,["labels"]);L!=null&&g(n,["labels"],L);const C=p(t,["outputUri"]);C!=null&&g(n,["outputUri"],C);const A=p(t,["pipelineJob"]);A!=null&&g(n,["pipelineJob"],A);const R=p(t,["serviceAccount"]);R!=null&&g(n,["serviceAccount"],R);const U=p(t,["tunedModelDisplayName"]);U!=null&&g(n,["tunedModelDisplayName"],U);const B=p(t,["veoTuningSpec"]);return B!=null&&g(n,["veoTuningSpec"],B),n}function oB(t,e){const n={},s=p(t,["sdkHttpResponse"]);s!=null&&g(n,["sdkHttpResponse"],s);const a=p(t,["name"]);a!=null&&g(n,["name"],a);const l=p(t,["metadata"]);l!=null&&g(n,["metadata"],l);const u=p(t,["done"]);u!=null&&g(n,["done"],u);const h=p(t,["error"]);return h!=null&&g(n,["error"],h),n}function iN(t,e){const n={},s=p(t,["gcsUri"]);s!=null&&g(n,["validationDatasetUri"],s);const a=p(t,["vertexDatasetResource"]);return a!=null&&g(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lB extends Ka{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ho(Ba.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:_0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=X7(e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>k0(y))}else{const f=W7(e);return h=Pe("{name}",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>mC(y))}}async listInternal(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=tB(e);return h=Pe("tuningJobs",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=sB(y),w=new RE;return Object.assign(w,_),w})}else{const f=eB(e);return h=Pe("tunedModels",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=nB(y),w=new RE;return Object.assign(w,_),w})}}async cancel(e){var n,s,a,l;let u,h="",m={};if(this.apiClient.isVertexAI()){const f=q7(e);return h=Pe("{name}:cancel",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=G7(y),w=new jE;return Object.assign(w,_),w})}else{const f=B7(e);return h=Pe("{name}:cancel",f._url),m=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(_=>{const w=_;return w.sdkHttpResponse={headers:y.headers},w})),u.then(y=>{const _=H7(y),w=new jE;return Object.assign(w,_),w})}}async tuneInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=Y7(e,e);return l=Pe("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>k0(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=J7(e);return l=Pe("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:m.headers},y})),a.then(m=>oB(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uB=1024*1024*8,dB=3,hB=1e3,fB=2,qf="x-goog-upload-status";async function mB(t,e,n){var s;const a=await pC(t,e,n),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[qf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function pB(t,e,n){var s;const a=await pC(t,e,n),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[qf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=N2(l),h=new Yx;return Object.assign(h,u),h}async function pC(t,e,n){var s,a;let l=0,u=0,h=new w0(new Response),m="upload";for(l=t.size;u<l;){const f=Math.min(uB,l-u),y=t.slice(u,u+f);u+f>=l&&(m+=", finalize");let _=0,w=hB;for(;_<dB&&(h=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(f)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[qf]));)_++,await xB(w),w=w*fB;if(u+=f,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[qf])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function gB(t){return{size:t.size,type:t.type}}function xB(t){return new Promise(e=>setTimeout(e,t))}class yB{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mB(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pB(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vB{create(e,n,s){return new bB(e,n,s)}}class bB{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aN="x-goog-api-key";class _B{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(aN)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(aN,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wB="gl-node/";class EB{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Jn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=xU(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new _B(this.apiKey);this.apiClient=new gF({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:wB+"web",uploader:new yB,downloader:new cB}),this.models=new PF(this.apiClient),this.live=new IF(this.apiClient,a,new vB),this.batches=new $O(this.apiClient),this.chats=new C8(this.models,this.apiClient),this.caches=new N8(this.apiClient),this.files=new V8(this.apiClient),this.operations=new LF(this.apiClient),this.authTokens=new QF(this.apiClient),this.tunings=new lB(this.apiClient),this.fileSearchStores=new r7(this.apiClient)}}const NB=new EB({apiKey:""}),TB=async(t,e="formal")=>{try{const n=`Escreva um pargrafo curto e profissional para uma newsletter interna de empresa sobre o tpico: "${t}". O tom deve ser ${e}. Mantenha o texto pronto para publicao, sem introdues como 'Aqui est o texto'.`;return(await NB.models.generateContent({model:"gemini-3-flash-preview",contents:n})).text||"No foi possvel gerar o contedo."}catch(n){return console.error("Gemini API Error:",n),"Erro ao comunicar com a IA."}},SB=()=>{const t=qa(),{currentUser:e}=Kn(),[n,s]=I.useState("editor"),[a,l]=I.useState([]),[u,h]=I.useState(!1),[m,f]=I.useState(null),[y,_]=I.useState(""),[w,T]=I.useState("Geral"),[M,z]=I.useState(!0),[k,q]=I.useState("https://picsum.photos/800/400"),[H,P]=I.useState([{id:"1",type:"header",content:"Novo Ttulo",style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937"}},{id:"2",type:"paragraph",content:"Comece a escrever sua notcia...",style:{fontSize:"16px",color:"#4b5563",textAlign:"left"}}]),[W,te]=I.useState(!1),[L,C]=I.useState(""),[A,R]=I.useState(!1),[U,B]=I.useState(!1);I.useEffect(()=>{n==="list"&&$()},[n,e]);const $=async()=>{if(e){h(!0);try{const pe=(await $x()).filter(Se=>Se.authorUid===e.uid||Se.author===e.name);l(pe)}catch(Y){console.error("Erro ao carregar posts",Y)}finally{h(!1)}}},F=Y=>{f(Y.id),_(Y.title),T(Y.category),z(Y.isPublic??!0),q(Y.thumbnail),P(Y.blocks),s("editor")},je=async Y=>{if(window.confirm("Tem certeza que deseja excluir esta publicao?"))try{await WV(Y),$()}catch{alert("Erro ao excluir postagem.")}},ze=()=>{f(null),_(""),T("Geral"),z(!0),q("https://picsum.photos/800/400"),P([{id:"1",type:"header",content:"Novo Ttulo",style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937"}},{id:"2",type:"paragraph",content:"Comece a escrever sua notcia...",style:{fontSize:"16px",color:"#4b5563",textAlign:"left"}}]),s("editor")},j=Y=>{let pe="Novo bloco...",Se={fontSize:"16px",color:"#333"},De="";Y==="image"?pe="https://picsum.photos/800/400":Y==="header"?(pe="Novo Ttulo",Se={fontSize:"20px",fontWeight:"bold",color:"#111827"}):Y==="button"?(pe="Clique Aqui",De="https://google.com",Se={backgroundColor:"#059669",color:"#ffffff",fontSize:"14px",fontWeight:"bold",textAlign:"center",padding:"12px 24px",borderRadius:"8px"}):Y==="side-by-side"&&(pe="Descreva aqui o contedo que ficar ao lado da imagem.",De="https://picsum.photos/600/400",Se={layoutDirection:"row"});const ut={id:Date.now().toString(),type:Y,content:pe,url:De||void 0,style:Se};P([...H,ut])},se=Y=>{P(H.filter(pe=>pe.id!==Y))},K=(Y,pe)=>{const Se=[...H];pe==="up"&&Y>0?[Se[Y-1],Se[Y]]=[Se[Y],Se[Y-1]]:pe==="down"&&Y<Se.length-1&&([Se[Y+1],Se[Y]]=[Se[Y],Se[Y+1]]),P(Se)},ne=(Y,pe)=>{P(H.map(Se=>Se.id===Y?{...Se,content:pe}:Se))},J=(Y,pe)=>{P(H.map(Se=>Se.id===Y?{...Se,url:pe}:Se))},O=(Y,pe)=>{P(H.map(Se=>Se.id===Y?{...Se,style:{...Se.style,...pe}}:Se))},Z=async()=>{if(!L)return;R(!0);const Y=await TB(L),pe={id:Date.now().toString(),type:"paragraph",content:Y,style:{fontSize:"16px",color:"#4b5563"}};P([...H,pe]),R(!1),C("")},oe=async()=>{if(!y)return alert("O ttulo  obrigatrio");if(!e)return alert("Voc precisa estar logado para publicar");B(!0);try{const Y=H.map(Se=>({...Se,url:Se.url||null,style:{...Se.style}})),pe={title:y,category:w,isPublic:M,thumbnail:k,blocks:Y,date:new Date().toISOString(),published:!0,author:e.name,authorUid:e.uid,authorAvatar:e.avatar||null,externalUrl:null};m?(await YV(m,pe),alert("Postagem atualizada com sucesso!")):(await JV(pe),alert("Postagem publicada com sucesso!")),t("/dashboard")}catch(Y){console.error("Erro ao salvar post:",Y),alert(`Erro ao salvar postagem: ${Y.message||"Erro desconhecido"}`)}finally{B(!1)}},ee=(Y,pe)=>{const Se="w-full bg-white border border-slate-200 rounded-lg p-3 text-sm text-slate-900 focus:ring-2 focus:ring-emerald-500 shadow-sm transition-all outline-none";return r.jsxs("div",{className:"relative group border border-slate-100 hover:border-emerald-300 rounded-2xl p-5 bg-white transition-all shadow-sm",children:[r.jsxs("div",{className:"absolute -top-3 right-6 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white shadow-xl rounded-full px-3 py-1.5 border border-slate-200 z-20",children:[r.jsxs("div",{className:"flex gap-0.5 mr-2 pr-2 border-r border-slate-100",children:[r.jsx("button",{onClick:()=>K(pe,"up"),disabled:pe===0,className:"p-1 text-slate-400 hover:text-emerald-600 disabled:opacity-20",children:r.jsx(Lu,{size:16})}),r.jsx("button",{onClick:()=>K(pe,"down"),disabled:pe===H.length-1,className:"p-1 text-slate-400 hover:text-emerald-600 disabled:opacity-20",children:r.jsx(Pu,{size:16})})]}),r.jsx("button",{onClick:()=>se(Y.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg",title:"Remover",children:r.jsx(Bt,{size:16})}),Y.type==="side-by-side"&&r.jsxs("button",{onClick:()=>O(Y.id,{layoutDirection:Y.style.layoutDirection==="row"?"row-reverse":"row"}),className:"p-1.5 text-emerald-600 hover:bg-emerald-50 rounded-lg flex items-center gap-1 text-xs font-bold",title:"Inverter Lados",children:[r.jsx(GR,{size:14})," Inverter"]}),Y.type!=="image"&&Y.type!=="button"&&Y.type!=="side-by-side"&&r.jsx("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l border-slate-100",children:r.jsx("input",{type:"color",value:Y.style.color||"#000000",onChange:De=>O(Y.id,{color:De.target.value}),className:"w-6 h-6 p-0 border-0 rounded-full overflow-hidden cursor-pointer shadow-sm",title:"Cor do Texto"})})]}),r.jsx("div",{className:"space-y-4",children:Y.type==="image"?r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"bg-slate-50 h-48 rounded-xl flex items-center justify-center overflow-hidden border border-slate-200",children:r.jsx("img",{src:Y.content,alt:"Preview",className:"h-full object-cover"})}),r.jsxs("div",{className:"relative",children:[r.jsx(Ki,{className:"absolute left-3 top-3 text-slate-400",size:16}),r.jsx("input",{type:"text",value:Y.content,onChange:De=>ne(Y.id,De.target.value),className:`${Se} pl-10`,placeholder:"URL da Imagem..."})]})]}):Y.type==="side-by-side"?r.jsxs("div",{className:`flex flex-col md:flex-row gap-6 items-center ${Y.style.layoutDirection==="row-reverse"?"md:flex-row-reverse":""}`,children:[r.jsxs("div",{className:"w-full md:w-1/2 space-y-2",children:[r.jsx("div",{className:"aspect-video bg-slate-50 rounded-xl overflow-hidden border border-slate-200",children:r.jsx("img",{src:Y.url,alt:"",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"relative",children:[r.jsx(Ki,{className:"absolute left-3 top-3 text-slate-400",size:16}),r.jsx("input",{type:"text",value:Y.url||"",onChange:De=>J(Y.id,De.target.value),className:`${Se} pl-10 text-xs`,placeholder:"URL da Imagem lateral..."})]})]}),r.jsxs("div",{className:"w-full md:w-1/2",children:[r.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1 block",children:"Texto Lateral"}),r.jsx("textarea",{value:Y.content,onChange:De=>ne(Y.id,De.target.value),className:`${Se} min-h-[140px]`,placeholder:"Escreva aqui..."})]})]}):Y.type==="button"?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1 block",children:"Texto do Boto"}),r.jsxs("div",{className:"relative",children:[r.jsx(Nu,{className:"absolute left-3 top-3 text-slate-400",size:16}),r.jsx("input",{type:"text",value:Y.content,onChange:De=>ne(Y.id,De.target.value),className:`${Se} pl-10`,placeholder:"Ex: Acessar Link"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1 block",children:"Link de Destino (URL)"}),r.jsxs("div",{className:"relative",children:[r.jsx($f,{className:"absolute left-3 top-3 text-slate-400",size:16}),r.jsx("input",{type:"text",value:Y.url||"",onChange:De=>J(Y.id,De.target.value),className:`${Se} pl-10`,placeholder:"Ex: https://..."})]})]})]}),r.jsx("div",{className:"p-4 bg-slate-50 border border-slate-100 rounded-xl flex justify-center shadow-inner",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-tight",children:"Estilo do Boto:"}),r.jsx("input",{type:"color",value:Y.style.backgroundColor||"#059669",onChange:De=>O(Y.id,{backgroundColor:De.target.value}),className:"w-8 h-8 p-0 border-0 rounded-lg cursor-pointer shadow-sm",title:"Cor de Fundo"}),r.jsx("input",{type:"color",value:Y.style.color||"#ffffff",onChange:De=>O(Y.id,{color:De.target.value}),className:"w-8 h-8 p-0 border-0 rounded-lg cursor-pointer shadow-sm",title:"Cor do Texto"}),r.jsx("div",{className:"h-8 w-px bg-slate-200 mx-2"}),r.jsx("div",{className:"px-4 py-2 rounded-lg text-sm font-bold shadow-sm",style:{backgroundColor:Y.style.backgroundColor,color:Y.style.color},children:Y.content||"Preview"})]})})]}):r.jsx("textarea",{value:Y.content,onChange:De=>ne(Y.id,De.target.value),style:{...Y.style},className:`${Se} resize-y min-h-[100px] border-none bg-transparent shadow-none focus:ring-0 px-0`,placeholder:Y.type==="header"?"Digite o ttulo aqui...":"Escreva o pargrafo aqui..."})}),r.jsx("div",{className:"absolute bottom-2 right-4 text-[9px] uppercase text-slate-300 font-black tracking-[0.2em] pointer-events-none select-none flex items-center gap-1",children:Y.type})]},Y.id)},Ne=Y=>{const pe={...Y.style};switch(Y.type){case"header":return r.jsx("h2",{style:pe,className:"mb-4 text-3xl font-extrabold",children:Y.content},Y.id);case"image":return r.jsx("img",{src:Y.content,alt:"Content",className:"w-full rounded-2xl shadow-lg mb-8"},Y.id);case"side-by-side":return r.jsxs("div",{className:`flex flex-col md:flex-row gap-8 items-center mb-10 ${Y.style.layoutDirection==="row-reverse"?"md:flex-row-reverse":""}`,children:[r.jsx("div",{className:"w-full md:w-1/2",children:r.jsx("img",{src:Y.url,alt:"",className:"w-full rounded-2xl shadow-md object-cover"})}),r.jsx("div",{className:"w-full md:w-1/2 text-slate-700 leading-relaxed text-lg italic md:not-italic",children:Y.content})]},Y.id);case"quote":return r.jsxs("blockquote",{style:pe,className:"border-l-8 border-emerald-500 pl-6 py-4 italic my-8 bg-slate-50 text-xl text-slate-600 rounded-r-2xl",children:['"',Y.content,'"']},Y.id);case"button":return r.jsx("div",{className:"my-10 text-center",children:r.jsx("a",{href:Y.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block transition-all hover:scale-105 shadow-xl hover:shadow-2xl px-10 py-4 font-black uppercase tracking-wider",style:{backgroundColor:Y.style.backgroundColor,color:Y.style.color,borderRadius:"12px",fontSize:"16px",textDecoration:"none"},children:Y.content})},Y.id);default:return r.jsx("p",{style:pe,className:"mb-6 leading-relaxed text-slate-700 text-lg whitespace-pre-wrap",children:Y.content},Y.id)}};return r.jsxs("div",{className:"h-[calc(100vh-100px)] flex flex-col gap-4",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-2 flex justify-between items-center shrink-0",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>s("editor"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all ${n==="editor"?"bg-emerald-600 text-white shadow-lg shadow-emerald-100":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(gj,{size:20})," ",m?"Editando Notcia":"Editor"]}),r.jsxs("button",{onClick:()=>s("list"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all ${n==="list"?"bg-emerald-600 text-white shadow-lg shadow-emerald-100":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(F_,{size:20})," Minhas Publicaes"]})]}),n==="editor"&&m&&r.jsx("button",{onClick:ze,className:"text-xs text-emerald-600 font-bold hover:underline px-4",children:"Criar Nova Notcia (Limpar)"})]}),n==="list"?r.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col animate-fade-in",children:[r.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Suas publicaes"}),r.jsxs("p",{className:"text-slate-500 text-sm",children:["Gerenciando contedo como: ",r.jsx("span",{className:"font-bold text-emerald-600",children:e==null?void 0:e.name})]})]}),r.jsxs("button",{onClick:ze,className:"bg-emerald-600 text-white px-5 py-2 rounded-xl text-xs font-black uppercase tracking-wider hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-100 flex items-center gap-2",children:[r.jsx(Vn,{size:16})," Nova Postagem"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:u?r.jsxs("div",{className:"flex flex-col items-center justify-center p-20 gap-3 text-slate-400",children:[r.jsx(Je,{className:"animate-spin",size:40}),r.jsx("p",{className:"font-bold",children:"Buscando seus posts..."})]}):a.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(Y=>r.jsxs("div",{className:"flex gap-5 p-5 border border-slate-100 rounded-3xl hover:shadow-xl hover:border-emerald-100 transition-all bg-white group",children:[r.jsx("img",{src:Y.thumbnail,alt:"",className:"w-32 h-32 object-cover rounded-2xl shadow-sm group-hover:scale-105 transition-transform"}),r.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-[10px] uppercase font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-lg border border-emerald-100",children:Y.category}),Y.isPublic?r.jsxs("span",{className:"text-[10px] uppercase font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-lg border border-blue-100 flex items-center gap-1",children:[r.jsx(ja,{size:10})," Pblico"]}):r.jsxs("span",{className:"text-[10px] uppercase font-black text-slate-500 bg-slate-50 px-2 py-0.5 rounded-lg border border-slate-200 flex items-center gap-1",children:[r.jsx(Un,{size:10})," Interno"]})]}),r.jsx("h3",{className:"font-bold text-slate-800 mt-2 line-clamp-2 leading-snug",children:Y.title}),r.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center gap-1 mt-1 font-bold",children:[r.jsx(ns,{size:12})," ",new Date(Y.date).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs("button",{onClick:()=>F(Y),className:"flex-1 flex items-center justify-center gap-2 py-2 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-emerald-600 hover:text-white transition-all shadow-sm",children:[r.jsx(QD,{size:14})," Editar"]}),r.jsx("button",{onClick:()=>je(Y.id),className:"p-2 bg-slate-50 text-slate-400 hover:text-red-600 rounded-xl transition-colors border border-transparent hover:border-red-100",children:r.jsx(Bt,{size:16})})]})]})]},Y.id))}):r.jsxs("div",{className:"text-center py-32 text-slate-400",children:[r.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(F_,{size:40,className:"opacity-20"})}),r.jsx("p",{className:"text-xl font-bold text-slate-500",children:"Nenhuma postagem encontrada."}),r.jsx("button",{onClick:ze,className:"text-emerald-600 font-bold hover:underline mt-2",children:"Clique para criar sua primeira notcia"})]})})]}):r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 flex-1 overflow-hidden relative animate-fade-in",children:[r.jsxs("div",{className:`flex-1 flex flex-col bg-white rounded-[2rem] shadow-sm border border-slate-200 overflow-hidden transition-all duration-500 ${W?"hidden lg:flex":"flex"}`,children:[r.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white rounded-lg border border-slate-200 shadow-sm text-slate-500",children:r.jsx(Da,{size:18})}),r.jsx("span",{className:"font-black text-slate-800 uppercase tracking-widest text-xs",children:"Configurao do Contedo"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>te(!W),className:`flex items-center gap-2 px-5 py-2 text-sm font-bold rounded-xl transition-all shadow-sm border ${W?"bg-emerald-50 border-emerald-100 text-emerald-700":"bg-white border-slate-200 text-emerald-600 hover:bg-emerald-50 hover:border-emerald-100"}`,children:[W?r.jsx(Kf,{size:18}):r.jsx(Ra,{size:18}),W?"Voltar para Editor":"Visualizar Post"]}),r.jsxs("button",{onClick:oe,disabled:U,className:"flex items-center gap-2 px-6 py-2 text-sm font-bold text-white bg-emerald-600 rounded-xl hover:bg-emerald-700 disabled:opacity-50 shadow-lg shadow-emerald-100",children:[U?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18}),m?"Salvar Alteraes":"Publicar Notcia"]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx("input",{type:"text",value:y,onChange:Y=>_(Y.target.value),className:"w-full text-4xl font-black text-slate-900 bg-transparent border-none focus:ring-0 placeholder:text-slate-200 transition-all outline-none",placeholder:"TTULO DA NOTCIA..."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 bg-slate-50 p-5 rounded-3xl border border-slate-200 shadow-inner",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 ml-1",children:"Categoria"}),r.jsxs("div",{className:"relative",children:[r.jsx(MN,{size:16,className:"absolute left-3 top-3 text-slate-400"}),r.jsxs("select",{value:w,onChange:Y=>T(Y.target.value),className:"bg-white border border-slate-200 text-slate-900 text-sm rounded-xl focus:ring-emerald-500 focus:border-emerald-500 block w-full p-2.5 pl-10 shadow-sm transition-all outline-none",children:[r.jsx("option",{value:"Geral",children:"Geral"}),r.jsx("option",{value:"RH",children:"RH"}),r.jsx("option",{value:"TI",children:"TI"}),r.jsx("option",{value:"Segurana",children:"Segurana"}),r.jsx("option",{value:"Eventos",children:"Eventos"}),r.jsx("option",{value:"Financeiro",children:"Financeiro"}),r.jsx("option",{value:"Institucional",children:"Institucional"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 ml-1",children:"Visibilidade"}),r.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-slate-200",children:[r.jsxs("button",{onClick:()=>z(!0),className:`flex-1 flex items-center justify-center gap-2 py-1.5 rounded-lg text-xs font-bold transition-all ${M?"bg-emerald-600 text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(ja,{size:14})," Pblico"]}),r.jsxs("button",{onClick:()=>z(!1),className:`flex-1 flex items-center justify-center gap-2 py-1.5 rounded-lg text-xs font-bold transition-all ${M?"text-slate-500 hover:bg-slate-50":"bg-slate-700 text-white shadow-sm"}`,children:[r.jsx(Un,{size:14})," Interno"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 ml-1",children:"Imagem de Capa (URL)"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ki,{size:16,className:"absolute left-3 top-3 text-slate-400"}),r.jsx("input",{type:"text",value:k,onChange:Y=>q(Y.target.value),className:"bg-white border border-slate-200 text-slate-900 text-sm rounded-xl focus:ring-emerald-500 focus:border-emerald-500 block w-full p-2.5 pl-10 shadow-sm transition-all outline-none",placeholder:"URL da Capa..."})]})]})]}),r.jsxs("div",{className:`p-3 rounded-xl border flex items-start gap-3 transition-all ${M?"bg-blue-50 border-blue-100 text-blue-700":"bg-slate-50 border-slate-100 text-slate-600"}`,children:[r.jsx(Xu,{size:18,className:"shrink-0 mt-0.5"}),r.jsx("p",{className:"text-[11px] font-medium leading-relaxed",children:M?"Este comunicado ser exibido no Portal do Visitante (pblico) e no Dashboard de todos os colaboradores.":"Este comunicado ser visvel apenas internamente para colaboradores que acessam o sistema com login."})]})]}),r.jsx("div",{className:"space-y-6",children:H.map((Y,pe)=>ee(Y,pe))}),r.jsxs("div",{className:"bg-slate-50 border-2 border-dashed border-slate-200 rounded-[2rem] p-8 shadow-inner",children:[r.jsx("p",{className:"text-center text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] mb-6",children:"Inserir novos elements no layout"}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[r.jsxs("button",{onClick:()=>j("paragraph"),className:"flex flex-col items-center gap-2 p-4 min-w-[100px] bg-white text-slate-600 rounded-2xl hover:bg-emerald-50 hover:text-emerald-600 transition-all border border-slate-200 hover:border-emerald-100 group shadow-sm",children:[r.jsx("div",{className:"p-3 bg-slate-50 rounded-xl group-hover:bg-white transition-all",children:r.jsx(Nu,{size:20})}),r.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Pargrafo"})]}),r.jsxs("button",{onClick:()=>j("header"),className:"flex flex-col items-center gap-2 p-4 min-w-[100px] bg-white text-slate-600 rounded-2xl hover:bg-emerald-50 hover:text-emerald-600 transition-all border border-slate-200 hover:border-emerald-100 group shadow-sm",children:[r.jsx("div",{className:"p-3 bg-slate-50 rounded-xl group-hover:bg-white transition-all",children:r.jsx(Nu,{size:20,className:"font-bold"})}),r.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Ttulo"})]}),r.jsxs("button",{onClick:()=>j("image"),className:"flex flex-col items-center gap-2 p-4 min-w-[100px] bg-white text-slate-600 rounded-2xl hover:bg-emerald-50 hover:text-emerald-600 transition-all border border-slate-200 hover:border-emerald-100 group shadow-sm",children:[r.jsx("div",{className:"p-3 bg-slate-50 rounded-xl group-hover:bg-white transition-all",children:r.jsx(Ki,{size:20})}),r.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Imagem Full"})]}),r.jsxs("button",{onClick:()=>j("side-by-side"),className:"flex flex-col items-center gap-2 p-4 min-w-[100px] bg-white text-emerald-600 rounded-2xl hover:bg-emerald-50 transition-all border border-slate-200 hover:border-emerald-200 group shadow-sm",children:[r.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl group-hover:bg-white transition-all",children:r.jsx(Xj,{size:20})}),r.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Lado a Lado"})]}),r.jsxs("button",{onClick:()=>j("quote"),className:"flex flex-col items-center gap-2 p-4 min-w-[100px] bg-white text-slate-600 rounded-2xl hover:bg-emerald-50 hover:text-emerald-600 transition-all border border-slate-200 hover:border-emerald-100 group shadow-sm",children:[r.jsx("div",{className:"p-3 bg-slate-50 rounded-xl group-hover:bg-white transition-all",children:r.jsx(MD,{size:20})}),r.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Citao"})]}),r.jsxs("button",{onClick:()=>j("button"),className:"flex flex-col items-center gap-2 p-4 min-w-[100px] bg-white text-emerald-700 rounded-2xl hover:bg-emerald-50 transition-all border border-slate-200 hover:border-emerald-100 group shadow-sm",children:[r.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl group-hover:bg-white transition-all",children:r.jsx(Zj,{size:20})}),r.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Boto Link"})]})]})]})]}),r.jsxs("div",{className:"p-6 bg-slate-900 text-white rounded-b-[2rem]",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-1.5 bg-purple-500/20 rounded-lg text-purple-400",children:r.jsx(yk,{size:18})}),r.jsx("span",{className:"text-sm font-black uppercase tracking-widest text-purple-200",children:"Redao Assistida (IA)"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{type:"text",value:L,onChange:Y=>C(Y.target.value),placeholder:"Ex: Escreva um comunicado sobre o dia do trabalhador...",className:"flex-1 bg-white/5 border-none rounded-2xl px-5 py-3 text-sm text-white focus:ring-2 focus:ring-purple-500 placeholder:text-slate-600 transition-all outline-none",onKeyDown:Y=>Y.key==="Enter"&&Z()}),r.jsx("button",{onClick:Z,disabled:A,className:"px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-2xl text-sm font-bold disabled:opacity-50 transition-all shadow-lg shadow-purple-900/40",children:A?"Escrevendo...":"Gerar Texto"})]})]})]}),r.jsxs("div",{className:`flex-1 bg-white shadow-2xl border border-slate-200 rounded-[2.5rem] overflow-hidden flex flex-col transition-all duration-500 ${W?"flex fixed inset-0 z-50 m-0 rounded-none lg:static lg:m-0 lg:rounded-[2.5rem] lg:flex":"hidden"}`,children:[W&&r.jsxs("div",{className:"lg:hidden p-5 bg-slate-900 text-white flex justify-between items-center shrink-0",children:[r.jsx("span",{className:"font-black uppercase tracking-widest",children:"Visualizao Final"}),r.jsx("button",{onClick:()=>te(!1),className:"p-2 bg-white/10 rounded-full hover:bg-white/20",children:r.jsx(Pn,{size:20})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-white p-6 md:p-12 custom-scrollbar",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsx("div",{className:"h-64 md:h-96 w-full rounded-[2.5rem] overflow-hidden shadow-2xl mb-12 border-8 border-white",children:r.jsx("img",{src:k,alt:"Cover",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"px-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("span",{className:"bg-emerald-600 text-white text-[10px] font-black px-4 py-1 rounded-full uppercase tracking-wider shadow-lg shadow-emerald-100",children:w}),M?r.jsxs("span",{className:"text-[10px] uppercase font-black text-blue-600 flex items-center gap-1",children:[r.jsx(ja,{size:12})," Pblico"]}):r.jsxs("span",{className:"text-[10px] uppercase font-black text-slate-400 flex items-center gap-1",children:[r.jsx(Un,{size:12})," Interno"]}),r.jsx("div",{className:"h-px flex-1 bg-slate-100"}),r.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:new Date().toLocaleDateString()})]}),r.jsx("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:y||r.jsx("span",{className:"text-slate-100",children:"TTULO DA NOTCIA"})}),r.jsxs("div",{className:"flex items-center gap-4 mb-12 pb-8 border-b border-slate-100",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border-2 border-emerald-100 shadow-sm shrink-0",children:r.jsx("img",{src:(e==null?void 0:e.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent((e==null?void 0:e.name)||"User")}&background=0d9488&color=fff`,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Autor da Publicao"}),r.jsx("p",{className:"text-lg font-bold text-slate-800 leading-none",children:(e==null?void 0:e.name)||"Comunicao Interna"})]})]}),r.jsx("div",{className:"space-y-2",children:H.map(Ne)})]})]})})]})]})]})},CB=()=>{const[t,e]=I.useState(""),[n,s]=I.useState("Todos"),[a,l]=I.useState([]),[u,h]=I.useState(!0),m={name:"Abel Silva",department:"TI"};I.useEffect(()=>{(async()=>{h(!0);try{const T=(await E2()).filter(M=>M.allowedDepartments.includes("Todos")||M.allowedDepartments.includes(m.department));l(T)}catch(w){console.error("Erro ao carregar sistemas",w)}finally{h(!1)}})()},[]);const f=["Todos",...Array.from(new Set(a.map(_=>_.category)))],y=a.filter(_=>{const w=_.name.toLowerCase().includes(t.toLowerCase())||_.description.toLowerCase().includes(t.toLowerCase()),T=n==="Todos"||_.category===n;return w&&T});return u?r.jsx("div",{className:"flex justify-center p-12",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:32})}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(G0,{className:"text-emerald-600"})," Meus Sistemas & Links"]}),r.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Exibindo ferramentas liberadas para: ",r.jsx("span",{className:"font-bold text-emerald-700",children:m.department})]})]}),r.jsxs("div",{className:"relative w-full md:w-auto",children:[r.jsx(Va,{className:"absolute left-3 top-3 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Buscar sistema...",value:t,onChange:_=>e(_.target.value),className:"pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-full md:w-64 shadow-sm"})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 pb-2 border-b border-slate-200",children:f.map(_=>r.jsx("button",{onClick:()=>s(_),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n===_?"bg-emerald-600 text-white shadow-md shadow-emerald-200":"bg-white text-slate-600 hover:bg-slate-50 border border-slate-200"}`,children:_},_))}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[y.map(_=>r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 hover:shadow-lg hover:-translate-y-1 transition-all duration-200 group flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl overflow-hidden bg-slate-50 shadow-inner",children:r.jsx("img",{src:_.logo,alt:_.name,className:"w-full h-full object-cover"})}),r.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider text-slate-400 bg-slate-50 px-2 py-1 rounded",children:_.category})]}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2 group-hover:text-emerald-600 transition-colors",children:_.name}),r.jsx("p",{className:"text-slate-500 text-sm mb-6 line-clamp-2 flex-grow",children:_.description}),r.jsxs("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"mt-auto flex items-center justify-center gap-2 w-full py-2.5 bg-slate-50 text-slate-700 font-medium rounded-lg hover:bg-emerald-600 hover:text-white transition-all duration-200 group-hover:shadow-md",children:["Acessar ",r.jsx($f,{size:14})]})]},_.id)),y.length===0&&r.jsxs("div",{className:"col-span-full py-16 text-center text-slate-400 bg-slate-50/50 rounded-xl border border-dashed border-slate-200",children:[r.jsx(ff,{size:48,className:"mx-auto mb-4 opacity-20"}),r.jsx("p",{className:"text-lg font-medium",children:"Nenhum sistema encontrado."}),r.jsxs("p",{className:"text-sm mt-2 max-w-md mx-auto",children:["Voc est visualizando apenas os sistemas liberados para ",r.jsx("strong",{children:m.department}),". Se precisar de acesso a outro sistema, contate o Suporte TI."]}),t&&r.jsx("button",{onClick:()=>{e(""),s("Todos")},className:"mt-4 text-emerald-600 text-sm font-medium hover:underline",children:"Limpar filtros de busca"})]})]})]})},AB=()=>{const t=[];for(let e=0;e<=23;e++)t.push(`${String(e).padStart(2,"0")}:00`),t.push(`${String(e).padStart(2,"0")}:30`);return t},IB=AB(),RB=()=>{var At;const{currentUser:t,isAdmin:e,isMaster:n}=Kn(),s=Ti(),[a,l]=I.useState([]),[u,h]=I.useState([]),[m,f]=I.useState([]),[y,_]=I.useState(""),[w,T]=I.useState(""),[M,z]=I.useState([]),[k,q]=I.useState(0),[H,P]=I.useState(new Date),[W,te]=I.useState(!0),[L,C]=I.useState(!1),[A,R]=I.useState(null),[U,B]=I.useState([]),[$,F]=I.useState(""),[je,ze]=I.useState([]),[j,se]=I.useState(""),[K,ne]=I.useState(!1),[J,O]=I.useState(null),[Z,oe]=I.useState(!1),[ee,Ne]=I.useState(null);I.useEffect(()=>{(async()=>{var Le;te(!0);try{const[Fe,et,Xe]=await Promise.all([vm(),Jr(),$a()]);l(Fe),f(et),h(Xe);const pt=s.state;if(pt!=null&&pt.selectedRoomId){const gt=Fe.find(jt=>jt.id===pt.selectedRoomId);gt&&(_(gt.unitId||""),T(gt.id))}else if(t!=null&&t.unit&&Xe.length>0){const gt=Xe.find(X=>X.name===t.unit),jt=gt?gt.id:((Le=Xe[0])==null?void 0:Le.id)||"";_(jt);const St=Fe.find(X=>X.unitId===jt);St&&T(St.id)}else if(Xe.length>0){_(Xe[0].id);const gt=Fe.find(jt=>jt.unitId===Xe[0].id);gt&&T(gt.id)}}catch(Fe){console.error("Erro ao carregar dados",Fe)}finally{te(!1)}})()},[s.state,t]),I.useEffect(()=>{if(!w)return;const ge=Nn(Ye(Me,"appointments"),Gn("roomId","==",w)),Le=fs(ge,Fe=>{const et=[];Fe.forEach(Xe=>{et.push({id:Xe.id,...Xe.data()})}),z(et)});return()=>Le()},[w]);const Y=I.useMemo(()=>a.filter(ge=>ge.unitId===y),[a,y]),pe=I.useMemo(()=>a.find(ge=>ge.id===w),[a,w]),Se=I.useMemo(()=>{if(!pe)return[];const ge=H.getDay(),Le=ge===6,Fe=ge===0;if(Le&&!pe.worksSaturday||Fe&&!pe.worksSunday)return[];const et=pe.startTime||"08:00",Xe=pe.endTime||"18:00";return IB.filter(pt=>pt>=et&&pt<Xe)},[pe,H]),De=I.useMemo(()=>{const ge=new Date,Le=ge.getDay(),Fe=ge.getDate()-Le+(Le===0?-6:1),et=new Date(ge.setDate(Fe));et.setDate(et.getDate()+k*7);const Xe=[];for(let pt=0;pt<7;pt++){const gt=new Date(et);gt.setDate(et.getDate()+pt),Xe.push(gt)}return Xe},[k]),ut=ge=>ge.toISOString().split("T")[0],st=ge=>{P(ge)},_e=ge=>{_(ge);const Le=a.find(Fe=>Fe.unitId===ge);T(Le?Le.id:"")},Ve=ge=>{const Le=new Date,Fe=new Date(H),[et,Xe]=ge.split(":").map(Number);Fe.setHours(et,Xe,0,0);const pt=new Date(Fe);if(pt.setMinutes(Fe.getMinutes()+30),pt<=Le){alert("Este horrio j foi encerrado.");return}O(null),R({date:H,time:ge}),B([ge]),F(""),ze([]),se(""),C(!0)},it=(ge,Le)=>{ge.preventDefault(),ge.stopPropagation();const[Fe,et,Xe]=Le.date.split("-").map(Number),pt=new Date(Fe,et-1,Xe);O(Le),R({date:pt,time:Le.time}),B([Le.time]),F(Le.subject),ze(Le.participants||[]),se(""),C(!0)},mt=ge=>{B(Le=>Le.includes(ge)?Le.length===1?Le:Le.filter(Fe=>Fe!==ge):[...Le,ge].sort())},Jt=()=>{j.trim()&&(je.includes(j.trim())||ze([...je,j.trim()]),se(""))},en=ge=>{je.includes(ge)||ze([...je,ge]),se("")},ue=ge=>{ze(je.filter(Le=>Le!==ge))},Ie=j.length>1?m.filter(ge=>ge.name.toLowerCase().includes(j.toLowerCase())&&!je.includes(ge.name)&&ge.name!==(t==null?void 0:t.name)).slice(0,3):[],Re=async()=>{if(!(U.length===0||!t||!$.trim())){ne(!0);try{if(J)await tU(J.id,{subject:$.trim(),participants:je});else{const ge=ut(H),Le=U.map(Fe=>eU({roomId:w,date:ge,time:Fe,userId:t.id,userName:t.name,subject:$.trim(),participants:je,createdAt:new Date().toISOString()}));await Promise.all(Le)}C(!1),R(null),B([]),O(null)}catch{alert("Erro ao salvar agendamento. Tente novamente.")}finally{ne(!1)}}},ot=(ge,Le)=>{if(ge.preventDefault(),ge.stopPropagation(),!(Le.userId===(t==null?void 0:t.id))&&!e&&!n){alert("Voc no tem permisso para cancelar este agendamento.");return}Ne(Le),oe(!0)},tn=async()=>{if(ee){ne(!0);try{await nU(ee.id),oe(!1),Ne(null)}catch(ge){console.error(ge),alert("Ocorreu um erro ao cancelar o agendamento.")}finally{ne(!1)}}},dt=ge=>{const Le=ut(H);return M.find(Fe=>Fe.date===Le&&Fe.time===ge)};return W?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"flex flex-col items-center gap-2 text-emerald-600",children:[r.jsx(Je,{className:"animate-spin",size:48}),r.jsx("span",{className:"font-medium",children:"Carregando agenda..."})]})}):a.length===0?r.jsxs("div",{className:"text-center p-12 bg-white rounded-2xl shadow-sm border border-slate-200",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Nenhuma Sala Encontrada"}),r.jsx("p",{className:"text-slate-500",children:"Contate o administrador para cadastrar salas de reunio."})]}):r.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto pb-10",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(ns,{className:"text-emerald-600",size:24})," Salas de Reunio"]}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Agendamentos dinmicos por sala e unidade."})]}),r.jsxs("div",{className:"flex flex-col gap-3 w-full md:w-auto",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-slate-100 p-1 rounded-xl border border-slate-200 shadow-inner",children:[r.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase px-2",children:"Unidade:"}),u.map(ge=>r.jsx("button",{onClick:()=>_e(ge.id),className:`px-3 py-1.5 text-xs font-bold rounded-lg transition-all ${y===ge.id?"bg-white text-emerald-700 shadow-sm border border-emerald-100":"text-slate-500 hover:text-slate-700"}`,children:ge.name},ge.id))]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:[r.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase px-2",children:"Sala:"}),Y.length>0?Y.map(ge=>r.jsx("button",{onClick:()=>T(ge.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${w===ge.id?"bg-emerald-600 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:ge.name},ge.id)):r.jsx("span",{className:"text-xs text-slate-400 px-4 py-2",children:"Nenhuma sala nesta unidade"})]})]})]}),pe&&r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex flex-wrap gap-4 items-center text-sm text-slate-600 shadow-sm animate-fade-in",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ss,{className:"text-emerald-500",size:18}),r.jsx("span",{className:"font-semibold",children:pe.name})]}),r.jsx("div",{className:"w-px h-4 bg-slate-300 hidden sm:block"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sc,{className:"text-slate-400",size:18}),r.jsx("span",{className:"font-semibold",children:(At=u.find(ge=>ge.id===pe.unitId))==null?void 0:At.name})]}),r.jsx("div",{className:"w-px h-4 bg-slate-300 hidden sm:block"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Uu,{className:"text-slate-400",size:18}),r.jsxs("span",{children:["Capacidade: ",r.jsxs("strong",{children:[pe.capacity," pessoas"]})]})]}),r.jsx("div",{className:"w-px h-4 bg-slate-300 hidden sm:block"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($i,{size:18,className:"text-slate-400"}),r.jsxs("span",{children:["Funcionamento: ",r.jsxs("strong",{children:[pe.startTime||"08:00"," - ",pe.endTime||"18:00"]})]})]}),pe.worksSaturday&&r.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black bg-emerald-50 text-emerald-600 border border-emerald-100",children:"SB ABERTO"}),pe.worksSunday&&r.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-black bg-emerald-50 text-emerald-600 border border-emerald-100",children:"DOM ABERTO"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-slate-50",children:[r.jsx("button",{onClick:()=>q(ge=>ge-1),className:"p-2 hover:bg-white rounded-lg transition-colors text-slate-500 hover:text-emerald-600",children:r.jsx(H0,{size:20})}),r.jsx("span",{className:"font-bold text-slate-700 capitalize",children:H.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),r.jsx("button",{onClick:()=>q(ge=>ge+1),className:"p-2 hover:bg-white rounded-lg transition-colors text-slate-500 hover:text-emerald-600",children:r.jsx($l,{size:20})})]}),r.jsx("div",{className:"grid grid-cols-7 divide-x divide-slate-100 border-b border-slate-200",children:De.map(ge=>{const Le=ut(ge)===ut(H),Fe=ut(ge)===ut(new Date),et=ge.getDay(),Xe=et===0||et===6;return r.jsxs("button",{onClick:()=>st(ge),className:`py-3 flex flex-col items-center justify-center transition-colors hover:bg-emerald-50/50 ${Le?"bg-white border-b-2 border-emerald-600":Xe?"bg-slate-50/20":"bg-slate-50/50"}`,children:[r.jsx("span",{className:`text-[10px] font-bold uppercase mb-1 ${Le?"text-emerald-600":Xe?"text-slate-300":"text-slate-400"}`,children:ge.toLocaleDateString("pt-BR",{weekday:"short"}).replace(".","")}),r.jsx("div",{className:`w-7 h-7 flex items-center justify-center rounded-full text-xs font-bold ${Fe?"bg-emerald-600 text-white shadow-md":Le?"bg-emerald-100 text-emerald-800":Xe?"text-slate-400":"text-slate-700"}`,children:ge.getDate()})]},ge.toString())})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx($i,{size:18,className:"text-slate-400"}),"Horrios para ",H.toLocaleDateString("pt-BR")]}),Se.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Se.map(ge=>{const Le=dt(ge),[Fe,et]=ge.split(":").map(Number),Xe=new Date,pt=new Date(H);pt.setHours(Fe,et+30,0,0);const gt=pt<=Xe;if(Le){const jt=Le.userId===(t==null?void 0:t.id),St=jt||e||n,X=Le.participants||[];return r.jsxs("div",{className:`relative p-4 rounded-2xl border text-left flex flex-col justify-between min-h-[140px] shadow-sm transition-all hover:shadow-md ${gt?"bg-slate-100 border-slate-200 opacity-70 grayscale-[50%]":jt?"bg-emerald-50 border-emerald-200":"bg-red-50 border-red-200"}`,children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:`text-[10px] font-black px-2 py-0.5 rounded-full border ${gt?"bg-slate-200 text-slate-500":jt?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:ge}),gt&&r.jsx("span",{className:"text-[8px] uppercase font-black tracking-widest text-slate-400",children:"Encerrado"})]}),r.jsx("h4",{className:"text-xs font-black text-slate-800 line-clamp-2 uppercase tracking-tight leading-tight mb-1",title:Le.subject,children:Le.subject}),r.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-500 font-bold mb-2",children:[r.jsx(Ji,{size:10,className:"text-slate-400"}),r.jsx("span",{className:"truncate",children:Le.userName})]}),X.length>0&&r.jsxs("div",{className:"border-t border-black/5 pt-2 mt-2",children:[r.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Participantes:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:X.map((de,Te)=>r.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded border leading-none font-medium truncate max-w-[100px] ${jt?"bg-emerald-100/50 border-emerald-200 text-emerald-800":"bg-red-100/50 border-red-200 text-red-800"}`,children:de},Te))})]})]}),St&&r.jsxs("div",{className:"flex items-center justify-end gap-1 mt-3 pt-2 border-t border-black/5",children:[!gt&&r.jsx("button",{type:"button",onClick:de=>it(de,Le),className:"text-slate-400 hover:text-indigo-600 transition-colors p-2 rounded-lg hover:bg-white/50",title:"Editar Assunto",children:r.jsx(na,{size:16})}),r.jsx("button",{type:"button",onClick:de=>ot(de,Le),className:"text-slate-400 hover:text-red-600 transition-colors p-2 rounded-lg hover:bg-white/50",title:"Cancelar agendamento",children:r.jsx(Bt,{size:16})})]})]},ge)}return gt?r.jsxs("div",{className:"p-4 rounded-2xl border border-slate-100 bg-slate-50 text-slate-300 flex flex-col items-center justify-center min-h-[140px] cursor-not-allowed border-dashed",children:[r.jsx("span",{className:"text-sm font-black mb-1 opacity-50",children:ge}),r.jsx("span",{className:"text-[9px] uppercase font-black tracking-widest opacity-40",children:"Horrio Encerrado"})]},ge):r.jsxs("button",{type:"button",onClick:()=>Ve(ge),className:"p-4 rounded-2xl border border-slate-200 bg-white hover:border-emerald-500 hover:shadow-lg hover:-translate-y-1 transition-all flex flex-col items-center justify-center min-h-[140px] group text-slate-400 hover:text-emerald-600",children:[r.jsx("span",{className:"text-2xl font-black mb-1 group-hover:scale-110 transition-transform text-slate-700 group-hover:text-emerald-600",children:ge}),r.jsxs("div",{className:"flex items-center gap-1 text-[10px] uppercase font-black tracking-widest text-emerald-600 opacity-0 group-hover:opacity-100 transition-all transform translate-y-2 group-hover:translate-y-0",children:[r.jsx(Vn,{size:12,strokeWidth:3})," Agendar"]})]},ge)})}):r.jsxs("div",{className:"py-12 text-center bg-slate-50 rounded-2xl border border-dashed border-slate-200 flex flex-col items-center",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4",children:r.jsx($i,{size:32})}),r.jsx("h4",{className:"text-lg font-bold text-slate-700 uppercase tracking-tight",children:"Sala Fechada"}),r.jsxs("p",{className:"text-sm text-slate-500 max-w-xs mx-auto mt-1",children:["A sala ",r.jsx("strong",{children:pe==null?void 0:pe.name})," no possui funcionamento configurado para este dia."]})]})]})]}),L&&A&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[70] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50 shrink-0",children:[r.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-2 uppercase tracking-tight",children:[J?r.jsx(na,{className:"text-indigo-600",size:20}):r.jsx(ns,{className:"text-emerald-600",size:20}),J?"Editar Agendamento":"Novo Agendamento"]}),r.jsx("button",{onClick:()=>C(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors text-slate-400",children:r.jsx(Pn,{size:24})})]}),r.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar flex-1",children:[r.jsxs("div",{className:`p-4 rounded-2xl border space-y-2 text-[11px] font-bold uppercase tracking-wide ${J?"bg-indigo-50 border-indigo-100 text-indigo-800":"bg-emerald-50 border-emerald-100 text-emerald-800"}`,children:[r.jsxs("p",{className:"flex items-center gap-2",children:[r.jsx(ss,{size:14})," ",r.jsxs("span",{children:["Sala: ",pe==null?void 0:pe.name]})]}),r.jsxs("p",{className:"flex items-center gap-2",children:[r.jsx(ns,{size:14})," ",r.jsxs("span",{children:["Data: ",A.date.toLocaleDateString("pt-BR")]})]}),r.jsxs("p",{className:"flex items-center gap-2",children:[r.jsx($i,{size:14})," ",r.jsxs("span",{children:["Horrios: ",U.join(", ")]})]})]}),!J&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Facilitador: Selecione outros horrios livres:"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 p-3 border border-slate-100 rounded-2xl bg-slate-50/50",children:Se.map(ge=>{const Le=!!dt(ge),Fe=(()=>{const[Xe,pt]=ge.split(":").map(Number),gt=new Date(H);return gt.setHours(Xe,pt+30,0,0),gt<=new Date})(),et=U.includes(ge);return Le||Fe?null:r.jsxs("button",{type:"button",onClick:()=>mt(ge),className:`flex items-center justify-center gap-1.5 p-2 rounded-xl text-[10px] font-black transition-all border ${et?"bg-emerald-600 text-white border-emerald-700 shadow-md":"bg-white text-slate-400 border-slate-200 hover:border-emerald-300"}`,children:[et?r.jsx(xs,{size:12}):r.jsx(No,{size:12})," ",ge]},ge)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest mb-1.5",children:"Assunto da Reunio"}),r.jsx("input",{type:"text",value:$,onChange:ge=>F(ge.target.value),placeholder:"Ex: ALINHAMENTO DE PROJETOS",className:"w-full p-4 border border-slate-200 rounded-2xl text-sm font-bold bg-slate-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 text-slate-900 transition-all uppercase placeholder:text-slate-300 shadow-inner",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest mb-1.5 flex justify-between",children:["Participantes Opcionais ",r.jsx("span",{className:"font-bold text-slate-300 text-[10px] italic",children:"Externos ou Internos"})]}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("input",{type:"text",value:j,onChange:ge=>se(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&Jt(),placeholder:"Digite o nome e pressione Enter...",className:"flex-1 p-4 bg-white border-2 border-slate-100 rounded-2xl text-sm font-bold text-slate-800 focus:border-emerald-500 focus:ring-0 shadow-sm transition-all placeholder:text-slate-300"}),r.jsx("button",{onClick:Jt,type:"button",disabled:!j.trim(),className:"bg-emerald-600 text-white p-4 rounded-2xl hover:bg-emerald-700 disabled:opacity-50 transition-all shadow-lg active:scale-95",children:r.jsx(Vn,{size:20,strokeWidth:3})})]}),Ie.length>0&&r.jsx("div",{className:"mb-4 flex flex-wrap gap-2 p-2 bg-slate-50 rounded-xl animate-fade-in border border-slate-100",children:Ie.map(ge=>r.jsxs("button",{onClick:()=>en(ge.name),className:"text-[10px] font-black uppercase bg-white text-emerald-700 px-3 py-1.5 rounded-lg border border-emerald-100 hover:bg-emerald-50 flex items-center gap-1.5 shadow-sm",children:[r.jsx(VN,{size:12})," ",ge.name]},ge.id))}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-3 p-3 bg-slate-50 rounded-2xl min-h-[50px] border border-slate-100 border-dashed",children:je.length>0?je.map((ge,Le)=>r.jsxs("span",{className:"bg-white text-slate-700 text-[10px] font-black uppercase px-3 py-2 rounded-xl flex items-center gap-2 border border-slate-200 shadow-sm animate-fade-in",children:[ge,r.jsx("button",{onClick:()=>ue(ge),className:"text-red-400 hover:text-red-600 transition-colors",children:r.jsx(Pn,{size:14})})]},Le)):r.jsx("p",{className:"text-[10px] text-slate-300 font-bold uppercase tracking-widest italic m-auto",children:"Nenhum participante na lista"})})]}),!J&&r.jsxs("div",{className:"text-[10px] text-slate-500 font-bold bg-amber-50 p-4 rounded-2xl border border-amber-100 flex gap-3",children:[r.jsx(Xu,{size:18,className:"text-amber-500 shrink-0"}),r.jsx("p",{children:"DICA: Ao selecionar vrios horrios, o sistema criar reservas individuais de 30 min cada, mantendo o mesmo assunto e participantes."})]})]}),r.jsxs("div",{className:"p-4 md:p-6 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 shrink-0",children:[r.jsx("button",{onClick:()=>C(!1),className:"px-6 py-3 text-slate-500 font-black uppercase tracking-widest text-xs hover:bg-slate-200 rounded-2xl transition-all",disabled:K,children:"Cancelar"}),r.jsxs("button",{onClick:Re,disabled:!$.trim()||K||U.length===0,className:`px-10 py-3 text-white rounded-2xl font-black uppercase tracking-widest text-xs hover:opacity-90 flex items-center gap-2 disabled:opacity-50 shadow-xl transition-all active:scale-95 ${J?"bg-indigo-600 shadow-indigo-100":"bg-emerald-600 shadow-emerald-200"}`,children:[K?r.jsx(Je,{className:"animate-spin",size:18}):J?"Salvar Alteraes":"Confirmar Reserva(s)",!K&&r.jsx(Ao,{size:18})]})]})]})}),Z&&ee&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[80] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500",children:r.jsx(Bs,{size:40})}),r.jsx("h3",{className:"text-lg font-black text-slate-800 mb-2 uppercase tracking-tight",children:"Cancelar Reunio?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-8 leading-relaxed",children:["Voc est prestes a cancelar a reserva ",r.jsxs("strong",{children:['"',ee.subject,'"']}),". Esta vaga voltar a ficar disponvel para outros colaboradores."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>oe(!1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:bg-slate-100 rounded-2xl transition-all",disabled:K,children:"Manter"}),r.jsx("button",{onClick:tn,className:"flex-1 py-4 bg-red-600 text-white rounded-2xl font-black uppercase text-xs hover:bg-red-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-red-100",disabled:K,children:K?r.jsx(Je,{size:16,className:"animate-spin"}):"Sim, cancelar"})]})]})})})]})},jB=({size:t=18,className:e=""})=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[r.jsx("path",{d:"M3 21l1.65-3.8a9 9 0 1 1 3.4 2.9L3 21"}),r.jsx("path",{d:"M9 10a.5.5 0 0 0 1 0V9a.5.5 0 0 0-1 0v1a5 5 0 0 0 5 5h1a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1"})]}),DB=t=>{if(!t)return"";const e=["de","do","da","dos","das","e","em","com","para"],n=["i","ii","iii","iv","v","vi","vii","viii","ix","x"],s=["ti","rh","sesmt","dp","it","ceo","cfo","coo","cto","adm","qhse","comex"];return t.toLowerCase().split(" ").filter(a=>a.length>0).map((a,l)=>l>0&&e.includes(a)?a:n.includes(a)||s.includes(a)?a.toUpperCase():a.charAt(0).toUpperCase()+a.slice(1)).join(" ")},kB=({extension:t})=>{const[e,n]=I.useState(0),[s,a]=I.useState(!1),[l,u]=I.useState(!1),h=I.useRef(null),m=I.useRef(null),f=I.useRef(0),y=I.useRef(0),_=te=>{a(!0),f.current=te,u(!1)},w=te=>{if(!s||!h.current||!m.current||l)return;const L=h.current.offsetWidth,C=m.current.offsetWidth,A=L-C;let R=y.current+(te-f.current);R<0&&(R=0),R>A&&(R=A),n(R)},T=()=>{if(!s||!h.current||!m.current)return;const te=h.current.offsetWidth,L=m.current.offsetWidth,C=te-L,A=C*.9;e>=A?(u(!0),n(C),window.location.href=`tel:713879${t}`,setTimeout(()=>{u(!1),n(0),y.current=0},2e3)):(n(0),y.current=0),a(!1)},M=te=>{_(te.clientX),y.current=e},z=te=>{s&&w(te.clientX)},k=()=>{T()},q=()=>{s&&T()},H=te=>{_(te.touches[0].clientX),y.current=e},P=te=>{s&&w(te.touches[0].clientX)},W=()=>{T()};return r.jsxs("div",{ref:h,className:`relative h-12 rounded-full overflow-hidden select-none transition-colors duration-300 ${l?"bg-green-500":"bg-slate-100 border border-slate-200"}`,onMouseMove:z,onMouseUp:k,onMouseLeave:q,onTouchMove:P,onTouchEnd:W,children:[r.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-sm font-medium transition-opacity duration-300 ${s?"opacity-50":"opacity-100"}`,children:l?r.jsxs("span",{className:"text-white font-bold flex items-center gap-2",children:[r.jsx(RN,{size:16})," Ligando..."]}):r.jsxs("span",{className:"text-slate-500 flex items-center gap-2 pl-4",children:["Ramal ",r.jsx("span",{className:"text-slate-800 font-bold",children:t})," ",r.jsx($l,{size:14,className:"opacity-50"})]})}),r.jsx("div",{ref:m,style:{transform:`translateX(${e}px)`,touchAction:"none"},className:`absolute top-1 bottom-1 w-10 h-10 rounded-full flex items-center justify-center shadow-md cursor-grab active:cursor-grabbing z-10 transition-colors duration-200 ${l?"bg-white text-green-600":"bg-emerald-600 text-white left-1"}`,onMouseDown:M,onTouchStart:H,children:r.jsx(Lo,{size:18,className:l?"animate-pulse":""})})]})},MB=t=>{if(!t)return"";try{const e=new Date(t);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}catch{return t}},PB=()=>{const t=[];for(let e=8;e<=18;e++)t.push(`${String(e).padStart(2,"0")}:00`),t.push(`${String(e).padStart(2,"0")}:30`);return t},LB=PB(),VB=t=>{var e;switch(t.type){case"header":return r.jsx("h3",{className:"text-xl md:text-2xl font-black text-slate-800 mt-6 mb-3 leading-tight",children:t.content},t.id);case"image":return r.jsx("img",{src:t.content,alt:"",className:"w-full rounded-2xl shadow-md my-6"},t.id);case"quote":return r.jsxs("blockquote",{className:"border-l-4 border-emerald-500 pl-4 py-3 italic my-6 bg-slate-50 text-lg text-slate-600 rounded-r-xl",children:['"',t.content,'"']},t.id);case"button":return r.jsx("div",{className:"my-8 text-center",children:r.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block transition-all hover:scale-105 shadow-lg hover:shadow-xl px-8 py-3 font-bold uppercase tracking-wider bg-emerald-600 text-white rounded-xl text-sm no-underline",children:t.content})},t.id);case"side-by-side":return r.jsxs("div",{className:`flex flex-col md:flex-row gap-6 items-center my-8 ${((e=t.style)==null?void 0:e.layoutDirection)==="row-reverse"?"md:flex-row-reverse":""}`,children:[r.jsx("div",{className:"w-full md:w-1/2",children:r.jsx("img",{src:t.url,alt:"",className:"w-full rounded-xl shadow-sm object-cover"})}),r.jsx("div",{className:"w-full md:w-1/2 text-slate-600 leading-relaxed text-base",children:t.content})]},t.id);default:return r.jsx("p",{className:"text-base md:text-lg leading-relaxed text-slate-600 whitespace-pre-wrap mb-4",children:t.content},t.id)}},UB=()=>{const{currentUser:t,globalSettings:e,loading:n}=Kn(),s=qa(),[a,l]=I.useState("Todas"),[u,h]=I.useState([]),[m,f]=I.useState([]),[y,_]=I.useState([]),[w,T]=I.useState([]),[M,z]=I.useState([]),[k,q]=I.useState([]),[H,P]=I.useState([]),[W,te]=I.useState(!0),[L,C]=I.useState(null),[A,R]=I.useState(new Date().getMonth()),[U,B]=I.useState([]),[$,F]=I.useState(!1),je=I.useRef(null),ze=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],[j,se]=I.useState(new Set),[K,ne]=I.useState(""),[J,O]=I.useState("All"),[Z,oe]=I.useState("All");I.useEffect(()=>{if(!t)return;const ue=Nn(Ye(Me,"notifications"),Gn("userId","==",t.id),Fo("createdAt","desc"));return fs(ue,Ie=>{B(Ie.docs.map(Re=>({id:Re.id,...Re.data()})))})},[t]),I.useEffect(()=>{(async()=>{te(!0);try{const Ie=new Date().toISOString().split("T")[0],[Re,ot,tn,dt,At,ge]=await Promise.all([Jr(),$x(),E2(),vm(),qo(),$a()]),Fe=(await $n(Nn(Ye(Me,"appointments"),Gn("date","==",Ie)))).docs.map(Xe=>({id:Xe.id,...Xe.data()})),et=ot.filter(Xe=>Xe.published&&Xe.isPublic===!0);h(Re),f(et),_(tn),T(dt),z(ge),q(Fe),P(At),et.length>0&&C(et[0].id)}catch(Ie){console.error("Erro ao carregar portal:",Ie)}finally{te(!1)}})()},[]);const ee=U.filter(ue=>!ue.read).length,Ne=async ue=>{ue.read||await b2(ue.id),F(!1),ue.link&&(ue.type==="chat"&&ue.senderId?s(ue.link,{state:{openChatWith:ue.senderId}}):s(ue.link))},Y=ue=>{se(Ie=>{const Re=new Set(Ie);return Re.has(ue)?Re.delete(ue):Re.add(ue),Re})},pe=()=>R(ue=>ue===0?11:ue-1),Se=()=>R(ue=>ue===11?0:ue+1),De=I.useMemo(()=>{if(!(e!=null&&e.publicDirectory))return[];let ue=u.filter(Ie=>Ie.showInPublicDirectory!==!1);if(K.trim()){const Ie=K.toLowerCase();ue=ue.filter(Re=>Re.name.toLowerCase().includes(Ie)||Re.extension&&Re.extension.includes(Ie)||Re.department.toLowerCase().includes(Ie)||Re.role.toLowerCase().includes(Ie))}return J!=="All"&&(ue=ue.filter(Ie=>Ie.department===J)),Z!=="All"&&(ue=ue.filter(Ie=>Ie.unit===Z)),ue.sort((Ie,Re)=>Ie.name.localeCompare(Re.name))},[u,K,J,Z,e]),ut=I.useMemo(()=>{const ue=new Set(m.map(Ie=>Ie.category));return["Todas",...Array.from(ue)]},[m]),st=I.useMemo(()=>{const ue=new Date,Ie=ue.getDate(),Re=ue.getMonth(),ot=A===Re,tn=u.filter(dt=>dt.birthday?parseInt(dt.birthday.split("-")[1])===A+1:!1).sort((dt,At)=>{const ge=parseInt(dt.birthday.split("-")[2]),Le=parseInt(At.birthday.split("-")[2]);return ge-Le});return ot?{isCurrentMonth:ot,todaysBirthdays:tn.filter(dt=>parseInt(dt.birthday.split("-")[2])===Ie),pastBirthdays:tn.filter(dt=>parseInt(dt.birthday.split("-")[2])<Ie),upcomingBirthdays:tn.filter(dt=>parseInt(dt.birthday.split("-")[2])>Ie)}:{isCurrentMonth:ot,todaysBirthdays:[],pastBirthdays:[],upcomingBirthdays:tn}},[u,A]),_e=ue=>{const Ie=new Date,Re=Ie.getDay(),ot=Ie.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",hour12:!1}),tn=Re===6,dt=Re===0,At=tn&&!ue.worksSaturday||dt&&!ue.worksSunday,ge=ot<(ue.startTime||"08:00")||ot>=(ue.endTime||"18:00"),Le=At||ge,Fe=k.filter(Xe=>Xe.roomId===ue.id).sort((Xe,pt)=>{const[gt,jt]=Xe.time.split(":").map(Number),[St,X]=pt.time.split(":").map(Number);return gt*60+jt-(St*60+X)}),et=Fe.find(Xe=>{const[pt,gt]=Xe.time.split(":").map(Number),jt=new Date;jt.setHours(pt,gt,0,0);const St=new Date(jt);return St.setMinutes(jt.getMinutes()+30),Ie>=jt&&Ie<St});return{isOccupied:!!et&&!Le,isClosed:Le,currentMeeting:et,schedule:Fe}},Ve=I.useMemo(()=>a==="Todas"?m:m.filter(ue=>ue.category===a),[a,m]);if(W||n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx(Pa,{className:"h-10 w-auto animate-pulse"}),r.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 font-medium",children:[r.jsx(Je,{className:"animate-spin"})," Carregando portal..."]})]})});const it=(e==null?void 0:e.welcomeTitle)||"Bem-vindo ao iRamais Hub",mt=(e==null?void 0:e.welcomeDescription)||"Gesto inteligente de ramais, reservas de salas, notcias corporativas e acesso unificado aos sistemas da empresa.",Jt=e!=null&&e.welcomeBannerImage?e.welcomeDisableOverlay?`url(${e.welcomeBannerImage}) center/cover`:`linear-gradient(to right, ${e.welcomePrimaryColor||"#065f46"}CC, ${e.welcomeSecondaryColor||"#115e59"}CC), url(${e.welcomeBannerImage}) center/cover`:`linear-gradient(to right, ${e.welcomePrimaryColor||"#065f46"}, ${e.welcomeSecondaryColor||"#115e59"})`,en=(e==null?void 0:e.welcomeTextAlignment)==="left"?"text-left items-start":(e==null?void 0:e.welcomeTextAlignment)==="right"?"text-right items-end":"text-center items-center";return r.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-900",children:[r.jsx("header",{className:"bg-slate-900 text-white shadow-lg sticky top-0 z-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[r.jsx(Pa,{className:"h-10 w-auto"}),t?r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("div",{className:"relative",ref:je,children:[r.jsxs("button",{onClick:()=>F(!$),className:`p-2 transition-colors rounded-full relative ${$?"bg-emerald-50/20 text-emerald-400":"text-slate-400 hover:text-emerald-400"}`,children:[r.jsx(df,{size:22}),ee>0&&r.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-slate-900 animate-pulse"})]}),$&&r.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-2xl shadow-xl border border-slate-200 z-[100] overflow-hidden animate-fade-in text-slate-900",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"Notificaes"}),U.length>0&&r.jsx("button",{onClick:()=>_2(t.id),className:"text-[10px] text-slate-400 hover:text-red-500 font-bold uppercase tracking-widest",children:"Limpar tudo"})]}),r.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar",children:U.length>0?U.map(ue=>r.jsx("div",{onClick:()=>Ne(ue),className:`p-4 border-b border-slate-50 cursor-pointer hover:bg-slate-50 transition-colors ${ue.read?"":"bg-emerald-50/30"}`,children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:`mt-1.5 w-2 h-2 rounded-full shrink-0 ${ue.read?"bg-slate-300":"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:"text-sm leading-tight font-bold text-slate-800",children:ue.title}),r.jsx("span",{className:"text-[10px] text-slate-400 whitespace-nowrap ml-2",children:new Date(ue.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-2 leading-relaxed",children:ue.message})]})]})},ue.id)):r.jsxs("div",{className:"p-12 text-center text-slate-400",children:[r.jsx(df,{size:32,className:"mx-auto mb-2 opacity-10"}),r.jsx("p",{className:"text-xs font-medium",children:"Nenhuma notificao por aqui."})]})}),r.jsx("div",{className:"p-3 bg-slate-50 text-center border-t border-slate-100",children:r.jsx(wn,{to:"/tasks",onClick:()=>F(!1),className:"text-[10px] font-black uppercase text-emerald-600 hover:underline tracking-widest",children:"Ver todas as tarefas"})})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:t.avatar,className:"w-10 h-10 rounded-full border-2 border-emerald-500 object-cover shadow-lg"}),r.jsxs("div",{className:"text-left hidden sm:block",children:[r.jsx("p",{className:"text-[9px] uppercase font-black text-slate-500 mb-0.5",children:"Ol,"}),r.jsx("p",{className:"text-sm font-bold text-white",children:t.name.split(" ")[0]})]})]}),r.jsxs(wn,{to:"/dashboard",className:"flex items-center gap-2 text-xs md:text-sm font-bold bg-emerald-600 hover:bg-emerald-500 px-5 py-2.5 rounded-full shadow-lg border border-emerald-500",children:[r.jsx(AN,{size:18}),r.jsx("span",{className:"hidden md:inline",children:"Ir para Dashboard"})]})]})]}):r.jsxs(wn,{to:"/login",className:"flex items-center gap-2 text-sm font-medium bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full transition-colors",children:[r.jsx(rD,{size:16}),"rea do Colaborador"]})]})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12",children:[(e==null?void 0:e.showWelcomeSection)!==!1&&r.jsxs("section",{className:`rounded-[2.5rem] p-6 md:p-10 shadow-2xl relative overflow-hidden flex flex-col justify-center min-h-[240px] ${en}`,style:{background:Jt},children:[r.jsxs("div",{className:"relative z-10 max-w-4xl",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-black mb-4 tracking-tight drop-shadow-md text-white",children:it}),r.jsx("p",{className:"text-white text-base md:text-lg lg:text-xl opacity-90 leading-relaxed font-medium drop-shadow-sm whitespace-pre-wrap",children:mt})]}),r.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full blur-3xl -mr-32 -mt-32"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-black/5 rounded-full blur-2xl -ml-24 -mb-24"})]}),(e==null?void 0:e.publicDirectory)&&r.jsxs("section",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-200 p-6 md:p-10 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-10 border-b border-slate-100 pb-8",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3 tracking-tight",children:[r.jsx(Lo,{className:"text-emerald-600",size:32})," Diretrio de Pessoas"]}),r.jsx("p",{className:"text-slate-500 mt-1 font-medium",children:"Encontre contatos e ramais de todos os colaboradores em tempo real"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full lg:w-auto",children:[r.jsxs("div",{className:"relative w-full sm:w-72 lg:w-80",children:[r.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Buscar por nome ou ramal...",value:K,onChange:ue=>ne(ue.target.value),className:"pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-full text-slate-900 shadow-inner"})]}),r.jsxs("div",{className:"relative flex-1 min-w-[140px]",children:[r.jsxs("select",{value:J,onChange:ue=>O(ue.target.value),className:"w-full px-4 py-3.5 bg-white border border-slate-200 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 text-slate-900 appearance-none pr-10 shadow-sm",children:[r.jsx("option",{value:"All",children:"Departamentos"}),H.map(ue=>r.jsx("option",{value:ue.name,children:ue.name},ue.id))]}),r.jsx(ff,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4 pointer-events-none"})]}),r.jsxs("div",{className:"relative flex-1 min-w-[140px]",children:[r.jsxs("select",{value:Z,onChange:ue=>oe(ue.target.value),className:"w-full px-4 py-3.5 bg-white border border-slate-200 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 text-slate-900 appearance-none pr-10 shadow-sm",children:[r.jsx("option",{value:"All",children:"Unidades"}),M.map(ue=>r.jsx("option",{value:ue.name,children:ue.name},ue.id))]}),r.jsx(ss,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4 pointer-events-none"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 max-h-[700px] overflow-y-auto custom-scrollbar p-2",children:[De.map(ue=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 flex flex-col items-center text-center transition-all hover:shadow-2xl hover:-translate-y-2 group relative",children:[r.jsxs("div",{className:"w-24 h-24 mb-4 relative",children:[r.jsx("img",{src:ue.avatar,alt:ue.name,className:"w-full h-full rounded-full object-cover border-4 border-slate-50 group-hover:border-emerald-50 transition-colors shadow-md"}),r.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-emerald-500 rounded-full border-2 border-white shadow-sm",title:"Online"})]}),r.jsx("h3",{className:"font-bold text-lg text-slate-900 leading-tight mb-1",children:ue.name}),(e==null?void 0:e.showRolePublicly)&&ue.showRole!==!1&&r.jsx("p",{className:"text-emerald-600 text-sm font-bold mb-2",children:DB(ue.role)}),r.jsxs("div",{className:"flex flex-col items-center gap-1.5 mb-6",children:[r.jsxs("p",{className:"text-slate-400 text-xs flex items-center gap-1.5 bg-slate-50 px-2.5 py-1 rounded-full font-medium",children:[r.jsx(sc,{size:12,className:"text-slate-400"})," ",ue.department]}),ue.unit&&r.jsxs("p",{className:"text-slate-400 text-[10px] flex items-center gap-1.5 font-bold uppercase tracking-widest",children:[r.jsx(ss,{size:10,className:"text-slate-300"})," ",ue.unit]})]}),r.jsxs("div",{className:"w-full space-y-3 mt-auto",children:[ue.extension?r.jsx(kB,{extension:ue.extension}):r.jsx("div",{className:"h-12 flex items-center justify-center bg-slate-50 rounded-xl border border-dashed border-slate-200 text-slate-400 text-[10px] uppercase font-black tracking-widest",children:"Sem Ramal"}),r.jsxs("div",{className:"flex gap-2",children:[t?r.jsxs("button",{onClick:()=>s("/directory",{state:{openChatWith:ue.id}}),className:"flex-1 flex items-center justify-center py-2.5 bg-emerald-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-900/20 flex items-center gap-2",children:[r.jsx(mf,{size:16})," Chat"]}):r.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center py-2.5 bg-slate-100 text-slate-400 rounded-xl text-[10px] font-black uppercase tracking-widest border border-slate-200 cursor-not-allowed group-hover:bg-slate-200 transition-all shadow-sm",title:"Faa login para utilizar o chat corporativo",children:[r.jsx(mf,{size:16,className:"mr-2"})," Chat"]}),ue.whatsapp&&r.jsx("a",{href:`https://wa.me/${ue.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center p-2.5 border border-emerald-200 bg-emerald-50 rounded-xl text-green-600 hover:bg-emerald-600 hover:text-white transition-all shadow-sm",title:"WhatsApp",children:r.jsx(jB,{size:18})}),r.jsx("a",{href:`mailto:${ue.email}`,className:"flex items-center justify-center p-2.5 border border-slate-200 rounded-xl text-slate-400 hover:bg-emerald-600 hover:text-white hover:border-emerald-600 transition-all shadow-sm",title:"Enviar E-mail",children:r.jsx(Jl,{size:18})})]})]})]},ue.id)),De.length===0&&r.jsxs("div",{className:"col-span-full py-20 text-center text-slate-400 bg-slate-50 rounded-[2rem] border border-dashed border-slate-200",children:[r.jsx(Va,{size:40,className:"mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"font-bold text-lg",children:"Nenhum colaborador encontrado."})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[r.jsx("div",{className:"lg:col-span-2 space-y-10",children:(e==null?void 0:e.showNewsPublicly)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between border-l-8 border-emerald-600 pl-4",children:[r.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:a==="Todas"?"Mural Corporativo":`Notcias: ${a}`}),a!=="Todas"&&r.jsx("button",{onClick:()=>l("Todas"),className:"text-sm font-black uppercase text-emerald-600 hover:underline tracking-widest",children:"Ver todas"})]}),r.jsx("div",{className:"space-y-6",children:Ve.length>0?Ve.map(ue=>{var tn;const Ie=L===ue.id,Re=u.find(dt=>dt.name===ue.author),ot=ue.authorAvatar||(Re==null?void 0:Re.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(ue.author)}&background=0d9488&color=fff`;return r.jsxs("div",{id:`news-${ue.id}`,className:`bg-white rounded-[2rem] p-0 shadow-sm border transition-all duration-500 overflow-hidden ${Ie?"border-emerald-200 ring-4 ring-emerald-50 shadow-xl":"border-slate-100 hover:shadow-md"}`,children:[r.jsxs("div",{className:`flex flex-col md:flex-row ${Ie?"bg-slate-50/50":""}`,children:[r.jsxs("div",{className:`h-48 md:h-auto md:w-1/3 bg-slate-200 relative shrink-0 transition-all duration-500 ${Ie?"md:h-72":""}`,children:[r.jsx("img",{src:ue.thumbnail,alt:ue.title,className:"w-full h-full object-cover"}),Ie&&r.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center md:hidden",children:r.jsx("span",{className:"bg-white/90 px-4 py-2 rounded-full text-xs font-bold text-slate-800",children:"Visualizando Comunicado"})})]}),r.jsxs("div",{className:"p-6 md:p-8 md:w-2/3 flex flex-col justify-center",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-3",children:[r.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full font-black uppercase tracking-wider text-[9px]",children:ue.category}),r.jsx("span",{className:"font-bold text-slate-400",children:MB(ue.date)})]}),r.jsx("h4",{className:`font-black text-slate-900 leading-tight mb-3 transition-all ${Ie?"text-2xl md:text-3xl":"text-xl"}`,children:ue.title}),!Ie&&r.jsx("p",{className:"text-slate-500 text-sm line-clamp-2 mb-6 font-medium",children:((tn=ue.blocks.find(dt=>dt.type==="paragraph"))==null?void 0:tn.content)||"Clique para ler mais..."}),r.jsx("div",{className:"flex gap-4 items-center",children:ue.externalUrl?r.jsxs("a",{href:ue.externalUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-emerald-600 text-white px-6 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 flex items-center gap-2",children:["Acessar Notcia ",r.jsx($f,{size:14})]}):r.jsx("button",{onClick:()=>C(Ie?null:ue.id),className:`font-black text-xs uppercase tracking-widest flex items-center gap-2 transition-all px-6 py-2.5 rounded-xl shadow-sm ${Ie?"bg-slate-200 text-slate-700 hover:bg-slate-300":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:Ie?r.jsxs(r.Fragment,{children:[r.jsx(Lu,{size:16})," Recolher"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pu,{size:16})," Ler Comunicado"]})})})]})]}),Ie&&r.jsxs("div",{className:"p-6 md:p-12 animate-fade-in bg-white",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-10 pb-6 border-b border-slate-50",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border-4 border-emerald-50 shadow-md shrink-0",children:r.jsx("img",{src:ot,alt:ue.author,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Autor da Publicao"}),r.jsx("p",{className:"text-lg font-bold text-slate-700 leading-none",children:ue.author})]})]}),r.jsx("div",{className:"max-w-none space-y-2",children:ue.blocks.map(dt=>VB(dt))}),r.jsx("div",{className:"mt-12 pt-8 border-t border-slate-100 flex justify-center",children:r.jsxs("button",{onClick:()=>{var dt;C(null),(dt=document.getElementById(`news-${ue.id}`))==null||dt.scrollIntoView({behavior:"smooth"})},className:"group flex flex-col items-center gap-2 text-slate-300 hover:text-emerald-600 transition-all",children:[r.jsx(CN,{size:40,className:"group-hover:scale-110 transition-transform"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Fechar Visualizao"})]})})]})]},ue.id)}):r.jsxs("div",{className:"p-20 text-center bg-slate-100 rounded-[2.5rem] text-slate-400 border border-slate-200 border-dashed",children:[r.jsx(Vu,{size:48,className:"mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"font-bold",children:"Nenhuma notcia encontrada nesta categoria."})]})})]})}),r.jsxs("div",{className:"space-y-10",children:[(e==null?void 0:e.showNewsPublicly)&&r.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 p-8",children:[r.jsxs("h3",{className:"font-black text-slate-800 mb-6 flex items-center gap-3 uppercase tracking-tighter text-sm",children:[r.jsx(MN,{size:18,className:"text-emerald-600"})," Categorias"]}),r.jsx("div",{className:"space-y-2",children:ut.length>1?ut.map(ue=>r.jsxs("button",{onClick:()=>{l(ue),C(null)},className:`w-full flex items-center justify-between px-4 py-3 rounded-2xl text-sm font-bold transition-all ${a===ue?"bg-emerald-600 text-white shadow-lg shadow-emerald-200":"text-slate-600 hover:bg-slate-50"}`,children:[r.jsx("span",{children:ue}),a===ue&&r.jsx($l,{size:16})]},ue)):r.jsx("p",{className:"text-sm text-slate-400 italic",children:"Sem categorias disponveis."})})]}),(e==null?void 0:e.showRoomsPublicly)&&r.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-3 uppercase tracking-tighter text-sm",children:[r.jsx(ns,{size:18,className:"text-indigo-600"})," Agenda de Salas"]}),r.jsx("span",{className:"text-[10px] font-black uppercase bg-slate-100 text-slate-500 px-3 py-1 rounded-full",children:"Hoje"})]}),r.jsx("div",{className:"space-y-4",children:w.length>0?w.map(ue=>{const{isOccupied:Ie,isClosed:Re,schedule:ot}=_e(ue),tn=j.has(ue.id),dt=M.find(Fe=>Fe.id===ue.unitId),At=ue.startTime||"08:00",ge=ue.endTime||"18:00",Le=LB.filter(Fe=>Fe>=At&&Fe<ge);return r.jsxs("div",{className:"border border-slate-100 rounded-2xl p-4 bg-slate-50/50 hover:bg-white hover:shadow-md transition-all shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2 cursor-pointer select-none",onClick:()=>Y(ue.id),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ss,{size:16,className:"text-slate-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-bold text-slate-800 block leading-tight",children:ue.name}),r.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:(dt==null?void 0:dt.name)||"SEDE"})]}),Re?r.jsx("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border bg-slate-100 text-slate-500 border-slate-200",children:"Fechado"}):r.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full border ${Ie?"bg-red-50 text-red-600 border-red-100":"bg-emerald-50 text-emerald-600 border-emerald-100"}`,children:Ie?"Ocupada":"Livre"})]}),r.jsx("div",{className:"text-slate-400",children:tn?r.jsx(Lu,{size:18}):r.jsx(Pu,{size:18})})]}),tn&&r.jsxs("div",{className:"mt-4 animate-fade-in space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:[r.jsx("span",{children:"Agenda Hoje:"}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx($i,{size:10})," ",At," - ",ge]})]}),r.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[400px] overflow-y-auto custom-scrollbar pr-1",children:Le.map(Fe=>{const et=ot.find(X=>X.time===Fe),Xe=!!et,[pt,gt]=Fe.split(":").map(Number),jt=new Date,St=jt.getHours()>pt||jt.getHours()===pt&&jt.getMinutes()>=gt+30;if(Xe){const X=et.participants||[];return r.jsxs("div",{className:`flex flex-col border rounded-xl p-3.5 shadow-sm ${St?"bg-slate-100 border-slate-200 opacity-60 grayscale-[50%]":"bg-red-50 border-red-100"}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${St?"bg-slate-200 text-slate-600":"bg-red-100 text-red-700"}`,children:Fe}),r.jsxs("div",{className:`flex items-center gap-1.5 text-[9px] font-black uppercase ${St?"text-slate-500":"text-red-700"}`,children:[r.jsx("span",{className:"truncate max-w-[100px]",children:et.userName}),r.jsx(Ji,{size:12,className:St?"text-slate-400":"text-red-500"})]})]}),r.jsx("div",{className:"mb-2",children:r.jsx("p",{className:`text-[10px] font-black uppercase leading-tight tracking-tight ${St?"text-slate-500":"text-slate-800"}`,children:et.subject})}),X.length>0&&r.jsx("div",{className:"pt-1.5 mt-1 border-t border-black/5",children:r.jsxs("p",{className:`text-[8px] italic leading-tight ${St?"text-slate-400":"text-slate-500"}`,children:["Convidados: ",X.join(", ")]})})]},Fe)}return r.jsxs("div",{className:`flex items-center justify-between border rounded-xl p-2 px-3 ${St||Re?"bg-slate-100 border-slate-200 opacity-50":"bg-emerald-50 border-emerald-100"}`,children:[r.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:Fe}),r.jsx("span",{className:"text-[8px] uppercase tracking-wide text-slate-400 font-bold",children:Re?"Fechado":St?"Encerrado":"Livre"})]},Fe)})}),t&&r.jsx("button",{onClick:()=>s("/meeting-rooms",{state:{selectedRoomId:ue.id}}),className:"w-full py-3 bg-emerald-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] shadow-lg shadow-emerald-200 hover:bg-emerald-700 hover:-translate-y-0.5 transition-all",children:"Reservar Agora"})]})]},ue.id)}):r.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"Nenhuma sala cadastrada."})})]}),(e==null?void 0:e.showBirthdaysPublicly)&&r.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-slate-50 bg-slate-50/50 flex flex-col justify-between gap-4",children:[r.jsxs("h3",{className:"font-black text-slate-800 flex items-center gap-3 uppercase tracking-tighter text-sm",children:[r.jsx(q0,{size:18,className:"text-pink-500"})," Aniversariantes"]}),r.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl p-1.5 border border-slate-100 shadow-inner",children:[r.jsx("button",{onClick:pe,className:"p-2 hover:bg-slate-50 rounded-xl transition-all text-slate-400 hover:text-emerald-600",children:r.jsx(H0,{size:20})}),r.jsx("span",{className:"text-xs font-black text-emerald-700 uppercase tracking-[0.2em]",children:ze[A]}),r.jsx("button",{onClick:Se,className:"p-2 hover:bg-slate-50 rounded-xl transition-all text-slate-400 hover:text-emerald-600",children:r.jsx($l,{size:20})})]})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-5 max-h-[450px] overflow-y-auto pr-1 custom-scrollbar",children:[st.todaysBirthdays.length>0&&r.jsxs("div",{className:"space-y-3 animate-fade-in mb-8",children:[r.jsxs("p",{className:"text-[10px] font-black text-orange-600 uppercase tracking-[0.2em] flex items-center gap-2 mb-4",children:[r.jsx(IN,{size:14,className:"animate-bounce"}),"  HOJE!"]}),st.todaysBirthdays.map(ue=>r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-[2rem] relative group overflow-hidden shadow-xl border border-pink-100 border-l-4 border-l-pink-500 hover:scale-[1.02] transition-all",children:[r.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-slate-50 shadow-md overflow-hidden shrink-0",children:r.jsx("img",{src:ue.avatar,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-black text-slate-800 truncate uppercase tracking-tight",children:ue.name}),r.jsx("p",{className:"text-[10px] text-slate-400 truncate font-bold uppercase",children:ue.department})]}),r.jsx("div",{className:"text-2xl drop-shadow-sm",children:""})]},ue.id))]}),r.jsxs("div",{className:"space-y-4",children:[st.isCurrentMonth&&st.pastBirthdays.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-3",children:"Aconteceu este ms"}),st.pastBirthdays.map(ue=>r.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-slate-50 transition-all border border-transparent hover:border-slate-100 rounded-2xl",children:[r.jsx("img",{src:ue.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 truncate uppercase tracking-tight",children:ue.name}),r.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:ue.department})]}),r.jsxs("div",{className:"text-[10px] font-black text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full border border-slate-100 shadow-sm",children:["DIA ",ue.birthday.split("-")[2]]})]},ue.id))]}),(st.upcomingBirthdays.length>0||!st.isCurrentMonth&&st.upcomingBirthdays.length>0)&&r.jsxs("div",{className:"space-y-2 pt-2",children:[r.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-[0.2em] mb-4",children:"Prximos deste ms"}),st.upcomingBirthdays.map(ue=>r.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-slate-50 rounded-2xl transition-all border border-transparent hover:border-slate-100",children:[r.jsx("img",{src:ue.avatar,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 truncate uppercase tracking-tight",children:ue.name}),r.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:ue.department})]}),r.jsxs("div",{className:"text-[10px] font-black text-emerald-600 bg-emerald-50 px-3 py-1.5 rounded-full border border-emerald-100 shadow-sm",children:["DIA ",ue.birthday.split("-")[2]]})]},ue.id))]}),st.todaysBirthdays.length===0&&st.pastBirthdays.length===0&&st.upcomingBirthdays.length===0&&r.jsxs("div",{className:"text-center py-12 text-slate-300",children:[r.jsx(ns,{size:40,className:"mx-auto mb-3 opacity-10"}),r.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"Vazio"})]})]})]})})]})]})]}),r.jsxs("section",{className:"bg-slate-900 rounded-[3rem] p-10 md:p-16 text-white flex flex-col md:flex-row items-center justify-between gap-10 relative overflow-hidden shadow-2xl",children:[r.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-emerald-600/5 rounded-full blur-[100px] -mr-64 -mt-64 pointer-events-none"}),r.jsxs("div",{className:"relative z-10 text-center md:text-left",children:[r.jsxs("h3",{className:"text-3xl font-black mb-4 flex items-center justify-center md:justify-start gap-4 tracking-tighter",children:[r.jsx(yj,{className:"text-emerald-400",size:32})," Central de TI"]}),r.jsx("p",{className:"text-slate-400 text-lg max-w-md leading-relaxed",children:"Nossa equipe de tecnologia est pronta para auxiliar em qualquer demanda tcnica ou operacional."})]}),r.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row gap-6 w-full md:w-auto",children:[r.jsxs("div",{className:"flex items-center gap-5 bg-white/5 border border-white/10 px-8 py-6 rounded-[2rem] flex-1 lg:flex-none hover:bg-white/10 transition-all cursor-default shadow-inner",children:[r.jsxs("div",{className:"bg-emerald-500/20 p-4 rounded-2xl text-emerald-400 shadow-lg",children:[r.jsx(Jl,{size:28})," "]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-emerald-500 uppercase tracking-[0.2em] font-black mb-1",children:"Contato"}),r.jsx("p",{className:"font-bold text-lg text-white",children:"TI Suporte"})]})]}),r.jsxs("a",{href:"https://sisos.intermaritima.com.br/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-5 bg-emerald-600 px-8 py-6 rounded-[2rem] flex-1 lg:flex-none hover:bg-emerald-700 transition-all cursor-pointer group shadow-xl shadow-emerald-900/40",children:[r.jsxs("div",{className:"bg-white/20 p-4 rounded-2xl text-white shadow-lg",children:[r.jsx(ok,{size:28})," "]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-white/60 uppercase tracking-[0.2em] font-black mb-1",children:"Chamados"}),r.jsx("p",{className:"font-black text-xl text-white uppercase tracking-tight",children:"SISOS"})]})]})]})]})]}),r.jsx("footer",{className:"bg-white border-t border-slate-100 mt-20 py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[r.jsx(Pa,{className:"h-8 w-auto mx-auto mb-6"}),r.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-[0.3em]",children:[" ",new Date().getFullYear()," Intermartima Portos e Logstica S/A"]})]})})]})},OB=()=>{const t=qa(),{currentUser:e,loading:n}=Kn(),[s,a]=I.useState(!1),[l,u]=I.useState(!1),[h,m]=I.useState(!1),[f,y]=I.useState(""),[_,w]=I.useState(""),[T,M]=I.useState(""),[z,k]=I.useState(""),[q,H]=I.useState(""),[P,W]=I.useState(""),[te,L]=I.useState(""),[C,A]=I.useState([]),[R,U]=I.useState([]),B="#006c5b",$="#0b1424";I.useEffect(()=>{!n&&e&&t("/dashboard")},[e,n,t]),I.useEffect(()=>{s&&(async()=>{try{const[se,K]=await Promise.all([$a(),qo()]);A(se),U(K)}catch(se){console.error("Erro ao carregar opes de cadastro",se)}})()},[s]);const F=async j=>{j.preventDefault(),y(""),u(!0);try{await f3(ju,T,z),t("/dashboard")}catch(se){console.error("Erro Login:",se.code);let K="Erro ao fazer login. Tente novamente.";if(se.code==="auth/invalid-credential"||se.code==="auth/user-not-found"||se.code==="auth/wrong-password")try{const ne=Nn(Ye(Me,"people"),Gn("email","==",T)),J=await $n(ne);J.empty||J.docs[0].data().uid?K="E-mail ou senha invlidos.":K='Encontramos seu e-mail na base de colaboradores, mas voc ainda no ativou seu acesso. Por favor, clique na aba "Criar Cadastro" abaixo para definir sua senha.'}catch{K="E-mail ou senha invlidos."}else se.code==="auth/too-many-requests"&&(K="Muitas tentativas falhas. Tente novamente mais tarde.");y(K)}finally{u(!1)}},je=async j=>{if(j.preventDefault(),y(""),w(""),!T||!z||!q||!P){y("Preencha todos os campos obrigatrios.");return}if(z.length<6){y("A senha deve ter pelo menos 6 caracteres.");return}u(!0);try{const se=Nn(Ye(Me,"people"),Gn("email","==",T)),K=await $n(se);if(K.empty)throw new Error("EMAIL_NOT_FOUND_IN_BASE");const ne=K.docs[0],J=ne.data(),O=q.trim().toLowerCase(),Z=(J.unit||"").trim().toLowerCase(),oe=P.trim().toLowerCase(),ee=(J.department||J.sector||"").trim().toLowerCase();if(O!==Z||oe!==ee)throw new Error("DATA_MISMATCH");const pe={uid:(await h3(ju,T,z)).user.uid,status:"available",online:!0,lastSeen:new Date().toISOString()};te&&(pe.extension=te,pe.ramal=te),await as(hn(Me,"people",ne.id),pe),w("Conta criada com sucesso! Redirecionando..."),setTimeout(()=>{t("/dashboard")},2e3)}catch(se){console.error(se),se.message==="EMAIL_NOT_FOUND_IN_BASE"?y("E-mail no cadastrado na base de colaboradores. Solicite ao RH ou TI."):se.message==="DATA_MISMATCH"?y("Unidade ou Setor incorretos para este e-mail. Verifique se selecionou os dados corretos conforme seu cadastro no RH."):se.code==="auth/email-already-in-use"?y("Este e-mail j possui cadastro ativo. Por favor, faa login."):y("Erro ao realizar cadastro: "+se.message)}finally{u(!1)}},ze=async()=>{if(!T){y("Digite seu e-mail no campo acima para redefinir a senha.");return}try{u(!0),await d3(ju,T),w("Link de redefinio enviado para seu e-mail."),y("")}catch{y("Erro ao enviar e-mail de redefinio. Verifique se o e-mail est correto.")}finally{u(!1)}};return n||e?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:48})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 font-sans transition-colors duration-500",style:{backgroundColor:$},children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-[420px] overflow-hidden border border-white/10",children:[r.jsxs("div",{className:"p-8 pb-6 flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-48 mb-6",children:r.jsx(Pa,{className:"w-full h-auto"})}),r.jsx("h1",{className:"text-2xl font-bold mb-1",style:{color:B},children:s?"Criar Acesso":"Acesso ao iRamais"}),r.jsx("p",{className:"text-slate-400 text-sm",children:s?"Valide seus dados para criar sua senha":"Entre com suas credenciais corporativas"})]}),r.jsxs("div",{className:"px-8 pb-8",children:[f&&r.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm mb-4 flex items-start gap-2 animate-fade-in border border-red-100",children:[r.jsx(Xu,{size:16,className:"mt-0.5 shrink-0"}),r.jsx("span",{className:"leading-snug",children:f})]}),_&&r.jsxs("div",{className:"bg-green-50 text-green-700 p-3 rounded-lg text-sm mb-4 flex items-start gap-2 animate-fade-in border border-green-100",children:[r.jsx(Ao,{size:16,className:"mt-0.5 shrink-0"}),r.jsx("span",{className:"leading-snug",children:_})]}),r.jsxs("form",{onSubmit:s?je:F,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"E-mail Corporativo"}),r.jsxs("div",{className:"relative",children:[r.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),r.jsx("input",{type:"email",value:T,onChange:j=>M(j.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:bg-white transition-all text-slate-800",style:{"--tw-ring-color":B},placeholder:"nome@intermaritima.com.br",required:!0})]})]}),s&&r.jsxs("div",{className:"space-y-4 animate-fade-in",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Unidade"}),r.jsxs("div",{className:"relative",children:[r.jsx(ss,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),r.jsxs("select",{value:q,onChange:j=>H(j.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:bg-white transition-all text-slate-800 appearance-none",style:{"--tw-ring-color":B},required:!0,children:[r.jsx("option",{value:"",children:"Selecione sua unidade..."}),C.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Setor / Departamento"}),r.jsxs("div",{className:"relative",children:[r.jsx(B0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),r.jsxs("select",{value:P,onChange:j=>W(j.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-600 focus:bg-white transition-all text-slate-800 appearance-none",style:{"--tw-ring-color":B},required:!0,children:[r.jsx("option",{value:"",children:"Selecione seu setor..."}),R.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Ramal (Opcional)"}),r.jsxs("div",{className:"relative",children:[r.jsx(Lo,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),r.jsx("input",{type:"text",value:te,onChange:j=>L(j.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:bg-white transition-all text-slate-800",style:{"--tw-ring-color":B},placeholder:"Seu ramal atual"})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:s?"Crie uma Senha":"Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(Un,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),r.jsx("input",{type:h?"text":"password",value:z,onChange:j=>k(j.target.value),className:"w-full pl-10 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:bg-white transition-all text-slate-800",style:{"--tw-ring-color":B},placeholder:"",required:!0}),r.jsx("button",{type:"button",onClick:()=>m(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-emerald-600 transition-colors",children:h?r.jsx(Kf,{size:18}):r.jsx(Ra,{size:18})})]}),s&&r.jsx("p",{className:"text-[10px] text-slate-400",children:"Mnimo de 6 caracteres."})]}),r.jsx("button",{type:"submit",disabled:l,className:"w-full py-3.5 text-white font-bold text-lg rounded-xl hover:opacity-90 transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-emerald-900/20 active:scale-[0.98]",style:{backgroundColor:B},children:l?r.jsx(Je,{className:"animate-spin"}):s?"Finalizar Cadastro":"Entrar no Sistema"})]}),r.jsxs("div",{className:"mt-6 space-y-3 text-center",children:[r.jsxs(wn,{to:"/",className:"flex items-center justify-center gap-2 w-full py-2.5 text-sm font-bold text-emerald-700 bg-emerald-50 rounded-xl hover:bg-emerald-100 transition-colors border border-emerald-100",children:[r.jsx(ja,{size:16})," Acessar Portal do Visitante (Sem login)"]}),!s&&r.jsx("button",{type:"button",onClick:ze,className:"text-sm text-slate-500 hover:text-emerald-700 font-medium transition-colors mt-4 block mx-auto",children:"Esqueci minha senha"}),r.jsx("div",{className:"pt-4 border-t border-slate-100 mt-4",children:s?r.jsxs("p",{className:"text-sm text-slate-600",children:["J possui conta? "," ",r.jsx("button",{onClick:()=>a(!1),className:"font-bold hover:underline",style:{color:B},children:"Fazer Login"})]}):r.jsxs("p",{className:"text-sm text-slate-600",children:["Primeiro acesso? "," ",r.jsx("button",{onClick:()=>a(!0),className:"font-bold hover:underline",style:{color:B},children:"Criar Cadastro"})]})})]})]})]})})},zB=()=>{const{isMaster:t}=Kn(),[e,n]=I.useState([]),[s,a]=I.useState(!1),[l,u]=I.useState(!0),[h,m]=I.useState(!1),[f,y]=I.useState({}),[_,w]=I.useState(void 0),[T,M]=I.useState([]),[z,k]=I.useState([]),[q,H]=I.useState(null),[P,W]=I.useState(""),[te,L]=I.useState("All"),[C,A]=I.useState("All");I.useEffect(()=>{u(!0);const j=dV(se=>{n(se),u(!1)});return Promise.all([qo(),$a()]).then(([se,K])=>{M(se),k(K)}),()=>j()},[]);const R=()=>{y({name:"",role:"",department:"",unit:"",extension:"",whatsapp:"",email:"",avatar:"",birthday:"",showRole:!0,showInPublicDirectory:!0}),w(void 0),a(!0)},U=j=>{y({...j}),w(void 0),a(!0)},B=(j,se)=>{j.preventDefault(),j.stopPropagation(),t&&H(se)},$=async()=>{if(!q||!q.id)return;const j=q.id;m(!0);try{await gV(j),H(null)}catch(se){console.error("Erro ao excluir colaborador:",se),alert(`Erro na excluso: ${se.message}`)}finally{m(!1)}},F=j=>{var K;const se=(K=j.target.files)==null?void 0:K[0];if(se){const ne=new FileReader;ne.onloadend=()=>{w(ne.result),y(J=>({...J,avatar:ne.result}))},ne.readAsDataURL(se)}},je=async()=>{if(!f.name||!f.email)return alert("Nome e Email so obrigatrios");m(!0);try{f.id?await Gx(f.id,f,_):await v2(f,_),a(!1)}catch(j){alert(`Erro ao salvar: ${j.message}`)}finally{m(!1)}},ze=e.filter(j=>{const se=P.toLowerCase(),K=j.name.toLowerCase().includes(se)||j.email.toLowerCase().includes(se)||j.extension&&j.extension.includes(se),ne=te==="All"||j.department===te,J=C==="All"||j.unit&&j.unit===C;return K&&ne&&J});return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:48})}):r.jsxs("div",{className:"space-y-6 relative",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Colaboradores"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Controle total sobre o diretrio da empresa."})]}),!s&&r.jsxs("button",{onClick:R,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-emerald-700 shadow-sm w-full md:w-auto font-medium",children:[r.jsx(Vn,{size:18})," Novo Colaborador"]})]}),s?r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:f.id?"Editar Colaborador":"Novo Cadastro"}),r.jsx("button",{onClick:()=>a(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(Pn,{size:20})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"col-span-full flex flex-col items-center gap-3",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden border-2 border-emerald-500",children:f.avatar?r.jsx("img",{src:f.avatar,alt:"",className:"w-full h-full object-cover"}):r.jsx(Ji,{className:"text-slate-300",size:40})}),r.jsxs("label",{className:"absolute bottom-0 right-0 bg-emerald-600 text-white p-2 rounded-full cursor-pointer hover:bg-emerald-700 shadow-sm transition-colors",children:[r.jsx(Mu,{size:14}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:F})]})]}),r.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Foto do Perfil"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nome Completo"}),r.jsx("input",{type:"text",value:f.name,onChange:j=>y({...f,name:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Email Corporativo"}),r.jsx("input",{type:"email",value:f.email,onChange:j=>y({...f,email:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Ramal"}),r.jsx("input",{type:"text",value:f.extension,onChange:j=>y({...f,extension:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"WhatsApp"}),r.jsx("input",{type:"text",value:f.whatsapp||"",onChange:j=>y({...f,whatsapp:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900",placeholder:"5571..."})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Cargo"}),r.jsx("input",{type:"text",value:f.role,onChange:j=>y({...f,role:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Departamento"}),r.jsxs("select",{value:f.department,onChange:j=>y({...f,department:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900",children:[r.jsx("option",{value:"",children:"Selecione..."}),T.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Unidade"}),r.jsxs("select",{value:f.unit||"",onChange:j=>y({...f,unit:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900",children:[r.jsx("option",{value:"",children:"Selecione..."}),z.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Data de Nascimento"}),r.jsx("input",{type:"date",value:f.birthday,onChange:j=>y({...f,birthday:j.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[r.jsx("button",{onClick:()=>a(!1),className:"px-6 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium",disabled:h,children:"Cancelar"}),r.jsxs("button",{onClick:je,disabled:h,className:"px-8 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 shadow-md disabled:opacity-50 transition-all",children:[h?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18})," Salvar Colaborador"]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Buscar por nome, e-mail ou ramal...",value:P,onChange:j=>W(j.target.value),className:"w-full pl-10 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-slate-50 text-slate-900 text-sm"})]}),r.jsxs("select",{value:te,onChange:j=>L(j.target.value),className:"w-full md:w-48 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm",children:[r.jsx("option",{value:"All",children:"Todos Setores"}),T.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]}),r.jsxs("select",{value:C,onChange:j=>A(j.target.value),className:"w-full md:w-48 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm",children:[r.jsx("option",{value:"All",children:"Todas Unidades"}),z.map(j=>r.jsx("option",{value:j.name,children:j.name},j.id))]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-[10px] uppercase text-slate-500 font-bold tracking-wider",children:[r.jsx("th",{className:"px-6 py-4",children:"Colaborador"}),r.jsx("th",{className:"px-6 py-4",children:"Contato"}),r.jsx("th",{className:"px-6 py-4",children:"Setor / Unidade"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:ze.map(j=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:j.avatar,alt:"",className:"w-10 h-10 rounded-full bg-slate-200 object-cover border border-slate-100"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-800 text-sm",children:j.name}),r.jsx("p",{className:"text-[10px] text-slate-500 uppercase",children:j.role})]})]})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"text-xs text-slate-600 font-medium",children:j.email}),r.jsxs("p",{className:"text-[10px] text-emerald-600 font-bold mt-1",children:["RAMAL: ",j.extension||"---"]})]}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] font-bold border border-slate-200 block w-fit mb-1",children:j.department}),j.unit&&r.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[r.jsx(ss,{size:10})," ",j.unit]})]}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>U(j),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:r.jsx(na,{size:16})}),r.jsx("button",{onClick:se=>B(se,j),disabled:!t,title:t?"Excluir colaborador":"Apenas usurios Master podem excluir",className:`p-2 transition-colors rounded-lg ${t?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:t?r.jsx(Bt,{size:16}):r.jsx(Un,{size:16})})]})})]},j.id))})]})}),ze.length===0&&r.jsx("div",{className:"p-12 text-center text-slate-400 italic",children:"Nenhum colaborador encontrado."})]})]}),q&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Excluir Colaborador?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Voc est prestes a remover ",r.jsx("strong",{children:q.name}),".",r.jsx("br",{}),"Esta ao  irreversvel."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>H(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm",disabled:h,children:"Cancelar"}),r.jsxs("button",{onClick:$,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 flex items-center justify-center gap-2 shadow-lg shadow-red-200",disabled:h,children:[h?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})})]})},FB=()=>{var te;const{isMaster:t}=Kn(),[e,n]=I.useState([]),[s,a]=I.useState(!1),[l,u]=I.useState(!0),[h,m]=I.useState(!1),[f,y]=I.useState({}),[_,w]=I.useState(null),[T,M]=I.useState([]);I.useEffect(()=>{u(!0);const L=hV(C=>{n(C),u(!1)});return qo().then(C=>{M(C.map(A=>A.name).sort())}),()=>L()},[]);const z=()=>{y({logo:"",name:"",description:"",category:"Geral",url:"https://",allowedDepartments:["Todos"]}),a(!0)},k=L=>{y({...L}),a(!0)},q=(L,C)=>{L.preventDefault(),L.stopPropagation(),t&&w(C)},H=async()=>{if(!(!_||!_.id)){m(!0);try{await KV(_.id),w(null)}catch{alert("Erro ao excluir sistema.")}finally{m(!1)}}},P=async()=>{if(!f.name||!f.url)return alert("Nome e URL so obrigatrios");m(!0);try{const L={...f,logo:f.logo||`https://ui-avatars.com/api/?name=${f.name}&background=047857&color=fff`,allowedDepartments:f.allowedDepartments&&f.allowedDepartments.length>0?f.allowedDepartments:["Todos"]};f.id?await $V(f.id,L):await GV(L),a(!1)}catch{alert("Erro ao salvar sistema.")}finally{m(!1)}},W=L=>{const C=f.allowedDepartments||[];let A;if(L==="Todos")C.includes("Todos")?A=[]:A=["Todos"];else{const R=C.filter(U=>U!=="Todos");R.includes(L)?A=R.filter(U=>U!==L):A=[...R,L]}y({...f,allowedDepartments:A})};return l?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:48})}):r.jsxs("div",{className:"space-y-6 relative",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Sistemas & Links"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Gerencie o acesso s ferramentas corporativas."})]}),!s&&r.jsxs("button",{onClick:z,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-emerald-700 transition-all font-bold shadow-md",children:[r.jsx(Vn,{size:18})," Novo Sistema"]})]}),s?r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[r.jsx(G0,{size:20,className:"text-emerald-600"})," ",f.id?"Editar Sistema":"Novo Sistema"]}),r.jsx("button",{onClick:()=>a(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(Pn,{size:20})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nome do Sistema"}),r.jsx("input",{type:"text",value:f.name||"",onChange:L=>y({...f,name:L.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Link de Acesso (URL)"}),r.jsx("input",{type:"text",value:f.url||"",onChange:L=>y({...f,url:L.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Categoria"}),r.jsx("input",{type:"text",value:f.category||"",onChange:L=>y({...f,category:L.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm",placeholder:"Ex: Financeiro"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Logo (URL)"}),r.jsx("input",{type:"text",value:f.logo||"",onChange:L=>y({...f,logo:L.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm",placeholder:"Vazio = Gerado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Descrio Curta"}),r.jsx("textarea",{value:f.description||"",onChange:L=>y({...f,description:L.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm",rows:2})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Permitir acesso para:"}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 max-h-[280px] overflow-y-auto space-y-2 custom-scrollbar",children:[r.jsxs("label",{className:"flex items-center gap-3 p-2 bg-white rounded-lg border border-slate-100 cursor-pointer hover:border-emerald-200 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:(te=f.allowedDepartments)==null?void 0:te.includes("Todos"),onChange:()=>W("Todos"),className:"rounded text-emerald-600 focus:ring-emerald-500 w-4 h-4"}),r.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Todos (Acesso Global)"})]}),r.jsx("div",{className:"h-px bg-slate-200 my-2"}),T.map(L=>{var C,A,R;return r.jsxs("label",{className:`flex items-center gap-3 p-2 bg-white rounded-lg border border-slate-100 cursor-pointer hover:border-emerald-200 transition-colors ${(C=f.allowedDepartments)!=null&&C.includes("Todos")?"opacity-50 grayscale pointer-events-none":""}`,children:[r.jsx("input",{type:"checkbox",checked:(A=f.allowedDepartments)==null?void 0:A.includes(L),onChange:()=>W(L),disabled:(R=f.allowedDepartments)==null?void 0:R.includes("Todos"),className:"rounded text-emerald-600 focus:ring-emerald-500 w-4 h-4"}),r.jsx("span",{className:"text-sm text-slate-600",children:L})]},L)})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[r.jsx("button",{onClick:()=>a(!1),className:"px-6 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium",disabled:h,children:"Cancelar"}),r.jsxs("button",{onClick:P,className:"px-8 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 shadow-md transition-all flex items-center gap-2",disabled:h,children:[h?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18})," Salvar Sistema"]})]})]}):r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.map(L=>r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between hover:shadow-md transition-all",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg bg-slate-50 border border-slate-100 overflow-hidden flex items-center justify-center p-1",children:r.jsx("img",{src:L.logo,alt:"",className:"w-full h-full object-contain"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:L.name}),r.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:[L.category,"  ",L.allowedDepartments.includes("Todos")?"Acesso Global":`Restrito a: ${L.allowedDepartments.length} setor(es)`]})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>k(L),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:r.jsx(na,{size:16})}),r.jsx("button",{onClick:C=>q(C,L),disabled:!t,title:t?"Excluir sistema":"Apenas usurios Master podem excluir",className:`p-2 transition-colors rounded-lg ${t?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:t?r.jsx(Bt,{size:16}):r.jsx(Un,{size:16})})]})]},L.id)),e.length===0&&r.jsx("div",{className:"p-12 text-center text-slate-400 italic",children:"Nenhum sistema cadastrado."})]}),_&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Remover Sistema?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Voc est prestes a excluir permanentemente o sistema ",r.jsxs("strong",{children:['"',_.name,'"']}),".",r.jsx("br",{}),"Esta ao no pode ser desfeita."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>w(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm transition-colors",disabled:h,children:"Cancelar"}),r.jsxs("button",{onClick:H,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 flex items-center justify-center gap-2 shadow-lg shadow-red-200 transition-colors",disabled:h,children:[h?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})})]})},BB=()=>{const{isMaster:t}=Kn(),[e,n]=I.useState("units"),[s,a]=I.useState(!0),[l,u]=I.useState(!1),[h,m]=I.useState([]),[f,y]=I.useState(!1),[_,w]=I.useState({}),[T,M]=I.useState(null),[z,k]=I.useState([]),[q,H]=I.useState(!1),[P,W]=I.useState({}),[te,L]=I.useState(null),[C,A]=I.useState({publicDirectory:!0,showBirthdaysPublicly:!0,showRoomsPublicly:!0,showNewsPublicly:!0,showRolePublicly:!0,companyLogo:"",showWelcomeSection:!0,welcomeTitle:"Bem-vindo ao iRamais Hub",welcomeDescription:"Gesto inteligente de ramais, reservas de salas, notcias corporativas e acesso unificado aos sistemas da empresa.",welcomePrimaryColor:"#065f46",welcomeSecondaryColor:"#115e59",welcomeBannerImage:"",welcomeTextAlignment:"center",welcomeDisableOverlay:!1,dashboardShowRooms:!0,dashboardShowNews:!0,dashboardShowBirthdays:!0,showRoleInternal:!0}),[R,U]=I.useState(!1);I.useEffect(()=>{a(!0);const ne=cV(O=>{m(O),a(!1)}),J=uV(O=>{k(O)});return pV().then(O=>{A(Z=>({...Z,...O,showWelcomeSection:O.showWelcomeSection??!0,welcomeTitle:O.welcomeTitle||"Bem-vindo ao iRamais Hub",welcomeDescription:O.welcomeDescription||"Gesto inteligente de ramais, reservas de salas, notcias corporativas e acesso unificado aos sistemas da empresa.",welcomePrimaryColor:O.welcomePrimaryColor||"#065f46",welcomeSecondaryColor:O.welcomeSecondaryColor||"#115e59",welcomeBannerImage:O.welcomeBannerImage||"",welcomeTextAlignment:O.welcomeTextAlignment||"center",welcomeDisableOverlay:O.welcomeDisableOverlay??!1,dashboardShowRooms:O.dashboardShowRooms??!0,dashboardShowNews:O.dashboardShowNews??!0,dashboardShowBirthdays:O.dashboardShowBirthdays??!0,showRoleInternal:O.showRoleInternal??!0}))}),()=>{ne(),J()}},[]);const B=ne=>{w(ne||{name:"",address:""}),y(!0)},$=async()=>{if(!_.name)return alert("Nome da unidade  obrigatrio");u(!0);try{_.id?await _V(_):await bV(_),y(!1)}catch(ne){alert(`Erro ao salvar unidade: ${ne.message}`)}finally{u(!1)}},F=async()=>{if(!(!T||!T.id)){u(!0);try{await wV(T.id),M(null)}catch(ne){alert(`Falha na excluso: ${ne.message}`)}finally{u(!1)}}},je=async()=>{if(!P.name)return alert("Nome do departamento  obrigatrio");u(!0);try{P.id?await NV(P):await EV(P),H(!1)}catch(ne){alert(`Erro ao salvar departamento: ${ne.message}`)}finally{u(!1)}},ze=async()=>{if(!(!te||!te.id)){u(!0);try{await TV(te.id),L(null)}catch(ne){alert(`Falha na excluso: ${ne.message}`)}finally{u(!1)}}},j=(ne,J)=>{var Z;const O=(Z=ne.target.files)==null?void 0:Z[0];if(O){const oe=new FileReader;oe.onloadend=()=>{A(J==="logo"?ee=>({...ee,companyLogo:oe.result}):ee=>({...ee,welcomeBannerImage:oe.result}))},oe.readAsDataURL(O)}},se=ne=>{A(J=>({...J,[ne]:!J[ne]}))},K=async()=>{U(!0);try{await y2(C),alert("Configuraes aplicadas com sucesso!")}catch{alert("Erro ao salvar configuraes.")}finally{U(!1)}};return s?r.jsxs("div",{className:"p-8 text-center text-slate-500",children:[r.jsx(Je,{className:"animate-spin inline mr-2"})," Carregando estrutura..."]}):r.jsxs("div",{className:"space-y-6 relative",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto Organizacional"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Gerencie a estrutura fsica e as regras de exibio do sistema."})]}),r.jsxs("div",{className:"flex gap-4 border-b border-slate-200 overflow-x-auto",children:[r.jsxs("button",{onClick:()=>n("units"),className:`pb-3 px-2 text-sm font-medium transition-colors flex items-center gap-2 whitespace-nowrap ${e==="units"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-800"}`,children:[r.jsx(ss,{size:18})," Unidades Fsicas"]}),r.jsxs("button",{onClick:()=>n("depts"),className:`pb-3 px-2 text-sm font-medium transition-colors flex items-center gap-2 whitespace-nowrap ${e==="depts"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-800"}`,children:[r.jsx(B0,{size:18})," Departamentos"]}),r.jsxs("button",{onClick:()=>n("settings"),className:`pb-3 px-2 text-sm font-medium transition-colors flex items-center gap-2 whitespace-nowrap ${e==="settings"?"text-emerald-600 border-b-2 border-emerald-600":"text-slate-500 hover:text-slate-800"}`,children:[r.jsx(Da,{size:18})," Configuraes Gerais"]})]}),e==="units"&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:()=>B(),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-emerald-700 shadow-sm transition-all font-bold",children:[r.jsx(Vn,{size:18})," Nova Unidade"]})}),f&&r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-emerald-200 shadow-sm animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:_.id?"Editar Unidade":"Nova Unidade"}),r.jsx("button",{onClick:()=>y(!1),className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(Pn,{size:20})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",value:_.name||"",onChange:ne=>w({..._,name:ne.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900",placeholder:"Nome da Unidade"}),r.jsx("input",{type:"text",value:_.address||"",onChange:ne=>w({..._,address:ne.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900",placeholder:"Endereo"})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors font-medium",children:"Cancelar"}),r.jsxs("button",{onClick:$,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2 shadow-md transition-all font-bold",disabled:l,children:[l?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18})," Salvar"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(ne=>r.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col hover:shadow-md transition-shadow group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("div",{className:"bg-emerald-50 p-2 rounded-lg text-emerald-600 group-hover:bg-emerald-100 transition-colors",children:r.jsx(ss,{size:24})}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>B(ne),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:r.jsx(na,{size:16})}),r.jsx("button",{onClick:J=>{J.preventDefault(),J.stopPropagation(),t&&M(ne)},disabled:!t,className:`p-2 transition-colors rounded-lg ${t?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:t?r.jsx(Bt,{size:16}):r.jsx(Un,{size:16})})]})]}),r.jsx("h4",{className:"font-bold text-slate-800 text-lg leading-tight",children:ne.name}),r.jsx("p",{className:"text-slate-500 text-sm mt-1 line-clamp-1",children:ne.address||"Sem endereo"})]},ne.id))})]}),e==="depts"&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:()=>{W({name:""}),H(!0)},className:"bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-emerald-700 shadow-sm transition-all font-bold",children:[r.jsx(Vn,{size:18})," Novo Setor"]})}),q&&r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-emerald-200 shadow-sm animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:P.id?"Editar Setor":"Novo Setor"}),r.jsx("button",{onClick:()=>H(!1),className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(Pn,{size:20})})]}),r.jsx("input",{type:"text",value:P.name||"",onChange:ne=>W({...P,name:ne.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900",placeholder:"Nome do Departamento"}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors font-medium",children:"Cancelar"}),r.jsxs("button",{onClick:je,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2 shadow-md transition-all font-bold",disabled:l,children:[l?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18})," Salvar"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:z.map(ne=>r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between hover:shadow-md transition-all group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600 group-hover:bg-indigo-100 transition-colors",children:r.jsx(wu,{size:20})}),r.jsx("span",{className:"font-semibold text-slate-700",children:ne.name})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>{W(ne),H(!0)},className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:r.jsx(na,{size:14})}),r.jsx("button",{onClick:J=>{J.preventDefault(),J.stopPropagation(),t&&L(ne)},disabled:!t,className:`p-1.5 transition-colors rounded-lg ${t?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:t?r.jsx(Bt,{size:14}):r.jsx(Un,{size:14})})]})]},ne.id))})]}),e==="settings"&&r.jsxs("div",{className:"animate-fade-in space-y-8",children:[r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(Ki,{className:"text-emerald-600"})," Logomarca da Empresa"]}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-10",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-64 h-32 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200 flex items-center justify-center overflow-hidden shadow-inner",children:C.companyLogo?r.jsx("img",{src:C.companyLogo,className:"max-w-full max-h-full object-contain p-4"}):r.jsxs("div",{className:"text-slate-300 text-center",children:[r.jsx(Ki,{size:40,className:"mx-auto mb-1 opacity-20"}),r.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Logo Padro"})]})}),r.jsxs("label",{className:"absolute -bottom-3 -right-3 bg-emerald-600 text-white p-3 rounded-full shadow-xl cursor-pointer hover:bg-emerald-700 transition-all hover:scale-110 active:scale-95 z-20",children:[r.jsx(Mu,{size:20}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ne=>j(ne,"logo")})]}),C.companyLogo&&r.jsx("button",{onClick:()=>A(ne=>({...ne,companyLogo:""})),className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full shadow-lg hover:bg-red-600 transition-all hover:scale-110 active:scale-95 z-20",title:"Remover Logomarca",children:r.jsx(Bt,{size:14})})]}),r.jsxs("div",{className:"flex-1 space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"A logomarca enviada aqui substituir a marca padro em todas as telas do sistema, incluindo o Portal do Visitante, tela de Login e Sidebar."}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("div",{className:"text-[10px] uppercase font-black px-3 py-1 bg-slate-100 text-slate-400 rounded-full",children:"PNG ou SVG"}),r.jsx("div",{className:"text-[10px] uppercase font-black px-3 py-1 bg-slate-100 text-slate-400 rounded-full",children:"Fundo Transparente"}),r.jsx("div",{className:"text-[10px] uppercase font-black px-3 py-1 bg-slate-100 text-slate-400 rounded-full",children:"Proporo 2:1 recomendada"})]})]})]})]}),r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ol,{className:"text-emerald-600"})," Personalizao da Boas-vindas (Hero)"]}),r.jsx("button",{onClick:()=>se("showWelcomeSection"),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-300 shrink-0 ${C.showWelcomeSection?"bg-emerald-600":"bg-slate-300"}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform duration-300 ${C.showWelcomeSection?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:`space-y-8 transition-opacity duration-300 ${C.showWelcomeSection?"opacity-100":"opacity-40 pointer-events-none"}`,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1 flex items-center gap-1",children:[r.jsx(Nu,{size:14})," Ttulo de Boas-vindas"]}),r.jsx("input",{type:"text",value:C.welcomeTitle,onChange:ne=>A({...C,welcomeTitle:ne.target.value}),className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none text-sm font-bold bg-white text-slate-900"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1 flex items-center gap-1",children:[r.jsx(Nu,{size:14})," Descrio Curta (Respeita pargrafos)"]}),r.jsx("textarea",{value:C.welcomeDescription,onChange:ne=>A({...C,welcomeDescription:ne.target.value}),className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none text-sm min-h-[120px] bg-white text-slate-900",placeholder:"Digite aqui e use Enter para novos pargrafos..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 flex items-center gap-1",children:"Alinhamento do Contedo"}),r.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-200 w-fit",children:[{id:"left",icon:PN},{id:"center",icon:nk},{id:"right",icon:ik}].map(ne=>r.jsx("button",{onClick:()=>A({...C,welcomeTextAlignment:ne.id}),className:`p-2.5 rounded-lg transition-all ${C.welcomeTextAlignment===ne.id?"bg-white text-emerald-600 shadow-sm border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:r.jsx(ne.icon,{size:20})},ne.id))})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1 flex items-center gap-1",children:[r.jsx(B_,{size:14})," Cor Primria"]}),r.jsxs("div",{className:"flex gap-2 items-center p-2 border border-slate-300 rounded-xl bg-white shadow-sm",children:[r.jsx("input",{type:"color",value:C.welcomePrimaryColor,onChange:ne=>A({...C,welcomePrimaryColor:ne.target.value}),className:"w-10 h-10 p-0 border-0 rounded-lg cursor-pointer shadow-sm bg-white"}),r.jsx("span",{className:"text-xs font-mono text-slate-800 font-bold",children:C.welcomePrimaryColor})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1 flex items-center gap-1",children:[r.jsx(B_,{size:14})," Cor Secundria"]}),r.jsxs("div",{className:"flex gap-2 items-center p-2 border border-slate-300 rounded-xl bg-white shadow-sm",children:[r.jsx("input",{type:"color",value:C.welcomeSecondaryColor,onChange:ne=>A({...C,welcomeSecondaryColor:ne.target.value}),className:"w-10 h-10 p-0 border-0 rounded-lg cursor-pointer shadow-sm bg-white"}),r.jsx("span",{className:"text-xs font-mono text-slate-800 font-bold",children:C.welcomeSecondaryColor})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase flex items-center gap-1",children:[r.jsx(Ki,{size:14})," Imagem de Fundo (Opcional)"]}),C.welcomeBannerImage&&r.jsxs("button",{onClick:()=>se("welcomeDisableOverlay"),className:`flex items-center gap-1 px-2 py-1 rounded-lg text-[10px] font-black uppercase transition-all ${C.welcomeDisableOverlay?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,title:C.welcomeDisableOverlay?"Mostrando imagem original":"Aplicando degrad por cima",children:[C.welcomeDisableOverlay?r.jsx(Ra,{size:12}):r.jsx(Kf,{size:12}),C.welcomeDisableOverlay?"Original":"Com Sobreposio"]})]}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-full h-32 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200 flex items-center justify-center overflow-hidden shadow-inner",children:C.welcomeBannerImage?r.jsx("img",{src:C.welcomeBannerImage,className:"w-full h-full object-cover"}):r.jsxs("div",{className:"text-slate-300 text-center",children:[r.jsx(Ki,{size:32,className:"mx-auto mb-1 opacity-20"}),r.jsx("p",{className:"text-[10px] uppercase font-bold",children:"Sem imagem (Usar degrad)"})]})}),r.jsxs("label",{className:"absolute bottom-2 right-2 bg-emerald-600 text-white p-2.5 rounded-full shadow-lg cursor-pointer hover:bg-emerald-700 transition-all hover:scale-110 active:scale-95",children:[r.jsx(Mu,{size:16}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ne=>j(ne,"banner")})]}),C.welcomeBannerImage&&r.jsx("button",{onClick:()=>A({...C,welcomeBannerImage:"",welcomeDisableOverlay:!1}),className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full shadow-sm hover:bg-red-600 transition-all",children:r.jsx(Bt,{size:12})})]})]})]})]}),r.jsxs("div",{className:"mt-8 border-t border-slate-100 pt-6",children:[r.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Prvia Rpida"}),r.jsxs("div",{className:`rounded-3xl p-6 text-white shadow-lg overflow-hidden relative min-h-[120px] flex flex-col justify-center ${C.welcomeTextAlignment==="left"?"text-left items-start":C.welcomeTextAlignment==="right"?"text-right items-end":"text-center items-center"}`,style:{background:C.welcomeBannerImage?C.welcomeDisableOverlay?`url(${C.welcomeBannerImage}) center/cover`:`linear-gradient(to right, ${C.welcomePrimaryColor}CC, ${C.welcomeSecondaryColor}CC), url(${C.welcomeBannerImage}) center/cover`:`linear-gradient(to right, ${C.welcomePrimaryColor}, ${C.welcomeSecondaryColor})`},children:[r.jsx("h4",{className:"text-xl font-black mb-1",children:C.welcomeTitle}),r.jsx("p",{className:"text-[10px] opacity-90 max-w-xl whitespace-pre-wrap",children:C.welcomeDescription})]})]})]})]}),r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(Ol,{className:"text-emerald-600"})," Visibilidade no Dashboard Interno"]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[{key:"dashboardShowRooms",label:"Widget: Agenda de Salas",icon:ns,color:"text-indigo-600",desc:"Exibe o status de ocupao das salas na lateral do Dashboard."},{key:"dashboardShowNews",label:"Widget: Mural de Notcias",icon:Vu,color:"text-orange-500",desc:"Exibe a lista de comunicados recentes no centro do Dashboard."},{key:"dashboardShowBirthdays",label:"Widget: Aniversariantes",icon:q0,color:"text-pink-500",desc:"Exibe os aniversariantes do ms na lateral do Dashboard."},{key:"showRoleInternal",label:"Exibir Cargos no Sistema",icon:wu,color:"text-emerald-600",desc:"Exibe o cargo abaixo do nome nos diretrios e menus internos."}].map(ne=>r.jsxs("div",{className:"flex items-center justify-between gap-4 p-5 bg-slate-50 rounded-2xl border border-slate-100 hover:border-emerald-200 transition-all group",children:[r.jsxs("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[r.jsx("div",{className:`p-3 bg-white rounded-xl shadow-sm shrink-0 ${ne.color}`,children:r.jsx(ne.icon,{size:20})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h4",{className:"font-bold text-slate-800 text-sm truncate",children:ne.label}),r.jsx("p",{className:"text-[11px] text-slate-400 mt-0.5 leading-tight",children:ne.desc})]})]}),r.jsx("button",{onClick:()=>se(ne.key),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-300 shrink-0 ${C[ne.key]?"bg-emerald-600":"bg-slate-300"}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform duration-300 ${C[ne.key]?"translate-x-6":"translate-x-1"}`})})]},ne.key))})]}),r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[r.jsx(ja,{className:"text-emerald-600"})," Visibilidade no Portal do Visitante"]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[{key:"publicDirectory",label:"Diretrio de Ramais",icon:Lo,color:"text-emerald-500",desc:"Permite que qualquer visitante busque nomes e ramais da empresa."},{key:"showRolePublicly",label:"Exibir Cargo de Colaborador",icon:wu,color:"text-emerald-600",desc:"Exibe o cargo abaixo do nome nos cards de ramal do diretrio pblico."},{key:"showBirthdaysPublicly",label:"Aniversariantes do Ms",icon:Uu,color:"text-pink-500",desc:"Exibe a lista de colaboradores que fazem aniversrio no ms atual."},{key:"showRoomsPublicly",label:"Agenda de Salas",icon:ns,color:"text-indigo-50",desc:"Exibe o status de ocupao das salas de reunio em tempo real."},{key:"showNewsPublicly",label:"Mural de Notcias",icon:Vu,color:"text-orange-500",desc:"Exibe comunicados e notcias corporativas para visitantes."}].map(ne=>r.jsxs("div",{className:"flex items-center justify-between gap-4 p-5 bg-slate-50 rounded-2xl border border-slate-100 hover:border-emerald-200 transition-all group",children:[r.jsxs("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[r.jsx("div",{className:`p-3 bg-white rounded-xl shadow-sm shrink-0 ${ne.color}`,children:r.jsx(ne.icon,{size:20})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h4",{className:"font-bold text-slate-800 text-sm truncate",children:ne.label}),r.jsx("p",{className:"text-[11px] text-slate-400 mt-0.5 leading-tight",children:ne.desc})]})]}),r.jsx("button",{onClick:()=>se(ne.key),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-300 shrink-0 ${C[ne.key]?"bg-emerald-600":"bg-slate-300"}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform duration-300 ${C[ne.key]?"translate-x-6":"translate-x-1"}`})})]},ne.key))}),r.jsx("div",{className:"mt-10 pt-6 border-t border-slate-100 flex justify-end",children:r.jsxs("button",{onClick:K,disabled:R,className:"px-12 py-3 bg-emerald-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs hover:bg-emerald-700 shadow-xl shadow-emerald-900/20 flex items-center gap-3 transition-all active:scale-95 disabled:opacity-50",children:[R?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Fs,{size:16}),"Aplicar Configuraes"]})})]})]}),T&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Excluir Unidade?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Voc est prestes a remover permanentemente ",r.jsxs("strong",{children:['"',T.name,'"']}),"."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>M(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm",children:"Cancelar"}),r.jsxs("button",{onClick:F,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 flex items-center justify-center gap-2",children:[l?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})}),te&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Excluir Setor?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Deseja remover o departamento ",r.jsxs("strong",{children:['"',te.name,'"']}),"?"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>L(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm",children:"Cancelar"}),r.jsxs("button",{onClick:ze,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 flex items-center justify-center gap-2",children:[l?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})})]})},qB=()=>{const{isMaster:t}=Kn(),e=qa(),[n,s]=I.useState([]),[a,l]=I.useState([]),[u,h]=I.useState([]),[m,f]=I.useState(!0),[y,_]=I.useState(""),[w,T]=I.useState("All"),[M,z]=I.useState("All"),[k,q]=I.useState(null);if(!t)return r.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-6 animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-6 shadow-sm border border-red-100",children:r.jsx(Bs,{size:40})}),r.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight mb-2",children:"Acesso Restrito"}),r.jsxs("p",{className:"text-slate-500 max-w-md mb-8 leading-relaxed",children:["Esta rea  exclusiva para usurios com nvel de acesso ",r.jsx("strong",{children:"Master"}),". Suas permisses atuais no permitem visualizar ou gerenciar os acessos do sistema."]}),r.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center gap-2 px-8 py-3 bg-emerald-600 text-white rounded-2xl font-black uppercase text-xs hover:bg-emerald-700 transition-all shadow-xl shadow-emerald-900/20 active:scale-95",children:[r.jsx(KR,{size:16})," Voltar ao Incio"]})]});I.useEffect(()=>{H()},[]);const H=async()=>{f(!0);try{const[L,C,A]=await Promise.all([Jr(),qo(),$a()]),R=L.sort((U,B)=>{const $={[_n.MASTER]:0,[_n.ADMIN]:1,[_n.COMMUNICATION]:2,[_n.USER]:3};return($[U.systemRole]??3)-($[B.systemRole]??3)});s(R),l(C),h(A)}catch(L){console.error("Erro ao carregar dados de usurios:",L)}finally{f(!1)}},P=async(L,C)=>{if(L.systemRole!==C){q(L.id);try{await Gx(L.id,{...L,systemRole:C}),s(A=>A.map(R=>R.id===L.id?{...R,systemRole:C}:R))}catch{alert("Erro ao atualizar permisso.")}finally{q(null)}}},W=n.filter(L=>{const C=y.toLowerCase(),A=L.name.toLowerCase().includes(C)||L.email.toLowerCase().includes(C),R=w==="All"||L.department===w,U=M==="All"||L.unit&&L.unit===M;return A&&R&&U}),te={[_n.MASTER]:{label:"Nvel Master",icon:Tj,color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200"},[_n.ADMIN]:{label:"Administrador",icon:HD,color:"text-red-600",bg:"bg-red-50",border:"border-red-200"},[_n.COMMUNICATION]:{label:"Comunicao",icon:DN,color:"text-purple-600",bg:"bg-purple-50",border:"border-purple-200"},[_n.USER]:{label:"Colaborador",icon:Ji,color:"text-slate-600",bg:"bg-slate-50",border:"border-slate-200"}};return m?r.jsx("div",{className:"flex justify-center p-12",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:32})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Usurios"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Defina os nveis de acesso e permisses do sistema."})]})}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Buscar por nome ou e-mail...",value:y,onChange:L=>_(L.target.value),className:"w-full pl-10 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-slate-50 text-slate-900 text-sm"})]}),r.jsxs("div",{className:"relative w-full md:w-48",children:[r.jsx(ff,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4 pointer-events-none"}),r.jsxs("select",{value:w,onChange:L=>T(L.target.value),className:"w-full pl-9 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm appearance-none",children:[r.jsx("option",{value:"All",children:"Todos Setores"}),a.sort((L,C)=>L.name.localeCompare(C.name)).map(L=>r.jsx("option",{value:L.name,children:L.name},L.id))]})]}),r.jsxs("div",{className:"relative w-full md:w-48",children:[r.jsx(ss,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4 pointer-events-none"}),r.jsxs("select",{value:M,onChange:L=>z(L.target.value),className:"w-full pl-9 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 text-sm appearance-none",children:[r.jsx("option",{value:"All",children:"Todas Unidades"}),u.sort((L,C)=>L.name.localeCompare(C.name)).map(L=>r.jsx("option",{value:L.name,children:L.name},L.id))]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-semibold",children:[r.jsx("th",{className:"px-6 py-4",children:"Usurio"}),r.jsx("th",{className:"px-6 py-4",children:"E-mail"}),r.jsx("th",{className:"px-6 py-4",children:"Setor / Unidade"}),r.jsx("th",{className:"px-6 py-4",children:"Nvel de Acesso"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:W.map(L=>{var R;const C=((R=te[L.systemRole])==null?void 0:R.icon)||Ji,A=te[L.systemRole]||te[_n.USER];return r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:L.avatar,alt:"",className:"w-9 h-9 rounded-full object-cover bg-slate-200 border border-slate-100"}),r.jsx("span",{className:"font-semibold text-slate-800",children:L.name})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:L.email}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] font-bold border border-slate-200 w-fit",children:L.department}),L.unit&&r.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[r.jsx(ss,{size:10})," ",L.unit]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${A.bg} ${A.color}`,children:r.jsx(C,{size:18})}),r.jsxs("div",{className:"relative flex-1 max-w-[200px]",children:[k===L.id&&r.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:r.jsx(Je,{className:"animate-spin text-slate-400",size:14})}),r.jsxs("select",{value:L.systemRole,onChange:U=>P(L,U.target.value),disabled:k===L.id,className:`w-full text-sm font-medium py-2 pl-2 pr-8 rounded-lg border focus:ring-2 focus:ring-emerald-500 cursor-pointer disabled:opacity-50 appearance-none ${A.border} ${A.color} bg-white transition-all`,children:[r.jsx("option",{value:_n.MASTER,children:"Nvel Master (Total)"}),r.jsx("option",{value:_n.ADMIN,children:"Administrador"}),r.jsx("option",{value:_n.COMMUNICATION,children:"Comunicao"}),r.jsx("option",{value:_n.USER,children:"Colaborador"})]})]})]})})]},L.id)})})]})}),W.length===0&&r.jsxs("div",{className:"p-12 text-center text-slate-400",children:[r.jsx(ff,{size:40,className:"mx-auto mb-3 opacity-20"}),r.jsx("p",{children:"Nenhum usurio encontrado com os filtros aplicados."})]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 text-sm text-amber-800 flex items-start gap-3",children:[r.jsx($0,{className:"shrink-0 mt-0.5",size:18}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold mb-1 uppercase text-[10px] tracking-widest",children:"Hierarquia de Permisses:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs opacity-90",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Nvel Master:"})," Super-usurio com controle total, incluindo excluso de registros e gesto de acessos."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Administrador:"})," Gesto operacional completa de salas, ramais e sistemas."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Comunicao:"})," Permisso para criar e editar postagens e notcias no mural."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Colaborador:"})," Acesso padro s ferramentas e diretrios do sistema."]})]})]})]})]})},HB=["TV","Projetor","Videoconferncia","Quadro Branco","Ar Condicionado","Computador","Mesa Redonda","Frigobar","Diretoria"],GB=()=>{const{isMaster:t}=Kn(),[e,n]=I.useState([]),[s,a]=I.useState([]),[l,u]=I.useState(!1),[h,m]=I.useState(!0),[f,y]=I.useState(!1),[_,w]=I.useState({}),[T,M]=I.useState(null);I.useEffect(()=>{z()},[]);const z=async()=>{m(!0);try{const[L,C]=await Promise.all([vm(),$a()]);n(L),a(C)}catch(L){console.error("Erro ao carregar salas",L)}finally{m(!1)}},k=()=>{var L;w({name:"",capacity:4,features:[],unitId:((L=s[0])==null?void 0:L.id)||"",startTime:"08:00",endTime:"18:00",worksSaturday:!1,worksSunday:!1}),u(!0)},q=L=>{w({...L}),u(!0)},H=(L,C)=>{L.preventDefault(),L.stopPropagation(),t&&M(C)},P=async()=>{if(!(!T||!T.id)){y(!0);try{await ZV(T.id),M(null),await z()}catch{alert("Erro ao excluir sala.")}finally{y(!1)}}},W=async()=>{if(!_.name)return alert("Nome da sala  obrigatrio");if(!_.unitId)return alert("Selecione a unidade da sala");y(!0);try{const L={..._,worksSaturday:!!_.worksSaturday,worksSunday:!!_.worksSunday};_.id?await QV(_.id,L):await XV(L),u(!1),z()}catch{alert("Erro ao salvar sala.")}finally{y(!1)}},te=L=>{const C=_.features||[];let A;C.includes(L)?A=C.filter(R=>R!==L):A=[...C,L],w({..._,features:A})};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:48})}):r.jsxs("div",{className:"space-y-6 relative",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Salas de Reunio"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Cadastre salas, defina a unidade e os horrios de funcionamento."})]}),!l&&r.jsxs("button",{onClick:k,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-emerald-700 transition-all font-bold shadow-md",children:[r.jsx(Vn,{size:18})," Nova Sala"]})]}),l?r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[r.jsx(Ol,{size:20,className:"text-emerald-600"}),_.id?"Editar Sala":"Nova Sala"]}),r.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400",children:r.jsx(Pn,{size:20})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-1",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nome da Sala"}),r.jsx("input",{type:"text",value:_.name||"",onChange:L=>w({..._,name:L.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm",placeholder:"Ex: Sala de Inovao"})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Unidade"}),r.jsxs("select",{value:_.unitId||"",onChange:L=>w({..._,unitId:L.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm",children:[r.jsx("option",{value:"",children:"Selecione a Unidade"}),s.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Capacidade (Pessoas)"}),r.jsx("input",{type:"number",min:"1",value:_.capacity||4,onChange:L=>w({..._,capacity:parseInt(L.target.value)}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm"})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Horrio de Funcionamento (Seg-Sex)"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx($i,{size:14,className:"absolute left-2.5 top-3 text-slate-400"}),r.jsx("input",{type:"time",value:_.startTime||"08:00",onChange:L=>w({..._,startTime:L.target.value}),className:"w-full p-2.5 pl-8 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm"})]}),r.jsxs("div",{className:"relative",children:[r.jsx($i,{size:14,className:"absolute left-2.5 top-3 text-slate-400"}),r.jsx("input",{type:"time",value:_.endTime||"18:00",onChange:L=>w({..._,endTime:L.target.value}),className:"w-full p-2.5 pl-8 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 bg-white text-slate-900 shadow-sm"})]})]})]})]}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2",children:[r.jsx(ns,{size:14})," Funcionamento Extra"]}),r.jsxs("div",{className:"flex gap-6",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",checked:!!_.worksSaturday,onChange:L=>w({..._,worksSaturday:L.target.checked}),className:"w-4 h-4 rounded text-emerald-600 focus:ring-emerald-500 border-slate-300"}),r.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-emerald-600 transition-colors",children:"Funciona aos Sbados"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",checked:!!_.worksSunday,onChange:L=>w({..._,worksSunday:L.target.checked}),className:"w-4 h-4 rounded text-emerald-600 focus:ring-emerald-500 border-slate-300"}),r.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-emerald-600 transition-colors",children:"Funciona aos Domingos"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3",children:"Recursos e Equipamentos"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:HB.map(L=>{var C,A;return r.jsxs("button",{type:"button",onClick:()=>te(L),className:`flex items-center gap-2 p-3 rounded-lg border text-sm font-medium transition-all ${(C=_.features)!=null&&C.includes(L)?"bg-emerald-50 border-emerald-500 text-emerald-700":"bg-white border-slate-200 text-slate-600 hover:border-emerald-300"}`,children:[(A=_.features)!=null&&A.includes(L)?r.jsx(xs,{size:18}):r.jsx(No,{size:18}),L]},L)})})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-slate-100",children:[r.jsx("button",{onClick:()=>u(!1),className:"px-6 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",disabled:f,children:"Cancelar"}),r.jsxs("button",{onClick:W,className:"px-8 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 shadow-md transition-all flex items-center gap-2 disabled:opacity-50",disabled:f,children:[f?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18}),"Salvar Sala"]})]})]}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(L=>{const C=s.find(A=>A.id===L.unitId);return r.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-all group",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 border border-indigo-100",children:r.jsx(Ol,{size:24})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-800 leading-tight",children:L.name}),r.jsxs("p",{className:"text-[10px] uppercase font-bold text-slate-400 flex items-center gap-1 mt-1",children:[r.jsx(sc,{size:12})," ",(C==null?void 0:C.name)||"Sede"]})]})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>q(L),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:r.jsx(na,{size:16})}),r.jsx("button",{onClick:A=>H(A,L),disabled:!t,title:t?"Excluir sala":"Apenas usurios Master podem excluir",className:`p-2 transition-colors rounded-lg ${t?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:t?r.jsx(Bt,{size:16}):r.jsx(Un,{size:16})})]})]}),r.jsxs("div",{className:"space-y-2 mt-4 text-[10px] font-bold text-slate-500 bg-slate-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Uu,{size:12,className:"text-slate-400"})," ",L.capacity," Lugares"]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx($i,{size:12,className:"text-slate-400"})," ",L.startTime||"08:00"," - ",L.endTime||"18:00"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 pt-1 border-t border-slate-200",children:[r.jsxs("span",{className:L.worksSaturday?"text-emerald-600":"text-slate-300",children:["SB: ",L.worksSaturday?"ABERTO":"FECHADO"]}),r.jsxs("span",{className:L.worksSunday?"text-emerald-600":"text-slate-300",children:["DOM: ",L.worksSunday?"ABERTO":"FECHADO"]})]})]}),r.jsx("div",{className:"border-t border-slate-100 pt-3 mt-3",children:r.jsx("div",{className:"flex flex-wrap gap-1",children:L.features&&L.features.length>0?L.features.map(A=>r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] border font-medium ${A==="Diretoria"?"bg-amber-100 text-amber-800 border-amber-200 font-bold":"bg-slate-50 text-slate-600 border-slate-200"}`,children:A},A)):r.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Sem recursos listados"})})})]},L.id)}),e.length===0&&r.jsxs("div",{className:"col-span-full py-16 text-center text-slate-400 bg-slate-50 rounded-xl border border-dashed border-slate-200",children:[r.jsx(Ol,{size:48,className:"mx-auto mb-4 opacity-20"}),r.jsx("p",{className:"font-medium",children:"Nenhuma sala cadastrada no momento."})]})]}),T&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Remover Sala?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Voc est prestes a excluir permanentemente a sala ",r.jsxs("strong",{children:['"',T.name,'"']}),".",r.jsx("br",{}),"Esta ao  irreversvel."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>M(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm transition-colors",disabled:f,children:"Cancelar"}),r.jsxs("button",{onClick:P,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 flex items-center justify-center gap-2 shadow-lg shadow-red-200 transition-colors",disabled:f,children:[f?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})})]})},Du=async(t,e,n)=>{const s=t.getContext("2d",{alpha:!0});if(!s)return;const a=n.find(R=>R.id===e.unitId);if(!a)return;const l=1.5;if(t.width=710*l,t.height=240*l,s.scale(l,l),s.clearRect(0,0,710,240),a.image){const R=new Image;R.src=a.image,await new Promise(U=>{R.onload=()=>{s.drawImage(R,24,40,180,65),U()},R.onerror=()=>U()})}s.setLineDash([5,5]),s.beginPath(),s.moveTo(250,20),s.lineTo(250,190),s.strokeStyle="#808080",s.lineWidth=1,s.stroke(),s.setLineDash([]);const u=a.site?a.site.replace(/^https?:\/\//,""):"www.intermaritima.com.br";s.font="bold 14px Arial",s.fillStyle="#666666";const h=s.measureText(u).width;if(s.fillText(u,40+(150-h)/2,140),a.certifications&&a.certifications.length>0){s.font="12px Arial",s.fillStyle="#666666";const R=160,U=15;for(let B=0;B<a.certifications.length;B+=2){const F=a.certifications.slice(B,B+2).join(" / "),je=s.measureText(F).width;s.fillText(F,40+(150-je)/2,R+Math.floor(B/2)*U)}}const f=e.sector.replace("*",`
`).split(`
`),y=f.length>1,_=y?30:40,w=y?90:80,T=y?105:95,M=y?125:115;s.fillStyle="#666666",s.font="bold 14px Arial",s.fillText(e.name,270,_),s.font="14px Arial",y?(s.fillText(f[0].trim(),270,50),s.fillText(f[1].trim(),270,70)):s.fillText(e.sector,270,60),s.fillText(e.email,270,w),s.setLineDash([5,5]),s.beginPath(),s.moveTo(270,T),s.lineTo(710,T),s.strokeStyle="#808080",s.stroke(),s.setLineDash([]),s.font="12px Arial";const z=`${a.address||""}, ${a.number||""}${a.complement?" - "+a.complement:""}${a.neighborhood?", "+a.neighborhood:""}`;s.fillText(z,270,M),s.fillText(`${a.city||""} - ${a.state||""} CEP: ${a.cep||""}`,270,M+20);const k=e.phones.filter(R=>R.type==="fixo"&&R.number&&R.number.trim()),q=e.phones.filter(R=>R.type==="celular"&&R.number&&R.number.trim());let H="";k.length>0&&(H+=`Fixo: ${k.map(R=>R.number).join(" / ")}`),q.length>0&&(H&&(H+="   "),H+=`Celular: +55 ${q.map(R=>R.number).join(" / ")}`),H&&(s.font="bold 12px Arial",s.fillText(H,270,165)),s.fillStyle="#28a745",s.font="12px Arial";const P="Antes de imprimir, pense em seu compromisso com o ",W="Meio Ambiente",te=" e o comprometimento com os ",L="Custos.";let A=(710-s.measureText(P+W+te+L).width)/2;s.font="12px Arial",s.fillText(P,A,230),A+=s.measureText(P).width,s.font="bold 12px Arial",s.fillText(W,A,230),A+=s.measureText(W).width,s.font="12px Arial",s.fillText(te,A,230),A+=s.measureText(te).width,s.font="bold 12px Arial",s.fillText(L,A,230)},$B=()=>{const{currentUser:t,isMaster:e}=Kn(),[n,s]=I.useState("requests"),[a,l]=I.useState(!0),[u,h]=I.useState([]),[m,f]=I.useState([]),[y,_]=I.useState([]),[w,T]=I.useState([]),[M,z]=I.useState([]),[k,q]=I.useState(""),[H,P]=I.useState({name:"",email:"",unitId:"",sector:""}),[W,te]=I.useState([{number:"",type:"celular"}]),[L,C]=I.useState(null),[A,R]=I.useState(""),[U,B]=I.useState("units"),[$,F]=I.useState(!1),[je,ze]=I.useState(null),[j,se]=I.useState({}),[K,ne]=I.useState([]),[J,O]=I.useState(""),[Z,oe]=I.useState(null),[ee,Ne]=I.useState(null),[Y,pe]=I.useState(null),[Se,De]=I.useState(!1),[ut,st]=I.useState(!1),[_e,Ve]=I.useState(!1),[it,mt]=I.useState(null),Jt=I.useRef(null),en=I.useRef(null),[ue,Ie]=I.useState(null),[Re,ot]=I.useState(!1),[tn,dt]=I.useState(!1),At=ie=>{let Ce=ie.replace(/\D/g,"").substring(0,11);return Ce.length>10?Ce=Ce.replace(/^(\d\d)(\d{5})(\d{4}).*/,"($1) $2-$3"):Ce.length>6?Ce=Ce.replace(/^(\d\d)(\d{4})(\d{0,4}).*/,"($1) $2-$3"):Ce.length>2?Ce=Ce.replace(/^(\d\d)(\d{0,5})/,"($1) $2"):Ce.length>0&&(Ce=Ce.replace(/^(\d*)/,"($1")),Ce},ge=ie=>{if(C(ie),Ie(null),ie.requestedData){P({name:ie.requestedData.name,email:ie.requestedData.email,unitId:"",sector:ie.requestedData.sector});const Ce=[];ie.requestedData.phoneMobile&&Ce.push({number:ie.requestedData.phoneMobile,type:"celular"}),ie.requestedData.phoneFixed&&Ce.push({number:ie.requestedData.phoneFixed,type:"fixo"}),te(Ce.length>0?Ce:[{number:"",type:"celular"}]);const $e=M.find(We=>We.email===ie.userEmail);if($e){const We=y.find(kt=>kt.name===$e.unit);We&&P(kt=>({...kt,unitId:We.id})),R($e.id)}}else{const Ce=M.find(ft=>ft.email===ie.userEmail),$e=Ce?y.find(ft=>ft.name===Ce.unit):null,We=Ce?w.find(ft=>ft.name.toLowerCase()===Ce.role.toLowerCase()||ft.name.toLowerCase()===Ce.department.toLowerCase()):null;P({name:ie.userName,email:ie.userEmail,unitId:$e?$e.id:"",sector:We?We.name:""});const kt=[];Ce&&Ce.whatsapp&&Ce.whatsapp.trim()&&kt.push({number:At(Ce.whatsapp),type:"celular"}),Ce&&Ce.extension&&Ce.extension.trim()&&kt.push({number:`(71) 3879-${Ce.extension.trim()}`,type:"fixo"}),te(kt.length>0?kt:[{number:"",type:"celular"}]),Ce&&R(Ce.id)}s("create")};I.useEffect(()=>{l(!0);const ie=x2(ft=>{f(ft),l(!1)}),Ce=mV(ft=>{h(ft)}),$e=g2(ft=>_(ft)),We=fV(ft=>T(ft));return(async()=>{try{const ft=await Jr();z(ft)}catch(ft){console.error("Erro ao carregar dados bsicos:",ft)}})(),()=>{ie(),Ce(),$e(),We()}},[]);const Le=()=>{Ie(null),C(null),R(""),P({name:"",email:"",unitId:"",sector:""}),te([{number:"",type:"celular"}]),Ve(!0),setTimeout(()=>Ve(!1),3e3)},Fe=()=>{Ie(null),C(null),R(""),P({name:"",email:"",unitId:"",sector:""}),te([{number:"",type:"celular"}])},et=ie=>{const Ce=ie.target.value;if(R(Ce),Ce){const $e=M.find(We=>We.id===Ce);if($e){const We=y.find(Ci=>Ci.name===$e.unit),kt=w.find(Ci=>Ci.name.toLowerCase()===$e.role.toLowerCase()||Ci.name.toLowerCase()===$e.department.toLowerCase());P({name:$e.name,email:$e.email,unitId:We?We.id:"",sector:kt?kt.name:""});const ft=[];$e.whatsapp&&ft.push({number:At($e.whatsapp),type:"celular"}),$e.extension&&ft.push({number:`(71) 3879-${$e.extension}`,type:"fixo"}),te(ft.length>0?ft:[{number:"",type:"celular"}])}}},Xe=async()=>{if(!H.unitId||!H.name||!H.sector)return alert("Preencha Unidade, Nome e selecione um Cargo/Setor vlido.");ot(!0);try{if(!Jt.current)return;const ie=W.filter($e=>$e.number&&$e.number.trim()!==""),Ce={...H,phones:ie};await Du(Jt.current,Ce,y),Ie(Jt.current.toDataURL("image/png"))}catch{alert("Erro ao gerar prvia.")}finally{ot(!1)}},pt=async()=>{var ie;if(!(!L||!ue||Re)){ot(!0);try{const Ce=W.filter(ft=>ft.number&&ft.number.trim()!==""),$e={name:H.name,email:H.email,unitId:H.unitId,sector:H.sector,phones:Ce},We=(t==null?void 0:t.name)||"Administrador",kt=((ie=y.find(ft=>ft.id===H.unitId))==null?void 0:ie.name)||"N/A";await zV(L.id,"COMPLETED",We,L.userId,$e),await Tw({employeeName:H.name,employeeEmail:H.email,department:H.sector,unitName:kt,createdAt:new Date().toISOString(),generatedBy:We,signatureData:$e,origin:"REQUEST"}),De(!1),Le(),s("requests")}catch(Ce){console.error("Erro na finalizao:",Ce),alert(`Erro ao processar: ${Ce.message}`)}finally{ot(!1)}}},gt=async()=>{var We;if(!ue||Re)return;ot(!0);const ie=W.filter(kt=>kt.number&&kt.number.trim()!==""),Ce={name:H.name,email:H.email,unitId:H.unitId,sector:H.sector,phones:ie},$e=((We=y.find(kt=>kt.id===H.unitId))==null?void 0:We.name)||"Desconhecida";try{await Tw({employeeName:H.name,employeeEmail:H.email,department:H.sector,unitName:$e,createdAt:new Date().toISOString(),generatedBy:(t==null?void 0:t.name)||"Admin",signatureData:Ce,origin:"MANUAL"}),st(!1),Le()}catch{alert("Erro ao salvar no histrico.")}finally{ot(!1)}},jt=async ie=>{if(!ie.signatureData||!en.current)return alert("Dados insuficientes.");await Du(en.current,ie.signatureData,y);const Ce=document.createElement("a");Ce.download=`assinatura_${ie.employeeName}.png`,Ce.href=en.current.toDataURL("image/png"),Ce.click()},St=async ie=>{if(!ie.signatureData||!en.current)return alert("Dados insuficientes.");ot(!0);try{await Du(en.current,ie.signatureData,y),mt(en.current.toDataURL("image/png"))}catch{alert("Erro ao gerar visualizao.")}finally{ot(!1)}},X=ie=>{ie?(ze(ie),se({...ie}),ne(ie.certifications||[])):(ze(null),se(U==="units"?{name:"",cnpj:"",site:"",city:"",state:"",address:"",number:"",complement:"",neighborhood:"",cep:"",phone:"",image:""}:{name:"",description:""}),ne([])),O(""),F(!0)},de=(ie,Ce)=>{ie.preventDefault(),ie.stopPropagation(),oe(Ce)},Te=async()=>{if(!(!Z||!Z.id)){ot(!0);try{U==="units"?await MV(Z.id):await VV(Z.id),oe(null)}catch(ie){alert(`Erro ao excluir: ${ie.message}`)}finally{ot(!1)}}},Ge=async()=>{if(ee){ot(!0);try{await FV(ee.id),Ne(null)}catch(ie){alert(`Erro ao excluir solicitao: ${ie.message}`)}finally{ot(!1)}}},Ut=async()=>{if(Y){ot(!0);try{await UV(Y.id),pe(null)}catch(ie){alert(`Erro ao excluir histrico: ${ie.message}`)}finally{ot(!1)}}},It=async ie=>{const Ce=ie.replace(/\D/g,"").substring(0,8),$e=Ce.length>5?`${Ce.slice(0,5)}-${Ce.slice(5)}`:Ce;if(se(We=>({...We,cep:$e})),Ce.length===8){dt(!0);try{const We=await fetch(`https://brasilapi.com.br/api/cep/v2/${Ce}`);if(We.status===404){console.warn("CEP no encontrado."),dt(!1);return}if(!We.ok)throw new Error("Erro na rede");const kt=await We.json();kt&&se(ft=>({...ft,address:kt.street||"",neighborhood:kt.neighborhood||"",city:kt.city||"",state:kt.state||"",cep:$e}))}catch(We){console.error("Erro ao buscar CEP (BrasilAPI):",We)}finally{dt(!1)}}},Dt=ie=>{var $e;const Ce=($e=ie.target.files)==null?void 0:$e[0];if(Ce){const We=new FileReader;We.onloadend=()=>se(kt=>({...kt,image:We.result})),We.readAsDataURL(Ce)}},vt=()=>{J.trim()&&(ne([...K,J.trim()]),O(""))},Ft=async()=>{if(!j.name)return alert("Nome obrigatrio.");ot(!0);try{const ie={...j,certifications:K,site:j.site||"",phone:j.phone||"",cnpj:j.cnpj||"",number:j.number||"",complement:j.complement||"",neighborhood:j.neighborhood||"",city:j.city||"",state:j.state||"",cep:j.cep||"",image:j.image||""};U==="units"?je?await kV(je.id,ie):await DV(ie):je?await LV(je.id,ie):await PV(ie),F(!1)}catch(ie){alert(`Erro ao salvar: ${ie.message}`)}finally{ot(!1)}},xn=u.filter(ie=>ie.employeeName.toLowerCase().includes(k.toLowerCase())),fn=m.filter(ie=>ie.status==="PENDING"&&ie.userName.toLowerCase().includes(k.toLowerCase())),bt="w-full p-2.5 border border-slate-300 rounded-lg text-sm bg-white text-slate-900 focus:ring-2 focus:ring-emerald-500 shadow-sm transition-all";return a?r.jsx("div",{className:"flex justify-center p-12",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:32})}):r.jsxs("div",{className:"space-y-6 relative",children:[r.jsx("canvas",{ref:en,className:"hidden"}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsx("div",{children:r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(hf,{className:"text-emerald-600"})," Gesto de Assinaturas"]})}),r.jsxs("div",{className:"relative w-full md:w-auto",children:[r.jsx(Va,{className:"absolute left-3 top-3 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Buscar colaborador...",value:k,onChange:ie=>q(ie.target.value),className:"pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 w-full md:w-64 shadow-sm"})]})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-200 overflow-x-auto",children:[r.jsxs("button",{type:"button",onClick:()=>s("requests"),className:`px-4 py-2 text-sm font-medium border-b-2 whitespace-nowrap flex items-center gap-2 transition-all ${n==="requests"?"border-emerald-600 text-emerald-700 bg-emerald-50/50":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(Kl,{size:16})," Solicitaes ",fn.length>0&&r.jsx("span",{className:"bg-emerald-600 text-white text-[10px] px-1.5 py-0.5 rounded-full ml-1",children:fn.length})]}),r.jsxs("button",{type:"button",onClick:()=>s("create"),className:`px-4 py-2 text-sm font-medium border-b-2 whitespace-nowrap flex items-center gap-2 transition-all ${n==="create"?"border-emerald-600 text-emerald-700 bg-emerald-50/50":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(xi,{size:16})," Criar Assinatura ",L&&r.jsx("span",{className:"bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded text-[10px] animate-pulse ml-1",children:"Processando"})]}),r.jsxs("button",{type:"button",onClick:()=>s("logs"),className:`px-4 py-2 text-sm font-medium border-b-2 whitespace-nowrap flex items-center gap-2 transition-all ${n==="logs"?"border-emerald-600 text-emerald-700 bg-emerald-50/50":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(xs,{size:16})," Histrico"]}),r.jsxs("button",{type:"button",onClick:()=>s("management"),className:`px-4 py-2 text-sm font-medium border-b-2 whitespace-nowrap flex items-center gap-2 transition-all ${n==="management"?"border-emerald-600 text-emerald-700 bg-emerald-50/50":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[r.jsx(Da,{size:16})," Configuraes"]})]}),n==="create"&&r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 animate-fade-in relative",children:[_e&&r.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-emerald-500 text-white px-6 py-2 rounded-full shadow-lg flex items-center gap-2 animate-bounce z-20",children:[r.jsx(Ao,{size:18})," Assinatura salva com sucesso!"]}),L&&r.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-100 rounded-xl flex items-center justify-between animate-fade-in",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-full text-amber-600",children:r.jsx(Xu,{size:20})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-bold text-amber-800",children:["Processando solicitao de ",L.userName]}),r.jsxs("p",{className:"text-xs text-amber-600",children:['Observaes: "',L.notes,'"']})]})]}),r.jsx("button",{type:"button",onClick:()=>{C(null),R("")},className:"text-xs font-bold text-amber-700 hover:underline",children:"Cancelar vnculo"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Colaborador (Opcional)"}),r.jsxs("select",{value:A,onChange:et,className:bt,children:[r.jsx("option",{value:"",children:"Selecionar manualmente..."}),M.sort((ie,Ce)=>ie.name.localeCompare(Ce.name)).map(ie=>r.jsxs("option",{value:ie.id,children:[ie.name," (",ie.department,")"]},ie.id))]})]}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Unidade"}),r.jsxs("select",{value:H.unitId,onChange:ie=>P({...H,unitId:ie.target.value}),className:bt,children:[r.jsx("option",{value:"",children:"Selecione Unidade"}),y.map(ie=>r.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),r.jsx("input",{value:H.name,onChange:ie=>P({...H,name:ie.target.value}),className:bt,placeholder:"Nome Completo"}),r.jsx("input",{value:H.email,onChange:ie=>P({...H,email:ie.target.value}),className:bt,placeholder:"E-mail"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Cargo / Setor (Exclusivo)"}),r.jsxs("select",{value:H.sector,onChange:ie=>P({...H,sector:ie.target.value}),className:bt,children:[r.jsx("option",{value:"",children:"Selecione um Cargo/Setor..."}),w.sort((ie,Ce)=>ie.name.localeCompare(Ce.name)).map(ie=>r.jsx("option",{value:ie.name,children:ie.name},ie.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Telefones (WhatsApp e Ramal)"}),W.map((ie,Ce)=>r.jsxs("div",{className:"flex gap-1 mb-1 animate-fade-in",children:[r.jsx("input",{value:ie.number,onChange:$e=>{const We=[...W];We[Ce].number=At($e.target.value),te(We)},className:`${bt} flex-1`,placeholder:"(XX) XXXXX-XXXX"}),r.jsxs("select",{value:ie.type,onChange:$e=>{const We=[...W];We[Ce].type=$e.target.value,te(We)},className:"border border-slate-300 rounded-lg p-2 text-sm bg-white w-24",children:[r.jsx("option",{value:"celular",children:"Cel"}),r.jsx("option",{value:"fixo",children:"Fixo"})]}),r.jsx("button",{type:"button",onClick:()=>te(W.filter(($e,We)=>We!==Ce)),className:"text-red-400 px-1 hover:bg-red-50 rounded",children:r.jsx(bD,{size:16})})]},Ce)),r.jsxs("button",{type:"button",onClick:()=>te([...W,{number:"",type:"celular"}]),className:"text-xs text-emerald-600 flex items-center gap-1 font-bold mt-1 hover:underline",children:[r.jsx(Vn,{size:12})," Adicionar Telefone"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{type:"button",onClick:Fe,className:"bg-slate-100 text-slate-600 p-2.5 rounded-lg font-bold hover:bg-slate-200 flex items-center justify-center gap-2 transition-all border border-slate-200",children:[r.jsx(Aj,{size:16})," Limpar"]}),r.jsxs("button",{type:"button",onClick:Xe,disabled:Re,className:"bg-emerald-600 text-white p-2.5 rounded-lg font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 shadow-md shadow-emerald-100 disabled:opacity-50 transition-all",children:[Re?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(LD,{size:16})," Preview"]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-slate-100 rounded-xl p-6 flex flex-col items-center justify-center border min-h-[400px]",children:[r.jsx("canvas",{ref:Jt,className:"hidden"}),ue?r.jsxs("div",{className:"text-center space-y-6 w-full max-w-2xl animate-fade-in",children:[r.jsx("div",{className:"bg-white p-4 shadow-xl border border-slate-200 rounded-lg overflow-hidden",children:r.jsx("img",{src:ue,alt:"Preview",className:"max-w-full"})}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[L?r.jsxs("button",{type:"button",onClick:()=>De(!0),disabled:Re,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-lg text-sm font-bold hover:bg-emerald-700 flex items-center gap-2 shadow-md shadow-emerald-200 transition-all active:scale-95",children:[Re?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(xs,{size:18})," Finalizar e Notificar Solicitante"]}):r.jsxs("button",{type:"button",onClick:()=>st(!0),disabled:Re,className:"bg-emerald-600 text-white px-6 py-2.5 rounded-lg text-sm font-bold hover:bg-emerald-700 flex items-center gap-2 shadow-md shadow-emerald-200",children:[Re?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18})," Salvar no Histrico"]}),r.jsxs("a",{href:ue,download:`assinatura_${H.name}.png`,className:"bg-white border border-slate-200 text-slate-700 px-6 py-2.5 rounded-lg text-sm font-bold hover:bg-slate-50 flex items-center gap-2 shadow-sm",children:[r.jsx(Eu,{size:18})," Baixar PNG"]})]})]}):r.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-400",children:[r.jsx(xi,{size:48,className:"opacity-20 mb-2"}),r.jsx("p",{className:"italic",children:"Gere o preview para habilitar a finalizao."})]})]})]})]}),n==="requests"&&r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-fade-in",children:fn.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold",children:[r.jsx("th",{className:"px-6 py-4",children:"Data"}),r.jsx("th",{className:"px-6 py-4",children:"Colaborador"}),r.jsx("th",{className:"px-6 py-4",children:"Observaes"}),r.jsx("th",{className:"px-6 py-4",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:fn.map(ie=>r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(ie.createdAt).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"font-bold text-slate-800 text-sm",children:ie.userName}),r.jsx("p",{className:"text-xs text-slate-500",children:ie.userEmail})]}),r.jsxs("td",{className:"px-6 py-4 text-xs text-slate-500 italic max-w-xs truncate",children:['"',ie.notes,'"']}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-[10px] uppercase font-bold px-2 py-1 rounded-full border bg-amber-50 text-amber-600 border-amber-100",children:"Pendente"})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>ge(ie),className:"text-xs bg-emerald-600 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-emerald-700 shadow-sm shadow-emerald-100 transition-all",children:[r.jsx(xi,{size:14})," Processar Agora"]}),r.jsx("button",{type:"button",onClick:()=>Ne(ie),disabled:!e,title:e?"Excluir solicitao":"Apenas usurios Master podem excluir",className:`p-2 transition-colors rounded-lg ${e?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:e?r.jsx(Bt,{size:16}):r.jsx(Un,{size:16})})]})})]},ie.id))})]})}):r.jsxs("div",{className:"p-20 text-center bg-slate-50/50 flex flex-col items-center justify-center animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6 text-slate-300",children:r.jsx(Kl,{size:40})}),r.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:"Sem solicitaes no momento"}),r.jsx("p",{className:"text-slate-500 max-w-md mx-auto leading-relaxed text-sm",children:"Nenhum colaborador solicitou uma nova assinatura de e-mail recentemente. Quando houver solicitaes pendentes, elas aparecero nesta lista."})]})}),n==="logs"&&r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-fade-in",children:xn.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold",children:[r.jsx("th",{className:"px-6 py-4",children:"Data/Hora"}),r.jsx("th",{className:"px-6 py-4",children:"Origem"}),r.jsx("th",{className:"px-6 py-4",children:"Colaborador"}),r.jsx("th",{className:"px-6 py-4",children:"Setor / Unidade"}),r.jsx("th",{className:"px-6 py-4",children:"Processado Por"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Ao"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:xn.map(ie=>r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"text-xs font-bold text-slate-700",children:new Date(ie.createdAt).toLocaleDateString()}),r.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ie.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`text-[9px] uppercase font-black px-2 py-0.5 rounded-full flex items-center gap-1 w-fit border ${ie.origin==="REQUEST"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-slate-50 text-slate-500 border-slate-200"}`,children:[ie.origin==="REQUEST"?r.jsx(mf,{size:10}):r.jsx(VN,{size:10}),ie.origin==="REQUEST"?"Solicitao":"Avulso"]})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:"font-bold text-slate-800 text-sm",children:ie.employeeName}),r.jsx("p",{className:"text-xs text-slate-500",children:ie.employeeEmail})]}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-[10px] font-bold text-slate-600 border border-slate-200",children:ie.department}),r.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:ie.unitName})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-1.5 bg-slate-100 rounded-full text-slate-500",children:r.jsx(LN,{size:14})}),r.jsx("span",{className:"text-xs font-bold text-slate-700",children:ie.generatedBy})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>St(ie),className:"text-xs bg-slate-100 text-slate-600 px-3 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[r.jsx(Ra,{size:14})," Visualizar"]}),r.jsxs("button",{type:"button",onClick:()=>jt(ie),className:"text-xs bg-emerald-600 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-emerald-700 shadow-sm shadow-emerald-100 transition-all",children:[r.jsx(Eu,{size:14})," Baixar"]}),r.jsx("button",{type:"button",onClick:()=>pe(ie),disabled:!e,title:e?"Excluir histrico":"Apenas usurios Master podem excluir",className:`p-2 transition-colors rounded-lg ${e?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:e?r.jsx(Bt,{size:16}):r.jsx(Un,{size:16})})]})})]},ie.id))})]})}):r.jsxs("div",{className:"p-20 text-center bg-slate-50/50 flex flex-col items-center justify-center animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6 text-slate-300",children:r.jsx(Vj,{size:40})}),r.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight mb-2",children:"Histrico de Geraco Vazio"}),r.jsx("p",{className:"text-slate-500 max-w-md mx-auto leading-relaxed text-sm",children:"Ainda no foram geradas assinaturas oficiais atravs desta ferramenta. Comece processando uma solicitao ou criando uma manualmente."}),r.jsxs("button",{onClick:()=>s("create"),className:"mt-6 text-emerald-600 font-black text-xs uppercase tracking-widest flex items-center gap-2 hover:underline",children:[r.jsx(xi,{size:14})," Criar Primeira Assinatura"]})]})}),n==="management"&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex gap-4 border-b border-slate-200",children:[r.jsx("button",{type:"button",onClick:()=>B("units"),className:`pb-2 px-4 text-sm font-bold transition-all ${U==="units"?"border-b-2 border-emerald-600 text-emerald-700":"text-slate-400 hover:text-slate-600"}`,children:"Unidades Fsicas"}),r.jsx("button",{type:"button",onClick:()=>B("sectors"),className:`pb-2 px-4 text-sm font-bold transition-all ${U==="sectors"?"border-b-2 border-emerald-600 text-emerald-700":"text-slate-400 hover:text-slate-600"}`,children:"Cargos / Setores"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{type:"button",onClick:()=>X(),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-emerald-700 shadow-sm shadow-emerald-100",children:[r.jsx(Vn,{size:16})," Adicionar ",U==="units"?"Unidade":"Setor"]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U==="units"?y.map(ie=>r.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col hover:border-emerald-300 hover:shadow-xl transition-all group overflow-hidden relative",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-24 h-12 flex items-center justify-center bg-slate-50 rounded-xl overflow-hidden border border-slate-100 group-hover:bg-white transition-colors p-2 shadow-inner",children:ie.image?r.jsx("img",{src:ie.image,alt:ie.name,className:"max-w-full max-h-full object-contain"}):r.jsxs("div",{className:"text-emerald-600 flex items-center gap-1.5 font-black uppercase text-[10px]",children:[r.jsx(ss,{size:16})," UNID"]})}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{type:"button",onClick:()=>X(ie),className:"p-2 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all",children:r.jsx(na,{size:16})}),r.jsx("button",{type:"button",onClick:Ce=>de(Ce,ie),disabled:!e,className:`p-2 transition-colors rounded-lg ${e?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:e?r.jsx(Bt,{size:16}):r.jsx(Un,{size:16})})]})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-black text-slate-800 uppercase tracking-tight text-lg leading-tight group-hover:text-emerald-600 transition-colors",children:ie.name}),r.jsxs("p",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1 uppercase tracking-widest mt-1",children:[r.jsx(Hj,{size:10})," ",ie.cnpj||"CNPJ no informado"]})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsxs("p",{className:"text-xs text-slate-600 flex items-start gap-2 leading-snug",children:[r.jsx(ss,{size:14,className:"text-slate-400 shrink-0 mt-0.5"}),r.jsxs("span",{children:[ie.address,", ",ie.number,ie.complement?` - ${ie.complement}`:"",r.jsx("br",{}),ie.neighborhood," - ",ie.city,"/",ie.state]})]}),r.jsxs("p",{className:"text-[10px] text-slate-400 font-bold pl-5",children:["CEP: ",ie.cep||"---"]})]})]}),r.jsxs("div",{className:"mt-auto space-y-4 pt-4 border-t border-slate-50",children:[r.jsxs("div",{className:"flex flex-wrap gap-4",children:[ie.phone&&r.jsxs("p",{className:"text-[11px] font-bold text-slate-700 flex items-center gap-1.5",children:[r.jsx(Lo,{size:12,className:"text-emerald-500"})," ",ie.phone]}),ie.site&&r.jsxs("p",{className:"text-[11px] font-bold text-slate-700 flex items-center gap-1.5",children:[r.jsx(ja,{size:12,className:"text-blue-500"})," ",ie.site.replace(/^https?:\/\//,"")]})]}),ie.certifications&&ie.certifications.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1.5",children:ie.certifications.map((Ce,$e)=>r.jsxs("span",{className:"bg-amber-50 text-amber-700 text-[9px] font-black uppercase tracking-wider px-2 py-0.5 rounded-full border border-amber-100 flex items-center gap-1",children:[r.jsx(SN,{size:10})," ",Ce]},$e))})]})]},ie.id)):w.sort((ie,Ce)=>ie.name.localeCompare(Ce.name)).map(ie=>r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between hover:border-emerald-300 transition-all group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600",children:r.jsx(wu,{size:18})}),r.jsx("span",{className:"font-bold text-slate-700 text-sm",children:ie.name})]}),r.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{type:"button",onClick:()=>X(ie),className:"p-1.5 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg",children:r.jsx(na,{size:14})}),r.jsx("button",{type:"button",onClick:Ce=>de(Ce,ie),disabled:!e,className:`p-1.5 transition-colors rounded-lg ${e?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed opacity-50"}`,children:e?r.jsx(Bt,{size:14}):r.jsx(Un,{size:14})})]})]},ie.id))})]}),it&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4 animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-2xl overflow-hidden p-8 flex flex-col items-center",children:[r.jsxs("div",{className:"w-full flex justify-between items-center mb-8",children:[r.jsx("h3",{className:"font-black text-slate-800 uppercase text-xs tracking-[0.3em]",children:"Visualizao: Assinatura Gerada"}),r.jsx("button",{onClick:()=>mt(null),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:r.jsx(Pn,{size:24})})]}),r.jsx("div",{className:"bg-white p-6 shadow-2xl border border-slate-100 rounded-xl overflow-hidden mb-10 w-full flex justify-center",children:r.jsx("img",{src:it,alt:"Log Signature Preview",className:"max-w-full"})}),r.jsx("div",{className:"flex gap-3",children:r.jsx("button",{onClick:()=>mt(null),className:"px-8 py-3 text-slate-400 font-black uppercase text-xs hover:bg-slate-100 rounded-xl transition-all",children:"Fechar"})})]})}),$&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsxs("h3",{className:"font-black text-slate-800 uppercase tracking-widest text-sm flex items-center gap-2",children:[U==="units"?r.jsx(ss,{size:18,className:"text-emerald-600"}):r.jsx(wu,{size:18,className:"text-emerald-600"}),je?"Editar":"Adicionar"," ",U==="units"?"Unidade":"Setor"]}),r.jsx("button",{onClick:()=>F(!1),className:"p-2 hover:bg-slate-200 rounded-full text-slate-400",children:r.jsx(Pn,{size:24})})]}),r.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar space-y-6",children:U==="units"?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-full flex flex-col items-center gap-2 mb-4",children:[r.jsxs("div",{className:"w-48 h-20 bg-slate-100 rounded-xl border-2 border-dashed border-slate-300 flex items-center justify-center overflow-hidden relative group",children:[j.image?r.jsx("img",{src:j.image,className:"w-full h-full object-contain p-2",alt:"Logo preview"}):r.jsx(Ki,{size:24,className:"text-slate-400"}),r.jsxs("label",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:[r.jsx(Mu,{size:20,className:"text-white"}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Dt})]})]}),r.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Logo da Unidade (PNG)"})]}),r.jsxs("div",{className:"col-span-full",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Nome da Unidade"}),r.jsx("input",{value:j.name||"",onChange:ie=>se({...j,name:ie.target.value}),className:bt})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"CNPJ"}),r.jsx("input",{value:j.cnpj||"",onChange:ie=>se({...j,cnpj:ie.target.value}),className:bt})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase flex justify-between",children:["CEP (Auto-busca)",tn&&r.jsx(Je,{size:10,className:"animate-spin text-emerald-500"})]}),r.jsx("input",{value:j.cep||"",onChange:ie=>It(ie.target.value),className:bt,placeholder:"00000-000"})]}),r.jsxs("div",{className:"col-span-full",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Logradouro / Endereo"}),r.jsx("input",{value:j.address||"",onChange:ie=>se({...j,address:ie.target.value}),className:bt})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Nmero"}),r.jsx("input",{value:j.number||"",onChange:ie=>se({...j,number:ie.target.value}),className:bt})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Complemento"}),r.jsx("input",{value:j.complement||"",onChange:ie=>se({...j,complement:ie.target.value}),className:bt})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Bairro"}),r.jsx("input",{value:j.neighborhood||"",onChange:ie=>se({...j,neighborhood:ie.target.value}),className:bt})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Cidade / UF"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{value:j.city||"",onChange:ie=>se({...j,city:ie.target.value}),className:`${bt} flex-1`}),r.jsx("input",{value:j.state||"",onChange:ie=>se({...j,state:ie.target.value}),className:`${bt} w-16 uppercase`,maxLength:2})]})]}),r.jsxs("div",{className:"col-span-full border-t border-slate-100 pt-4 mt-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Contato Adicional"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[8px] uppercase font-bold text-slate-400",children:"Site Oficial"}),r.jsx("input",{value:j.site||"",onChange:ie=>se({...j,site:ie.target.value}),className:bt,placeholder:"Ex: www.site.com.br"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[8px] uppercase font-bold text-slate-400",children:"Telefone Geral"}),r.jsx("input",{value:j.phone||"",onChange:ie=>se({...j,phone:ie.target.value}),className:bt,placeholder:"Ex: (71) 0000-0000"})]})]})]}),r.jsxs("div",{className:"col-span-full border-t border-slate-100 pt-4 mt-2",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-3",children:"Certificaes / Selos (Mx 4)"}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("input",{value:J,onChange:ie=>O(ie.target.value),className:`${bt} flex-1`,placeholder:"Ex: ISO 9001"}),r.jsx("button",{type:"button",onClick:vt,className:"bg-slate-100 px-4 rounded-lg font-bold text-slate-600 hover:bg-slate-200 transition-all",children:r.jsx(Vn,{size:18})})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:K.map((ie,Ce)=>r.jsxs("span",{className:"bg-emerald-50 text-emerald-700 text-[10px] font-bold px-3 py-1.5 rounded-full border border-emerald-100 flex items-center gap-2",children:[ie," ",r.jsx("button",{type:"button",onClick:()=>ne(K.filter(($e,We)=>We!==Ce)),"aria-label":"Remover certificao",children:r.jsx(Pn,{size:12})})]},Ce))})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Nome do Cargo / Setor"}),r.jsx("input",{value:j.name||"",onChange:ie=>se({...j,name:ie.target.value}),className:bt,placeholder:"Ex: Gerente de Operaes"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Observaes Internas (Opcional)"}),r.jsx("textarea",{value:j.description||"",onChange:ie=>se({...j,description:ie.target.value}),className:`${bt} min-h-[100px]`})]})]})}),r.jsxs("div",{className:"p-6 bg-slate-50 border-t border-slate-100 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>F(!1),className:"px-6 py-2 text-slate-600 font-bold text-sm hover:bg-slate-200 rounded-xl transition-all",disabled:Re,children:"Cancelar"}),r.jsxs("button",{onClick:Ft,className:"px-10 py-2 bg-emerald-600 text-white font-bold text-sm hover:bg-emerald-700 rounded-xl shadow-lg shadow-emerald-200 flex items-center gap-2",disabled:Re,children:[Re?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18})," Salvar"]})]})]})}),Se&&L&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-emerald-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-600",children:r.jsx(Jf,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Finalizar Processamento?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Deseja finalizar e notificar ",r.jsx("strong",{children:L.userName}),"?",r.jsx("br",{}),"A assinatura ser salva no histrico e a tarefa correspondente no iRamais ser concluda."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>De(!1),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm transition-colors",disabled:Re,children:"Cancelar"}),r.jsxs("button",{onClick:pt,className:"flex-1 py-3 bg-emerald-600 text-white rounded-xl font-bold text-sm hover:bg-emerald-700 flex items-center justify-center gap-2 shadow-lg shadow-emerald-200 transition-colors",disabled:Re,children:[Re?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(xs,{size:16})," Confirmar e Notificar"]})]})]})})}),ut&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-emerald-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-600",children:r.jsx(Fs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Salvar no Histrico?"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Esta assinatura no est vinculada a uma solicitao. Deseja salv-la no histrico para futuras consultas e downloads?"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>st(!1),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm transition-colors",disabled:Re,children:"No, apenas ver"}),r.jsxs("button",{onClick:gt,className:"flex-1 py-3 bg-emerald-600 text-white rounded-xl font-bold text-sm hover:bg-emerald-700 flex items-center justify-center gap-2 shadow-lg shadow-emerald-200 transition-all",disabled:Re,children:[Re?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(xs,{size:16})," Confirmar e Salvar"]})]})]})})}),Z&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[120] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:["Excluir ",U==="units"?"Unidade":"Setor","?"]}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Tem certeza que deseja remover ",r.jsxs("strong",{children:['"',Z.name,'"']}),"?",r.jsx("br",{}),"Isso no apagar as assinaturas geradas anteriormente, mas impedir novas."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>oe(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm",disabled:Re,children:"Cancelar"}),r.jsxs("button",{onClick:Te,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-all flex items-center justify-center gap-2",disabled:Re,children:[Re?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})}),ee&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[120] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Excluir Solicitao?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Deseja remover permanentemente a solicitao de ",r.jsx("strong",{children:ee.userName}),"?"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>Ne(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm",disabled:Re,children:"Cancelar"}),r.jsxs("button",{onClick:Ge,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 flex items-center justify-center gap-2",disabled:Re,children:[Re?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})}),Y&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[120] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:r.jsx(Bs,{size:32})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Excluir do Histrico?"}),r.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Deseja remover o registro de ",r.jsx("strong",{children:Y.employeeName})," do histrico?",r.jsx("br",{}),"Isso no impedir o colaborador de baixar a assinatura dele."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>pe(null),className:"flex-1 py-3 text-slate-600 hover:bg-slate-100 rounded-xl font-bold text-sm",disabled:Re,children:"Cancelar"}),r.jsxs("button",{onClick:Ut,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 flex items-center justify-center gap-2",disabled:Re,children:[Re?r.jsx(Je,{size:16,className:"animate-spin"}):r.jsx(Bt,{size:16})," Sim, Excluir"]})]})]})})})]})},rN=[{label:"Ttulo do Termo",key:"titulo_documento",mapping:"doc_title",type:"text"},{label:"Nome do Colaborador",key:"nome_colaborador",mapping:"emp_name",type:"text"},{label:"Departamento/Setor",key:"departamento",mapping:"emp_dept",type:"text"},{label:"Cargo do Colaborador",key:"cargo",mapping:"emp_role",type:"text"},{label:"Unidade de Trabalho",key:"unidade",mapping:"emp_unit",type:"text"},{label:"Data (DD/MM/AAAA)",key:"data_documento",mapping:"doc_date",type:"text"},{label:"Data por Extenso",key:"dia_mesescrito_ano",mapping:"doc_date_full",type:"text"}],KB=t=>{if(!t)return"";let e=t.replace(/\\pict[\s\S]*?\}|\\bin[0-9 ]+.*?\}/g," ");return e=e.replace(/\{\\\*\\generated.*?\}|\\blipuid[\s\S]*?\}/g," "),e=e.replace(/\\([a-z]{1,32})(-?\d+)? ?/g,(n,s)=>s==="par"||s==="line"?`
`:s==="tab"?"	":""),e=e.replace(/[\{\}]/g,""),e.trim().replace(/[ ]{2,}/g," ")},JB=()=>{var gt,jt,St;const{currentUser:t,isMaster:e,isAdmin:n,globalSettings:s}=Kn(),[a,l]=I.useState("issued"),[u,h]=I.useState([]),[m,f]=I.useState([]),[y,_]=I.useState([]),[w,T]=I.useState([]),[M,z]=I.useState([]),[k,q]=I.useState([]),[H,P]=I.useState(!0),[W,te]=I.useState(!1),[L,C]=I.useState(""),[A,R]=I.useState(null),[U,B]=I.useState(null),[$,F]=I.useState(""),[je,ze]=I.useState(!1),[j,se]=I.useState(null),[K,ne]=I.useState(null),[J,O]=I.useState(null),[Z,oe]=I.useState({name:"",title:"",type:"entrega",responsibleDepartment:(t==null?void 0:t.department)||"TI",content:"",tableFields:[],customVariables:[...rN],certificationImages:[]}),[ee,Ne]=I.useState({templateId:"",employeeId:"",dataDoc:new Date().toISOString().split("T")[0],dynamicData:{}}),Y=I.useMemo(()=>{var X;return e||n?{enabled:!0,canCreateTemplates:!0,canIssueTerms:!0,canDelete:!0,canReturn:!0,canSeeAllSectors:!0}:((X=s==null?void 0:s.termsDeptPermissions)==null?void 0:X[(t==null?void 0:t.department)||""])||{enabled:!1,canCreateTemplates:!1,canIssueTerms:!1,canDelete:!1,canReturn:!1,canSeeAllSectors:!1}},[s,t,e,n]);I.useEffect(()=>{P(!0);const X=lV(h),de=p2(f);return Jr().then(_),$a().then(z),HV().then(T),qo().then(q),P(!1),()=>{X(),de()}},[]);const pe=I.useMemo(()=>e||n||Y.canSeeAllSectors?u:u.filter(X=>X.responsibleDepartment===(t==null?void 0:t.department)),[u,e,n,Y.canSeeAllSectors,t]),Se=I.useMemo(()=>{const X=new Set(pe.map(Te=>Te.id));return(e||n||Y.canSeeAllSectors?m:m.filter(Te=>X.has(Te.templateId))).filter(Te=>Te.employeeName.toLowerCase().includes(L.toLowerCase()))},[m,pe,e,n,Y.canSeeAllSectors,L]),De=I.useMemo(()=>{const X=new Map;return Se.forEach(de=>{de.originalTermId&&de.type==="devolucao"&&X.set(de.originalTermId,{status:de.status,id:de.id})}),X},[Se]),ut=I.useMemo(()=>{const X=new Map(m.map(de=>[de.id,de]));return[...Se].sort((de,Te)=>{const Ge=de.originalTermId||de.id,Ut=Te.originalTermId||Te.id;if(Ge===Ut)return de.type==="devolucao"?1:-1;const It=X.get(Ge)||de,Dt=X.get(Ut)||Te;return new Date(Dt.createdAt).getTime()-new Date(It.createdAt).getTime()})},[Se,m]),st=async X=>{te(!0);try{const de=await new Promise((Ge,Ut)=>{const It=new FileReader;It.onload=Dt=>{var vt;return Ge((vt=Dt.target)==null?void 0:vt.result)},It.onerror=Ut,It.readAsText(X,"windows-1252")}),Te=KB(de);oe(Ge=>({...Ge,content:Te}))}catch{alert("Erro ao ler arquivo RTF.")}finally{te(!1)}},_e=(X,de,Te,Ge)=>{const Ut=u.find(vt=>vt.id===X),It=y.find(vt=>vt.id===de);if(!Ut)return Ge;const Dt={...Ge};return Ut.customVariables.forEach(vt=>{if(vt.mapping&&vt.mapping!=="none"&&It)switch(vt.mapping){case"doc_title":Dt[vt.key]=Ut.title;break;case"emp_name":Dt[vt.key]=It.name;break;case"emp_dept":Dt[vt.key]=It.department;break;case"emp_role":Dt[vt.key]=It.role;break;case"emp_unit":Dt[vt.key]=It.unit||"MATRIZ";break;case"doc_date":Dt[vt.key]=new Date(Te).toLocaleDateString("pt-BR");break;case"doc_date_full":Dt[vt.key]=new Date(Te).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"});break}else Dt[vt.key]||(Dt[vt.key]="")}),Dt},Ve=X=>{const de=_e(X,ee.employeeId,ee.dataDoc,{});Ne(Te=>({...Te,templateId:X,dynamicData:de}))},it=X=>{const de=_e(ee.templateId,X,ee.dataDoc,ee.dynamicData);Ne(Te=>({...Te,employeeId:X,dynamicData:de}))},mt=X=>{const de=_e(ee.templateId,ee.employeeId,X,ee.dynamicData);Ne(Te=>({...Te,dataDoc:X,dynamicData:de}))},Jt=(X,de)=>{Ne(Te=>({...Te,dynamicData:{...Te.dynamicData,[X]:de}}))},en=async X=>{if(X.preventDefault(),!ee.templateId||!ee.employeeId)return alert("Selecione modelo e colaborador.");te(!0);try{const de=y.find(It=>It.id===ee.employeeId),Te=u.find(It=>It.id===ee.templateId);if(!de||!Te)throw new Error;const Ge=Te.customVariables.find(It=>It.mapping==="emp_name"),Ut=Ge&&ee.dynamicData[Ge.key]||de.name;await IV({templateId:Te.id,employeeId:de.id,employeeName:Ut,type:Te.type,data:ee.dynamicData,originalTermId:ee.originalTermId||"",issuerName:(t==null?void 0:t.name)||"Administrador"}),alert("Termo emitido com sucesso!"),Ne({templateId:"",employeeId:"",dataDoc:new Date().toISOString().split("T")[0],dynamicData:{}}),l("issued")}catch{alert("Erro ao emitir termo.")}finally{te(!1)}},ue=async()=>{if(!Z.name||!Z.content)return alert("Preencha o nome e o contedo do termo.");te(!0);try{j?await AV(j.id,{...Z}):await CV({...Z,active:!0,createdAt:new Date().toISOString()}),ze(!1)}catch{alert("Erro ao salvar modelo.")}finally{te(!1)}},Ie=async(X,de,Te)=>{if(!(!e||!s)){te(!0);try{const Ge=s.termsDeptPermissions||{},Ut=Ge[X]||{enabled:!1,canCreateTemplates:!1,canIssueTerms:!1,canDelete:!1,canReturn:!1,canSeeAllSectors:!1},It={...Ge,[X]:{...Ut,[de]:Te}};await y2({termsDeptPermissions:It})}catch{alert("Erro ao atualizar permisso.")}finally{te(!1)}}},Re=()=>oe(X=>({...X,customVariables:[...X.customVariables||[],{key:"",label:"",mapping:"none",type:"text"}]})),ot=X=>oe(de=>({...de,customVariables:(de.customVariables||[]).filter((Te,Ge)=>Ge!==X)})),tn=(X,de)=>oe(Te=>{const Ge=[...Te.customVariables||[]];return de.key&&(de.key=de.key.toLowerCase().replace(/[^a-z0-9_]/g,"")),Ge[X]={...Ge[X],...de},{...Te,customVariables:Ge}}),dt=()=>oe(X=>({...X,tableFields:[...X.tableFields||[],{label:"",variable:""}]})),At=X=>oe(de=>({...de,tableFields:(de.tableFields||[]).filter((Te,Ge)=>Ge!==X)})),ge=(X,de)=>oe(Te=>{const Ge=[...Te.tableFields||[]];return Ge[X]={...Ge[X],...de},{...Te,tableFields:Ge}}),Le=X=>{var Te;const de=(Te=X.target.files)==null?void 0:Te[0];if(de){const Ge=new FileReader;Ge.onload=Ut=>{var Dt;const It=new Image;It.onload=()=>{const vt=document.createElement("canvas");let Ft=It.width,xn=It.height;const fn=400;Ft>xn?Ft>fn&&(xn*=fn/Ft,Ft=fn):xn>fn&&(Ft*=fn/xn,xn=fn),vt.width=Ft,vt.height=xn;const bt=vt.getContext("2d");bt==null||bt.drawImage(It,0,0,Ft,xn);const ie=vt.toDataURL("image/png",.8);oe(Ce=>({...Ce,certificationImages:[...Ce.certificationImages||[],ie]}))},It.src=(Dt=Ut.target)==null?void 0:Dt.result},Ge.readAsDataURL(de)}},Fe=X=>{oe(de=>({...de,certificationImages:(de.certificationImages||[]).filter((Te,Ge)=>Ge!==X)}))},et=X=>{let de=X.content;const Te={};X.customVariables.forEach(Ge=>{Te[Ge.key]=`[${Ge.label.toUpperCase()}]`;const Ut=new RegExp(`{{${Ge.key}}}`,"g");de=de.replace(Ut,Te[Ge.key])}),F(de),B(X)},Xe=async()=>{if(K){te(!0);try{await jV(K.id),ne(null)}catch{alert("Erro ao excluir documento.")}finally{te(!1)}}},pt=X=>{const de=pe.find(Te=>Te.type==="devolucao");Ne({templateId:de?de.id:"",employeeId:X.employeeId,originalTermId:X.id,dataDoc:new Date().toISOString().split("T")[0],dynamicData:{...X.data}}),l("new"),window.scrollTo({top:0,behavior:"smooth"})};return r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Kl,{className:"text-emerald-600"})," Gesto de Termos"]}),r.jsxs("p",{className:"text-slate-500 text-sm",children:["Setor: ",r.jsx("span",{className:"font-bold text-emerald-600 uppercase",children:t==null?void 0:t.department})]})]}),r.jsxs("div",{className:"flex gap-2",children:[(e||n||Y.canCreateTemplates)&&r.jsxs("button",{type:"button",onClick:()=>{se(null),oe({name:"",title:"",type:"entrega",responsibleDepartment:(t==null?void 0:t.department)||"",content:"",tableFields:[],customVariables:[...rN],certificationImages:[]}),ze(!0)},className:"bg-white border border-slate-200 text-slate-700 px-4 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-slate-50 transition-all text-sm shadow-sm",children:[r.jsx(Vn,{size:18})," Novo Modelo"]}),(e||n||Y.canIssueTerms)&&r.jsxs("button",{type:"button",onClick:()=>{Ne({...ee,originalTermId:void 0}),l("new")},className:"bg-emerald-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-emerald-700 transition-all flex items-center gap-2 shadow-md text-sm",children:[r.jsx(Vn,{size:18})," Emitir Termo"]})]})]}),r.jsxs("div",{className:"flex gap-4 border-b border-slate-200 overflow-x-auto",children:[r.jsx("button",{onClick:()=>l("issued"),className:`pb-2 px-2 text-sm font-bold border-b-2 transition-all whitespace-nowrap ${a==="issued"?"border-emerald-600 text-emerald-700":"border-transparent text-slate-400"}`,children:"Termos Emitidos"}),r.jsx("button",{onClick:()=>l("templates"),className:`pb-2 px-2 text-sm font-bold border-b-2 transition-all whitespace-nowrap ${a==="templates"?"border-emerald-600 text-emerald-700":"border-transparent text-slate-400"}`,children:"Modelos de Termo"}),e&&r.jsxs("button",{onClick:()=>l("permissions"),className:`pb-2 px-2 text-sm font-bold border-b-2 transition-all whitespace-nowrap flex items-center gap-2 ${a==="permissions"?"border-emerald-600 text-emerald-700":"border-transparent text-slate-400"}`,children:[r.jsx($0,{size:16})," Permisses por Setor"]})]}),a==="permissions"&&e&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 animate-fade-in overflow-hidden",children:[r.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-white rounded-xl text-emerald-600 shadow-sm",children:r.jsx(Da,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-black text-slate-800 uppercase text-sm tracking-tight",children:"Matriz de Permisses: Gesto de Termos"}),r.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Defina detalhadamente o que cada setor pode realizar no mdulo administrativo."})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse min-w-[1000px]",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 text-[10px] uppercase text-slate-400 font-black",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Departamento"}),r.jsx("th",{className:"px-6 py-4 text-center",children:"Habilitar Menu"}),r.jsx("th",{className:"px-6 py-4 text-center",children:"Criar Modelos"}),r.jsx("th",{className:"px-6 py-4 text-center",children:"Emitir Termos"}),r.jsx("th",{className:"px-6 py-4 text-center",children:"Deletar Registros"}),r.jsx("th",{className:"px-6 py-4 text-center",children:"Gerar Devolues"}),r.jsx("th",{className:"px-6 py-4 text-center bg-emerald-50/50 text-emerald-600",children:"Viso Global (RH/DP)"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:k.sort((X,de)=>X.name.localeCompare(de.name)).map(X=>{var Te;const de=((Te=s==null?void 0:s.termsDeptPermissions)==null?void 0:Te[X.name])||{enabled:!1,canCreateTemplates:!1,canIssueTerms:!1,canDelete:!1,canReturn:!1,canSeeAllSectors:!1};return r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-all",children:[r.jsx("td",{className:"px-6 py-4 font-black text-slate-700 uppercase text-xs tracking-tight",children:X.name}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>Ie(X.name,"enabled",!de.enabled),className:`p-1.5 rounded-lg transition-all ${de.enabled?"bg-emerald-600 text-white":"bg-slate-100 text-slate-300 hover:text-slate-500"}`,children:de.enabled?r.jsx(sD,{size:18}):r.jsx(Un,{size:18})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>Ie(X.name,"canCreateTemplates",!de.canCreateTemplates),className:`p-1.5 rounded-lg transition-all ${de.canCreateTemplates?"bg-emerald-600 text-white":"bg-slate-100 text-slate-300 hover:text-slate-500"}`,children:de.canCreateTemplates?r.jsx(xs,{size:18}):r.jsx(No,{size:18})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>Ie(X.name,"canIssueTerms",!de.canIssueTerms),className:`p-1.5 rounded-lg transition-all ${de.canIssueTerms?"bg-emerald-600 text-white":"bg-slate-100 text-slate-300 hover:text-slate-500"}`,children:de.canIssueTerms?r.jsx(xs,{size:18}):r.jsx(No,{size:18})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>Ie(X.name,"canDelete",!de.canDelete),className:`p-1.5 rounded-lg transition-all ${de.canDelete?"bg-red-600 text-white":"bg-slate-100 text-slate-300 hover:text-slate-500"}`,children:de.canDelete?r.jsx(xs,{size:18}):r.jsx(No,{size:18})})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("button",{onClick:()=>Ie(X.name,"canReturn",!de.canReturn),className:`p-1.5 rounded-lg transition-all ${de.canReturn?"bg-emerald-600 text-white":"bg-slate-100 text-slate-300 hover:text-slate-500"}`,children:de.canReturn?r.jsx(xs,{size:18}):r.jsx(No,{size:18})})}),r.jsx("td",{className:"px-6 py-4 text-center bg-emerald-50/20",children:r.jsx("button",{onClick:()=>Ie(X.name,"canSeeAllSectors",!de.canSeeAllSectors),className:`p-1.5 rounded-lg transition-all ${de.canSeeAllSectors?"bg-emerald-600 text-white":"bg-slate-100 text-slate-300 hover:text-slate-500"}`,title:"Permitir visualizar termos de todos os outros setores",children:de.canSeeAllSectors?r.jsx(ja,{size:18}):r.jsx(No,{size:18})})})]},X.id)})})]})})]}),a==="issued"&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-fade-in",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Va,{className:"absolute left-3 top-2.5 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Filtrar colaborador...",value:L,onChange:X=>C(X.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),Y.canSeeAllSectors&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-lg border border-emerald-100 text-[10px] font-black uppercase",children:[r.jsx(ja,{size:14})," Viso Global Ativa"]})]}),r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{className:"bg-slate-50 border-b text-xs uppercase text-slate-500 font-bold",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:"Data"}),r.jsx("th",{className:"px-6 py-4",children:"Colaborador"}),r.jsx("th",{className:"px-6 py-4",children:"Equipamento/Info"}),r.jsx("th",{className:"px-6 py-4",children:"Status / Vnculo"}),r.jsx("th",{className:"px-6 py-4 text-right",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:ut.map(X=>{const de=X.type==="devolucao",Te=De.get(X.id);return r.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors ${de?"bg-slate-50/30":""}`,children:[r.jsx("td",{className:"px-6 py-4 text-xs text-slate-500",children:r.jsxs("div",{className:"flex items-center gap-2",children:[de&&r.jsx(Ej,{size:14,className:"text-slate-300 ml-2"}),new Date(X.createdAt).toLocaleDateString()]})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("p",{className:`font-bold text-slate-800 text-sm ${de?"ml-4":""}`,children:X.employeeName}),r.jsx("p",{className:`text-[10px] text-slate-400 uppercase font-black ${de?"ml-4":""}`,children:X.type})]}),r.jsx("td",{className:"px-6 py-4 text-xs text-slate-600 font-medium uppercase line-clamp-1",children:X.data.marca_equipamento||X.data.item||X.data.modelo_equipamento||"---"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:`text-[9px] font-black uppercase px-2 py-1 rounded-full border w-fit ${X.status==="ASSINADO"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-amber-50 text-amber-600 border-amber-100"}`,children:X.status}),(X.type==="entrega"||X.type==="emprestimo")&&Te&&r.jsxs("div",{className:`text-[8px] font-black uppercase flex items-center gap-1 mt-1 ${Te.status==="ASSINADO"?"text-blue-600":"text-amber-500 animate-pulse"}`,children:[Te.status==="ASSINADO"?r.jsx(xs,{size:10}):r.jsx($i,{size:10}),Te.status==="ASSINADO"?"Devoluo Concluda":"Devoluo em Aberto"]})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-1",children:[(e||n||Y.canReturn)&&(X.type==="entrega"||X.type==="emprestimo")&&!Te&&X.status==="ASSINADO"&&r.jsx("button",{type:"button",onClick:()=>pt(X),title:"Gerar Termo de Devoluo",className:"p-2 text-slate-400 hover:text-amber-600 transition-colors",children:r.jsx(UD,{size:18})}),r.jsx("button",{type:"button",onClick:()=>{const Ge=u.find(Ut=>Ut.id===X.templateId);if(Ge){let Ut=Ge.content;Object.entries(X.data).forEach(([It,Dt])=>{const vt=new RegExp(`{{${It}}}`,"g");Ut=Ut.replace(vt,Dt||"")}),F(Ut),R(X)}},className:"p-2 text-slate-400 hover:text-emerald-600 transition-colors",children:r.jsx(Ra,{size:18})}),(e||n||Y.canDelete)&&r.jsx("button",{type:"button",onClick:()=>ne(X),className:"p-2 text-slate-400 hover:text-red-600 transition-colors",children:r.jsx(Bt,{size:18})})]})})]},X.id)})})]})]}),a==="templates"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",children:[pe.map(X=>r.jsx("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm hover:shadow-md transition-all group flex flex-col justify-between",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:"bg-emerald-50 p-3 rounded-2xl text-emerald-600 group-hover:bg-emerald-600 group-hover:text-white transition-all",children:r.jsx(hf,{size:24})}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{type:"button",onClick:()=>et(X),className:"p-2 text-slate-300 hover:text-emerald-600 transition-colors",title:"Ver modelo do documento",children:r.jsx(Ra,{size:18})}),(e||n||Y.canCreateTemplates)&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:()=>{se(X),oe({...X,tableFields:X.tableFields||[],customVariables:X.customVariables||[],certificationImages:X.certificationImages||[]}),ze(!0)},className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:r.jsx(na,{size:18})}),r.jsx("button",{type:"button",onClick:()=>O(X),className:"p-2 text-slate-300 hover:text-red-600 transition-colors",children:r.jsx(Bt,{size:18})})]})]})]}),r.jsx("h4",{className:"font-black text-slate-800 uppercase text-base leading-tight mb-1",children:X.name}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:["Tipo: ",X.type,"  ",(X.customVariables||[]).length," Variveis"]}),r.jsxs("p",{className:"text-[10px] text-emerald-600 font-black uppercase tracking-widest flex items-center gap-1",children:[r.jsx(sc,{size:12})," Setor: ",X.responsibleDepartment]})]})]})},X.id)),pe.length===0&&r.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 italic",children:"Nenhum modelo cadastrado para seu setor."})]}),a==="new"&&r.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-emerald-100 shadow-xl animate-fade-in max-w-4xl mx-auto",children:[r.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-8 flex items-center gap-3 uppercase tracking-tight",children:[r.jsx(Jf,{className:"text-emerald-600"})," ",ee.originalTermId?"Emisso de Termo de Devoluo":"Emisso de Termo Digital"]}),r.jsxs("form",{onSubmit:en,className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Modelo de Documento"}),r.jsxs("select",{required:!0,value:ee.templateId,onChange:X=>Ve(X.target.value),className:"w-full p-4 border-2 border-slate-100 rounded-2xl text-sm font-bold focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-700 uppercase shadow-sm",children:[r.jsx("option",{value:"",children:"Selecione o Modelo..."}),pe.map(X=>r.jsxs("option",{value:X.id,children:["[",X.responsibleDepartment,"] ",X.name," (",X.type,")"]},X.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Colaborador Destinatrio"}),r.jsxs("select",{required:!0,value:ee.employeeId,onChange:X=>it(X.target.value),className:"w-full p-4 border-2 border-slate-100 rounded-2xl text-sm font-bold focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-700 uppercase shadow-sm",children:[r.jsx("option",{value:"",children:"Selecione o Colaborador..."}),y.sort((X,de)=>X.name.localeCompare(de.name)).map(X=>r.jsxs("option",{value:X.id,children:[X.name," (",X.department,")"]},X.id))]})]})]}),ee.templateId&&r.jsxs("div",{className:"bg-slate-50/50 p-8 rounded-[2rem] border border-slate-200 space-y-6 animate-fade-in shadow-inner",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:[r.jsx(wD,{size:14})," Dados do Documento"]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(()=>{const X=u.find(de=>de.id===ee.templateId);return((X==null?void 0:X.customVariables)||[]).map(de=>{const Te=de.type==="textarea";return r.jsxs("div",{className:`space-y-1 ${Te?"md:col-span-2":""}`,children:[r.jsxs("div",{className:"flex items-center justify-between ml-1",children:[r.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:de.label}),de.mapping&&de.mapping!=="none"&&r.jsxs("span",{className:"text-[8px] font-black text-emerald-500 uppercase bg-emerald-50 px-1.5 rounded border border-emerald-100 flex items-center gap-1",title:"Sugerido automaticamente",children:[r.jsx(YD,{size:8})," Auto"]})]}),Te?r.jsx("textarea",{value:ee.dynamicData[de.key]||"",onChange:Ge=>Jt(de.key,Ge.target.value),placeholder:de.placeholder||`Valor para ${de.label}`,rows:4,className:"w-full p-3 bg-white border border-slate-200 rounded-xl text-xs uppercase font-bold text-slate-700 focus:ring-2 focus:ring-emerald-500 outline-none shadow-sm placeholder:text-slate-300 resize-none"}):r.jsx("input",{value:ee.dynamicData[de.key]||"",onChange:Ge=>Jt(de.key,Ge.target.value),placeholder:de.placeholder||`Valor para ${de.label}`,className:"w-full p-3 bg-white border border-slate-200 rounded-xl text-xs uppercase font-bold text-slate-700 focus:ring-2 focus:ring-emerald-500 outline-none shadow-sm placeholder:text-slate-300"})]},de.key)})})(),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Data de Emisso (Ref.)"}),r.jsx("input",{type:"date",required:!0,value:ee.dataDoc,onChange:X=>mt(X.target.value),className:"w-full p-3 bg-white border border-slate-200 rounded-xl text-xs uppercase font-bold text-slate-700 outline-none shadow-sm"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>l("issued"),className:"px-8 py-3 text-slate-400 font-black uppercase text-xs hover:bg-slate-100 rounded-2xl transition-all",children:"Cancelar"}),r.jsxs("button",{type:"submit",disabled:W||!ee.templateId,className:"px-12 py-3 bg-emerald-600 text-white font-black uppercase text-xs rounded-2xl shadow-xl shadow-emerald-200 hover:bg-emerald-700 transition-all flex items-center gap-2 active:scale-95 disabled:opacity-50",children:[W?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Ao,{size:16})," Emitir Termo Digital"]})]})]})]}),je&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[110] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[95vh]",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsxs("h3",{className:"font-bold text-slate-800 uppercase text-sm flex items-center gap-2",children:[r.jsx(Da,{size:18,className:"text-emerald-600"})," ",j?"Editar":"Novo"," Modelo de Termo"]}),r.jsx("button",{type:"button",onClick:()=>ze(!1),className:"p-2 hover:bg-slate-200 rounded-full text-slate-400",children:r.jsx(Pn,{size:24})})]}),r.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Nome Interno"}),r.jsx("input",{value:Z.name||"",onChange:X=>oe({...Z,name:X.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm bg-white text-slate-900 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Nome para identificao interna"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Tipo Movimentao"}),r.jsxs("select",{value:Z.type,onChange:X=>oe({...Z,type:X.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm bg-white text-slate-900 uppercase font-bold outline-none",children:[r.jsx("option",{value:"entrega",children:"Entrega"}),r.jsx("option",{value:"emprestimo",children:"Emprstimo"}),r.jsx("option",{value:"devolucao",children:"Devoluo"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Setor Responsvel"}),r.jsxs("select",{value:Z.responsibleDepartment,disabled:!(e||n),onChange:X=>oe({...Z,responsibleDepartment:X.target.value}),className:`w-full p-2.5 border border-slate-300 rounded-lg text-sm bg-white text-slate-900 uppercase font-bold outline-none ${e||n?"":"bg-slate-50 opacity-60"}`,children:[r.jsx("option",{value:"",children:"Selecione o Setor..."}),k.sort((X,de)=>X.name.localeCompare(de.name)).map(X=>r.jsx("option",{value:X.name,children:X.name},X.id))]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Ttulo no Documento"}),r.jsx("input",{value:Z.title||"",onChange:X=>oe({...Z,title:X.target.value}),className:"w-full p-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-white text-slate-900",placeholder:"Ex: TERMO DE ENTREGA DE EQUIPAMENTO"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-2",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Variveis Dinmicas"}),r.jsxs("button",{type:"button",onClick:Re,className:"text-[10px] font-black uppercase text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full hover:bg-emerald-100 flex items-center gap-1 transition-colors border border-emerald-100",children:[r.jsx(Vn,{size:12})," Adicionar"]})]}),r.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto pr-3 custom-scrollbar",children:(Z.customVariables||[]).map((X,de)=>r.jsxs("div",{className:"flex flex-col gap-2 bg-slate-50 p-4 rounded-2xl border border-slate-100 relative group",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("input",{value:X.label||"",onChange:Te=>tn(Te.target.value,de),className:"flex-1 p-2 border border-slate-200 rounded-lg bg-white text-slate-900 text-xs font-bold",placeholder:"Rtulo (ex: Modelo)"}),r.jsx("button",{type:"button",onClick:()=>ot(de),className:"text-red-400 p-2 hover:bg-red-100 hover:text-red-600 rounded-xl transition-all ml-2",title:"Remover varivel",children:r.jsx(Bt,{size:16})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{value:X.key||"",onChange:Te=>tn(de,{key:Te.target.value}),className:"p-2 border border-slate-200 rounded-lg bg-white text-slate-800 text-[10px] font-mono",placeholder:"tag_exemplo"}),r.jsxs("select",{value:X.mapping||"none",onChange:Te=>tn(de,{mapping:Te.target.value}),className:"p-2 border border-slate-200 rounded-lg bg-white text-slate-700 text-[9px] font-bold",children:[r.jsx("option",{value:"none",children:"Manual"}),r.jsx("option",{value:"doc_title",children:"Doc: Ttulo"}),r.jsx("option",{value:"emp_name",children:"Colab: Nome"}),r.jsx("option",{value:"emp_role",children:"Colab: Cargo"}),r.jsx("option",{value:"emp_dept",children:"Colab: Setor"}),r.jsx("option",{value:"emp_unit",children:"Colab: Unidade"}),r.jsx("option",{value:"doc_date",children:"Data: Simples"}),r.jsx("option",{value:"doc_date_full",children:"Data: Extenso"})]})]})]},de))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-2",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Tabela de Ativos (Opcional)"}),r.jsxs("button",{type:"button",onClick:dt,className:"text-[10px] font-black uppercase text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full hover:bg-indigo-100 flex items-center gap-1 transition-colors border border-indigo-100",children:[r.jsx(Vn,{size:12})," Adicionar"]})]}),r.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto pr-3 custom-scrollbar",children:(Z.tableFields||[]).map((X,de)=>r.jsxs("div",{className:"flex gap-2 bg-indigo-50/30 p-4 rounded-2xl border border-indigo-100",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("input",{value:X.label||"",onChange:Te=>ge(de,{label:Te.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg bg-white text-slate-900 text-xs font-bold",placeholder:"Rtulo da Tabela"}),r.jsx("input",{value:X.variable||"",onChange:Te=>ge(de,{variable:Te.target.value}),className:"w-full p-2 border border-slate-200 rounded-lg bg-white text-slate-800 text-[10px] font-mono",placeholder:"tag_da_variavel"})]}),r.jsx("button",{type:"button",onClick:()=>At(de),className:"text-red-400 p-2 hover:bg-red-100 hover:text-red-600 rounded-xl transition-all",children:r.jsx(Bt,{size:16})})]},de))})]})]}),r.jsxs("div",{className:"space-y-4 border-t border-slate-100 pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-2",children:[r.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(SN,{size:14,className:"text-amber-500"})," Selos de Certificao (Rodap)"]}),r.jsxs("label",{className:"text-[10px] font-black uppercase text-amber-600 bg-amber-50 px-3 py-1 rounded-full hover:bg-amber-100 flex items-center gap-1 transition-colors border border-amber-100 cursor-pointer",children:[r.jsx(Vn,{size:12})," Adicionar Selo",r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Le})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-4",children:[(Z.certificationImages||[]).map((X,de)=>r.jsxs("div",{className:"relative group w-24 h-24 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center p-2 overflow-hidden shadow-sm",children:[r.jsx("img",{src:X,className:"max-w-full max-h-full object-contain mix-blend-multiply"}),r.jsx("button",{type:"button",onClick:()=>Fe(de),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Bt,{size:10})})]},de)),(Z.certificationImages||[]).length===0&&r.jsxs("div",{className:"w-full py-6 text-center text-slate-300 border-2 border-dashed border-slate-100 rounded-2xl flex flex-col items-center",children:[r.jsx(Ki,{size:24,className:"opacity-20 mb-1"}),r.jsx("p",{className:"text-[9px] uppercase font-black",children:"Nenhum selo configurado para este modelo"})]})]})]}),r.jsxs("div",{className:"space-y-3 pt-6 border-t",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Contedo do Documento (Corpo do Texto)"}),r.jsxs("label",{className:"text-[10px] font-black uppercase text-emerald-600 bg-emerald-50 px-3 py-1.5 rounded-full cursor-pointer hover:bg-emerald-100 flex items-center gap-2 border border-emerald-100 transition-all",children:[r.jsx(zj,{size:12})," Importar RTF",r.jsx("input",{type:"file",accept:".rtf",className:"hidden",onChange:X=>{var de;return((de=X.target.files)==null?void 0:de[0])&&st(X.target.files[0])}})]})]}),r.jsx("textarea",{value:Z.content||"",onChange:X=>oe({...Z,content:X.target.value}),className:"w-full p-6 border border-slate-200 rounded-2xl text-sm font-serif min-h-[400px] leading-relaxed bg-white text-slate-800 outline-none focus:ring-2 focus:ring-emerald-500 shadow-inner",placeholder:"Escreva o texto completo do termo aqui..."})]})]}),r.jsxs("div",{className:"p-6 bg-slate-50 border-t flex justify-end gap-3 shrink-0",children:[r.jsx("button",{type:"button",onClick:()=>ze(!1),className:"px-6 py-2 text-slate-600 font-bold text-sm hover:bg-slate-200 rounded-xl transition-all",disabled:W,children:"Cancelar"}),r.jsxs("button",{type:"button",onClick:ue,className:"px-10 py-2.5 bg-emerald-600 text-white font-bold text-sm hover:bg-emerald-700 rounded-xl shadow-lg shadow-emerald-200 flex items-center gap-2 transition-all active:scale-95",disabled:W,children:[W?r.jsx(Je,{className:"animate-spin",size:18}):r.jsx(Fs,{size:18})," Salvar Modelo"]})]})]})}),(A||U)&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/90 backdrop-blur-md z-[200] flex items-center justify-center p-4 overflow-y-auto animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-[210mm] my-8 overflow-hidden flex flex-col h-full max-h-[95vh] relative",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 sticky top-0 z-20",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-100 rounded-xl text-emerald-600",children:r.jsx(hf,{size:20})}),r.jsx("h3",{className:"font-black text-slate-800 uppercase text-sm tracking-tight",children:U?"Prvia do Modelo":"Documento Oficial"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>window.print(),className:"bg-emerald-600 text-white px-5 py-2 rounded-xl text-xs font-black uppercase hover:bg-emerald-700 shadow-md flex items-center gap-2",children:[r.jsx(jN,{size:16})," Imprimir / PDF"]}),r.jsx("button",{type:"button",onClick:()=>{R(null),B(null)},className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 transition-colors",children:r.jsx(Pn,{size:24})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-10 bg-slate-200/50 flex justify-center custom-scrollbar",children:r.jsxs("div",{className:"bg-white shadow-2xl w-full max-w-[210mm] min-h-[297mm] pt-[5mm] md:pt-[8mm] px-[10mm] md:px-[20mm] pb-[10mm] md:pb-[20mm] text-slate-900 print:shadow-none print:p-0 flex flex-col relative",children:[r.jsxs("div",{className:"flex justify-between items-start border-b-2 border-emerald-800 pb-4 mb-8",children:[r.jsx(Pa,{className:"h-14 w-auto"}),r.jsxs("div",{className:"text-right text-[9px] text-slate-500 font-bold uppercase leading-tight",children:[r.jsx("p",{className:"text-slate-800",children:"Intermartima Portos e Logstica S/A"}),r.jsx("p",{children:"Rua da Grcia, 08, Edf. Serra da Raiz, 3 andar."}),r.jsx("p",{children:"Comrcio - CEP. 40.010-010 - Salvador / BA"}),r.jsx("p",{className:"text-emerald-700",children:"www.intermaritima.com.br"})]})]}),r.jsx("h1",{className:"text-center font-black text-lg md:text-xl mb-10 uppercase tracking-tight",children:(A==null?void 0:A.data.titulo_documento)||(U==null?void 0:U.title)||(A==null?void 0:A.employeeName)||"[TTULO DO DOCUMENTO]"}),r.jsxs("div",{className:"space-y-1 mb-6 text-[10px] md:text-[11px] font-bold uppercase text-slate-900",children:[r.jsxs("p",{children:["COLABORADOR: ",r.jsx("span",{className:"font-medium",children:(A==null?void 0:A.employeeName)||"[NOME DO COLABORADOR]"})]}),r.jsxs("p",{children:["SETOR: ",r.jsx("span",{className:"font-medium",children:(A==null?void 0:A.data.departamento)||(U==null?void 0:U.responsibleDepartment)||"[SETOR RESPONSVEL]"})]}),r.jsxs("p",{children:["CARGO: ",r.jsx("span",{className:"font-medium",children:(A==null?void 0:A.data.cargo)||"[CARGO DO COLABORADOR]"})]})]}),r.jsxs("table",{className:"w-full border-collapse mb-8 border border-emerald-800",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-[#006c5b] text-white text-[9px] md:text-[10px] font-black uppercase",children:[r.jsx("th",{className:"border border-emerald-800 px-4 py-2 w-1/2 text-center",children:"DESCRIO"}),r.jsx("th",{className:"border border-emerald-800 px-4 py-2 w-1/2 text-center",children:"DADOS"})]})}),r.jsx("tbody",{className:"text-[10px] md:text-[11px] font-bold uppercase text-slate-800",children:(((gt=u.find(X=>X.id===((A==null?void 0:A.templateId)||(U==null?void 0:U.id))))==null?void 0:gt.tableFields)||[]).map((X,de)=>r.jsxs("tr",{children:[r.jsx("td",{className:"border border-emerald-800 px-4 py-1.5 bg-slate-50 text-slate-700 font-black",children:X.label}),r.jsx("td",{className:"border border-emerald-800 px-4 py-1.5 font-medium text-slate-900 whitespace-pre-wrap",children:(A==null?void 0:A.data[X.variable])||`[${X.label.toUpperCase()}]`})]},de))})]}),r.jsx("div",{className:"text-xs md:text-sm leading-relaxed text-justify whitespace-pre-wrap mb-16 font-serif flex-1 text-slate-900",children:$}),r.jsxs("div",{className:"mt-auto pt-4 space-y-8",children:[r.jsx("div",{className:"flex justify-center w-full",children:(A==null?void 0:A.status)==="ASSINADO"?r.jsxs("div",{className:"text-center relative",children:[A.signatureImage&&r.jsx("img",{src:A.signatureImage,className:"h-10 md:h-12 object-contain mx-auto mix-blend-multiply mb-0 relative z-10"}),r.jsx("div",{className:"w-64 h-px bg-slate-400 mx-auto mt-1 mb-2"}),r.jsx("p",{className:"font-black uppercase text-xs md:text-sm text-slate-900",children:A.employeeName}),r.jsxs("p",{className:"text-[10px] text-slate-500 font-bold",children:["CPF: ",(jt=A.employeeCpf)==null?void 0:jt.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-**")]}),A.signedAt&&r.jsxs("p",{className:"text-[8px] text-emerald-600 font-black uppercase mt-1",children:["Assinado digitalmente em: ",new Date(A.signedAt).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),r.jsxs("p",{className:"text-[8px] text-slate-400 font-mono mt-2 break-all max-w-[300px] mx-auto uppercase",children:["CDIGO DE VERIFICAO: ",A.token]})]}):U?r.jsxs("div",{className:"text-center relative opacity-20 grayscale",children:[r.jsx("div",{className:"w-64 h-px bg-slate-400 mx-auto mt-16 mb-2"}),r.jsx("p",{className:"font-black uppercase text-xs md:text-sm text-slate-900",children:"[NOME DO COLABORADOR]"}),r.jsx("p",{className:"text-[10px] text-slate-500 font-bold",children:"CPF: 000.000.000-**"})]}):null}),r.jsx("div",{className:"flex justify-end gap-3",children:(((St=u.find(X=>X.id===((A==null?void 0:A.templateId)||(U==null?void 0:U.id))))==null?void 0:St.certificationImages)||[]).map((X,de)=>r.jsx("div",{className:"bg-white border border-slate-200 p-1.5 rounded-lg flex items-center justify-center h-12 md:h-16 w-fit shadow-sm",children:r.jsx("img",{src:X,className:"h-full object-contain mix-blend-multiply",alt:"Selo"})},de))})]})]})})]})}),K&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[250] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden border-2 border-red-100",children:r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500",children:r.jsx(Bs,{size:40})}),r.jsx("h3",{className:"text-lg font-black text-slate-800 mb-2 uppercase tracking-tight",children:"Excluir Termo?"}),r.jsx("p",{className:"text-sm text-slate-500 mb-8",children:"Ao irreversvel."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:()=>ne(null),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:bg-slate-100 rounded-2xl transition-all",children:"Manter"}),r.jsxs("button",{type:"button",onClick:Xe,className:"flex-1 py-4 bg-red-600 text-white rounded-2xl font-black uppercase text-xs hover:bg-red-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-red-100",disabled:W,children:[W?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Bt,{size:16})," Sim, excluir"]})]})]})})})]})},YB=()=>{var De,ut,st;const{currentUser:t,user:e,isAdmin:n}=Kn(),[s,a]=I.useState("terms"),[l,u]=I.useState([]),[h,m]=I.useState([]),[f,y]=I.useState([]),[_,w]=I.useState([]),[T,M]=I.useState(!1),[z,k]=I.useState(!1),[q,H]=I.useState(null),[P,W]=I.useState({name:"",email:"",sector:"",phoneFixed:"",phoneMobile:"",notes:""}),[te,L]=I.useState(!0),[C,A]=I.useState(null),[R,U]=I.useState(null),[B,$]=I.useState(""),[F,je]=I.useState(""),[ze,j]=I.useState(""),[se,K]=I.useState(!1),[ne,J]=I.useState(""),O=I.useRef(null);I.useEffect(()=>{if(!t)return;L(!0);const _e=p2(mt=>u(mt),t.id),Ve=x2(mt=>y(mt),t.id),it=g2(w);return Promise.all([SV()]).then(([mt])=>{m(mt),L(!1)}).catch(()=>L(!1)),()=>{_e(),Ve(),it()}},[t]);const Z=async _e=>{const Ve=h.find(mt=>mt.id===_e.templateId);if(!Ve)return alert("Modelo no encontrado.");let it=Ve.content;Object.entries(_e.data).forEach(([mt,Jt])=>{const en=new RegExp(`{{${mt}}}`,"g");it=it.replace(en,Jt||"")}),$(it),U(_e),_e.status==="PENDENTE"?A(_e):A(null)},oe=()=>{t&&W({name:t.name,email:t.email,sector:t.role||t.department,phoneFixed:`(71) 3879-${t.extension||""}`,phoneMobile:t.whatsapp||"",notes:""}),M(!0)},ee=async _e=>{if(_e.preventDefault(),!!t){k(!0);try{await OV({userId:t.id,userName:t.name,userEmail:t.email,notes:P.notes,requestedData:{name:P.name,email:P.email,sector:P.sector,phoneFixed:P.phoneFixed,phoneMobile:P.phoneMobile}}),alert("Solicitao enviada com sucesso! O TI processar sua assinatura em breve."),M(!1)}catch{alert("Erro ao enviar solicitao.")}finally{k(!1)}}},Ne=async _e=>{if(!(!_e.signatureData||!O.current)){k(!0);try{await Du(O.current,_e.signatureData,_),H(O.current.toDataURL("image/png"))}catch{alert("Erro ao gerar visualizao.")}finally{k(!1)}}},Y=async _e=>{if(!(!_e.signatureData||!O.current)){k(!0);try{await Du(O.current,_e.signatureData,_);const Ve=document.createElement("a");Ve.download=`assinatura_${t==null?void 0:t.name}.png`,Ve.href=O.current.toDataURL("image/png"),Ve.click()}catch{alert("Erro ao gerar download.")}finally{k(!1)}}},pe=async()=>{J("");const _e=F.replace(/\D/g,"");if(!C||!_e||!ze){J("Preencha o CPF e a sua senha de acesso.");return}if(_e.length<11){J("O CPF deve conter 11 dgitos.");return}k(!0);try{if(e&&e.email){const Ve=Bo.credential(e.email,ze);await u3(e,Ve);const it=(t==null?void 0:t.signatureImage)||"";await RV(C.id,_e,it),alert("Documento assinado digitalmente com sucesso!"),A(null),U(null),j(""),je(""),K(!1)}else throw new Error("Erro na sesso.")}catch(Ve){Ve.code==="auth/wrong-password"||Ve.code==="auth/invalid-credential"?J("Senha incorreta. Use a mesma senha do iRamais."):J("Erro ao validar assinatura.")}finally{k(!1)}},Se=_e=>{const Ve=_e.replace(/\D/g,"").substring(0,11);return Ve.length<=3?Ve:Ve.length<=6?`${Ve.slice(0,3)}.${Ve.slice(3)}`:Ve.length<=9?`${Ve.slice(0,3)}.${Ve.slice(3,6)}.${Ve.slice(6)}`:`${Ve.slice(0,3)}.${Ve.slice(3,6)}.${Ve.slice(6,9)}-${Ve.slice(9)}`};return te?r.jsx("div",{className:"h-[60vh] flex flex-col items-center justify-center",children:r.jsx(Je,{className:"animate-spin text-emerald-600 mb-4",size:48})}):r.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto pb-20 animate-fade-in",children:[r.jsx("canvas",{ref:O,className:"hidden"}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2 uppercase tracking-tight",children:[r.jsx(DN,{className:"text-emerald-600",size:32})," Central de Assinaturas"]}),r.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Gesto de termos de responsabilidade e assinaturas de e-mail."})]}),n&&r.jsxs(wn,{to:"/admin-terms",className:"px-5 py-2.5 bg-white border border-slate-200 rounded-xl text-slate-700 text-xs font-black uppercase flex items-center gap-2 shadow-sm hover:bg-slate-50 transition-all",children:[r.jsx(Da,{size:16})," Painel Administrativo"]})]}),r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl w-fit",children:[r.jsxs("button",{onClick:()=>a("terms"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase transition-all flex items-center gap-2 ${s==="terms"?"bg-white text-emerald-700 shadow-md":"text-slate-500 hover:text-slate-700"}`,children:[r.jsx(Kl,{size:16})," Assinatura de Termos",l.filter(_e=>_e.status==="PENDENTE").length>0&&r.jsx("span",{className:"bg-red-500 text-white text-[9px] px-1.5 py-0.5 rounded-full animate-pulse",children:l.filter(_e=>_e.status==="PENDENTE").length})]}),r.jsxs("button",{onClick:()=>a("email"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase transition-all flex items-center gap-2 ${s==="email"?"bg-white text-emerald-700 shadow-md":"text-slate-500 hover:text-slate-700"}`,children:[r.jsx(Jl,{size:16})," Assinatura de E-mail"]})]}),s==="terms"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",children:l.length>0?l.map(_e=>{const Ve=h.find(it=>it.id===_e.templateId);return r.jsxs("div",{className:`bg-white rounded-[2rem] border shadow-sm flex flex-col h-full transition-all hover:shadow-xl ${_e.status==="ASSINADO"?"border-slate-100 opacity-90":"border-emerald-200 ring-4 ring-emerald-50"}`,children:[r.jsxs("div",{className:"p-8 flex-1",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${_e.status==="ASSINADO"?"bg-slate-50 text-slate-400":"bg-emerald-600 text-white animate-pulse"}`,children:_e.status}),_e.type==="devolucao"&&r.jsxs("span",{className:"bg-amber-100 text-amber-700 text-[9px] font-black uppercase px-2 py-0.5 rounded-full flex items-center gap-1 border border-amber-200",children:[r.jsx($j,{size:10})," Devoluo"]})]}),r.jsx("h4",{className:"font-black text-slate-800 text-lg mb-4 uppercase leading-tight tracking-tight",children:_e.data.titulo_documento}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-[10px] text-emerald-600 font-black uppercase flex items-center gap-2",children:[r.jsx(sc,{size:14,className:"text-emerald-500"})," Emitido por: ",(Ve==null?void 0:Ve.responsibleDepartment)||"Intermartima"]}),_e.issuerName&&r.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase flex items-center gap-2 ml-5",children:["Gerado por: ",_e.issuerName]}),r.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase flex items-center gap-2",children:[r.jsx(ss,{size:14,className:"text-slate-300"})," ",_e.data.marca_equipamento," ",_e.data.modelo_equipamento]}),r.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase flex items-center gap-2",children:[r.jsx(ns,{size:14,className:"text-slate-300"})," Emitido: ",new Date(_e.createdAt).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),_e.status==="ASSINADO"&&_e.signedAt&&r.jsxs("p",{className:"text-[10px] text-emerald-600 font-black uppercase flex items-center gap-2",children:[r.jsx(Ao,{size:14,className:"text-emerald-500"})," Assinado: ",new Date(_e.signedAt).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),r.jsx("div",{className:"p-6 bg-slate-50/50 border-t mt-auto rounded-b-[2rem] space-y-2",children:_e.status==="ASSINADO"?r.jsxs("button",{onClick:()=>Z(_e),className:"w-full py-4 bg-white border-2 border-slate-200 rounded-2xl text-[10px] font-black uppercase text-slate-600 hover:bg-slate-100 flex items-center justify-center gap-2 transition-all shadow-sm",children:[r.jsx(Eu,{size:14})," Ver Comprovante Digital"]}):r.jsxs("button",{onClick:()=>Z(_e),className:"w-full py-5 bg-emerald-600 text-white rounded-2xl text-[10px] font-black uppercase hover:bg-emerald-700 flex items-center justify-center gap-2 shadow-xl shadow-emerald-200 transition-all active:scale-95",children:[r.jsx(Ra,{size:18})," Visualizar para Assinar"]})})]},_e.id)}):r.jsxs("div",{className:"col-span-full py-20 text-center bg-white rounded-[3rem] border-2 border-dashed border-slate-200 text-slate-400",children:[r.jsx(Kl,{size:48,className:"mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"font-black uppercase text-xs tracking-widest",children:"Nenhum termo vinculado ao seu CPF"})]})}),s==="email"&&r.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"bg-emerald-600 rounded-[2.5rem] p-8 md:p-12 text-white shadow-xl flex flex-col md:flex-row items-center justify-between gap-8 relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10 space-y-4 max-w-xl",children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-black uppercase tracking-tight",children:"Sua Assinatura Oficial"}),r.jsx("p",{className:"text-emerald-50 text-sm md:text-base opacity-90 leading-relaxed font-medium",children:"Solicite ao TI a gerao da sua assinatura de e-mail padronizada com seus dados atualizados e logomarca da unidade."}),r.jsxs("button",{onClick:oe,className:"bg-white text-emerald-700 px-8 py-3 rounded-2xl font-black uppercase text-xs hover:bg-emerald-50 transition-all shadow-lg flex items-center gap-2 active:scale-95",children:[r.jsx(Vn,{size:18,strokeWidth:3})," Nova Solicitao"]})]}),r.jsx("div",{className:"relative z-10 flex-shrink-0 bg-white/10 p-6 rounded-[2rem] border border-white/20 backdrop-blur-sm shadow-inner animate-float",children:r.jsx(xi,{size:80,className:"text-white opacity-80"})}),r.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-white/10 rounded-full blur-3xl"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(_e=>{var Ve;return r.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex flex-col justify-between group hover:border-emerald-300 transition-all",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:`p-3 rounded-2xl ${_e.status==="COMPLETED"?"bg-emerald-100 text-emerald-600":"bg-amber-100 text-amber-600 animate-pulse"}`,children:_e.status==="COMPLETED"?r.jsx(LN,{size:24}):r.jsx($i,{size:24})}),r.jsx("span",{className:`text-[9px] font-black uppercase px-2.5 py-1 rounded-full border ${_e.status==="COMPLETED"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-amber-50 text-amber-600 border-amber-100"}`,children:_e.status==="COMPLETED"?"Concluda":"Pendente"})]}),r.jsx("h4",{className:"font-bold text-slate-800 text-sm uppercase mb-1",children:((Ve=_e.requestedData)==null?void 0:Ve.sector)||"Assinatura"}),r.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest flex items-center gap-1",children:[r.jsx(ns,{size:12})," ",new Date(_e.createdAt).toLocaleDateString()]}),_e.status==="COMPLETED"&&_e.completedBy&&r.jsxs("p",{className:"text-[9px] text-emerald-600 font-black uppercase mt-2",children:["Gerada por: ",_e.completedBy]})]}),_e.status==="COMPLETED"&&r.jsxs("div",{className:"mt-6 flex gap-2",children:[r.jsxs("button",{onClick:()=>Ne(_e),className:"flex-1 py-2.5 bg-slate-100 text-slate-600 rounded-xl text-xs font-bold hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[r.jsx(Ra,{size:14})," Ver"]}),r.jsxs("button",{onClick:()=>Y(_e),className:"flex-1 py-2.5 bg-emerald-600 text-white rounded-xl text-xs font-bold hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 shadow-lg shadow-emerald-100",children:[r.jsx(Eu,{size:14})," Baixar"]})]})]},_e.id)})}),f.length===0&&r.jsxs("div",{className:"py-20 text-center bg-white rounded-[3rem] border-2 border-dashed border-slate-200 text-slate-400",children:[r.jsx(Pj,{size:48,className:"mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"font-black uppercase text-xs tracking-widest",children:"Nenhuma solicitao de assinatura"})]})]}),R&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/90 backdrop-blur-md z-[150] flex items-center justify-center p-4 overflow-y-auto animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-[210mm] my-8 overflow-hidden flex flex-col h-full max-h-[95vh] relative",children:[r.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 sticky top-0 z-20",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-100 rounded-xl text-emerald-600",children:r.jsx(hf,{size:20})}),r.jsx("h3",{className:"font-black text-slate-800 uppercase text-sm tracking-tight",children:"Visualizao do Documento Digital"})]}),r.jsxs("div",{className:"flex gap-2",children:[R.status==="ASSINADO"&&r.jsxs("button",{onClick:()=>window.print(),className:"bg-emerald-600 text-white px-5 py-2 rounded-xl text-xs font-black uppercase hover:bg-emerald-700 shadow-md flex items-center gap-2",children:[r.jsx(jN,{size:16})," Imprimir / PDF"]}),r.jsx("button",{onClick:()=>{U(null),A(null),J("")},className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 transition-colors",children:r.jsx(Pn,{size:24})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-10 bg-slate-200/50 flex justify-center custom-scrollbar",children:r.jsxs("div",{className:"bg-white shadow-2xl w-full max-w-[210mm] min-h-[297mm] pt-[5mm] md:pt-[8mm] px-[10mm] md:px-[20mm] pb-[10mm] md:pb-[20mm] text-slate-900 print:shadow-none print:p-0 flex flex-col relative",children:[r.jsxs("div",{className:"flex justify-between items-start border-b-2 border-emerald-800 pb-4 mb-8",children:[r.jsx(Pa,{className:"h-14 w-auto"}),r.jsxs("div",{className:"text-right text-[9px] text-slate-500 font-bold uppercase leading-tight",children:[r.jsx("p",{className:"text-slate-800",children:"Intermartima Portos e Logstica S/A"}),r.jsx("p",{children:"Rua da Grcia, 08, Edf. Serra da Raiz, 3 andar."}),r.jsx("p",{children:"Comrcio - CEP. 40.010-010 - Salvador / BA"}),r.jsx("p",{className:"text-emerald-700",children:"www.intermaritima.com.br"})]})]}),r.jsx("h1",{className:"text-center font-black text-lg md:text-xl mb-10 uppercase tracking-tight",children:R.data.titulo_documento||"Termo de Responsabilidade"}),r.jsxs("div",{className:"space-y-1 mb-6 text-[10px] md:text-[11px] font-bold uppercase text-slate-900",children:[r.jsxs("p",{children:["COLABORADOR: ",r.jsx("span",{className:"font-medium",children:R.employeeName})]}),r.jsxs("p",{children:["SETOR: ",r.jsx("span",{className:"font-medium",children:R.data.departamento||"---"})]}),r.jsxs("p",{children:["CARGO: ",r.jsx("span",{className:"font-medium",children:R.data.cargo||"---"})]})]}),r.jsxs("table",{className:"w-full border-collapse mb-8 border border-emerald-800",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-[#006c5b] text-white text-[9px] md:text-[10px] font-black uppercase",children:[r.jsx("th",{className:"border border-emerald-800 px-4 py-2 w-1/2 text-center",children:"DESCRIO"}),r.jsx("th",{className:"border border-emerald-800 px-4 py-2 w-1/2 text-center",children:"DADOS"})]})}),r.jsx("tbody",{className:"text-[10px] md:text-[11px] font-bold uppercase text-slate-800",children:(((De=h.find(_e=>_e.id===R.templateId))==null?void 0:De.tableFields)||[]).map((_e,Ve)=>r.jsxs("tr",{children:[r.jsx("td",{className:"border border-emerald-800 px-4 py-1.5 bg-slate-50 text-slate-700 font-black",children:_e.label}),r.jsx("td",{className:"border border-emerald-800 px-4 py-1.5 font-medium text-slate-900 whitespace-pre-wrap",children:R.data[_e.variable]||"---"})]},Ve))})]}),r.jsx("div",{className:"text-xs md:text-sm leading-relaxed text-justify whitespace-pre-wrap mb-16 font-serif flex-1 text-slate-900",children:B}),r.jsxs("div",{className:"mt-auto pt-4 space-y-8",children:[r.jsx("div",{className:"flex justify-center w-full",children:R.status==="ASSINADO"&&r.jsxs("div",{className:"text-center relative",children:[R.signatureImage&&r.jsx("img",{src:R.signatureImage,className:"h-10 md:h-12 object-contain mx-auto mix-blend-multiply mb-0 relative z-10"}),r.jsx("div",{className:"w-64 h-px bg-slate-400 mx-auto mt-1 mb-2"}),r.jsx("p",{className:"font-black uppercase text-xs md:text-sm text-slate-900",children:R.employeeName}),r.jsxs("p",{className:"text-[10px] text-slate-500 font-bold",children:["CPF: ",(ut=R.employeeCpf)==null?void 0:ut.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-**")]}),r.jsxs("p",{className:"text-[8px] text-emerald-600 font-black uppercase mt-1",children:["Assinado digitalmente em: ",new Date(R.signedAt).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),r.jsxs("p",{className:"text-[8px] text-slate-400 font-mono mt-2 break-all max-w-[300px] mx-auto uppercase",children:["CDIGO DE VERIFICAO: ",R.token]})]})}),r.jsx("div",{className:"flex justify-end gap-3",children:(((st=h.find(_e=>_e.id===R.templateId))==null?void 0:st.certificationImages)||[]).map((_e,Ve)=>r.jsx("div",{className:"bg-white border border-slate-200 p-1.5 rounded-lg flex items-center justify-center h-12 md:h-16 w-fit shadow-sm",children:r.jsx("img",{src:_e,className:"h-full object-contain mix-blend-multiply",alt:"Selo"})},Ve))})]})]})}),C&&R.status==="PENDENTE"&&r.jsx("div",{className:"p-6 md:p-8 bg-slate-900 text-white shrink-0 border-t border-white/10 animate-slide-up relative z-30",children:r.jsxs("div",{className:"max-w-xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 text-emerald-400",children:[r.jsx(Un,{size:24}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-black uppercase text-sm tracking-widest",children:"Assinatura Digital"}),r.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tight",children:"Valide sua identidade para concluir a assinatura"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-black uppercase text-slate-500 ml-1",children:"Seu CPF"}),r.jsx("input",{type:"text",value:F,onChange:_e=>je(Se(_e.target.value)),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm font-bold text-white focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"000.000.000-00"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[9px] font-black uppercase text-slate-500 ml-1",children:"Senha do iRamais"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:se?"text":"password",value:ze,onChange:_e=>j(_e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm font-bold text-white focus:ring-2 focus:ring-emerald-500 outline-none pr-10",placeholder:""}),r.jsx("button",{onClick:()=>K(!se),className:"absolute right-3 top-3.5 text-slate-500 hover:text-white transition-colors",children:se?r.jsx(Kf,{size:16}):r.jsx(Ra,{size:16})})]})]})]}),ne&&r.jsxs("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-xl text-red-200 text-[10px] font-bold flex items-center gap-2 animate-shake",children:[r.jsx(Bs,{size:14})," ",ne]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>{U(null),A(null)},className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:bg-white/5 rounded-2xl transition-all",children:"Cancelar"}),r.jsxs("button",{onClick:pe,disabled:z||!F||!ze,className:"flex-[2] py-4 bg-emerald-600 text-white rounded-2xl font-black uppercase text-xs hover:bg-emerald-500 transition-all shadow-xl shadow-emerald-900/40 flex items-center justify-center gap-2 disabled:opacity-50",children:[z?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(kN,{size:18})," Confirmar Assinatura Digital"]})]}),r.jsx("p",{className:"text-[8px] text-center text-slate-500 font-medium uppercase leading-relaxed tracking-wider",children:"Ao clicar em confirmar, voc declara estar de acordo com os termos acima e autoriza a insero da sua assinatura digitalizada neste documento com validade jurdica interna."})]})})]})}),T&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[r.jsxs("h3",{className:"font-black text-slate-800 uppercase text-sm flex items-center gap-2",children:[r.jsx(Jl,{size:20,className:"text-emerald-600"})," Solicitar Assinatura Oficial"]}),r.jsx("button",{onClick:()=>M(!1),className:"p-2 hover:bg-slate-200 rounded-full text-slate-400",children:r.jsx(Pn,{size:24})})]}),r.jsxs("form",{onSubmit:ee,className:"p-8 overflow-y-auto custom-scrollbar space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1 block",children:"Nome p/ Exibio"}),r.jsx("input",{required:!0,value:P.name,onChange:_e=>W({...P,name:_e.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1 block",children:"Cargo ou Setor"}),r.jsx("input",{required:!0,value:P.sector,onChange:_e=>W({...P,sector:_e.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1 block",children:"Telefone Fixo"}),r.jsx("input",{value:P.phoneFixed,onChange:_e=>W({...P,phoneFixed:_e.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"(71) 3879-XXXX"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1 block",children:"WhatsApp / Celular"}),r.jsx("input",{value:P.phoneMobile,onChange:_e=>W({...P,phoneMobile:_e.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"(71) 9XXXX-XXXX"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 ml-1 block",children:"Observaes (Opcional)"}),r.jsx("textarea",{value:P.notes,onChange:_e=>W({...P,notes:_e.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-emerald-500 min-h-[100px]",placeholder:"Ex: Adicionar selo comemorativo 50 anos."})]})]}),r.jsxs("div",{className:"bg-amber-50 p-4 rounded-2xl border border-amber-100 flex gap-3",children:[r.jsx(Xu,{size:20,className:"text-amber-500 shrink-0"}),r.jsx("p",{className:"text-[10px] text-amber-800 font-bold uppercase leading-relaxed",children:"Sua solicitao gerar um chamado automtico para a equipe de TI. Voc receber uma notificao assim que o download for liberado."})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>M(!1),className:"px-6 py-2 text-slate-400 font-black uppercase text-xs hover:bg-slate-100 rounded-xl",children:"Cancelar"}),r.jsxs("button",{type:"submit",disabled:z,className:"px-10 py-3 bg-emerald-600 text-white rounded-2xl font-black uppercase text-xs hover:bg-emerald-700 shadow-xl shadow-emerald-200 flex items-center gap-2",children:[z?r.jsx(Je,{className:"animate-spin",size:16}):r.jsx(Jf,{size:16})," Enviar Solicitao"]})]})]})]})}),q&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4 animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-2xl overflow-hidden p-8 flex flex-col items-center",children:[r.jsxs("div",{className:"w-full flex justify-between items-center mb-8",children:[r.jsx("h3",{className:"font-black text-slate-800 uppercase text-xs tracking-[0.3em]",children:"Assinatura Corporativa"}),r.jsx("button",{onClick:()=>H(null),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:r.jsx(Pn,{size:24})})]}),r.jsx("div",{className:"bg-white p-6 shadow-2xl border border-slate-100 rounded-xl overflow-hidden mb-10 w-full flex justify-center",children:r.jsx("img",{src:q,alt:"Signature Preview",className:"max-w-full"})}),r.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest text-center max-w-sm mb-10 leading-relaxed",children:"Voc pode salvar esta imagem e inseri-la nas configuraes de assinatura do seu Outlook ou Webmail."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>H(null),className:"px-8 py-3 text-slate-400 font-black uppercase text-xs hover:bg-slate-100 rounded-xl",children:"Fechar"}),r.jsxs("a",{href:q,download:`assinatura_${t==null?void 0:t.name}.png`,className:"px-12 py-3 bg-emerald-600 text-white rounded-2xl font-black uppercase text-xs hover:bg-emerald-700 shadow-xl shadow-emerald-200 flex items-center gap-2",children:[r.jsx(Eu,{size:18})," Baixar Imagem (PNG)"]})]})]})})]})},WB=({children:t})=>{const{user:e,loading:n}=Kn();return n?r.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50",children:r.jsx(Je,{className:"animate-spin text-emerald-600",size:48})}):e?r.jsx(r.Fragment,{children:t}):r.jsx(nR,{to:"/login",replace:!0})},XB=()=>r.jsx(rV,{children:r.jsx(IR,{children:r.jsxs(aR,{children:[r.jsx(qn,{path:"/",element:r.jsx(UB,{})}),r.jsx(qn,{path:"/login",element:r.jsx(OB,{})}),r.jsxs(qn,{element:r.jsx(WB,{children:r.jsx(iU,{})}),children:[r.jsx(qn,{path:"/dashboard",element:r.jsx(oU,{})}),r.jsx(qn,{path:"/directory",element:r.jsx(dU,{})}),r.jsx(qn,{path:"/systems",element:r.jsx(CB,{})}),r.jsx(qn,{path:"/meeting-rooms",element:r.jsx(RB,{})}),r.jsx(qn,{path:"/tasks",element:r.jsx(hU,{})}),r.jsx(qn,{path:"/news-editor",element:r.jsx(SB,{})}),r.jsx(qn,{path:"/signatures",element:r.jsx(YB,{})}),r.jsx(qn,{path:"/admin-users",element:r.jsx(qB,{})}),r.jsx(qn,{path:"/admin-employees",element:r.jsx(zB,{})}),r.jsx(qn,{path:"/admin-systems",element:r.jsx(FB,{})}),r.jsx(qn,{path:"/admin-rooms",element:r.jsx(GB,{})}),r.jsx(qn,{path:"/admin-org",element:r.jsx(BB,{})}),r.jsx(qn,{path:"/admin-signatures",element:r.jsx($B,{})}),r.jsx(qn,{path:"/admin-terms",element:r.jsx(JB,{})})]})]})})}),gC=document.getElementById("root");if(!gC)throw new Error("Could not find root element to mount to");const QB=iI.createRoot(gC);QB.render(r.jsx(XA.StrictMode,{children:r.jsx(XB,{})}));
